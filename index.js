"use strict";
Object.defineProperty(exports, Symbol.toStringTag, { value: "Module" });
const S = require("react"),
  U = require("react/jsx-runtime"),
  ee = require("@lidojs/design-core"),
  ae = require("@lidojs/design-utils"),
  Yr = require("react-dom"),
  Gr = require("@lidojs/color-picker");
function Gm(n) {
  const e = Object.create(null, { [Symbol.toStringTag]: { value: "Module" } });
  if (n) {
    for (const t in n)
      if (t !== "default") {
        const r = Object.getOwnPropertyDescriptor(n, t);
        Object.defineProperty(
          e,
          t,
          r.get ? r : { enumerable: !0, get: () => n[t] }
        );
      }
  }
  return (e.default = n), Object.freeze(e);
}
const rn = Gm(S),
  Vs = Gm(U),
  ei = S.createContext({}),
  $e = (n) => {
    const e = S.useContext(ei),
      { actions: t, getState: r, query: i } = e;
    return {
      ...(n ? n(e.getState(), i) : {}),
      actions: t,
      query: i,
      state: r(),
    };
  };
function yk(n) {
  if (n.sheet) return n.sheet;
  for (var e = 0; e < document.styleSheets.length; e++)
    if (document.styleSheets[e].ownerNode === n) return document.styleSheets[e];
}
function vk(n) {
  var e = document.createElement("style");
  return (
    e.setAttribute("data-emotion", n.key),
    n.nonce !== void 0 && e.setAttribute("nonce", n.nonce),
    e.appendChild(document.createTextNode("")),
    e.setAttribute("data-s", ""),
    e
  );
}
var wk = (function () {
    function n(t) {
      var r = this;
      (this._insertTag = function (i) {
        var o;
        r.tags.length === 0
          ? r.insertionPoint
            ? (o = r.insertionPoint.nextSibling)
            : r.prepend
            ? (o = r.container.firstChild)
            : (o = r.before)
          : (o = r.tags[r.tags.length - 1].nextSibling),
          r.container.insertBefore(i, o),
          r.tags.push(i);
      }),
        (this.isSpeedy =
          t.speedy === void 0
            ? process.env.NODE_ENV === "production"
            : t.speedy),
        (this.tags = []),
        (this.ctr = 0),
        (this.nonce = t.nonce),
        (this.key = t.key),
        (this.container = t.container),
        (this.prepend = t.prepend),
        (this.insertionPoint = t.insertionPoint),
        (this.before = null);
    }
    var e = n.prototype;
    return (
      (e.hydrate = function (r) {
        r.forEach(this._insertTag);
      }),
      (e.insert = function (r) {
        this.ctr % (this.isSpeedy ? 65e3 : 1) === 0 &&
          this._insertTag(vk(this));
        var i = this.tags[this.tags.length - 1];
        if (process.env.NODE_ENV !== "production") {
          var o = r.charCodeAt(0) === 64 && r.charCodeAt(1) === 105;
          o &&
            this._alreadyInsertedOrderInsensitiveRule &&
            console.error(
              `You're attempting to insert the following rule:
` +
                r +
                "\n\n`@import` rules must be before all other types of rules in a stylesheet but other rules have already been inserted. Please ensure that `@import` rules are before all other rules."
            ),
            (this._alreadyInsertedOrderInsensitiveRule =
              this._alreadyInsertedOrderInsensitiveRule || !o);
        }
        if (this.isSpeedy) {
          var a = yk(i);
          try {
            a.insertRule(r, a.cssRules.length);
          } catch (l) {
            process.env.NODE_ENV !== "production" &&
              !/:(-moz-placeholder|-moz-focus-inner|-moz-focusring|-ms-input-placeholder|-moz-read-write|-moz-read-only|-ms-clear|-ms-expand|-ms-reveal){/.test(
                r
              ) &&
              console.error(
                'There was a problem inserting the following rule: "' + r + '"',
                l
              );
          }
        } else i.appendChild(document.createTextNode(r));
        this.ctr++;
      }),
      (e.flush = function () {
        this.tags.forEach(function (r) {
          return r.parentNode && r.parentNode.removeChild(r);
        }),
          (this.tags = []),
          (this.ctr = 0),
          process.env.NODE_ENV !== "production" &&
            (this._alreadyInsertedOrderInsensitiveRule = !1);
      }),
      n
    );
  })(),
  Jt = "-ms-",
  Al = "-moz-",
  ot = "-webkit-",
  Cf = "comm",
  Ef = "rule",
  kf = "decl",
  bk = "@import",
  Km = "@keyframes",
  xk = "@layer",
  Sk = Math.abs,
  uc = String.fromCharCode,
  Ck = Object.assign;
function Ek(n, e) {
  return Zt(n, 0) ^ 45
    ? (((((((e << 2) ^ Zt(n, 0)) << 2) ^ Zt(n, 1)) << 2) ^ Zt(n, 2)) << 2) ^
        Zt(n, 3)
    : 0;
}
function Xm(n) {
  return n.trim();
}
function kk(n, e) {
  return (n = e.exec(n)) ? n[0] : n;
}
function st(n, e, t) {
  return n.replace(e, t);
}
function Vd(n, e) {
  return n.indexOf(e);
}
function Zt(n, e) {
  return n.charCodeAt(e) | 0;
}
function Hs(n, e, t) {
  return n.slice(e, t);
}
function Er(n) {
  return n.length;
}
function Of(n) {
  return n.length;
}
function ul(n, e) {
  return e.push(n), n;
}
function Ok(n, e) {
  return n.map(e).join("");
}
var dc = 1,
  Zo = 1,
  Jm = 0,
  On = 0,
  It = 0,
  es = "";
function fc(n, e, t, r, i, o, a) {
  return {
    value: n,
    root: e,
    parent: t,
    type: r,
    props: i,
    children: o,
    line: dc,
    column: Zo,
    length: a,
    return: "",
  };
}
function Cs(n, e) {
  return Ck(fc("", null, null, "", null, null, 0), n, { length: -n.length }, e);
}
function Tk() {
  return It;
}
function Mk() {
  return (
    (It = On > 0 ? Zt(es, --On) : 0), Zo--, It === 10 && ((Zo = 1), dc--), It
  );
}
function Wn() {
  return (
    (It = On < Jm ? Zt(es, On++) : 0), Zo++, It === 10 && ((Zo = 1), dc++), It
  );
}
function Mr() {
  return Zt(es, On);
}
function El() {
  return On;
}
function sa(n, e) {
  return Hs(es, n, e);
}
function $s(n) {
  switch (n) {
    case 0:
    case 9:
    case 10:
    case 13:
    case 32:
      return 5;
    case 33:
    case 43:
    case 44:
    case 47:
    case 62:
    case 64:
    case 126:
    case 59:
    case 123:
    case 125:
      return 4;
    case 58:
      return 3;
    case 34:
    case 39:
    case 40:
    case 91:
      return 2;
    case 41:
    case 93:
      return 1;
  }
  return 0;
}
function Qm(n) {
  return (dc = Zo = 1), (Jm = Er((es = n))), (On = 0), [];
}
function e1(n) {
  return (es = ""), n;
}
function kl(n) {
  return Xm(sa(On - 1, Hd(n === 91 ? n + 2 : n === 40 ? n + 1 : n)));
}
function Rk(n) {
  for (; (It = Mr()) && It < 33; ) Wn();
  return $s(n) > 2 || $s(It) > 3 ? "" : " ";
}
function Dk(n, e) {
  for (
    ;
    --e &&
    Wn() &&
    !(It < 48 || It > 102 || (It > 57 && It < 65) || (It > 70 && It < 97));

  );
  return sa(n, El() + (e < 6 && Mr() == 32 && Wn() == 32));
}
function Hd(n) {
  for (; Wn(); )
    switch (It) {
      case n:
        return On;
      case 34:
      case 39:
        n !== 34 && n !== 39 && Hd(It);
        break;
      case 40:
        n === 41 && Hd(n);
        break;
      case 92:
        Wn();
        break;
    }
  return On;
}
function Ik(n, e) {
  for (; Wn() && n + It !== 47 + 10; )
    if (n + It === 42 + 42 && Mr() === 47) break;
  return "/*" + sa(e, On - 1) + "*" + uc(n === 47 ? n : Wn());
}
function Ak(n) {
  for (; !$s(Mr()); ) Wn();
  return sa(n, On);
}
function Lk(n) {
  return e1(Ol("", null, null, null, [""], (n = Qm(n)), 0, [0], n));
}
function Ol(n, e, t, r, i, o, a, l, u) {
  for (
    var d = 0,
      h = 0,
      p = a,
      g = 0,
      y = 0,
      m = 0,
      w = 1,
      b = 1,
      E = 1,
      R = 0,
      O = "",
      I = i,
      M = o,
      D = r,
      N = O;
    b;

  )
    switch (((m = R), (R = Wn()))) {
      case 40:
        if (m != 108 && Zt(N, p - 1) == 58) {
          Vd((N += st(kl(R), "&", "&\f")), "&\f") != -1 && (E = -1);
          break;
        }
      case 34:
      case 39:
      case 91:
        N += kl(R);
        break;
      case 9:
      case 10:
      case 13:
      case 32:
        N += Rk(m);
        break;
      case 92:
        N += Dk(El() - 1, 7);
        continue;
      case 47:
        switch (Mr()) {
          case 42:
          case 47:
            ul(Pk(Ik(Wn(), El()), e, t), u);
            break;
          default:
            N += "/";
        }
        break;
      case 123 * w:
        l[d++] = Er(N) * E;
      case 125 * w:
      case 59:
      case 0:
        switch (R) {
          case 0:
          case 125:
            b = 0;
          case 59 + h:
            E == -1 && (N = st(N, /\f/g, "")),
              y > 0 &&
                Er(N) - p &&
                ul(
                  y > 32
                    ? $g(N + ";", r, t, p - 1)
                    : $g(st(N, " ", "") + ";", r, t, p - 2),
                  u
                );
            break;
          case 59:
            N += ";";
          default:
            if (
              (ul((D = Hg(N, e, t, d, h, i, l, O, (I = []), (M = []), p)), o),
              R === 123)
            )
              if (h === 0) Ol(N, e, D, D, I, o, p, l, M);
              else
                switch (g === 99 && Zt(N, 3) === 110 ? 100 : g) {
                  case 100:
                  case 108:
                  case 109:
                  case 115:
                    Ol(
                      n,
                      D,
                      D,
                      r && ul(Hg(n, D, D, 0, 0, i, l, O, i, (I = []), p), M),
                      i,
                      M,
                      p,
                      l,
                      r ? I : M
                    );
                    break;
                  default:
                    Ol(N, D, D, D, [""], M, 0, l, M);
                }
        }
        (d = h = y = 0), (w = E = 1), (O = N = ""), (p = a);
        break;
      case 58:
        (p = 1 + Er(N)), (y = m);
      default:
        if (w < 1) {
          if (R == 123) --w;
          else if (R == 125 && w++ == 0 && Mk() == 125) continue;
        }
        switch (((N += uc(R)), R * w)) {
          case 38:
            E = h > 0 ? 1 : ((N += "\f"), -1);
            break;
          case 44:
            (l[d++] = (Er(N) - 1) * E), (E = 1);
            break;
          case 64:
            Mr() === 45 && (N += kl(Wn())),
              (g = Mr()),
              (h = p = Er((O = N += Ak(El())))),
              R++;
            break;
          case 45:
            m === 45 && Er(N) == 2 && (w = 0);
        }
    }
  return o;
}
function Hg(n, e, t, r, i, o, a, l, u, d, h) {
  for (
    var p = i - 1, g = i === 0 ? o : [""], y = Of(g), m = 0, w = 0, b = 0;
    m < r;
    ++m
  )
    for (var E = 0, R = Hs(n, p + 1, (p = Sk((w = a[m])))), O = n; E < y; ++E)
      (O = Xm(w > 0 ? g[E] + " " + R : st(R, /&\f/g, g[E]))) && (u[b++] = O);
  return fc(n, e, t, i === 0 ? Ef : l, u, d, h);
}
function Pk(n, e, t) {
  return fc(n, e, t, Cf, uc(Tk()), Hs(n, 2, -2), 0);
}
function $g(n, e, t, r) {
  return fc(n, e, t, kf, Hs(n, 0, r), Hs(n, r + 1, -1), r);
}
function Wo(n, e) {
  for (var t = "", r = Of(n), i = 0; i < r; i++) t += e(n[i], i, n, e) || "";
  return t;
}
function _k(n, e, t, r) {
  switch (n.type) {
    case xk:
      if (n.children.length) break;
    case bk:
    case kf:
      return (n.return = n.return || n.value);
    case Cf:
      return "";
    case Km:
      return (n.return = n.value + "{" + Wo(n.children, r) + "}");
    case Ef:
      n.value = n.props.join(",");
  }
  return Er((t = Wo(n.children, r)))
    ? (n.return = n.value + "{" + t + "}")
    : "";
}
function Nk(n) {
  var e = Of(n);
  return function (t, r, i, o) {
    for (var a = "", l = 0; l < e; l++) a += n[l](t, r, i, o) || "";
    return a;
  };
}
function zk(n) {
  return function (e) {
    e.root || ((e = e.return) && n(e));
  };
}
function Bk(n) {
  var e = Object.create(null);
  return function (t) {
    return e[t] === void 0 && (e[t] = n(t)), e[t];
  };
}
var Fk = function (e, t, r) {
    for (
      var i = 0, o = 0;
      (i = o), (o = Mr()), i === 38 && o === 12 && (t[r] = 1), !$s(o);

    )
      Wn();
    return sa(e, On);
  },
  Wk = function (e, t) {
    var r = -1,
      i = 44;
    do
      switch ($s(i)) {
        case 0:
          i === 38 && Mr() === 12 && (t[r] = 1), (e[r] += Fk(On - 1, t, r));
          break;
        case 2:
          e[r] += kl(i);
          break;
        case 4:
          if (i === 44) {
            (e[++r] = Mr() === 58 ? "&\f" : ""), (t[r] = e[r].length);
            break;
          }
        default:
          e[r] += uc(i);
      }
    while ((i = Wn()));
    return e;
  },
  Vk = function (e, t) {
    return e1(Wk(Qm(e), t));
  },
  jg = new WeakMap(),
  Hk = function (e) {
    if (!(e.type !== "rule" || !e.parent || e.length < 1)) {
      for (
        var t = e.value,
          r = e.parent,
          i = e.column === r.column && e.line === r.line;
        r.type !== "rule";

      )
        if (((r = r.parent), !r)) return;
      if (
        !(e.props.length === 1 && t.charCodeAt(0) !== 58 && !jg.get(r)) &&
        !i
      ) {
        jg.set(e, !0);
        for (
          var o = [], a = Vk(t, o), l = r.props, u = 0, d = 0;
          u < a.length;
          u++
        )
          for (var h = 0; h < l.length; h++, d++)
            e.props[d] = o[u] ? a[u].replace(/&\f/g, l[h]) : l[h] + " " + a[u];
      }
    }
  },
  $k = function (e) {
    if (e.type === "decl") {
      var t = e.value;
      t.charCodeAt(0) === 108 &&
        t.charCodeAt(2) === 98 &&
        ((e.return = ""), (e.value = ""));
    }
  },
  jk =
    "emotion-disable-server-rendering-unsafe-selector-warning-please-do-not-use-this-the-warning-exists-for-a-reason",
  Uk = function (e) {
    return e.type === "comm" && e.children.indexOf(jk) > -1;
  },
  Zk = function (e) {
    return function (t, r, i) {
      if (!(t.type !== "rule" || e.compat)) {
        var o = t.value.match(/(:first|:nth|:nth-last)-child/g);
        if (o) {
          for (
            var a = !!t.parent, l = a ? t.parent.children : i, u = l.length - 1;
            u >= 0;
            u--
          ) {
            var d = l[u];
            if (d.line < t.line) break;
            if (d.column < t.column) {
              if (Uk(d)) return;
              break;
            }
          }
          o.forEach(function (h) {
            console.error(
              'The pseudo class "' +
                h +
                '" is potentially unsafe when doing server-side rendering. Try changing it to "' +
                h.split("-child")[0] +
                '-of-type".'
            );
          });
        }
      }
    };
  },
  t1 = function (e) {
    return e.type.charCodeAt(1) === 105 && e.type.charCodeAt(0) === 64;
  },
  Yk = function (e, t) {
    for (var r = e - 1; r >= 0; r--) if (!t1(t[r])) return !0;
    return !1;
  },
  Ug = function (e) {
    (e.type = ""),
      (e.value = ""),
      (e.return = ""),
      (e.children = ""),
      (e.props = "");
  },
  qk = function (e, t, r) {
    t1(e) &&
      (e.parent
        ? (console.error(
            "`@import` rules can't be nested inside other rules. Please move it to the top level and put it before regular rules. Keep in mind that they can only be used within global styles."
          ),
          Ug(e))
        : Yk(t, r) &&
          (console.error(
            "`@import` rules can't be after other rules. Please put your `@import` rules before your other rules."
          ),
          Ug(e)));
  };
function n1(n, e) {
  switch (Ek(n, e)) {
    case 5103:
      return ot + "print-" + n + n;
    case 5737:
    case 4201:
    case 3177:
    case 3433:
    case 1641:
    case 4457:
    case 2921:
    case 5572:
    case 6356:
    case 5844:
    case 3191:
    case 6645:
    case 3005:
    case 6391:
    case 5879:
    case 5623:
    case 6135:
    case 4599:
    case 4855:
    case 4215:
    case 6389:
    case 5109:
    case 5365:
    case 5621:
    case 3829:
      return ot + n + n;
    case 5349:
    case 4246:
    case 4810:
    case 6968:
    case 2756:
      return ot + n + Al + n + Jt + n + n;
    case 6828:
    case 4268:
      return ot + n + Jt + n + n;
    case 6165:
      return ot + n + Jt + "flex-" + n + n;
    case 5187:
      return (
        ot + n + st(n, /(\w+).+(:[^]+)/, ot + "box-$1$2" + Jt + "flex-$1$2") + n
      );
    case 5443:
      return ot + n + Jt + "flex-item-" + st(n, /flex-|-self/, "") + n;
    case 4675:
      return (
        ot +
        n +
        Jt +
        "flex-line-pack" +
        st(n, /align-content|flex-|-self/, "") +
        n
      );
    case 5548:
      return ot + n + Jt + st(n, "shrink", "negative") + n;
    case 5292:
      return ot + n + Jt + st(n, "basis", "preferred-size") + n;
    case 6060:
      return (
        ot +
        "box-" +
        st(n, "-grow", "") +
        ot +
        n +
        Jt +
        st(n, "grow", "positive") +
        n
      );
    case 4554:
      return ot + st(n, /([^-])(transform)/g, "$1" + ot + "$2") + n;
    case 6187:
      return (
        st(
          st(st(n, /(zoom-|grab)/, ot + "$1"), /(image-set)/, ot + "$1"),
          n,
          ""
        ) + n
      );
    case 5495:
    case 3959:
      return st(n, /(image-set\([^]*)/, ot + "$1$`$1");
    case 4968:
      return (
        st(
          st(n, /(.+:)(flex-)?(.*)/, ot + "box-pack:$3" + Jt + "flex-pack:$3"),
          /s.+-b[^;]+/,
          "justify"
        ) +
        ot +
        n +
        n
      );
    case 4095:
    case 3583:
    case 4068:
    case 2532:
      return st(n, /(.+)-inline(.+)/, ot + "$1$2") + n;
    case 8116:
    case 7059:
    case 5753:
    case 5535:
    case 5445:
    case 5701:
    case 4933:
    case 4677:
    case 5533:
    case 5789:
    case 5021:
    case 4765:
      if (Er(n) - 1 - e > 6)
        switch (Zt(n, e + 1)) {
          case 109:
            if (Zt(n, e + 4) !== 45) break;
          case 102:
            return (
              st(
                n,
                /(.+:)(.+)-([^]+)/,
                "$1" +
                  ot +
                  "$2-$3$1" +
                  Al +
                  (Zt(n, e + 3) == 108 ? "$3" : "$2-$3")
              ) + n
            );
          case 115:
            return ~Vd(n, "stretch")
              ? n1(st(n, "stretch", "fill-available"), e) + n
              : n;
        }
      break;
    case 4949:
      if (Zt(n, e + 1) !== 115) break;
    case 6444:
      switch (Zt(n, Er(n) - 3 - (~Vd(n, "!important") && 10))) {
        case 107:
          return st(n, ":", ":" + ot) + n;
        case 101:
          return (
            st(
              n,
              /(.+:)([^;!]+)(;|!.+)?/,
              "$1" +
                ot +
                (Zt(n, 14) === 45 ? "inline-" : "") +
                "box$3$1" +
                ot +
                "$2$3$1" +
                Jt +
                "$2box$3"
            ) + n
          );
      }
      break;
    case 5936:
      switch (Zt(n, e + 11)) {
        case 114:
          return ot + n + Jt + st(n, /[svh]\w+-[tblr]{2}/, "tb") + n;
        case 108:
          return ot + n + Jt + st(n, /[svh]\w+-[tblr]{2}/, "tb-rl") + n;
        case 45:
          return ot + n + Jt + st(n, /[svh]\w+-[tblr]{2}/, "lr") + n;
      }
      return ot + n + Jt + n + n;
  }
  return n;
}
var Gk = function (e, t, r, i) {
    if (e.length > -1 && !e.return)
      switch (e.type) {
        case kf:
          e.return = n1(e.value, e.length);
          break;
        case Km:
          return Wo([Cs(e, { value: st(e.value, "@", "@" + ot) })], i);
        case Ef:
          if (e.length)
            return Ok(e.props, function (o) {
              switch (kk(o, /(::plac\w+|:read-\w+)/)) {
                case ":read-only":
                case ":read-write":
                  return Wo(
                    [Cs(e, { props: [st(o, /:(read-\w+)/, ":" + Al + "$1")] })],
                    i
                  );
                case "::placeholder":
                  return Wo(
                    [
                      Cs(e, {
                        props: [st(o, /:(plac\w+)/, ":" + ot + "input-$1")],
                      }),
                      Cs(e, { props: [st(o, /:(plac\w+)/, ":" + Al + "$1")] }),
                      Cs(e, { props: [st(o, /:(plac\w+)/, Jt + "input-$1")] }),
                    ],
                    i
                  );
              }
              return "";
            });
      }
  },
  Kk = [Gk],
  Xk = function (e) {
    var t = e.key;
    if (process.env.NODE_ENV !== "production" && !t)
      throw new Error(`You have to configure \`key\` for your cache. Please make sure it's unique (and not equal to 'css') as it's used for linking styles to your cache.
If multiple caches share the same key they might "fight" for each other's style elements.`);
    if (t === "css") {
      var r = document.querySelectorAll("style[data-emotion]:not([data-s])");
      Array.prototype.forEach.call(r, function (w) {
        var b = w.getAttribute("data-emotion");
        b.indexOf(" ") !== -1 &&
          (document.head.appendChild(w), w.setAttribute("data-s", ""));
      });
    }
    var i = e.stylisPlugins || Kk;
    if (process.env.NODE_ENV !== "production" && /[^a-z-]/.test(t))
      throw new Error(
        'Emotion key must only contain lower case alphabetical characters and - but "' +
          t +
          '" was passed'
      );
    var o = {},
      a,
      l = [];
    (a = e.container || document.head),
      Array.prototype.forEach.call(
        document.querySelectorAll('style[data-emotion^="' + t + ' "]'),
        function (w) {
          for (
            var b = w.getAttribute("data-emotion").split(" "), E = 1;
            E < b.length;
            E++
          )
            o[b[E]] = !0;
          l.push(w);
        }
      );
    var u,
      d = [Hk, $k];
    process.env.NODE_ENV !== "production" &&
      d.push(
        Zk({
          get compat() {
            return m.compat;
          },
        }),
        qk
      );
    {
      var h,
        p = [
          _k,
          process.env.NODE_ENV !== "production"
            ? function (w) {
                w.root ||
                  (w.return
                    ? h.insert(w.return)
                    : w.value && w.type !== Cf && h.insert(w.value + "{}"));
              }
            : zk(function (w) {
                h.insert(w);
              }),
        ],
        g = Nk(d.concat(i, p)),
        y = function (b) {
          return Wo(Lk(b), g);
        };
      u = function (b, E, R, O) {
        (h = R),
          process.env.NODE_ENV !== "production" &&
            E.map !== void 0 &&
            (h = {
              insert: function (M) {
                R.insert(M + E.map);
              },
            }),
          y(b ? b + "{" + E.styles + "}" : E.styles),
          O && (m.inserted[E.name] = !0);
      };
    }
    var m = {
      key: t,
      sheet: new wk({
        key: t,
        container: a,
        nonce: e.nonce,
        speedy: e.speedy,
        prepend: e.prepend,
        insertionPoint: e.insertionPoint,
      }),
      nonce: e.nonce,
      inserted: o,
      registered: {},
      insert: u,
    };
    return m.sheet.hydrate(l), m;
  };
function Re() {
  return (
    (Re = Object.assign
      ? Object.assign.bind()
      : function (n) {
          for (var e = 1; e < arguments.length; e++) {
            var t = arguments[e];
            for (var r in t)
              Object.prototype.hasOwnProperty.call(t, r) && (n[r] = t[r]);
          }
          return n;
        }),
    Re.apply(this, arguments)
  );
}
var _o =
  typeof globalThis < "u"
    ? globalThis
    : typeof window < "u"
    ? window
    : typeof global < "u"
    ? global
    : typeof self < "u"
    ? self
    : {};
function Jk(n) {
  return n && n.__esModule && Object.prototype.hasOwnProperty.call(n, "default")
    ? n.default
    : n;
}
var $d = { exports: {} },
  ct = {};
/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */ var Zg;
function Qk() {
  if (Zg) return ct;
  Zg = 1;
  var n = typeof Symbol == "function" && Symbol.for,
    e = n ? Symbol.for("react.element") : 60103,
    t = n ? Symbol.for("react.portal") : 60106,
    r = n ? Symbol.for("react.fragment") : 60107,
    i = n ? Symbol.for("react.strict_mode") : 60108,
    o = n ? Symbol.for("react.profiler") : 60114,
    a = n ? Symbol.for("react.provider") : 60109,
    l = n ? Symbol.for("react.context") : 60110,
    u = n ? Symbol.for("react.async_mode") : 60111,
    d = n ? Symbol.for("react.concurrent_mode") : 60111,
    h = n ? Symbol.for("react.forward_ref") : 60112,
    p = n ? Symbol.for("react.suspense") : 60113,
    g = n ? Symbol.for("react.suspense_list") : 60120,
    y = n ? Symbol.for("react.memo") : 60115,
    m = n ? Symbol.for("react.lazy") : 60116,
    w = n ? Symbol.for("react.block") : 60121,
    b = n ? Symbol.for("react.fundamental") : 60117,
    E = n ? Symbol.for("react.responder") : 60118,
    R = n ? Symbol.for("react.scope") : 60119;
  function O(M) {
    if (typeof M == "object" && M !== null) {
      var D = M.$$typeof;
      switch (D) {
        case e:
          switch (((M = M.type), M)) {
            case u:
            case d:
            case r:
            case o:
            case i:
            case p:
              return M;
            default:
              switch (((M = M && M.$$typeof), M)) {
                case l:
                case h:
                case m:
                case y:
                case a:
                  return M;
                default:
                  return D;
              }
          }
        case t:
          return D;
      }
    }
  }
  function I(M) {
    return O(M) === d;
  }
  return (
    (ct.AsyncMode = u),
    (ct.ConcurrentMode = d),
    (ct.ContextConsumer = l),
    (ct.ContextProvider = a),
    (ct.Element = e),
    (ct.ForwardRef = h),
    (ct.Fragment = r),
    (ct.Lazy = m),
    (ct.Memo = y),
    (ct.Portal = t),
    (ct.Profiler = o),
    (ct.StrictMode = i),
    (ct.Suspense = p),
    (ct.isAsyncMode = function (M) {
      return I(M) || O(M) === u;
    }),
    (ct.isConcurrentMode = I),
    (ct.isContextConsumer = function (M) {
      return O(M) === l;
    }),
    (ct.isContextProvider = function (M) {
      return O(M) === a;
    }),
    (ct.isElement = function (M) {
      return typeof M == "object" && M !== null && M.$$typeof === e;
    }),
    (ct.isForwardRef = function (M) {
      return O(M) === h;
    }),
    (ct.isFragment = function (M) {
      return O(M) === r;
    }),
    (ct.isLazy = function (M) {
      return O(M) === m;
    }),
    (ct.isMemo = function (M) {
      return O(M) === y;
    }),
    (ct.isPortal = function (M) {
      return O(M) === t;
    }),
    (ct.isProfiler = function (M) {
      return O(M) === o;
    }),
    (ct.isStrictMode = function (M) {
      return O(M) === i;
    }),
    (ct.isSuspense = function (M) {
      return O(M) === p;
    }),
    (ct.isValidElementType = function (M) {
      return (
        typeof M == "string" ||
        typeof M == "function" ||
        M === r ||
        M === d ||
        M === o ||
        M === i ||
        M === p ||
        M === g ||
        (typeof M == "object" &&
          M !== null &&
          (M.$$typeof === m ||
            M.$$typeof === y ||
            M.$$typeof === a ||
            M.$$typeof === l ||
            M.$$typeof === h ||
            M.$$typeof === b ||
            M.$$typeof === E ||
            M.$$typeof === R ||
            M.$$typeof === w))
      );
    }),
    (ct.typeOf = O),
    ct
  );
}
var ut = {};
/** @license React v16.13.1
 * react-is.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */ var Yg;
function e8() {
  return (
    Yg ||
      ((Yg = 1),
      process.env.NODE_ENV !== "production" &&
        (function () {
          var n = typeof Symbol == "function" && Symbol.for,
            e = n ? Symbol.for("react.element") : 60103,
            t = n ? Symbol.for("react.portal") : 60106,
            r = n ? Symbol.for("react.fragment") : 60107,
            i = n ? Symbol.for("react.strict_mode") : 60108,
            o = n ? Symbol.for("react.profiler") : 60114,
            a = n ? Symbol.for("react.provider") : 60109,
            l = n ? Symbol.for("react.context") : 60110,
            u = n ? Symbol.for("react.async_mode") : 60111,
            d = n ? Symbol.for("react.concurrent_mode") : 60111,
            h = n ? Symbol.for("react.forward_ref") : 60112,
            p = n ? Symbol.for("react.suspense") : 60113,
            g = n ? Symbol.for("react.suspense_list") : 60120,
            y = n ? Symbol.for("react.memo") : 60115,
            m = n ? Symbol.for("react.lazy") : 60116,
            w = n ? Symbol.for("react.block") : 60121,
            b = n ? Symbol.for("react.fundamental") : 60117,
            E = n ? Symbol.for("react.responder") : 60118,
            R = n ? Symbol.for("react.scope") : 60119;
          function O(re) {
            return (
              typeof re == "string" ||
              typeof re == "function" ||
              re === r ||
              re === d ||
              re === o ||
              re === i ||
              re === p ||
              re === g ||
              (typeof re == "object" &&
                re !== null &&
                (re.$$typeof === m ||
                  re.$$typeof === y ||
                  re.$$typeof === a ||
                  re.$$typeof === l ||
                  re.$$typeof === h ||
                  re.$$typeof === b ||
                  re.$$typeof === E ||
                  re.$$typeof === R ||
                  re.$$typeof === w))
            );
          }
          function I(re) {
            if (typeof re == "object" && re !== null) {
              var Ve = re.$$typeof;
              switch (Ve) {
                case e:
                  var Ne = re.type;
                  switch (Ne) {
                    case u:
                    case d:
                    case r:
                    case o:
                    case i:
                    case p:
                      return Ne;
                    default:
                      var pt = Ne && Ne.$$typeof;
                      switch (pt) {
                        case l:
                        case h:
                        case m:
                        case y:
                        case a:
                          return pt;
                        default:
                          return Ve;
                      }
                  }
                case t:
                  return Ve;
              }
            }
          }
          var M = u,
            D = d,
            N = l,
            Y = a,
            X = e,
            j = h,
            W = r,
            G = m,
            te = y,
            ne = t,
            se = o,
            oe = i,
            le = p,
            pe = !1;
          function ce(re) {
            return (
              pe ||
                ((pe = !0),
                console.warn(
                  "The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API."
                )),
              be(re) || I(re) === u
            );
          }
          function be(re) {
            return I(re) === d;
          }
          function Oe(re) {
            return I(re) === l;
          }
          function de(re) {
            return I(re) === a;
          }
          function xe(re) {
            return typeof re == "object" && re !== null && re.$$typeof === e;
          }
          function Pe(re) {
            return I(re) === h;
          }
          function ye(re) {
            return I(re) === r;
          }
          function Z(re) {
            return I(re) === m;
          }
          function ue(re) {
            return I(re) === y;
          }
          function K(re) {
            return I(re) === t;
          }
          function Se(re) {
            return I(re) === o;
          }
          function we(re) {
            return I(re) === i;
          }
          function Ke(re) {
            return I(re) === p;
          }
          (ut.AsyncMode = M),
            (ut.ConcurrentMode = D),
            (ut.ContextConsumer = N),
            (ut.ContextProvider = Y),
            (ut.Element = X),
            (ut.ForwardRef = j),
            (ut.Fragment = W),
            (ut.Lazy = G),
            (ut.Memo = te),
            (ut.Portal = ne),
            (ut.Profiler = se),
            (ut.StrictMode = oe),
            (ut.Suspense = le),
            (ut.isAsyncMode = ce),
            (ut.isConcurrentMode = be),
            (ut.isContextConsumer = Oe),
            (ut.isContextProvider = de),
            (ut.isElement = xe),
            (ut.isForwardRef = Pe),
            (ut.isFragment = ye),
            (ut.isLazy = Z),
            (ut.isMemo = ue),
            (ut.isPortal = K),
            (ut.isProfiler = Se),
            (ut.isStrictMode = we),
            (ut.isSuspense = Ke),
            (ut.isValidElementType = O),
            (ut.typeOf = I);
        })()),
    ut
  );
}
process.env.NODE_ENV === "production"
  ? ($d.exports = Qk())
  : ($d.exports = e8());
var t8 = $d.exports,
  r1 = t8,
  n8 = {
    $$typeof: !0,
    render: !0,
    defaultProps: !0,
    displayName: !0,
    propTypes: !0,
  },
  r8 = {
    $$typeof: !0,
    compare: !0,
    defaultProps: !0,
    displayName: !0,
    propTypes: !0,
    type: !0,
  },
  i1 = {};
i1[r1.ForwardRef] = n8;
i1[r1.Memo] = r8;
var i8 = !0;
function o1(n, e, t) {
  var r = "";
  return (
    t.split(" ").forEach(function (i) {
      n[i] !== void 0 ? e.push(n[i] + ";") : (r += i + " ");
    }),
    r
  );
}
var Tf = function (e, t, r) {
    var i = e.key + "-" + t.name;
    (r === !1 || i8 === !1) &&
      e.registered[i] === void 0 &&
      (e.registered[i] = t.styles);
  },
  Mf = function (e, t, r) {
    Tf(e, t, r);
    var i = e.key + "-" + t.name;
    if (e.inserted[t.name] === void 0) {
      var o = t;
      do e.insert(t === o ? "." + i : "", o, e.sheet, !0), (o = o.next);
      while (o !== void 0);
    }
  };
function o8(n) {
  for (var e = 0, t, r = 0, i = n.length; i >= 4; ++r, i -= 4)
    (t =
      (n.charCodeAt(r) & 255) |
      ((n.charCodeAt(++r) & 255) << 8) |
      ((n.charCodeAt(++r) & 255) << 16) |
      ((n.charCodeAt(++r) & 255) << 24)),
      (t = (t & 65535) * 1540483477 + (((t >>> 16) * 59797) << 16)),
      (t ^= t >>> 24),
      (e =
        ((t & 65535) * 1540483477 + (((t >>> 16) * 59797) << 16)) ^
        ((e & 65535) * 1540483477 + (((e >>> 16) * 59797) << 16)));
  switch (i) {
    case 3:
      e ^= (n.charCodeAt(r + 2) & 255) << 16;
    case 2:
      e ^= (n.charCodeAt(r + 1) & 255) << 8;
    case 1:
      (e ^= n.charCodeAt(r) & 255),
        (e = (e & 65535) * 1540483477 + (((e >>> 16) * 59797) << 16));
  }
  return (
    (e ^= e >>> 13),
    (e = (e & 65535) * 1540483477 + (((e >>> 16) * 59797) << 16)),
    ((e ^ (e >>> 15)) >>> 0).toString(36)
  );
}
var s8 = {
    animationIterationCount: 1,
    aspectRatio: 1,
    borderImageOutset: 1,
    borderImageSlice: 1,
    borderImageWidth: 1,
    boxFlex: 1,
    boxFlexGroup: 1,
    boxOrdinalGroup: 1,
    columnCount: 1,
    columns: 1,
    flex: 1,
    flexGrow: 1,
    flexPositive: 1,
    flexShrink: 1,
    flexNegative: 1,
    flexOrder: 1,
    gridRow: 1,
    gridRowEnd: 1,
    gridRowSpan: 1,
    gridRowStart: 1,
    gridColumn: 1,
    gridColumnEnd: 1,
    gridColumnSpan: 1,
    gridColumnStart: 1,
    msGridRow: 1,
    msGridRowSpan: 1,
    msGridColumn: 1,
    msGridColumnSpan: 1,
    fontWeight: 1,
    lineHeight: 1,
    opacity: 1,
    order: 1,
    orphans: 1,
    tabSize: 1,
    widows: 1,
    zIndex: 1,
    zoom: 1,
    WebkitLineClamp: 1,
    fillOpacity: 1,
    floodOpacity: 1,
    stopOpacity: 1,
    strokeDasharray: 1,
    strokeDashoffset: 1,
    strokeMiterlimit: 1,
    strokeOpacity: 1,
    strokeWidth: 1,
  },
  qg = `You have illegal escape sequence in your template literal, most likely inside content's property value.
Because you write your CSS inside a JavaScript string you actually have to do double escaping, so for example "content: '\\00d7';" should become "content: '\\\\00d7';".
You can read more about this here:
https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals#ES2018_revision_of_illegal_escape_sequences`,
  a8 =
    "You have passed in falsy value as style object's key (can happen when in example you pass unexported component as computed key).",
  l8 = /[A-Z]|^ms/g,
  s1 = /_EMO_([^_]+?)_([^]*?)_EMO_/g,
  Rf = function (e) {
    return e.charCodeAt(1) === 45;
  },
  Gg = function (e) {
    return e != null && typeof e != "boolean";
  },
  qu = Bk(function (n) {
    return Rf(n) ? n : n.replace(l8, "-$&").toLowerCase();
  }),
  Ll = function (e, t) {
    switch (e) {
      case "animation":
      case "animationName":
        if (typeof t == "string")
          return t.replace(s1, function (r, i, o) {
            return (fr = { name: i, styles: o, next: fr }), i;
          });
    }
    return s8[e] !== 1 && !Rf(e) && typeof t == "number" && t !== 0
      ? t + "px"
      : t;
  };
if (process.env.NODE_ENV !== "production") {
  var c8 =
      /(var|attr|counters?|url|element|(((repeating-)?(linear|radial))|conic)-gradient)\(|(no-)?(open|close)-quote/,
    u8 = ["normal", "none", "initial", "inherit", "unset"],
    d8 = Ll,
    f8 = /^-ms-/,
    h8 = /-(.)/g,
    Kg = {};
  Ll = function (e, t) {
    if (
      e === "content" &&
      (typeof t != "string" ||
        (u8.indexOf(t) === -1 &&
          !c8.test(t) &&
          (t.charAt(0) !== t.charAt(t.length - 1) ||
            (t.charAt(0) !== '"' && t.charAt(0) !== "'"))))
    )
      throw new Error(
        "You seem to be using a value for 'content' without quotes, try replacing it with `content: '\"" +
          t +
          "\"'`"
      );
    var r = d8(e, t);
    return (
      r !== "" &&
        !Rf(e) &&
        e.indexOf("-") !== -1 &&
        Kg[e] === void 0 &&
        ((Kg[e] = !0),
        console.error(
          "Using kebab-case for css properties in objects is not supported. Did you mean " +
            e.replace(f8, "ms-").replace(h8, function (i, o) {
              return o.toUpperCase();
            }) +
            "?"
        )),
      r
    );
  };
}
var a1 =
  "Component selectors can only be used in conjunction with @emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware compiler transform.";
function js(n, e, t) {
  if (t == null) return "";
  if (t.__emotion_styles !== void 0) {
    if (
      process.env.NODE_ENV !== "production" &&
      t.toString() === "NO_COMPONENT_SELECTOR"
    )
      throw new Error(a1);
    return t;
  }
  switch (typeof t) {
    case "boolean":
      return "";
    case "object": {
      if (t.anim === 1)
        return (fr = { name: t.name, styles: t.styles, next: fr }), t.name;
      if (t.styles !== void 0) {
        var r = t.next;
        if (r !== void 0)
          for (; r !== void 0; )
            (fr = { name: r.name, styles: r.styles, next: fr }), (r = r.next);
        var i = t.styles + ";";
        return (
          process.env.NODE_ENV !== "production" &&
            t.map !== void 0 &&
            (i += t.map),
          i
        );
      }
      return p8(n, e, t);
    }
    case "function": {
      if (n !== void 0) {
        var o = fr,
          a = t(n);
        return (fr = o), js(n, e, a);
      } else
        process.env.NODE_ENV !== "production" &&
          console.error(
            "Functions that are interpolated in css calls will be stringified.\nIf you want to have a css call based on props, create a function that returns a css call like this\nlet dynamicStyle = (props) => css`color: ${props.color}`\nIt can be called directly with props or interpolated in a styled call like this\nlet SomeComponent = styled('div')`${dynamicStyle}`"
          );
      break;
    }
    case "string":
      if (process.env.NODE_ENV !== "production") {
        var l = [],
          u = t.replace(s1, function (h, p, g) {
            var y = "animation" + l.length;
            return (
              l.push(
                "const " +
                  y +
                  " = keyframes`" +
                  g.replace(/^@keyframes animation-\w+/, "") +
                  "`"
              ),
              "${" + y + "}"
            );
          });
        l.length &&
          console.error(
            "`keyframes` output got interpolated into plain string, please wrap it with `css`.\n\nInstead of doing this:\n\n" +
              [].concat(l, ["`" + u + "`"]).join(`
`) +
              `

You should wrap it with \`css\` like this:

` +
              ("css`" + u + "`")
          );
      }
      break;
  }
  if (e == null) return t;
  var d = e[t];
  return d !== void 0 ? d : t;
}
function p8(n, e, t) {
  var r = "";
  if (Array.isArray(t))
    for (var i = 0; i < t.length; i++) r += js(n, e, t[i]) + ";";
  else
    for (var o in t) {
      var a = t[o];
      if (typeof a != "object")
        e != null && e[a] !== void 0
          ? (r += o + "{" + e[a] + "}")
          : Gg(a) && (r += qu(o) + ":" + Ll(o, a) + ";");
      else {
        if (
          o === "NO_COMPONENT_SELECTOR" &&
          process.env.NODE_ENV !== "production"
        )
          throw new Error(a1);
        if (
          Array.isArray(a) &&
          typeof a[0] == "string" &&
          (e == null || e[a[0]] === void 0)
        )
          for (var l = 0; l < a.length; l++)
            Gg(a[l]) && (r += qu(o) + ":" + Ll(o, a[l]) + ";");
        else {
          var u = js(n, e, a);
          switch (o) {
            case "animation":
            case "animationName": {
              r += qu(o) + ":" + u + ";";
              break;
            }
            default:
              process.env.NODE_ENV !== "production" &&
                o === "undefined" &&
                console.error(a8),
                (r += o + "{" + u + "}");
          }
        }
      }
    }
  return r;
}
var Xg = /label:\s*([^\s;\n{]+)\s*(;|$)/g,
  l1;
process.env.NODE_ENV !== "production" &&
  (l1 = /\/\*#\ssourceMappingURL=data:application\/json;\S+\s+\*\//g);
var fr,
  Us = function (e, t, r) {
    if (
      e.length === 1 &&
      typeof e[0] == "object" &&
      e[0] !== null &&
      e[0].styles !== void 0
    )
      return e[0];
    var i = !0,
      o = "";
    fr = void 0;
    var a = e[0];
    a == null || a.raw === void 0
      ? ((i = !1), (o += js(r, t, a)))
      : (process.env.NODE_ENV !== "production" &&
          a[0] === void 0 &&
          console.error(qg),
        (o += a[0]));
    for (var l = 1; l < e.length; l++)
      (o += js(r, t, e[l])),
        i &&
          (process.env.NODE_ENV !== "production" &&
            a[l] === void 0 &&
            console.error(qg),
          (o += a[l]));
    var u;
    process.env.NODE_ENV !== "production" &&
      (o = o.replace(l1, function (g) {
        return (u = g), "";
      })),
      (Xg.lastIndex = 0);
    for (var d = "", h; (h = Xg.exec(o)) !== null; ) d += "-" + h[1];
    var p = o8(o) + d;
    return process.env.NODE_ENV !== "production"
      ? {
          name: p,
          styles: o,
          map: u,
          next: fr,
          toString: function () {
            return "You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop).";
          },
        }
      : { name: p, styles: o, next: fr };
  },
  g8 = function (e) {
    return e();
  },
  c1 = rn["useInsertionEffect"] ? rn["useInsertionEffect"] : !1,
  u1 = c1 || g8,
  Jg = c1 || rn.useLayoutEffect,
  hc = {}.hasOwnProperty,
  Df = rn.createContext(typeof HTMLElement < "u" ? Xk({ key: "css" }) : null);
process.env.NODE_ENV !== "production" &&
  (Df.displayName = "EmotionCacheContext");
Df.Provider;
var If = function (e) {
    return S.forwardRef(function (t, r) {
      var i = S.useContext(Df);
      return e(t, i, r);
    });
  },
  pc = rn.createContext({});
process.env.NODE_ENV !== "production" &&
  (pc.displayName = "EmotionThemeContext");
var Qg = function (e) {
    var t = e.split(".");
    return t[t.length - 1];
  },
  m8 = function (e) {
    var t = /^\s+at\s+([A-Za-z0-9$.]+)\s/.exec(e);
    if (t || ((t = /^([A-Za-z0-9$.]+)@/.exec(e)), t)) return Qg(t[1]);
  },
  y8 = new Set([
    "renderWithHooks",
    "processChild",
    "finishClassComponent",
    "renderToString",
  ]),
  v8 = function (e) {
    return e.replace(/\$/g, "-");
  },
  w8 = function (e) {
    if (e)
      for (
        var t = e.split(`
`),
          r = 0;
        r < t.length;
        r++
      ) {
        var i = m8(t[r]);
        if (i) {
          if (y8.has(i)) break;
          if (/^[A-Z]/.test(i)) return v8(i);
        }
      }
  },
  jd = "__EMOTION_TYPE_PLEASE_DO_NOT_USE__",
  Ud = "__EMOTION_LABEL_PLEASE_DO_NOT_USE__",
  d1 = function (e, t) {
    if (
      process.env.NODE_ENV !== "production" &&
      typeof t.css == "string" &&
      t.css.indexOf(":") !== -1
    )
      throw new Error(
        "Strings are not allowed as css prop values, please wrap it in a css template literal from '@emotion/react' like this: css`" +
          t.css +
          "`"
      );
    var r = {};
    for (var i in t) hc.call(t, i) && (r[i] = t[i]);
    if (
      ((r[jd] = e),
      process.env.NODE_ENV !== "production" &&
        t.css &&
        (typeof t.css != "object" ||
          typeof t.css.name != "string" ||
          t.css.name.indexOf("-") === -1))
    ) {
      var o = w8(new Error().stack);
      o && (r[Ud] = o);
    }
    return r;
  },
  b8 = function (e) {
    var t = e.cache,
      r = e.serialized,
      i = e.isStringTag;
    return (
      Tf(t, r, i),
      u1(function () {
        return Mf(t, r, i);
      }),
      null
    );
  },
  f1 = If(function (n, e, t) {
    var r = n.css;
    typeof r == "string" && e.registered[r] !== void 0 && (r = e.registered[r]);
    var i = n[jd],
      o = [r],
      a = "";
    typeof n.className == "string"
      ? (a = o1(e.registered, o, n.className))
      : n.className != null && (a = n.className + " ");
    var l = Us(o, void 0, rn.useContext(pc));
    if (process.env.NODE_ENV !== "production" && l.name.indexOf("-") === -1) {
      var u = n[Ud];
      u && (l = Us([l, "label:" + u + ";"]));
    }
    a += e.key + "-" + l.name;
    var d = {};
    for (var h in n)
      hc.call(n, h) &&
        h !== "css" &&
        h !== jd &&
        (process.env.NODE_ENV === "production" || h !== Ud) &&
        (d[h] = n[h]);
    return (
      (d.ref = t),
      (d.className = a),
      rn.createElement(
        rn.Fragment,
        null,
        rn.createElement(b8, {
          cache: e,
          serialized: l,
          isStringTag: typeof i == "string",
        }),
        rn.createElement(i, d)
      )
    );
  });
process.env.NODE_ENV !== "production" &&
  (f1.displayName = "EmotionCssPropInternal");
var h1 = f1,
  p1 = Vs.Fragment;
function x(n, e, t) {
  return hc.call(e, "css") ? Vs.jsx(h1, d1(n, e), t) : Vs.jsx(n, e, t);
}
function H(n, e, t) {
  return hc.call(e, "css") ? Vs.jsxs(h1, d1(n, e), t) : Vs.jsxs(n, e, t);
}
const g1 = S.createContext({}),
  m1 = ({ id: n, children: e }) =>
    x(g1.Provider, { value: { id: n }, children: e }),
  po = S.createContext({}),
  y1 = ({ pageIndex: n, children: e }) =>
    x(po.Provider, { value: { pageIndex: n }, children: e }),
  go = (n) => {
    const { pageIndex: e } = S.useContext(po),
      { id: t } = S.useContext(g1),
      {
        state: r,
        actions: i,
        ...o
      } = $e(
        (l) =>
          n && l.pages[e] && l.pages[e].layers[t] && n(l.pages[e].layers[t])
      ),
      a = S.useMemo(
        () => ({
          setProp: (l) => i.setProp(e, t, l),
          select: () => i.selectLayers(e, t),
          hover: (l) => i.hoverLayer(e, typeof l > "u" ? t : null),
          setTextEditor: (l) => i.setTextEditor(e, t, l),
          openTextEditor: () => i.openTextEditor(e, t),
          openImageEditor: ({
            boxSize: l,
            position: u,
            rotate: d,
            image: h,
            video: p,
          }) =>
            i.openImageEditor(e, t, {
              boxSize: l,
              position: u,
              rotate: d,
              image: h,
              video: p,
            }),
        }),
        [i, e, t]
      );
    return { ...o, pageIndex: e, id: t, state: r, actions: a };
  },
  Vt = () => {
    const { pageIndex: n } = S.useContext(po),
      { selectedLayerIds: e, selectedLayers: t } = $e((r) => {
        const i = typeof n > "u" ? r.activePage : n,
          o = (r.selectedLayers[i] || []).filter(
            (a) => r.pages[i] && r.pages[i].layers[a]
          );
        return {
          selectedLayerIds: o,
          selectedLayers: o.map((a) => r.pages[i].layers[a]),
        };
      });
    return { selectedLayerIds: e, selectedLayers: t };
  };
var x8 = function (e) {
    return U.jsx(
      "svg",
      Re(
        {
          xmlns: "http://www.w3.org/2000/svg",
          viewBox: "0 0 256 256",
          fill: "currentColor",
          width: "1em",
          height: "1em",
        },
        e,
        {
          children: U.jsx("path", {
            d: "M100 36H56a20 20 0 0 0-20 20v44a20 20 0 0 0 20 20h44a20 20 0 0 0 20-20V56a20 20 0 0 0-20-20Zm-4 60H60V60h36Zm104-60h-44a20 20 0 0 0-20 20v44a20 20 0 0 0 20 20h44a20 20 0 0 0 20-20V56a20 20 0 0 0-20-20Zm-4 60h-36V60h36Zm-96 40H56a20 20 0 0 0-20 20v44a20 20 0 0 0 20 20h44a20 20 0 0 0 20-20v-44a20 20 0 0 0-20-20Zm-4 60H60v-36h36Zm104-60h-44a20 20 0 0 0-20 20v44a20 20 0 0 0 20 20h44a20 20 0 0 0 20-20v-44a20 20 0 0 0-20-20Zm-4 60h-36v-36h36Z",
          }),
        }
      )
    );
  },
  Zs = function (e) {
    return U.jsx(
      "svg",
      Re(
        {
          xmlns: "http://www.w3.org/2000/svg",
          viewBox: "0 0 256 256",
          fill: "currentColor",
          width: "1em",
          height: "1em",
        },
        e,
        {
          children: U.jsx("path", {
            d: "M224 128a8 8 0 0 1-8 8h-80v80a8 8 0 0 1-16 0v-80H40a8 8 0 0 1 0-16h80V40a8 8 0 0 1 16 0v80h80a8 8 0 0 1 8 8Z",
          }),
        }
      )
    );
  },
  Ee = {},
  Zd = { exports: {} };
(function (n, e) {
  (function (t, r) {
    var i = "1.0.36",
      o = "",
      a = "?",
      l = "function",
      u = "undefined",
      d = "object",
      h = "string",
      p = "major",
      g = "model",
      y = "name",
      m = "type",
      w = "vendor",
      b = "version",
      E = "architecture",
      R = "console",
      O = "mobile",
      I = "tablet",
      M = "smarttv",
      D = "wearable",
      N = "embedded",
      Y = 350,
      X = "Amazon",
      j = "Apple",
      W = "ASUS",
      G = "BlackBerry",
      te = "Browser",
      ne = "Chrome",
      se = "Edge",
      oe = "Firefox",
      le = "Google",
      pe = "Huawei",
      ce = "LG",
      be = "Microsoft",
      Oe = "Motorola",
      de = "Opera",
      xe = "Samsung",
      Pe = "Sharp",
      ye = "Sony",
      Z = "Xiaomi",
      ue = "Zebra",
      K = "Facebook",
      Se = "Chromium OS",
      we = "Mac OS",
      Ke = function (Ae, Ze) {
        var ve = {};
        for (var Ie in Ae)
          Ze[Ie] && Ze[Ie].length % 2 === 0
            ? (ve[Ie] = Ze[Ie].concat(Ae[Ie]))
            : (ve[Ie] = Ae[Ie]);
        return ve;
      },
      re = function (Ae) {
        for (var Ze = {}, ve = 0; ve < Ae.length; ve++)
          Ze[Ae[ve].toUpperCase()] = Ae[ve];
        return Ze;
      },
      Ve = function (Ae, Ze) {
        return typeof Ae === h ? Ne(Ze).indexOf(Ne(Ae)) !== -1 : !1;
      },
      Ne = function (Ae) {
        return Ae.toLowerCase();
      },
      pt = function (Ae) {
        return typeof Ae === h ? Ae.replace(/[^\d\.]/g, o).split(".")[0] : r;
      },
      _ = function (Ae, Ze) {
        if (typeof Ae === h)
          return (
            (Ae = Ae.replace(/^\s\s*/, o)),
            typeof Ze === u ? Ae : Ae.substring(0, Y)
          );
      },
      L = function (Ae, Ze) {
        for (var ve = 0, Ie, rt, wt, ze, De, qt; ve < Ze.length && !De; ) {
          var Ar = Ze[ve],
            Lr = Ze[ve + 1];
          for (Ie = rt = 0; Ie < Ar.length && !De && Ar[Ie]; )
            if (((De = Ar[Ie++].exec(Ae)), De))
              for (wt = 0; wt < Lr.length; wt++)
                (qt = De[++rt]),
                  (ze = Lr[wt]),
                  typeof ze === d && ze.length > 0
                    ? ze.length === 2
                      ? typeof ze[1] == l
                        ? (this[ze[0]] = ze[1].call(this, qt))
                        : (this[ze[0]] = ze[1])
                      : ze.length === 3
                      ? typeof ze[1] === l && !(ze[1].exec && ze[1].test)
                        ? (this[ze[0]] = qt ? ze[1].call(this, qt, ze[2]) : r)
                        : (this[ze[0]] = qt ? qt.replace(ze[1], ze[2]) : r)
                      : ze.length === 4 &&
                        (this[ze[0]] = qt
                          ? ze[3].call(this, qt.replace(ze[1], ze[2]))
                          : r)
                    : (this[ze] = qt || r);
          ve += 2;
        }
      },
      B = function (Ae, Ze) {
        for (var ve in Ze)
          if (typeof Ze[ve] === d && Ze[ve].length > 0) {
            for (var Ie = 0; Ie < Ze[ve].length; Ie++)
              if (Ve(Ze[ve][Ie], Ae)) return ve === a ? r : ve;
          } else if (Ve(Ze[ve], Ae)) return ve === a ? r : ve;
        return Ae;
      },
      $ = {
        "1.0": "/8",
        1.2: "/1",
        1.3: "/3",
        "2.0": "/412",
        "2.0.2": "/416",
        "2.0.3": "/417",
        "2.0.4": "/419",
        "?": "/",
      },
      fe = {
        ME: "4.90",
        "NT 3.11": "NT3.51",
        "NT 4.0": "NT4.0",
        2e3: "NT 5.0",
        XP: ["NT 5.1", "NT 5.2"],
        Vista: "NT 6.0",
        7: "NT 6.1",
        8: "NT 6.2",
        8.1: "NT 6.3",
        10: ["NT 6.4", "NT 10.0"],
        RT: "ARM",
      },
      ge = {
        browser: [
          [/\b(?:crmo|crios)\/([\w\.]+)/i],
          [b, [y, "Chrome"]],
          [/edg(?:e|ios|a)?\/([\w\.]+)/i],
          [b, [y, "Edge"]],
          [
            /(opera mini)\/([-\w\.]+)/i,
            /(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,
            /(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i,
          ],
          [y, b],
          [/opios[\/ ]+([\w\.]+)/i],
          [b, [y, de + " Mini"]],
          [/\bopr\/([\w\.]+)/i],
          [b, [y, de]],
          [
            /(kindle)\/([\w\.]+)/i,
            /(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,
            /(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,
            /(ba?idubrowser)[\/ ]?([\w\.]+)/i,
            /(?:ms|\()(ie) ([\w\.]+)/i,
            /(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,
            /(heytap|ovi)browser\/([\d\.]+)/i,
            /(weibo)__([\d\.]+)/i,
          ],
          [y, b],
          [/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],
          [b, [y, "UC" + te]],
          [/microm.+\bqbcore\/([\w\.]+)/i, /\bqbcore\/([\w\.]+).+microm/i],
          [b, [y, "WeChat(Win) Desktop"]],
          [/micromessenger\/([\w\.]+)/i],
          [b, [y, "WeChat"]],
          [/konqueror\/([\w\.]+)/i],
          [b, [y, "Konqueror"]],
          [/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],
          [b, [y, "IE"]],
          [/ya(?:search)?browser\/([\w\.]+)/i],
          [b, [y, "Yandex"]],
          [/(avast|avg)\/([\w\.]+)/i],
          [[y, /(.+)/, "$1 Secure " + te], b],
          [/\bfocus\/([\w\.]+)/i],
          [b, [y, oe + " Focus"]],
          [/\bopt\/([\w\.]+)/i],
          [b, [y, de + " Touch"]],
          [/coc_coc\w+\/([\w\.]+)/i],
          [b, [y, "Coc Coc"]],
          [/dolfin\/([\w\.]+)/i],
          [b, [y, "Dolphin"]],
          [/coast\/([\w\.]+)/i],
          [b, [y, de + " Coast"]],
          [/miuibrowser\/([\w\.]+)/i],
          [b, [y, "MIUI " + te]],
          [/fxios\/([-\w\.]+)/i],
          [b, [y, oe]],
          [/\bqihu|(qi?ho?o?|360)browser/i],
          [[y, "360 " + te]],
          [/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],
          [[y, /(.+)/, "$1 " + te], b],
          [/(comodo_dragon)\/([\w\.]+)/i],
          [[y, /_/g, " "], b],
          [
            /(electron)\/([\w\.]+) safari/i,
            /(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,
            /m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i,
          ],
          [y, b],
          [/(metasr)[\/ ]?([\w\.]+)/i, /(lbbrowser)/i, /\[(linkedin)app\]/i],
          [y],
          [/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],
          [[y, K], b],
          [
            /(kakao(?:talk|story))[\/ ]([\w\.]+)/i,
            /(naver)\(.*?(\d+\.[\w\.]+).*\)/i,
            /safari (line)\/([\w\.]+)/i,
            /\b(line)\/([\w\.]+)\/iab/i,
            /(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i,
          ],
          [y, b],
          [/\bgsa\/([\w\.]+) .*safari\//i],
          [b, [y, "GSA"]],
          [/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],
          [b, [y, "TikTok"]],
          [/headlesschrome(?:\/([\w\.]+)| )/i],
          [b, [y, ne + " Headless"]],
          [/ wv\).+(chrome)\/([\w\.]+)/i],
          [[y, ne + " WebView"], b],
          [/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],
          [b, [y, "Android " + te]],
          [/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],
          [y, b],
          [/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],
          [b, [y, "Mobile Safari"]],
          [/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],
          [b, y],
          [/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],
          [y, [b, B, $]],
          [/(webkit|khtml)\/([\w\.]+)/i],
          [y, b],
          [/(navigator|netscape\d?)\/([-\w\.]+)/i],
          [[y, "Netscape"], b],
          [/mobile vr; rv:([\w\.]+)\).+firefox/i],
          [b, [y, oe + " Reality"]],
          [
            /ekiohf.+(flow)\/([\w\.]+)/i,
            /(swiftfox)/i,
            /(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,
            /(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,
            /(firefox)\/([\w\.]+)/i,
            /(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,
            /(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,
            /(links) \(([\w\.]+)/i,
            /panasonic;(viera)/i,
          ],
          [y, b],
          [/(cobalt)\/([\w\.]+)/i],
          [y, [b, /master.|lts./, ""]],
        ],
        cpu: [
          [/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],
          [[E, "amd64"]],
          [/(ia32(?=;))/i],
          [[E, Ne]],
          [/((?:i[346]|x)86)[;\)]/i],
          [[E, "ia32"]],
          [/\b(aarch64|arm(v?8e?l?|_?64))\b/i],
          [[E, "arm64"]],
          [/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],
          [[E, "armhf"]],
          [/windows (ce|mobile); ppc;/i],
          [[E, "arm"]],
          [/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],
          [[E, /ower/, o, Ne]],
          [/(sun4\w)[;\)]/i],
          [[E, "sparc"]],
          [
            /((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i,
          ],
          [[E, Ne]],
        ],
        device: [
          [
            /\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i,
          ],
          [g, [w, xe], [m, I]],
          [
            /\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,
            /samsung[- ]([-\w]+)/i,
            /sec-(sgh\w+)/i,
          ],
          [g, [w, xe], [m, O]],
          [/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],
          [g, [w, j], [m, O]],
          [
            /\((ipad);[-\w\),; ]+apple/i,
            /applecoremedia\/[\w\.]+ \((ipad)/i,
            /\b(ipad)\d\d?,\d\d?[;\]].+ios/i,
          ],
          [g, [w, j], [m, I]],
          [/(macintosh);/i],
          [g, [w, j]],
          [/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],
          [g, [w, Pe], [m, O]],
          [/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],
          [g, [w, pe], [m, I]],
          [
            /(?:huawei|honor)([-\w ]+)[;\)]/i,
            /\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i,
          ],
          [g, [w, pe], [m, O]],
          [
            /\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,
            /\b; (\w+) build\/hm\1/i,
            /\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,
            /\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,
            /\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i,
          ],
          [
            [g, /_/g, " "],
            [w, Z],
            [m, O],
          ],
          [/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],
          [
            [g, /_/g, " "],
            [w, Z],
            [m, I],
          ],
          [
            /; (\w+) bui.+ oppo/i,
            /\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i,
          ],
          [g, [w, "OPPO"], [m, O]],
          [/vivo (\w+)(?: bui|\))/i, /\b(v[12]\d{3}\w?[at])(?: bui|;)/i],
          [g, [w, "Vivo"], [m, O]],
          [/\b(rmx[12]\d{3})(?: bui|;|\))/i],
          [g, [w, "Realme"], [m, O]],
          [
            /\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,
            /\bmot(?:orola)?[- ](\w*)/i,
            /((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i,
          ],
          [g, [w, Oe], [m, O]],
          [/\b(mz60\d|xoom[2 ]{0,2}) build\//i],
          [g, [w, Oe], [m, I]],
          [/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],
          [g, [w, ce], [m, I]],
          [
            /(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,
            /\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,
            /\blg-?([\d\w]+) bui/i,
          ],
          [g, [w, ce], [m, O]],
          [
            /(ideatab[-\w ]+)/i,
            /lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i,
          ],
          [g, [w, "Lenovo"], [m, I]],
          [/(?:maemo|nokia).*(n900|lumia \d+)/i, /nokia[-_ ]?([-\w\.]*)/i],
          [
            [g, /_/g, " "],
            [w, "Nokia"],
            [m, O],
          ],
          [/(pixel c)\b/i],
          [g, [w, le], [m, I]],
          [/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],
          [g, [w, le], [m, O]],
          [
            /droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i,
          ],
          [g, [w, ye], [m, O]],
          [/sony tablet [ps]/i, /\b(?:sony)?sgp\w+(?: bui|\))/i],
          [
            [g, "Xperia Tablet"],
            [w, ye],
            [m, I],
          ],
          [
            / (kb2005|in20[12]5|be20[12][59])\b/i,
            /(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i,
          ],
          [g, [w, "OnePlus"], [m, O]],
          [
            /(alexa)webm/i,
            /(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,
            /(kf[a-z]+)( bui|\)).+silk\//i,
          ],
          [g, [w, X], [m, I]],
          [/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],
          [
            [g, /(.+)/g, "Fire Phone $1"],
            [w, X],
            [m, O],
          ],
          [/(playbook);[-\w\),; ]+(rim)/i],
          [g, w, [m, I]],
          [/\b((?:bb[a-f]|st[hv])100-\d)/i, /\(bb10; (\w+)/i],
          [g, [w, G], [m, O]],
          [
            /(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i,
          ],
          [g, [w, W], [m, I]],
          [/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],
          [g, [w, W], [m, O]],
          [/(nexus 9)/i],
          [g, [w, "HTC"], [m, I]],
          [
            /(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,
            /(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,
            /(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i,
          ],
          [w, [g, /_/g, " "], [m, O]],
          [/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],
          [g, [w, "Acer"], [m, I]],
          [/droid.+; (m[1-5] note) bui/i, /\bmz-([-\w]{2,})/i],
          [g, [w, "Meizu"], [m, O]],
          [
            /(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,
            /(hp) ([\w ]+\w)/i,
            /(asus)-?(\w+)/i,
            /(microsoft); (lumia[\w ]+)/i,
            /(lenovo)[-_ ]?([-\w]+)/i,
            /(jolla)/i,
            /(oppo) ?([\w ]+) bui/i,
          ],
          [w, g, [m, O]],
          [
            /(kobo)\s(ereader|touch)/i,
            /(archos) (gamepad2?)/i,
            /(hp).+(touchpad(?!.+tablet)|tablet)/i,
            /(kindle)\/([\w\.]+)/i,
            /(nook)[\w ]+build\/(\w+)/i,
            /(dell) (strea[kpr\d ]*[\dko])/i,
            /(le[- ]+pan)[- ]+(\w{1,9}) bui/i,
            /(trinity)[- ]*(t\d{3}) bui/i,
            /(gigaset)[- ]+(q\w{1,9}) bui/i,
            /(vodafone) ([\w ]+)(?:\)| bui)/i,
          ],
          [w, g, [m, I]],
          [/(surface duo)/i],
          [g, [w, be], [m, I]],
          [/droid [\d\.]+; (fp\du?)(?: b|\))/i],
          [g, [w, "Fairphone"], [m, O]],
          [/(u304aa)/i],
          [g, [w, "AT&T"], [m, O]],
          [/\bsie-(\w*)/i],
          [g, [w, "Siemens"], [m, O]],
          [/\b(rct\w+) b/i],
          [g, [w, "RCA"], [m, I]],
          [/\b(venue[\d ]{2,7}) b/i],
          [g, [w, "Dell"], [m, I]],
          [/\b(q(?:mv|ta)\w+) b/i],
          [g, [w, "Verizon"], [m, I]],
          [/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],
          [g, [w, "Barnes & Noble"], [m, I]],
          [/\b(tm\d{3}\w+) b/i],
          [g, [w, "NuVision"], [m, I]],
          [/\b(k88) b/i],
          [g, [w, "ZTE"], [m, I]],
          [/\b(nx\d{3}j) b/i],
          [g, [w, "ZTE"], [m, O]],
          [/\b(gen\d{3}) b.+49h/i],
          [g, [w, "Swiss"], [m, O]],
          [/\b(zur\d{3}) b/i],
          [g, [w, "Swiss"], [m, I]],
          [/\b((zeki)?tb.*\b) b/i],
          [g, [w, "Zeki"], [m, I]],
          [/\b([yr]\d{2}) b/i, /\b(dragon[- ]+touch |dt)(\w{5}) b/i],
          [[w, "Dragon Touch"], g, [m, I]],
          [/\b(ns-?\w{0,9}) b/i],
          [g, [w, "Insignia"], [m, I]],
          [/\b((nxa|next)-?\w{0,9}) b/i],
          [g, [w, "NextBook"], [m, I]],
          [/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],
          [[w, "Voice"], g, [m, O]],
          [/\b(lvtel\-)?(v1[12]) b/i],
          [[w, "LvTel"], g, [m, O]],
          [/\b(ph-1) /i],
          [g, [w, "Essential"], [m, O]],
          [/\b(v(100md|700na|7011|917g).*\b) b/i],
          [g, [w, "Envizen"], [m, I]],
          [/\b(trio[-\w\. ]+) b/i],
          [g, [w, "MachSpeed"], [m, I]],
          [/\btu_(1491) b/i],
          [g, [w, "Rotor"], [m, I]],
          [/(shield[\w ]+) b/i],
          [g, [w, "Nvidia"], [m, I]],
          [/(sprint) (\w+)/i],
          [w, g, [m, O]],
          [/(kin\.[onetw]{3})/i],
          [
            [g, /\./g, " "],
            [w, be],
            [m, O],
          ],
          [/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],
          [g, [w, ue], [m, I]],
          [/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],
          [g, [w, ue], [m, O]],
          [/smart-tv.+(samsung)/i],
          [w, [m, M]],
          [/hbbtv.+maple;(\d+)/i],
          [
            [g, /^/, "SmartTV"],
            [w, xe],
            [m, M],
          ],
          [/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],
          [
            [w, ce],
            [m, M],
          ],
          [/(apple) ?tv/i],
          [w, [g, j + " TV"], [m, M]],
          [/crkey/i],
          [
            [g, ne + "cast"],
            [w, le],
            [m, M],
          ],
          [/droid.+aft(\w+)( bui|\))/i],
          [g, [w, X], [m, M]],
          [/\(dtv[\);].+(aquos)/i, /(aquos-tv[\w ]+)\)/i],
          [g, [w, Pe], [m, M]],
          [/(bravia[\w ]+)( bui|\))/i],
          [g, [w, ye], [m, M]],
          [/(mitv-\w{5}) bui/i],
          [g, [w, Z], [m, M]],
          [/Hbbtv.*(technisat) (.*);/i],
          [w, g, [m, M]],
          [
            /\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,
            /hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i,
          ],
          [
            [w, _],
            [g, _],
            [m, M],
          ],
          [/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],
          [[m, M]],
          [/(ouya)/i, /(nintendo) ([wids3utch]+)/i],
          [w, g, [m, R]],
          [/droid.+; (shield) bui/i],
          [g, [w, "Nvidia"], [m, R]],
          [/(playstation [345portablevi]+)/i],
          [g, [w, ye], [m, R]],
          [/\b(xbox(?: one)?(?!; xbox))[\); ]/i],
          [g, [w, be], [m, R]],
          [/((pebble))app/i],
          [w, g, [m, D]],
          [/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],
          [g, [w, j], [m, D]],
          [/droid.+; (glass) \d/i],
          [g, [w, le], [m, D]],
          [/droid.+; (wt63?0{2,3})\)/i],
          [g, [w, ue], [m, D]],
          [/(quest( 2| pro)?)/i],
          [g, [w, K], [m, D]],
          [/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],
          [w, [m, N]],
          [/(aeobc)\b/i],
          [g, [w, X], [m, N]],
          [/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],
          [g, [m, O]],
          [/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],
          [g, [m, I]],
          [/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],
          [[m, I]],
          [/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],
          [[m, O]],
          [/(android[-\w\. ]{0,9});.+buil/i],
          [g, [w, "Generic"]],
        ],
        engine: [
          [/windows.+ edge\/([\w\.]+)/i],
          [b, [y, se + "HTML"]],
          [/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],
          [b, [y, "Blink"]],
          [
            /(presto)\/([\w\.]+)/i,
            /(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,
            /ekioh(flow)\/([\w\.]+)/i,
            /(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,
            /(icab)[\/ ]([23]\.[\d\.]+)/i,
            /\b(libweb)/i,
          ],
          [y, b],
          [/rv\:([\w\.]{1,9})\b.+(gecko)/i],
          [b, y],
        ],
        os: [
          [/microsoft (windows) (vista|xp)/i],
          [y, b],
          [
            /(windows) nt 6\.2; (arm)/i,
            /(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,
            /(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,
          ],
          [y, [b, B, fe]],
          [/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],
          [
            [y, "Windows"],
            [b, B, fe],
          ],
          [
            /ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,
            /(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,
            /cfnetwork\/.+darwin/i,
          ],
          [
            [b, /_/g, "."],
            [y, "iOS"],
          ],
          [/(mac os x) ?([\w\. ]*)/i, /(macintosh|mac_powerpc\b)(?!.+haiku)/i],
          [
            [y, we],
            [b, /_/g, "."],
          ],
          [/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],
          [b, y],
          [
            /(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,
            /(blackberry)\w*\/([\w\.]*)/i,
            /(tizen|kaios)[\/ ]([\w\.]+)/i,
            /\((series40);/i,
          ],
          [y, b],
          [/\(bb(10);/i],
          [b, [y, G]],
          [/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],
          [b, [y, "Symbian"]],
          [
            /mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i,
          ],
          [b, [y, oe + " OS"]],
          [/web0s;.+rt(tv)/i, /\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],
          [b, [y, "webOS"]],
          [/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],
          [b, [y, "watchOS"]],
          [/crkey\/([\d\.]+)/i],
          [b, [y, ne + "cast"]],
          [/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],
          [[y, Se], b],
          [
            /panasonic;(viera)/i,
            /(netrange)mmh/i,
            /(nettv)\/(\d+\.[\w\.]+)/i,
            /(nintendo|playstation) ([wids345portablevuch]+)/i,
            /(xbox); +xbox ([^\);]+)/i,
            /\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,
            /(mint)[\/\(\) ]?(\w*)/i,
            /(mageia|vectorlinux)[; ]/i,
            /([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,
            /(hurd|linux) ?([\w\.]*)/i,
            /(gnu) ?([\w\.]*)/i,
            /\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,
            /(haiku) (\w+)/i,
          ],
          [y, b],
          [/(sunos) ?([\w\.\d]*)/i],
          [[y, "Solaris"], b],
          [
            /((?:open)?solaris)[-\/ ]?([\w\.]*)/i,
            /(aix) ((\d)(?=\.|\)| )[\w\.])*/i,
            /\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,
            /(unix) ?([\w\.]*)/i,
          ],
          [y, b],
        ],
      },
      Le = function (Ae, Ze) {
        if ((typeof Ae === d && ((Ze = Ae), (Ae = r)), !(this instanceof Le)))
          return new Le(Ae, Ze).getResult();
        var ve = typeof t !== u && t.navigator ? t.navigator : r,
          Ie = Ae || (ve && ve.userAgent ? ve.userAgent : o),
          rt = ve && ve.userAgentData ? ve.userAgentData : r,
          wt = Ze ? Ke(ge, Ze) : ge,
          ze = ve && ve.userAgent == Ie;
        return (
          (this.getBrowser = function () {
            var De = {};
            return (
              (De[y] = r),
              (De[b] = r),
              L.call(De, Ie, wt.browser),
              (De[p] = pt(De[b])),
              ze &&
                ve &&
                ve.brave &&
                typeof ve.brave.isBrave == l &&
                (De[y] = "Brave"),
              De
            );
          }),
          (this.getCPU = function () {
            var De = {};
            return (De[E] = r), L.call(De, Ie, wt.cpu), De;
          }),
          (this.getDevice = function () {
            var De = {};
            return (
              (De[w] = r),
              (De[g] = r),
              (De[m] = r),
              L.call(De, Ie, wt.device),
              ze && !De[m] && rt && rt.mobile && (De[m] = O),
              ze &&
                De[g] == "Macintosh" &&
                ve &&
                typeof ve.standalone !== u &&
                ve.maxTouchPoints &&
                ve.maxTouchPoints > 2 &&
                ((De[g] = "iPad"), (De[m] = I)),
              De
            );
          }),
          (this.getEngine = function () {
            var De = {};
            return (De[y] = r), (De[b] = r), L.call(De, Ie, wt.engine), De;
          }),
          (this.getOS = function () {
            var De = {};
            return (
              (De[y] = r),
              (De[b] = r),
              L.call(De, Ie, wt.os),
              ze &&
                !De[y] &&
                rt &&
                rt.platform != "Unknown" &&
                (De[y] = rt.platform
                  .replace(/chrome os/i, Se)
                  .replace(/macos/i, we)),
              De
            );
          }),
          (this.getResult = function () {
            return {
              ua: this.getUA(),
              browser: this.getBrowser(),
              engine: this.getEngine(),
              os: this.getOS(),
              device: this.getDevice(),
              cpu: this.getCPU(),
            };
          }),
          (this.getUA = function () {
            return Ie;
          }),
          (this.setUA = function (De) {
            return (
              (Ie = typeof De === h && De.length > Y ? _(De, Y) : De), this
            );
          }),
          this.setUA(Ie),
          this
        );
      };
    (Le.VERSION = i),
      (Le.BROWSER = re([y, b, p])),
      (Le.CPU = re([E])),
      (Le.DEVICE = re([g, w, m, R, O, M, I, D, N])),
      (Le.ENGINE = Le.OS = re([y, b])),
      n.exports && (e = n.exports = Le),
      (e.UAParser = Le);
    var Qe = typeof t !== u && (t.jQuery || t.Zepto);
    if (Qe && !Qe.ua) {
      var Ct = new Le();
      (Qe.ua = Ct.getResult()),
        (Qe.ua.get = function () {
          return Ct.getUA();
        }),
        (Qe.ua.set = function (Ae) {
          Ct.setUA(Ae);
          var Ze = Ct.getResult();
          for (var ve in Ze) Qe.ua[ve] = Ze[ve];
        });
    }
  })(typeof window == "object" ? window : _o);
})(Zd, Zd.exports);
var S8 = Zd.exports;
Object.defineProperty(Ee, "__esModule", { value: !0 });
function C8(n) {
  return n && typeof n == "object" && "default" in n ? n.default : n;
}
var sn = S,
  vt = C8(sn),
  v1 = S8,
  Ai = new v1(),
  an = Ai.getBrowser(),
  E8 = Ai.getCPU(),
  jn = Ai.getDevice(),
  Af = Ai.getEngine(),
  Li = Ai.getOS(),
  aa = Ai.getUA(),
  w1 = function (e) {
    return Ai.setUA(e);
  },
  la = function (e) {
    if (!e) {
      console.error("No userAgent string was provided");
      return;
    }
    var t = new v1(e);
    return {
      UA: t,
      browser: t.getBrowser(),
      cpu: t.getCPU(),
      device: t.getDevice(),
      engine: t.getEngine(),
      os: t.getOS(),
      ua: t.getUA(),
      setUserAgent: function (i) {
        return t.setUA(i);
      },
    };
  },
  b1 = Object.freeze({
    ClientUAInstance: Ai,
    browser: an,
    cpu: E8,
    device: jn,
    engine: Af,
    os: Li,
    ua: aa,
    setUa: w1,
    parseUserAgent: la,
  });
function e0(n, e) {
  var t = Object.keys(n);
  if (Object.getOwnPropertySymbols) {
    var r = Object.getOwnPropertySymbols(n);
    e &&
      (r = r.filter(function (i) {
        return Object.getOwnPropertyDescriptor(n, i).enumerable;
      })),
      t.push.apply(t, r);
  }
  return t;
}
function k8(n) {
  for (var e = 1; e < arguments.length; e++) {
    var t = arguments[e] != null ? arguments[e] : {};
    e % 2
      ? e0(Object(t), !0).forEach(function (r) {
          M8(n, r, t[r]);
        })
      : Object.getOwnPropertyDescriptors
      ? Object.defineProperties(n, Object.getOwnPropertyDescriptors(t))
      : e0(Object(t)).forEach(function (r) {
          Object.defineProperty(n, r, Object.getOwnPropertyDescriptor(t, r));
        });
  }
  return n;
}
function As(n) {
  "@babel/helpers - typeof";
  return (
    typeof Symbol == "function" && typeof Symbol.iterator == "symbol"
      ? (As = function (e) {
          return typeof e;
        })
      : (As = function (e) {
          return e &&
            typeof Symbol == "function" &&
            e.constructor === Symbol &&
            e !== Symbol.prototype
            ? "symbol"
            : typeof e;
        }),
    As(n)
  );
}
function O8(n, e) {
  if (!(n instanceof e))
    throw new TypeError("Cannot call a class as a function");
}
function t0(n, e) {
  for (var t = 0; t < e.length; t++) {
    var r = e[t];
    (r.enumerable = r.enumerable || !1),
      (r.configurable = !0),
      "value" in r && (r.writable = !0),
      Object.defineProperty(n, r.key, r);
  }
}
function T8(n, e, t) {
  return e && t0(n.prototype, e), t && t0(n, t), n;
}
function M8(n, e, t) {
  return (
    e in n
      ? Object.defineProperty(n, e, {
          value: t,
          enumerable: !0,
          configurable: !0,
          writable: !0,
        })
      : (n[e] = t),
    n
  );
}
function Yd() {
  return (
    (Yd =
      Object.assign ||
      function (n) {
        for (var e = 1; e < arguments.length; e++) {
          var t = arguments[e];
          for (var r in t)
            Object.prototype.hasOwnProperty.call(t, r) && (n[r] = t[r]);
        }
        return n;
      }),
    Yd.apply(this, arguments)
  );
}
function R8(n, e) {
  if (typeof e != "function" && e !== null)
    throw new TypeError("Super expression must either be null or a function");
  (n.prototype = Object.create(e && e.prototype, {
    constructor: { value: n, writable: !0, configurable: !0 },
  })),
    e && Gd(n, e);
}
function qd(n) {
  return (
    (qd = Object.setPrototypeOf
      ? Object.getPrototypeOf
      : function (t) {
          return t.__proto__ || Object.getPrototypeOf(t);
        }),
    qd(n)
  );
}
function Gd(n, e) {
  return (
    (Gd =
      Object.setPrototypeOf ||
      function (r, i) {
        return (r.__proto__ = i), r;
      }),
    Gd(n, e)
  );
}
function D8(n, e) {
  if (n == null) return {};
  var t = {},
    r = Object.keys(n),
    i,
    o;
  for (o = 0; o < r.length; o++)
    (i = r[o]), !(e.indexOf(i) >= 0) && (t[i] = n[i]);
  return t;
}
function or(n, e) {
  if (n == null) return {};
  var t = D8(n, e),
    r,
    i;
  if (Object.getOwnPropertySymbols) {
    var o = Object.getOwnPropertySymbols(n);
    for (i = 0; i < o.length; i++)
      (r = o[i]),
        !(e.indexOf(r) >= 0) &&
          Object.prototype.propertyIsEnumerable.call(n, r) &&
          (t[r] = n[r]);
  }
  return t;
}
function Tl(n) {
  if (n === void 0)
    throw new ReferenceError(
      "this hasn't been initialised - super() hasn't been called"
    );
  return n;
}
function I8(n, e) {
  if (e && (typeof e == "object" || typeof e == "function")) return e;
  if (e !== void 0)
    throw new TypeError(
      "Derived constructors may only return object or undefined"
    );
  return Tl(n);
}
function A8(n, e) {
  return L8(n) || P8(n, e) || _8(n, e) || N8();
}
function L8(n) {
  if (Array.isArray(n)) return n;
}
function P8(n, e) {
  var t =
    n == null
      ? null
      : (typeof Symbol < "u" && n[Symbol.iterator]) || n["@@iterator"];
  if (t != null) {
    var r = [],
      i = !0,
      o = !1,
      a,
      l;
    try {
      for (
        t = t.call(n);
        !(i = (a = t.next()).done) && (r.push(a.value), !(e && r.length === e));
        i = !0
      );
    } catch (u) {
      (o = !0), (l = u);
    } finally {
      try {
        !i && t.return != null && t.return();
      } finally {
        if (o) throw l;
      }
    }
    return r;
  }
}
function _8(n, e) {
  if (n) {
    if (typeof n == "string") return n0(n, e);
    var t = Object.prototype.toString.call(n).slice(8, -1);
    if (
      (t === "Object" && n.constructor && (t = n.constructor.name),
      t === "Map" || t === "Set")
    )
      return Array.from(n);
    if (t === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))
      return n0(n, e);
  }
}
function n0(n, e) {
  (e == null || e > n.length) && (e = n.length);
  for (var t = 0, r = new Array(e); t < e; t++) r[t] = n[t];
  return r;
}
function N8() {
  throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`);
}
var tn = {
    Mobile: "mobile",
    Tablet: "tablet",
    SmartTv: "smarttv",
    Console: "console",
    Wearable: "wearable",
    Embedded: "embedded",
    Browser: void 0,
  },
  Tn = {
    Chrome: "Chrome",
    Firefox: "Firefox",
    Opera: "Opera",
    Yandex: "Yandex",
    Safari: "Safari",
    InternetExplorer: "Internet Explorer",
    Edge: "Edge",
    Chromium: "Chromium",
    Ie: "IE",
    MobileSafari: "Mobile Safari",
    EdgeChromium: "Edge Chromium",
    MIUI: "MIUI Browser",
    SamsungBrowser: "Samsung Browser",
  },
  ts = {
    IOS: "iOS",
    Android: "Android",
    WindowsPhone: "Windows Phone",
    Windows: "Windows",
    MAC_OS: "Mac OS",
  },
  z8 = {
    isMobile: !1,
    isTablet: !1,
    isBrowser: !1,
    isSmartTV: !1,
    isConsole: !1,
    isWearable: !1,
  },
  B8 = function (e) {
    switch (e) {
      case tn.Mobile:
        return { isMobile: !0 };
      case tn.Tablet:
        return { isTablet: !0 };
      case tn.SmartTv:
        return { isSmartTV: !0 };
      case tn.Console:
        return { isConsole: !0 };
      case tn.Wearable:
        return { isWearable: !0 };
      case tn.Browser:
        return { isBrowser: !0 };
      case tn.Embedded:
        return { isEmbedded: !0 };
      default:
        return z8;
    }
  },
  F8 = function (e) {
    return w1(e);
  },
  He = function (e) {
    var t =
      arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : "none";
    return e || t;
  },
  Lf = function () {
    return typeof window < "u" && (window.navigator || navigator)
      ? window.navigator || navigator
      : !1;
  },
  Pf = function (e) {
    var t = Lf();
    return (
      t &&
      t.platform &&
      (t.platform.indexOf(e) !== -1 ||
        (t.platform === "MacIntel" && t.maxTouchPoints > 1 && !window.MSStream))
    );
  },
  W8 = function (e, t, r, i, o) {
    return {
      isBrowser: e,
      browserMajorVersion: He(t.major),
      browserFullVersion: He(t.version),
      browserName: He(t.name),
      engineName: He(r.name),
      engineVersion: He(r.version),
      osName: He(i.name),
      osVersion: He(i.version),
      userAgent: He(o),
    };
  },
  r0 = function (e, t, r, i) {
    return k8({}, e, {
      vendor: He(t.vendor),
      model: He(t.model),
      os: He(r.name),
      osVersion: He(r.version),
      ua: He(i),
    });
  },
  V8 = function (e, t, r, i) {
    return {
      isSmartTV: e,
      engineName: He(t.name),
      engineVersion: He(t.version),
      osName: He(r.name),
      osVersion: He(r.version),
      userAgent: He(i),
    };
  },
  H8 = function (e, t, r, i) {
    return {
      isConsole: e,
      engineName: He(t.name),
      engineVersion: He(t.version),
      osName: He(r.name),
      osVersion: He(r.version),
      userAgent: He(i),
    };
  },
  $8 = function (e, t, r, i) {
    return {
      isWearable: e,
      engineName: He(t.name),
      engineVersion: He(t.version),
      osName: He(r.name),
      osVersion: He(r.version),
      userAgent: He(i),
    };
  },
  j8 = function (e, t, r, i, o) {
    return {
      isEmbedded: e,
      vendor: He(t.vendor),
      model: He(t.model),
      engineName: He(r.name),
      engineVersion: He(r.version),
      osName: He(i.name),
      osVersion: He(i.version),
      userAgent: He(o),
    };
  };
function U8(n) {
  var e = n ? la(n) : b1,
    t = e.device,
    r = e.browser,
    i = e.engine,
    o = e.os,
    a = e.ua,
    l = B8(t.type),
    u = l.isBrowser,
    d = l.isMobile,
    h = l.isTablet,
    p = l.isSmartTV,
    g = l.isConsole,
    y = l.isWearable,
    m = l.isEmbedded;
  if (u) return W8(u, r, i, o, a);
  if (p) return V8(p, i, o, a);
  if (g) return H8(g, i, o, a);
  if (d || h) return r0(l, t, o, a);
  if (y) return $8(y, i, o, a);
  if (m) return j8(m, t, i, o, a);
}
var x1 = function (e) {
    var t = e.type;
    return t === tn.Mobile;
  },
  S1 = function (e) {
    var t = e.type;
    return t === tn.Tablet;
  },
  C1 = function (e) {
    var t = e.type;
    return t === tn.Mobile || t === tn.Tablet;
  },
  E1 = function (e) {
    var t = e.type;
    return t === tn.SmartTv;
  },
  Pl = function (e) {
    var t = e.type;
    return t === tn.Browser;
  },
  k1 = function (e) {
    var t = e.type;
    return t === tn.Wearable;
  },
  O1 = function (e) {
    var t = e.type;
    return t === tn.Console;
  },
  T1 = function (e) {
    var t = e.type;
    return t === tn.Embedded;
  },
  M1 = function (e) {
    var t = e.vendor;
    return He(t);
  },
  R1 = function (e) {
    var t = e.model;
    return He(t);
  },
  D1 = function (e) {
    var t = e.type;
    return He(t, "browser");
  },
  I1 = function (e) {
    var t = e.name;
    return t === ts.Android;
  },
  A1 = function (e) {
    var t = e.name;
    return t === ts.Windows;
  },
  L1 = function (e) {
    var t = e.name;
    return t === ts.MAC_OS;
  },
  P1 = function (e) {
    var t = e.name;
    return t === ts.WindowsPhone;
  },
  _1 = function (e) {
    var t = e.name;
    return t === ts.IOS;
  },
  N1 = function (e) {
    var t = e.version;
    return He(t);
  },
  z1 = function (e) {
    var t = e.name;
    return He(t);
  },
  B1 = function (e) {
    var t = e.name;
    return t === Tn.Chrome;
  },
  F1 = function (e) {
    var t = e.name;
    return t === Tn.Firefox;
  },
  W1 = function (e) {
    var t = e.name;
    return t === Tn.Chromium;
  },
  _l = function (e) {
    var t = e.name;
    return t === Tn.Edge;
  },
  V1 = function (e) {
    var t = e.name;
    return t === Tn.Yandex;
  },
  H1 = function (e) {
    var t = e.name;
    return t === Tn.Safari || t === Tn.MobileSafari;
  },
  $1 = function (e) {
    var t = e.name;
    return t === Tn.MobileSafari;
  },
  j1 = function (e) {
    var t = e.name;
    return t === Tn.Opera;
  },
  U1 = function (e) {
    var t = e.name;
    return t === Tn.InternetExplorer || t === Tn.Ie;
  },
  Z1 = function (e) {
    var t = e.name;
    return t === Tn.MIUI;
  },
  Y1 = function (e) {
    var t = e.name;
    return t === Tn.SamsungBrowser;
  },
  q1 = function (e) {
    var t = e.version;
    return He(t);
  },
  G1 = function (e) {
    var t = e.major;
    return He(t);
  },
  K1 = function (e) {
    var t = e.name;
    return He(t);
  },
  X1 = function (e) {
    var t = e.name;
    return He(t);
  },
  J1 = function (e) {
    var t = e.version;
    return He(t);
  },
  Q1 = function () {
    var e = Lf(),
      t = e && e.userAgent && e.userAgent.toLowerCase();
    return typeof t == "string" ? /electron/.test(t) : !1;
  },
  Vo = function (e) {
    return typeof e == "string" && e.indexOf("Edg/") !== -1;
  },
  ey = function () {
    var e = Lf();
    return (
      e &&
      (/iPad|iPhone|iPod/.test(e.platform) ||
        (e.platform === "MacIntel" && e.maxTouchPoints > 1)) &&
      !window.MSStream
    );
  },
  kr = function () {
    return Pf("iPad");
  },
  ty = function () {
    return Pf("iPhone");
  },
  ny = function () {
    return Pf("iPod");
  },
  ry = function (e) {
    return He(e);
  };
function iy(n) {
  var e = n || b1,
    t = e.device,
    r = e.browser,
    i = e.os,
    o = e.engine,
    a = e.ua;
  return {
    isSmartTV: E1(t),
    isConsole: O1(t),
    isWearable: k1(t),
    isEmbedded: T1(t),
    isMobileSafari: $1(r) || kr(),
    isChromium: W1(r),
    isMobile: C1(t) || kr(),
    isMobileOnly: x1(t),
    isTablet: S1(t) || kr(),
    isBrowser: Pl(t),
    isDesktop: Pl(t),
    isAndroid: I1(i),
    isWinPhone: P1(i),
    isIOS: _1(i) || kr(),
    isChrome: B1(r),
    isFirefox: F1(r),
    isSafari: H1(r),
    isOpera: j1(r),
    isIE: U1(r),
    osVersion: N1(i),
    osName: z1(i),
    fullBrowserVersion: q1(r),
    browserVersion: G1(r),
    browserName: K1(r),
    mobileVendor: M1(t),
    mobileModel: R1(t),
    engineName: X1(o),
    engineVersion: J1(o),
    getUA: ry(a),
    isEdge: _l(r) || Vo(a),
    isYandex: V1(r),
    deviceType: D1(t),
    isIOS13: ey(),
    isIPad13: kr(),
    isIPhone13: ty(),
    isIPod13: ny(),
    isElectron: Q1(),
    isEdgeChromium: Vo(a),
    isLegacyEdge: _l(r) && !Vo(a),
    isWindows: A1(i),
    isMacOs: L1(i),
    isMIUI: Z1(r),
    isSamsungBrowser: Y1(r),
  };
}
var oy = E1(jn),
  sy = O1(jn),
  ay = k1(jn),
  Z8 = T1(jn),
  Y8 = $1(an) || kr(),
  q8 = W1(an),
  gc = C1(jn) || kr(),
  ly = x1(jn),
  cy = S1(jn) || kr(),
  uy = Pl(jn),
  G8 = Pl(jn),
  dy = I1(Li),
  fy = P1(Li),
  hy = _1(Li) || kr(),
  K8 = B1(an),
  X8 = F1(an),
  J8 = H1(an),
  Q8 = j1(an),
  py = U1(an),
  eO = N1(Li),
  tO = z1(Li),
  nO = q1(an),
  rO = G1(an),
  iO = K1(an),
  oO = M1(jn),
  sO = R1(jn),
  aO = X1(Af),
  lO = J1(Af),
  cO = ry(aa),
  uO = _l(an) || Vo(aa),
  dO = V1(an),
  fO = D1(jn),
  hO = ey(),
  pO = kr(),
  gO = ty(),
  mO = ny(),
  yO = Q1(),
  vO = Vo(aa),
  wO = _l(an) && !Vo(aa),
  bO = A1(Li),
  xO = L1(Li),
  SO = Z1(an),
  CO = Y1(an),
  EO = function (e) {
    if (!e || typeof e != "string") {
      console.error("No valid user agent string was provided");
      return;
    }
    var t = la(e),
      r = t.device,
      i = t.browser,
      o = t.os,
      a = t.engine,
      l = t.ua;
    return iy({ device: r, browser: i, os: o, engine: a, ua: l });
  },
  kO = function (e) {
    var t = e.renderWithFragment,
      r = e.children,
      i = or(e, ["renderWithFragment", "children"]);
    return dy
      ? t
        ? vt.createElement(sn.Fragment, null, r)
        : vt.createElement("div", i, r)
      : null;
  },
  OO = function (e) {
    var t = e.renderWithFragment,
      r = e.children,
      i = or(e, ["renderWithFragment", "children"]);
    return uy
      ? t
        ? vt.createElement(sn.Fragment, null, r)
        : vt.createElement("div", i, r)
      : null;
  },
  TO = function (e) {
    var t = e.renderWithFragment,
      r = e.children,
      i = or(e, ["renderWithFragment", "children"]);
    return py
      ? t
        ? vt.createElement(sn.Fragment, null, r)
        : vt.createElement("div", i, r)
      : null;
  },
  MO = function (e) {
    var t = e.renderWithFragment,
      r = e.children,
      i = or(e, ["renderWithFragment", "children"]);
    return hy
      ? t
        ? vt.createElement(sn.Fragment, null, r)
        : vt.createElement("div", i, r)
      : null;
  },
  RO = function (e) {
    var t = e.renderWithFragment,
      r = e.children,
      i = or(e, ["renderWithFragment", "children"]);
    return gc
      ? t
        ? vt.createElement(sn.Fragment, null, r)
        : vt.createElement("div", i, r)
      : null;
  },
  DO = function (e) {
    var t = e.renderWithFragment,
      r = e.children,
      i = or(e, ["renderWithFragment", "children"]);
    return cy
      ? t
        ? vt.createElement(sn.Fragment, null, r)
        : vt.createElement("div", i, r)
      : null;
  },
  IO = function (e) {
    var t = e.renderWithFragment,
      r = e.children,
      i = or(e, ["renderWithFragment", "children"]);
    return fy
      ? t
        ? vt.createElement(sn.Fragment, null, r)
        : vt.createElement("div", i, r)
      : null;
  },
  AO = function (e) {
    var t = e.renderWithFragment,
      r = e.children;
    e.viewClassName, e.style;
    var i = or(e, ["renderWithFragment", "children", "viewClassName", "style"]);
    return ly
      ? t
        ? vt.createElement(sn.Fragment, null, r)
        : vt.createElement("div", i, r)
      : null;
  },
  LO = function (e) {
    var t = e.renderWithFragment,
      r = e.children,
      i = or(e, ["renderWithFragment", "children"]);
    return oy
      ? t
        ? vt.createElement(sn.Fragment, null, r)
        : vt.createElement("div", i, r)
      : null;
  },
  PO = function (e) {
    var t = e.renderWithFragment,
      r = e.children,
      i = or(e, ["renderWithFragment", "children"]);
    return sy
      ? t
        ? vt.createElement(sn.Fragment, null, r)
        : vt.createElement("div", i, r)
      : null;
  },
  _O = function (e) {
    var t = e.renderWithFragment,
      r = e.children,
      i = or(e, ["renderWithFragment", "children"]);
    return ay
      ? t
        ? vt.createElement(sn.Fragment, null, r)
        : vt.createElement("div", i, r)
      : null;
  },
  NO = function (e) {
    var t = e.renderWithFragment,
      r = e.children;
    e.viewClassName, e.style;
    var i = e.condition,
      o = or(e, [
        "renderWithFragment",
        "children",
        "viewClassName",
        "style",
        "condition",
      ]);
    return i
      ? t
        ? vt.createElement(sn.Fragment, null, r)
        : vt.createElement("div", o, r)
      : null;
  };
function zO(n) {
  return (function (e) {
    R8(t, e);
    function t(r) {
      var i;
      return (
        O8(this, t),
        (i = I8(this, qd(t).call(this, r))),
        (i.isEventListenerAdded = !1),
        (i.handleOrientationChange = i.handleOrientationChange.bind(Tl(i))),
        (i.onOrientationChange = i.onOrientationChange.bind(Tl(i))),
        (i.onPageLoad = i.onPageLoad.bind(Tl(i))),
        (i.state = { isLandscape: !1, isPortrait: !1 }),
        i
      );
    }
    return (
      T8(t, [
        {
          key: "handleOrientationChange",
          value: function () {
            this.isEventListenerAdded || (this.isEventListenerAdded = !0);
            var i = window.innerWidth > window.innerHeight ? 90 : 0;
            this.setState({ isPortrait: i === 0, isLandscape: i === 90 });
          },
        },
        {
          key: "onOrientationChange",
          value: function () {
            this.handleOrientationChange();
          },
        },
        {
          key: "onPageLoad",
          value: function () {
            this.handleOrientationChange();
          },
        },
        {
          key: "componentDidMount",
          value: function () {
            (typeof window > "u" ? "undefined" : As(window)) !== void 0 &&
              gc &&
              (this.isEventListenerAdded
                ? window.removeEventListener("load", this.onPageLoad, !1)
                : (this.handleOrientationChange(),
                  window.addEventListener("load", this.onPageLoad, !1)),
              window.addEventListener("resize", this.onOrientationChange, !1));
          },
        },
        {
          key: "componentWillUnmount",
          value: function () {
            window.removeEventListener("resize", this.onOrientationChange, !1);
          },
        },
        {
          key: "render",
          value: function () {
            return vt.createElement(
              n,
              Yd({}, this.props, {
                isLandscape: this.state.isLandscape,
                isPortrait: this.state.isPortrait,
              })
            );
          },
        },
      ]),
      t
    );
  })(vt.Component);
}
function BO() {
  var n = sn.useState(function () {
      var o = window.innerWidth > window.innerHeight ? 90 : 0;
      return {
        isPortrait: o === 0,
        isLandscape: o === 90,
        orientation: o === 0 ? "portrait" : "landscape",
      };
    }),
    e = A8(n, 2),
    t = e[0],
    r = e[1],
    i = sn.useCallback(
      function () {
        var o = window.innerWidth > window.innerHeight ? 90 : 0,
          a = {
            isPortrait: o === 0,
            isLandscape: o === 90,
            orientation: o === 0 ? "portrait" : "landscape",
          };
        t.orientation !== a.orientation && r(a);
      },
      [t.orientation]
    );
  return (
    sn.useEffect(
      function () {
        return (
          (typeof window > "u" ? "undefined" : As(window)) !== void 0 &&
            gc &&
            (i(),
            window.addEventListener("load", i, !1),
            window.addEventListener("resize", i, !1)),
          function () {
            window.removeEventListener("resize", i, !1),
              window.removeEventListener("load", i, !1);
          }
        );
      },
      [i]
    ),
    t
  );
}
function gy(n) {
  var e = n || window.navigator.userAgent;
  return la(e);
}
function FO(n) {
  var e = n || window.navigator.userAgent,
    t = gy(e),
    r = iy(t);
  return [r, t];
}
Ee.AndroidView = kO;
Ee.BrowserTypes = Tn;
Ee.BrowserView = OO;
Ee.ConsoleView = PO;
Ee.CustomView = NO;
Ee.IEView = TO;
Ee.IOSView = MO;
Ee.MobileOnlyView = AO;
Ee.MobileView = RO;
Ee.OsTypes = ts;
Ee.SmartTVView = LO;
Ee.TabletView = DO;
Ee.WearableView = _O;
Ee.WinPhoneView = IO;
Ee.browserName = iO;
Ee.browserVersion = rO;
Ee.deviceDetect = U8;
Ee.deviceType = fO;
Ee.engineName = aO;
Ee.engineVersion = lO;
Ee.fullBrowserVersion = nO;
Ee.getSelectorsByUserAgent = EO;
Ee.getUA = cO;
Ee.isAndroid = dy;
Ee.isBrowser = uy;
Ee.isChrome = K8;
Ee.isChromium = q8;
Ee.isConsole = sy;
Ee.isDesktop = G8;
Ee.isEdge = uO;
Ee.isEdgeChromium = vO;
Ee.isElectron = yO;
Ee.isEmbedded = Z8;
Ee.isFirefox = X8;
Ee.isIE = py;
Ee.isIOS = hy;
Ee.isIOS13 = hO;
Ee.isIPad13 = pO;
Ee.isIPhone13 = gO;
Ee.isIPod13 = mO;
Ee.isLegacyEdge = wO;
Ee.isMIUI = SO;
var WO = (Ee.isMacOs = xO),
  mc = (Ee.isMobile = gc);
Ee.isMobileOnly = ly;
Ee.isMobileSafari = Y8;
Ee.isOpera = Q8;
Ee.isSafari = J8;
Ee.isSamsungBrowser = CO;
Ee.isSmartTV = oy;
Ee.isTablet = cy;
Ee.isWearable = ay;
Ee.isWinPhone = fy;
Ee.isWindows = bO;
Ee.isYandex = dO;
Ee.mobileModel = sO;
Ee.mobileVendor = oO;
Ee.osName = tO;
Ee.osVersion = eO;
Ee.parseUserAgent = la;
Ee.setUserAgent = F8;
Ee.useDeviceData = gy;
Ee.useDeviceSelectors = FO;
Ee.useMobileOrientation = BO;
Ee.withOrientationChange = zO;
const VO = (n, e, t = "mousedown", r) => {
  const i = S.useRef(e),
    o = S.useCallback(
      (a) => {
        const l = n == null ? void 0 : n.current;
        !l || l.contains(a.target) || i.current(a);
      },
      [n, i]
    );
  S.useEffect(
    () => (
      window.addEventListener(t, o, r),
      () => {
        window.removeEventListener(t, o, r);
      }
    ),
    [o, t, r]
  );
};
var Nl = { exports: {} };
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */ Nl.exports;
(function (n, e) {
  (function () {
    var t,
      r = "4.17.21",
      i = 200,
      o = "Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",
      a = "Expected a function",
      l = "Invalid `variable` option passed into `_.template`",
      u = "__lodash_hash_undefined__",
      d = 500,
      h = "__lodash_placeholder__",
      p = 1,
      g = 2,
      y = 4,
      m = 1,
      w = 2,
      b = 1,
      E = 2,
      R = 4,
      O = 8,
      I = 16,
      M = 32,
      D = 64,
      N = 128,
      Y = 256,
      X = 512,
      j = 30,
      W = "...",
      G = 800,
      te = 16,
      ne = 1,
      se = 2,
      oe = 3,
      le = 1 / 0,
      pe = 9007199254740991,
      ce = 17976931348623157e292,
      be = 0 / 0,
      Oe = 4294967295,
      de = Oe - 1,
      xe = Oe >>> 1,
      Pe = [
        ["ary", N],
        ["bind", b],
        ["bindKey", E],
        ["curry", O],
        ["curryRight", I],
        ["flip", X],
        ["partial", M],
        ["partialRight", D],
        ["rearg", Y],
      ],
      ye = "[object Arguments]",
      Z = "[object Array]",
      ue = "[object AsyncFunction]",
      K = "[object Boolean]",
      Se = "[object Date]",
      we = "[object DOMException]",
      Ke = "[object Error]",
      re = "[object Function]",
      Ve = "[object GeneratorFunction]",
      Ne = "[object Map]",
      pt = "[object Number]",
      _ = "[object Null]",
      L = "[object Object]",
      B = "[object Promise]",
      $ = "[object Proxy]",
      fe = "[object RegExp]",
      ge = "[object Set]",
      Le = "[object String]",
      Qe = "[object Symbol]",
      Ct = "[object Undefined]",
      Ae = "[object WeakMap]",
      Ze = "[object WeakSet]",
      ve = "[object ArrayBuffer]",
      Ie = "[object DataView]",
      rt = "[object Float32Array]",
      wt = "[object Float64Array]",
      ze = "[object Int8Array]",
      De = "[object Int16Array]",
      qt = "[object Int32Array]",
      Ar = "[object Uint8Array]",
      Lr = "[object Uint8ClampedArray]",
      ss = "[object Uint16Array]",
      yo = "[object Uint32Array]",
      _c = /\b__p \+= '';/g,
      Nc = /\b(__p \+=) '' \+/g,
      zc = /(__e\(.*?\)|\b__t\)) \+\n'';/g,
      Dt = /&(?:amp|lt|gt|quot|#39);/g,
      Gt = /[&<>"']/g,
      cn = RegExp(Dt.source),
      yr = RegExp(Gt.source),
      vn = /<%-([\s\S]+?)%>/g,
      Mn = /<%([\s\S]+?)%>/g,
      Rn = /<%=([\s\S]+?)%>/g,
      ti = /\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,
      Dn = /^\w*$/,
      Ni =
        /[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,
      Pr = /[\\^$.*+?()[\]{}|]/g,
      vo = RegExp(Pr.source),
      ni = /^\s+/,
      xa = /\s/,
      zi = /\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,
      Bi = /\{\n\/\* \[wrapped with (.+)\] \*/,
      as = /,? & /,
      Qw = /[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,
      eb = /[()=,{}\[\]\/\s]/,
      tb = /\\(\\)?/g,
      nb = /\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,
      mh = /\w*$/,
      rb = /^[-+]0x[0-9a-f]+$/i,
      ib = /^0b[01]+$/i,
      ob = /^\[object .+?Constructor\]$/,
      sb = /^0o[0-7]+$/i,
      ab = /^(?:0|[1-9]\d*)$/,
      lb = /[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,
      Sa = /($^)/,
      cb = /['\n\r\u2028\u2029\\]/g,
      Ca = "\\ud800-\\udfff",
      ub = "\\u0300-\\u036f",
      db = "\\ufe20-\\ufe2f",
      fb = "\\u20d0-\\u20ff",
      yh = ub + db + fb,
      vh = "\\u2700-\\u27bf",
      wh = "a-z\\xdf-\\xf6\\xf8-\\xff",
      hb = "\\xac\\xb1\\xd7\\xf7",
      pb = "\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",
      gb = "\\u2000-\\u206f",
      mb =
        " \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",
      bh = "A-Z\\xc0-\\xd6\\xd8-\\xde",
      xh = "\\ufe0e\\ufe0f",
      Sh = hb + pb + gb + mb,
      Bc = "[']",
      yb = "[" + Ca + "]",
      Ch = "[" + Sh + "]",
      Ea = "[" + yh + "]",
      Eh = "\\d+",
      vb = "[" + vh + "]",
      kh = "[" + wh + "]",
      Oh = "[^" + Ca + Sh + Eh + vh + wh + bh + "]",
      Fc = "\\ud83c[\\udffb-\\udfff]",
      wb = "(?:" + Ea + "|" + Fc + ")",
      Th = "[^" + Ca + "]",
      Wc = "(?:\\ud83c[\\udde6-\\uddff]){2}",
      Vc = "[\\ud800-\\udbff][\\udc00-\\udfff]",
      wo = "[" + bh + "]",
      Mh = "\\u200d",
      Rh = "(?:" + kh + "|" + Oh + ")",
      bb = "(?:" + wo + "|" + Oh + ")",
      Dh = "(?:" + Bc + "(?:d|ll|m|re|s|t|ve))?",
      Ih = "(?:" + Bc + "(?:D|LL|M|RE|S|T|VE))?",
      Ah = wb + "?",
      Lh = "[" + xh + "]?",
      xb = "(?:" + Mh + "(?:" + [Th, Wc, Vc].join("|") + ")" + Lh + Ah + ")*",
      Sb = "\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",
      Cb = "\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",
      Ph = Lh + Ah + xb,
      Eb = "(?:" + [vb, Wc, Vc].join("|") + ")" + Ph,
      kb = "(?:" + [Th + Ea + "?", Ea, Wc, Vc, yb].join("|") + ")",
      Ob = RegExp(Bc, "g"),
      Tb = RegExp(Ea, "g"),
      Hc = RegExp(Fc + "(?=" + Fc + ")|" + kb + Ph, "g"),
      Mb = RegExp(
        [
          wo + "?" + kh + "+" + Dh + "(?=" + [Ch, wo, "$"].join("|") + ")",
          bb + "+" + Ih + "(?=" + [Ch, wo + Rh, "$"].join("|") + ")",
          wo + "?" + Rh + "+" + Dh,
          wo + "+" + Ih,
          Cb,
          Sb,
          Eh,
          Eb,
        ].join("|"),
        "g"
      ),
      Rb = RegExp("[" + Mh + Ca + yh + xh + "]"),
      Db = /[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,
      Ib = [
        "Array",
        "Buffer",
        "DataView",
        "Date",
        "Error",
        "Float32Array",
        "Float64Array",
        "Function",
        "Int8Array",
        "Int16Array",
        "Int32Array",
        "Map",
        "Math",
        "Object",
        "Promise",
        "RegExp",
        "Set",
        "String",
        "Symbol",
        "TypeError",
        "Uint8Array",
        "Uint8ClampedArray",
        "Uint16Array",
        "Uint32Array",
        "WeakMap",
        "_",
        "clearTimeout",
        "isFinite",
        "parseInt",
        "setTimeout",
      ],
      Ab = -1,
      bt = {};
    (bt[rt] =
      bt[wt] =
      bt[ze] =
      bt[De] =
      bt[qt] =
      bt[Ar] =
      bt[Lr] =
      bt[ss] =
      bt[yo] =
        !0),
      (bt[ye] =
        bt[Z] =
        bt[ve] =
        bt[K] =
        bt[Ie] =
        bt[Se] =
        bt[Ke] =
        bt[re] =
        bt[Ne] =
        bt[pt] =
        bt[L] =
        bt[fe] =
        bt[ge] =
        bt[Le] =
        bt[Ae] =
          !1);
    var yt = {};
    (yt[ye] =
      yt[Z] =
      yt[ve] =
      yt[Ie] =
      yt[K] =
      yt[Se] =
      yt[rt] =
      yt[wt] =
      yt[ze] =
      yt[De] =
      yt[qt] =
      yt[Ne] =
      yt[pt] =
      yt[L] =
      yt[fe] =
      yt[ge] =
      yt[Le] =
      yt[Qe] =
      yt[Ar] =
      yt[Lr] =
      yt[ss] =
      yt[yo] =
        !0),
      (yt[Ke] = yt[re] = yt[Ae] = !1);
    var Lb = {
        : "A",
        : "A",
        : "A",
        : "A",
        : "A",
        : "A",
        : "a",
        : "a",
        : "a",
        : "a",
        : "a",
        : "a",
        : "C",
        : "c",
        : "D",
        : "d",
        : "E",
        : "E",
        : "E",
        : "E",
        : "e",
        : "e",
        : "e",
        : "e",
        : "I",
        : "I",
        : "I",
        : "I",
        : "i",
        : "i",
        : "i",
        : "i",
        : "N",
        : "n",
        : "O",
        : "O",
        : "O",
        : "O",
        : "O",
        : "O",
        : "o",
        : "o",
        : "o",
        : "o",
        : "o",
        : "o",
        : "U",
        : "U",
        : "U",
        : "U",
        : "u",
        : "u",
        : "u",
        : "u",
        : "Y",
        : "y",
        : "y",
        : "Ae",
        : "ae",
        : "Th",
        : "th",
        : "ss",
        : "A",
        : "A",
        : "A",
        : "a",
        : "a",
        : "a",
        : "C",
        : "C",
        : "C",
        : "C",
        : "c",
        : "c",
        : "c",
        : "c",
        : "D",
        : "D",
        : "d",
        : "d",
        : "E",
        : "E",
        : "E",
        : "E",
        : "E",
        : "e",
        : "e",
        : "e",
        : "e",
        : "e",
        : "G",
        : "G",
        : "G",
        : "G",
        : "g",
        : "g",
        : "g",
        : "g",
        : "H",
        : "H",
        : "h",
        : "h",
        : "I",
        : "I",
        : "I",
        : "I",
        : "I",
        : "i",
        : "i",
        : "i",
        : "i",
        : "i",
        : "J",
        : "j",
        : "K",
        : "k",
        : "k",
        : "L",
        : "L",
        : "L",
        : "L",
        : "L",
        : "l",
        : "l",
        : "l",
        : "l",
        : "l",
        : "N",
        : "N",
        : "N",
        : "N",
        : "n",
        : "n",
        : "n",
        : "n",
        : "O",
        : "O",
        : "O",
        : "o",
        : "o",
        : "o",
        : "R",
        : "R",
        : "R",
        : "r",
        : "r",
        : "r",
        : "S",
        : "S",
        : "S",
        : "S",
        : "s",
        : "s",
        : "s",
        : "s",
        : "T",
        : "T",
        : "T",
        : "t",
        : "t",
        : "t",
        : "U",
        : "U",
        : "U",
        : "U",
        : "U",
        : "U",
        : "u",
        : "u",
        : "u",
        : "u",
        : "u",
        : "u",
        : "W",
        : "w",
        : "Y",
        : "y",
        : "Y",
        : "Z",
        : "Z",
        : "Z",
        : "z",
        : "z",
        : "z",
        : "IJ",
        : "ij",
        : "Oe",
        : "oe",
        : "'n",
        : "s",
      },
      Pb = {
        "&": "&amp;",
        "<": "&lt;",
        ">": "&gt;",
        '"': "&quot;",
        "'": "&#39;",
      },
      _b = {
        "&amp;": "&",
        "&lt;": "<",
        "&gt;": ">",
        "&quot;": '"',
        "&#39;": "'",
      },
      Nb = {
        "\\": "\\",
        "'": "'",
        "\n": "n",
        "\r": "r",
        "\u2028": "u2028",
        "\u2029": "u2029",
      },
      zb = parseFloat,
      Bb = parseInt,
      _h = typeof _o == "object" && _o && _o.Object === Object && _o,
      Fb = typeof self == "object" && self && self.Object === Object && self,
      Ht = _h || Fb || Function("return this")(),
      $c = e && !e.nodeType && e,
      Fi = $c && !0 && n && !n.nodeType && n,
      Nh = Fi && Fi.exports === $c,
      jc = Nh && _h.process,
      Un = (function () {
        try {
          var z = Fi && Fi.require && Fi.require("util").types;
          return z || (jc && jc.binding && jc.binding("util"));
        } catch {}
      })(),
      zh = Un && Un.isArrayBuffer,
      Bh = Un && Un.isDate,
      Fh = Un && Un.isMap,
      Wh = Un && Un.isRegExp,
      Vh = Un && Un.isSet,
      Hh = Un && Un.isTypedArray;
    function In(z, q, V) {
      switch (V.length) {
        case 0:
          return z.call(q);
        case 1:
          return z.call(q, V[0]);
        case 2:
          return z.call(q, V[0], V[1]);
        case 3:
          return z.call(q, V[0], V[1], V[2]);
      }
      return z.apply(q, V);
    }
    function Wb(z, q, V, Ce) {
      for (var je = -1, it = z == null ? 0 : z.length; ++je < it; ) {
        var Lt = z[je];
        q(Ce, Lt, V(Lt), z);
      }
      return Ce;
    }
    function Zn(z, q) {
      for (
        var V = -1, Ce = z == null ? 0 : z.length;
        ++V < Ce && q(z[V], V, z) !== !1;

      );
      return z;
    }
    function Vb(z, q) {
      for (var V = z == null ? 0 : z.length; V-- && q(z[V], V, z) !== !1; );
      return z;
    }
    function $h(z, q) {
      for (var V = -1, Ce = z == null ? 0 : z.length; ++V < Ce; )
        if (!q(z[V], V, z)) return !1;
      return !0;
    }
    function ri(z, q) {
      for (
        var V = -1, Ce = z == null ? 0 : z.length, je = 0, it = [];
        ++V < Ce;

      ) {
        var Lt = z[V];
        q(Lt, V, z) && (it[je++] = Lt);
      }
      return it;
    }
    function ka(z, q) {
      var V = z == null ? 0 : z.length;
      return !!V && bo(z, q, 0) > -1;
    }
    function Uc(z, q, V) {
      for (var Ce = -1, je = z == null ? 0 : z.length; ++Ce < je; )
        if (V(q, z[Ce])) return !0;
      return !1;
    }
    function St(z, q) {
      for (
        var V = -1, Ce = z == null ? 0 : z.length, je = Array(Ce);
        ++V < Ce;

      )
        je[V] = q(z[V], V, z);
      return je;
    }
    function ii(z, q) {
      for (var V = -1, Ce = q.length, je = z.length; ++V < Ce; )
        z[je + V] = q[V];
      return z;
    }
    function Zc(z, q, V, Ce) {
      var je = -1,
        it = z == null ? 0 : z.length;
      for (Ce && it && (V = z[++je]); ++je < it; ) V = q(V, z[je], je, z);
      return V;
    }
    function Hb(z, q, V, Ce) {
      var je = z == null ? 0 : z.length;
      for (Ce && je && (V = z[--je]); je--; ) V = q(V, z[je], je, z);
      return V;
    }
    function Yc(z, q) {
      for (var V = -1, Ce = z == null ? 0 : z.length; ++V < Ce; )
        if (q(z[V], V, z)) return !0;
      return !1;
    }
    var $b = qc("length");
    function jb(z) {
      return z.split("");
    }
    function Ub(z) {
      return z.match(Qw) || [];
    }
    function jh(z, q, V) {
      var Ce;
      return (
        V(z, function (je, it, Lt) {
          if (q(je, it, Lt)) return (Ce = it), !1;
        }),
        Ce
      );
    }
    function Oa(z, q, V, Ce) {
      for (var je = z.length, it = V + (Ce ? 1 : -1); Ce ? it-- : ++it < je; )
        if (q(z[it], it, z)) return it;
      return -1;
    }
    function bo(z, q, V) {
      return q === q ? rx(z, q, V) : Oa(z, Uh, V);
    }
    function Zb(z, q, V, Ce) {
      for (var je = V - 1, it = z.length; ++je < it; )
        if (Ce(z[je], q)) return je;
      return -1;
    }
    function Uh(z) {
      return z !== z;
    }
    function Zh(z, q) {
      var V = z == null ? 0 : z.length;
      return V ? Kc(z, q) / V : be;
    }
    function qc(z) {
      return function (q) {
        return q == null ? t : q[z];
      };
    }
    function Gc(z) {
      return function (q) {
        return z == null ? t : z[q];
      };
    }
    function Yh(z, q, V, Ce, je) {
      return (
        je(z, function (it, Lt, gt) {
          V = Ce ? ((Ce = !1), it) : q(V, it, Lt, gt);
        }),
        V
      );
    }
    function Yb(z, q) {
      var V = z.length;
      for (z.sort(q); V--; ) z[V] = z[V].value;
      return z;
    }
    function Kc(z, q) {
      for (var V, Ce = -1, je = z.length; ++Ce < je; ) {
        var it = q(z[Ce]);
        it !== t && (V = V === t ? it : V + it);
      }
      return V;
    }
    function Xc(z, q) {
      for (var V = -1, Ce = Array(z); ++V < z; ) Ce[V] = q(V);
      return Ce;
    }
    function qb(z, q) {
      return St(q, function (V) {
        return [V, z[V]];
      });
    }
    function qh(z) {
      return z && z.slice(0, Jh(z) + 1).replace(ni, "");
    }
    function An(z) {
      return function (q) {
        return z(q);
      };
    }
    function Jc(z, q) {
      return St(q, function (V) {
        return z[V];
      });
    }
    function ls(z, q) {
      return z.has(q);
    }
    function Gh(z, q) {
      for (var V = -1, Ce = z.length; ++V < Ce && bo(q, z[V], 0) > -1; );
      return V;
    }
    function Kh(z, q) {
      for (var V = z.length; V-- && bo(q, z[V], 0) > -1; );
      return V;
    }
    function Gb(z, q) {
      for (var V = z.length, Ce = 0; V--; ) z[V] === q && ++Ce;
      return Ce;
    }
    var Kb = Gc(Lb),
      Xb = Gc(Pb);
    function Jb(z) {
      return "\\" + Nb[z];
    }
    function Qb(z, q) {
      return z == null ? t : z[q];
    }
    function xo(z) {
      return Rb.test(z);
    }
    function ex(z) {
      return Db.test(z);
    }
    function tx(z) {
      for (var q, V = []; !(q = z.next()).done; ) V.push(q.value);
      return V;
    }
    function Qc(z) {
      var q = -1,
        V = Array(z.size);
      return (
        z.forEach(function (Ce, je) {
          V[++q] = [je, Ce];
        }),
        V
      );
    }
    function Xh(z, q) {
      return function (V) {
        return z(q(V));
      };
    }
    function oi(z, q) {
      for (var V = -1, Ce = z.length, je = 0, it = []; ++V < Ce; ) {
        var Lt = z[V];
        (Lt === q || Lt === h) && ((z[V] = h), (it[je++] = V));
      }
      return it;
    }
    function Ta(z) {
      var q = -1,
        V = Array(z.size);
      return (
        z.forEach(function (Ce) {
          V[++q] = Ce;
        }),
        V
      );
    }
    function nx(z) {
      var q = -1,
        V = Array(z.size);
      return (
        z.forEach(function (Ce) {
          V[++q] = [Ce, Ce];
        }),
        V
      );
    }
    function rx(z, q, V) {
      for (var Ce = V - 1, je = z.length; ++Ce < je; )
        if (z[Ce] === q) return Ce;
      return -1;
    }
    function ix(z, q, V) {
      for (var Ce = V + 1; Ce--; ) if (z[Ce] === q) return Ce;
      return Ce;
    }
    function So(z) {
      return xo(z) ? sx(z) : $b(z);
    }
    function sr(z) {
      return xo(z) ? ax(z) : jb(z);
    }
    function Jh(z) {
      for (var q = z.length; q-- && xa.test(z.charAt(q)); );
      return q;
    }
    var ox = Gc(_b);
    function sx(z) {
      for (var q = (Hc.lastIndex = 0); Hc.test(z); ) ++q;
      return q;
    }
    function ax(z) {
      return z.match(Hc) || [];
    }
    function lx(z) {
      return z.match(Mb) || [];
    }
    var cx = function z(q) {
        q = q == null ? Ht : Co.defaults(Ht.Object(), q, Co.pick(Ht, Ib));
        var V = q.Array,
          Ce = q.Date,
          je = q.Error,
          it = q.Function,
          Lt = q.Math,
          gt = q.Object,
          eu = q.RegExp,
          ux = q.String,
          Yn = q.TypeError,
          Ma = V.prototype,
          dx = it.prototype,
          Eo = gt.prototype,
          Ra = q["__core-js_shared__"],
          Da = dx.toString,
          ht = Eo.hasOwnProperty,
          fx = 0,
          Qh = (function () {
            var s = /[^.]+$/.exec((Ra && Ra.keys && Ra.keys.IE_PROTO) || "");
            return s ? "Symbol(src)_1." + s : "";
          })(),
          Ia = Eo.toString,
          hx = Da.call(gt),
          px = Ht._,
          gx = eu(
            "^" +
              Da.call(ht)
                .replace(Pr, "\\$&")
                .replace(
                  /hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,
                  "$1.*?"
                ) +
              "$"
          ),
          Aa = Nh ? q.Buffer : t,
          si = q.Symbol,
          La = q.Uint8Array,
          ep = Aa ? Aa.allocUnsafe : t,
          Pa = Xh(gt.getPrototypeOf, gt),
          tp = gt.create,
          np = Eo.propertyIsEnumerable,
          _a = Ma.splice,
          rp = si ? si.isConcatSpreadable : t,
          cs = si ? si.iterator : t,
          Wi = si ? si.toStringTag : t,
          Na = (function () {
            try {
              var s = Ui(gt, "defineProperty");
              return s({}, "", {}), s;
            } catch {}
          })(),
          mx = q.clearTimeout !== Ht.clearTimeout && q.clearTimeout,
          yx = Ce && Ce.now !== Ht.Date.now && Ce.now,
          vx = q.setTimeout !== Ht.setTimeout && q.setTimeout,
          za = Lt.ceil,
          Ba = Lt.floor,
          tu = gt.getOwnPropertySymbols,
          wx = Aa ? Aa.isBuffer : t,
          ip = q.isFinite,
          bx = Ma.join,
          xx = Xh(gt.keys, gt),
          Pt = Lt.max,
          Kt = Lt.min,
          Sx = Ce.now,
          Cx = q.parseInt,
          op = Lt.random,
          Ex = Ma.reverse,
          nu = Ui(q, "DataView"),
          us = Ui(q, "Map"),
          ru = Ui(q, "Promise"),
          ko = Ui(q, "Set"),
          ds = Ui(q, "WeakMap"),
          fs = Ui(gt, "create"),
          Fa = ds && new ds(),
          Oo = {},
          kx = Zi(nu),
          Ox = Zi(us),
          Tx = Zi(ru),
          Mx = Zi(ko),
          Rx = Zi(ds),
          Wa = si ? si.prototype : t,
          hs = Wa ? Wa.valueOf : t,
          sp = Wa ? Wa.toString : t;
        function k(s) {
          if (Ot(s) && !Ue(s) && !(s instanceof Je)) {
            if (s instanceof qn) return s;
            if (ht.call(s, "__wrapped__")) return ag(s);
          }
          return new qn(s);
        }
        var To = (function () {
          function s() {}
          return function (c) {
            if (!Et(c)) return {};
            if (tp) return tp(c);
            s.prototype = c;
            var f = new s();
            return (s.prototype = t), f;
          };
        })();
        function Va() {}
        function qn(s, c) {
          (this.__wrapped__ = s),
            (this.__actions__ = []),
            (this.__chain__ = !!c),
            (this.__index__ = 0),
            (this.__values__ = t);
        }
        (k.templateSettings = {
          escape: vn,
          evaluate: Mn,
          interpolate: Rn,
          variable: "",
          imports: { _: k },
        }),
          (k.prototype = Va.prototype),
          (k.prototype.constructor = k),
          (qn.prototype = To(Va.prototype)),
          (qn.prototype.constructor = qn);
        function Je(s) {
          (this.__wrapped__ = s),
            (this.__actions__ = []),
            (this.__dir__ = 1),
            (this.__filtered__ = !1),
            (this.__iteratees__ = []),
            (this.__takeCount__ = Oe),
            (this.__views__ = []);
        }
        function Dx() {
          var s = new Je(this.__wrapped__);
          return (
            (s.__actions__ = wn(this.__actions__)),
            (s.__dir__ = this.__dir__),
            (s.__filtered__ = this.__filtered__),
            (s.__iteratees__ = wn(this.__iteratees__)),
            (s.__takeCount__ = this.__takeCount__),
            (s.__views__ = wn(this.__views__)),
            s
          );
        }
        function Ix() {
          if (this.__filtered__) {
            var s = new Je(this);
            (s.__dir__ = -1), (s.__filtered__ = !0);
          } else (s = this.clone()), (s.__dir__ *= -1);
          return s;
        }
        function Ax() {
          var s = this.__wrapped__.value(),
            c = this.__dir__,
            f = Ue(s),
            v = c < 0,
            C = f ? s.length : 0,
            T = jS(0, C, this.__views__),
            A = T.start,
            P = T.end,
            F = P - A,
            J = v ? P : A - 1,
            Q = this.__iteratees__,
            ie = Q.length,
            me = 0,
            Me = Kt(F, this.__takeCount__);
          if (!f || (!v && C == F && Me == F)) return Dp(s, this.__actions__);
          var Be = [];
          e: for (; F-- && me < Me; ) {
            J += c;
            for (var qe = -1, Fe = s[J]; ++qe < ie; ) {
              var Xe = Q[qe],
                et = Xe.iteratee,
                _n = Xe.type,
                fn = et(Fe);
              if (_n == se) Fe = fn;
              else if (!fn) {
                if (_n == ne) continue e;
                break e;
              }
            }
            Be[me++] = Fe;
          }
          return Be;
        }
        (Je.prototype = To(Va.prototype)), (Je.prototype.constructor = Je);
        function Vi(s) {
          var c = -1,
            f = s == null ? 0 : s.length;
          for (this.clear(); ++c < f; ) {
            var v = s[c];
            this.set(v[0], v[1]);
          }
        }
        function Lx() {
          (this.__data__ = fs ? fs(null) : {}), (this.size = 0);
        }
        function Px(s) {
          var c = this.has(s) && delete this.__data__[s];
          return (this.size -= c ? 1 : 0), c;
        }
        function _x(s) {
          var c = this.__data__;
          if (fs) {
            var f = c[s];
            return f === u ? t : f;
          }
          return ht.call(c, s) ? c[s] : t;
        }
        function Nx(s) {
          var c = this.__data__;
          return fs ? c[s] !== t : ht.call(c, s);
        }
        function zx(s, c) {
          var f = this.__data__;
          return (
            (this.size += this.has(s) ? 0 : 1),
            (f[s] = fs && c === t ? u : c),
            this
          );
        }
        (Vi.prototype.clear = Lx),
          (Vi.prototype.delete = Px),
          (Vi.prototype.get = _x),
          (Vi.prototype.has = Nx),
          (Vi.prototype.set = zx);
        function _r(s) {
          var c = -1,
            f = s == null ? 0 : s.length;
          for (this.clear(); ++c < f; ) {
            var v = s[c];
            this.set(v[0], v[1]);
          }
        }
        function Bx() {
          (this.__data__ = []), (this.size = 0);
        }
        function Fx(s) {
          var c = this.__data__,
            f = Ha(c, s);
          if (f < 0) return !1;
          var v = c.length - 1;
          return f == v ? c.pop() : _a.call(c, f, 1), --this.size, !0;
        }
        function Wx(s) {
          var c = this.__data__,
            f = Ha(c, s);
          return f < 0 ? t : c[f][1];
        }
        function Vx(s) {
          return Ha(this.__data__, s) > -1;
        }
        function Hx(s, c) {
          var f = this.__data__,
            v = Ha(f, s);
          return v < 0 ? (++this.size, f.push([s, c])) : (f[v][1] = c), this;
        }
        (_r.prototype.clear = Bx),
          (_r.prototype.delete = Fx),
          (_r.prototype.get = Wx),
          (_r.prototype.has = Vx),
          (_r.prototype.set = Hx);
        function Nr(s) {
          var c = -1,
            f = s == null ? 0 : s.length;
          for (this.clear(); ++c < f; ) {
            var v = s[c];
            this.set(v[0], v[1]);
          }
        }
        function $x() {
          (this.size = 0),
            (this.__data__ = {
              hash: new Vi(),
              map: new (us || _r)(),
              string: new Vi(),
            });
        }
        function jx(s) {
          var c = el(this, s).delete(s);
          return (this.size -= c ? 1 : 0), c;
        }
        function Ux(s) {
          return el(this, s).get(s);
        }
        function Zx(s) {
          return el(this, s).has(s);
        }
        function Yx(s, c) {
          var f = el(this, s),
            v = f.size;
          return f.set(s, c), (this.size += f.size == v ? 0 : 1), this;
        }
        (Nr.prototype.clear = $x),
          (Nr.prototype.delete = jx),
          (Nr.prototype.get = Ux),
          (Nr.prototype.has = Zx),
          (Nr.prototype.set = Yx);
        function Hi(s) {
          var c = -1,
            f = s == null ? 0 : s.length;
          for (this.__data__ = new Nr(); ++c < f; ) this.add(s[c]);
        }
        function qx(s) {
          return this.__data__.set(s, u), this;
        }
        function Gx(s) {
          return this.__data__.has(s);
        }
        (Hi.prototype.add = Hi.prototype.push = qx), (Hi.prototype.has = Gx);
        function ar(s) {
          var c = (this.__data__ = new _r(s));
          this.size = c.size;
        }
        function Kx() {
          (this.__data__ = new _r()), (this.size = 0);
        }
        function Xx(s) {
          var c = this.__data__,
            f = c.delete(s);
          return (this.size = c.size), f;
        }
        function Jx(s) {
          return this.__data__.get(s);
        }
        function Qx(s) {
          return this.__data__.has(s);
        }
        function eS(s, c) {
          var f = this.__data__;
          if (f instanceof _r) {
            var v = f.__data__;
            if (!us || v.length < i - 1)
              return v.push([s, c]), (this.size = ++f.size), this;
            f = this.__data__ = new Nr(v);
          }
          return f.set(s, c), (this.size = f.size), this;
        }
        (ar.prototype.clear = Kx),
          (ar.prototype.delete = Xx),
          (ar.prototype.get = Jx),
          (ar.prototype.has = Qx),
          (ar.prototype.set = eS);
        function ap(s, c) {
          var f = Ue(s),
            v = !f && Yi(s),
            C = !f && !v && di(s),
            T = !f && !v && !C && Io(s),
            A = f || v || C || T,
            P = A ? Xc(s.length, ux) : [],
            F = P.length;
          for (var J in s)
            (c || ht.call(s, J)) &&
              !(
                A &&
                (J == "length" ||
                  (C && (J == "offset" || J == "parent")) ||
                  (T &&
                    (J == "buffer" ||
                      J == "byteLength" ||
                      J == "byteOffset")) ||
                  Wr(J, F))
              ) &&
              P.push(J);
          return P;
        }
        function lp(s) {
          var c = s.length;
          return c ? s[pu(0, c - 1)] : t;
        }
        function tS(s, c) {
          return tl(wn(s), $i(c, 0, s.length));
        }
        function nS(s) {
          return tl(wn(s));
        }
        function iu(s, c, f) {
          ((f !== t && !lr(s[c], f)) || (f === t && !(c in s))) && zr(s, c, f);
        }
        function ps(s, c, f) {
          var v = s[c];
          (!(ht.call(s, c) && lr(v, f)) || (f === t && !(c in s))) &&
            zr(s, c, f);
        }
        function Ha(s, c) {
          for (var f = s.length; f--; ) if (lr(s[f][0], c)) return f;
          return -1;
        }
        function rS(s, c, f, v) {
          return (
            ai(s, function (C, T, A) {
              c(v, C, f(C), A);
            }),
            v
          );
        }
        function cp(s, c) {
          return s && wr(c, Bt(c), s);
        }
        function iS(s, c) {
          return s && wr(c, xn(c), s);
        }
        function zr(s, c, f) {
          c == "__proto__" && Na
            ? Na(s, c, {
                configurable: !0,
                enumerable: !0,
                value: f,
                writable: !0,
              })
            : (s[c] = f);
        }
        function ou(s, c) {
          for (var f = -1, v = c.length, C = V(v), T = s == null; ++f < v; )
            C[f] = T ? t : Fu(s, c[f]);
          return C;
        }
        function $i(s, c, f) {
          return (
            s === s &&
              (f !== t && (s = s <= f ? s : f),
              c !== t && (s = s >= c ? s : c)),
            s
          );
        }
        function Gn(s, c, f, v, C, T) {
          var A,
            P = c & p,
            F = c & g,
            J = c & y;
          if ((f && (A = C ? f(s, v, C, T) : f(s)), A !== t)) return A;
          if (!Et(s)) return s;
          var Q = Ue(s);
          if (Q) {
            if (((A = ZS(s)), !P)) return wn(s, A);
          } else {
            var ie = Xt(s),
              me = ie == re || ie == Ve;
            if (di(s)) return Lp(s, P);
            if (ie == L || ie == ye || (me && !C)) {
              if (((A = F || me ? {} : Jp(s)), !P))
                return F ? _S(s, iS(A, s)) : PS(s, cp(A, s));
            } else {
              if (!yt[ie]) return C ? s : {};
              A = YS(s, ie, P);
            }
          }
          T || (T = new ar());
          var Me = T.get(s);
          if (Me) return Me;
          T.set(s, A),
            Tg(s)
              ? s.forEach(function (Fe) {
                  A.add(Gn(Fe, c, f, Fe, s, T));
                })
              : kg(s) &&
                s.forEach(function (Fe, Xe) {
                  A.set(Xe, Gn(Fe, c, f, Xe, s, T));
                });
          var Be = J ? (F ? ku : Eu) : F ? xn : Bt,
            qe = Q ? t : Be(s);
          return (
            Zn(qe || s, function (Fe, Xe) {
              qe && ((Xe = Fe), (Fe = s[Xe])),
                ps(A, Xe, Gn(Fe, c, f, Xe, s, T));
            }),
            A
          );
        }
        function oS(s) {
          var c = Bt(s);
          return function (f) {
            return up(f, s, c);
          };
        }
        function up(s, c, f) {
          var v = f.length;
          if (s == null) return !v;
          for (s = gt(s); v--; ) {
            var C = f[v],
              T = c[C],
              A = s[C];
            if ((A === t && !(C in s)) || !T(A)) return !1;
          }
          return !0;
        }
        function dp(s, c, f) {
          if (typeof s != "function") throw new Yn(a);
          return xs(function () {
            s.apply(t, f);
          }, c);
        }
        function gs(s, c, f, v) {
          var C = -1,
            T = ka,
            A = !0,
            P = s.length,
            F = [],
            J = c.length;
          if (!P) return F;
          f && (c = St(c, An(f))),
            v
              ? ((T = Uc), (A = !1))
              : c.length >= i && ((T = ls), (A = !1), (c = new Hi(c)));
          e: for (; ++C < P; ) {
            var Q = s[C],
              ie = f == null ? Q : f(Q);
            if (((Q = v || Q !== 0 ? Q : 0), A && ie === ie)) {
              for (var me = J; me--; ) if (c[me] === ie) continue e;
              F.push(Q);
            } else T(c, ie, v) || F.push(Q);
          }
          return F;
        }
        var ai = Bp(vr),
          fp = Bp(au, !0);
        function sS(s, c) {
          var f = !0;
          return (
            ai(s, function (v, C, T) {
              return (f = !!c(v, C, T)), f;
            }),
            f
          );
        }
        function $a(s, c, f) {
          for (var v = -1, C = s.length; ++v < C; ) {
            var T = s[v],
              A = c(T);
            if (A != null && (P === t ? A === A && !Pn(A) : f(A, P)))
              var P = A,
                F = T;
          }
          return F;
        }
        function aS(s, c, f, v) {
          var C = s.length;
          for (
            f = Ye(f),
              f < 0 && (f = -f > C ? 0 : C + f),
              v = v === t || v > C ? C : Ye(v),
              v < 0 && (v += C),
              v = f > v ? 0 : Rg(v);
            f < v;

          )
            s[f++] = c;
          return s;
        }
        function hp(s, c) {
          var f = [];
          return (
            ai(s, function (v, C, T) {
              c(v, C, T) && f.push(v);
            }),
            f
          );
        }
        function $t(s, c, f, v, C) {
          var T = -1,
            A = s.length;
          for (f || (f = GS), C || (C = []); ++T < A; ) {
            var P = s[T];
            c > 0 && f(P)
              ? c > 1
                ? $t(P, c - 1, f, v, C)
                : ii(C, P)
              : v || (C[C.length] = P);
          }
          return C;
        }
        var su = Fp(),
          pp = Fp(!0);
        function vr(s, c) {
          return s && su(s, c, Bt);
        }
        function au(s, c) {
          return s && pp(s, c, Bt);
        }
        function ja(s, c) {
          return ri(c, function (f) {
            return Vr(s[f]);
          });
        }
        function ji(s, c) {
          c = ci(c, s);
          for (var f = 0, v = c.length; s != null && f < v; ) s = s[br(c[f++])];
          return f && f == v ? s : t;
        }
        function gp(s, c, f) {
          var v = c(s);
          return Ue(s) ? v : ii(v, f(s));
        }
        function un(s) {
          return s == null
            ? s === t
              ? Ct
              : _
            : Wi && Wi in gt(s)
            ? $S(s)
            : nC(s);
        }
        function lu(s, c) {
          return s > c;
        }
        function lS(s, c) {
          return s != null && ht.call(s, c);
        }
        function cS(s, c) {
          return s != null && c in gt(s);
        }
        function uS(s, c, f) {
          return s >= Kt(c, f) && s < Pt(c, f);
        }
        function cu(s, c, f) {
          for (
            var v = f ? Uc : ka,
              C = s[0].length,
              T = s.length,
              A = T,
              P = V(T),
              F = 1 / 0,
              J = [];
            A--;

          ) {
            var Q = s[A];
            A && c && (Q = St(Q, An(c))),
              (F = Kt(Q.length, F)),
              (P[A] =
                !f && (c || (C >= 120 && Q.length >= 120))
                  ? new Hi(A && Q)
                  : t);
          }
          Q = s[0];
          var ie = -1,
            me = P[0];
          e: for (; ++ie < C && J.length < F; ) {
            var Me = Q[ie],
              Be = c ? c(Me) : Me;
            if (
              ((Me = f || Me !== 0 ? Me : 0), !(me ? ls(me, Be) : v(J, Be, f)))
            ) {
              for (A = T; --A; ) {
                var qe = P[A];
                if (!(qe ? ls(qe, Be) : v(s[A], Be, f))) continue e;
              }
              me && me.push(Be), J.push(Me);
            }
          }
          return J;
        }
        function dS(s, c, f, v) {
          return (
            vr(s, function (C, T, A) {
              c(v, f(C), T, A);
            }),
            v
          );
        }
        function ms(s, c, f) {
          (c = ci(c, s)), (s = ng(s, c));
          var v = s == null ? s : s[br(Xn(c))];
          return v == null ? t : In(v, s, f);
        }
        function mp(s) {
          return Ot(s) && un(s) == ye;
        }
        function fS(s) {
          return Ot(s) && un(s) == ve;
        }
        function hS(s) {
          return Ot(s) && un(s) == Se;
        }
        function ys(s, c, f, v, C) {
          return s === c
            ? !0
            : s == null || c == null || (!Ot(s) && !Ot(c))
            ? s !== s && c !== c
            : pS(s, c, f, v, ys, C);
        }
        function pS(s, c, f, v, C, T) {
          var A = Ue(s),
            P = Ue(c),
            F = A ? Z : Xt(s),
            J = P ? Z : Xt(c);
          (F = F == ye ? L : F), (J = J == ye ? L : J);
          var Q = F == L,
            ie = J == L,
            me = F == J;
          if (me && di(s)) {
            if (!di(c)) return !1;
            (A = !0), (Q = !1);
          }
          if (me && !Q)
            return (
              T || (T = new ar()),
              A || Io(s) ? Gp(s, c, f, v, C, T) : VS(s, c, F, f, v, C, T)
            );
          if (!(f & m)) {
            var Me = Q && ht.call(s, "__wrapped__"),
              Be = ie && ht.call(c, "__wrapped__");
            if (Me || Be) {
              var qe = Me ? s.value() : s,
                Fe = Be ? c.value() : c;
              return T || (T = new ar()), C(qe, Fe, f, v, T);
            }
          }
          return me ? (T || (T = new ar()), HS(s, c, f, v, C, T)) : !1;
        }
        function gS(s) {
          return Ot(s) && Xt(s) == Ne;
        }
        function uu(s, c, f, v) {
          var C = f.length,
            T = C,
            A = !v;
          if (s == null) return !T;
          for (s = gt(s); C--; ) {
            var P = f[C];
            if (A && P[2] ? P[1] !== s[P[0]] : !(P[0] in s)) return !1;
          }
          for (; ++C < T; ) {
            P = f[C];
            var F = P[0],
              J = s[F],
              Q = P[1];
            if (A && P[2]) {
              if (J === t && !(F in s)) return !1;
            } else {
              var ie = new ar();
              if (v) var me = v(J, Q, F, s, c, ie);
              if (!(me === t ? ys(Q, J, m | w, v, ie) : me)) return !1;
            }
          }
          return !0;
        }
        function yp(s) {
          if (!Et(s) || XS(s)) return !1;
          var c = Vr(s) ? gx : ob;
          return c.test(Zi(s));
        }
        function mS(s) {
          return Ot(s) && un(s) == fe;
        }
        function yS(s) {
          return Ot(s) && Xt(s) == ge;
        }
        function vS(s) {
          return Ot(s) && al(s.length) && !!bt[un(s)];
        }
        function vp(s) {
          return typeof s == "function"
            ? s
            : s == null
            ? Sn
            : typeof s == "object"
            ? Ue(s)
              ? xp(s[0], s[1])
              : bp(s)
            : Wg(s);
        }
        function du(s) {
          if (!bs(s)) return xx(s);
          var c = [];
          for (var f in gt(s)) ht.call(s, f) && f != "constructor" && c.push(f);
          return c;
        }
        function wS(s) {
          if (!Et(s)) return tC(s);
          var c = bs(s),
            f = [];
          for (var v in s)
            (v == "constructor" && (c || !ht.call(s, v))) || f.push(v);
          return f;
        }
        function fu(s, c) {
          return s < c;
        }
        function wp(s, c) {
          var f = -1,
            v = bn(s) ? V(s.length) : [];
          return (
            ai(s, function (C, T, A) {
              v[++f] = c(C, T, A);
            }),
            v
          );
        }
        function bp(s) {
          var c = Tu(s);
          return c.length == 1 && c[0][2]
            ? eg(c[0][0], c[0][1])
            : function (f) {
                return f === s || uu(f, s, c);
              };
        }
        function xp(s, c) {
          return Ru(s) && Qp(c)
            ? eg(br(s), c)
            : function (f) {
                var v = Fu(f, s);
                return v === t && v === c ? Wu(f, s) : ys(c, v, m | w);
              };
        }
        function Ua(s, c, f, v, C) {
          s !== c &&
            su(
              c,
              function (T, A) {
                if ((C || (C = new ar()), Et(T))) bS(s, c, A, f, Ua, v, C);
                else {
                  var P = v ? v(Iu(s, A), T, A + "", s, c, C) : t;
                  P === t && (P = T), iu(s, A, P);
                }
              },
              xn
            );
        }
        function bS(s, c, f, v, C, T, A) {
          var P = Iu(s, f),
            F = Iu(c, f),
            J = A.get(F);
          if (J) {
            iu(s, f, J);
            return;
          }
          var Q = T ? T(P, F, f + "", s, c, A) : t,
            ie = Q === t;
          if (ie) {
            var me = Ue(F),
              Me = !me && di(F),
              Be = !me && !Me && Io(F);
            (Q = F),
              me || Me || Be
                ? Ue(P)
                  ? (Q = P)
                  : Mt(P)
                  ? (Q = wn(P))
                  : Me
                  ? ((ie = !1), (Q = Lp(F, !0)))
                  : Be
                  ? ((ie = !1), (Q = Pp(F, !0)))
                  : (Q = [])
                : Ss(F) || Yi(F)
                ? ((Q = P),
                  Yi(P) ? (Q = Dg(P)) : (!Et(P) || Vr(P)) && (Q = Jp(F)))
                : (ie = !1);
          }
          ie && (A.set(F, Q), C(Q, F, v, T, A), A.delete(F)), iu(s, f, Q);
        }
        function Sp(s, c) {
          var f = s.length;
          if (f) return (c += c < 0 ? f : 0), Wr(c, f) ? s[c] : t;
        }
        function Cp(s, c, f) {
          c.length
            ? (c = St(c, function (T) {
                return Ue(T)
                  ? function (A) {
                      return ji(A, T.length === 1 ? T[0] : T);
                    }
                  : T;
              }))
            : (c = [Sn]);
          var v = -1;
          c = St(c, An(_e()));
          var C = wp(s, function (T, A, P) {
            var F = St(c, function (J) {
              return J(T);
            });
            return { criteria: F, index: ++v, value: T };
          });
          return Yb(C, function (T, A) {
            return LS(T, A, f);
          });
        }
        function xS(s, c) {
          return Ep(s, c, function (f, v) {
            return Wu(s, v);
          });
        }
        function Ep(s, c, f) {
          for (var v = -1, C = c.length, T = {}; ++v < C; ) {
            var A = c[v],
              P = ji(s, A);
            f(P, A) && vs(T, ci(A, s), P);
          }
          return T;
        }
        function SS(s) {
          return function (c) {
            return ji(c, s);
          };
        }
        function hu(s, c, f, v) {
          var C = v ? Zb : bo,
            T = -1,
            A = c.length,
            P = s;
          for (s === c && (c = wn(c)), f && (P = St(s, An(f))); ++T < A; )
            for (
              var F = 0, J = c[T], Q = f ? f(J) : J;
              (F = C(P, Q, F, v)) > -1;

            )
              P !== s && _a.call(P, F, 1), _a.call(s, F, 1);
          return s;
        }
        function kp(s, c) {
          for (var f = s ? c.length : 0, v = f - 1; f--; ) {
            var C = c[f];
            if (f == v || C !== T) {
              var T = C;
              Wr(C) ? _a.call(s, C, 1) : yu(s, C);
            }
          }
          return s;
        }
        function pu(s, c) {
          return s + Ba(op() * (c - s + 1));
        }
        function CS(s, c, f, v) {
          for (var C = -1, T = Pt(za((c - s) / (f || 1)), 0), A = V(T); T--; )
            (A[v ? T : ++C] = s), (s += f);
          return A;
        }
        function gu(s, c) {
          var f = "";
          if (!s || c < 1 || c > pe) return f;
          do c % 2 && (f += s), (c = Ba(c / 2)), c && (s += s);
          while (c);
          return f;
        }
        function Ge(s, c) {
          return Au(tg(s, c, Sn), s + "");
        }
        function ES(s) {
          return lp(Ao(s));
        }
        function kS(s, c) {
          var f = Ao(s);
          return tl(f, $i(c, 0, f.length));
        }
        function vs(s, c, f, v) {
          if (!Et(s)) return s;
          c = ci(c, s);
          for (
            var C = -1, T = c.length, A = T - 1, P = s;
            P != null && ++C < T;

          ) {
            var F = br(c[C]),
              J = f;
            if (F === "__proto__" || F === "constructor" || F === "prototype")
              return s;
            if (C != A) {
              var Q = P[F];
              (J = v ? v(Q, F, P) : t),
                J === t && (J = Et(Q) ? Q : Wr(c[C + 1]) ? [] : {});
            }
            ps(P, F, J), (P = P[F]);
          }
          return s;
        }
        var Op = Fa
            ? function (s, c) {
                return Fa.set(s, c), s;
              }
            : Sn,
          OS = Na
            ? function (s, c) {
                return Na(s, "toString", {
                  configurable: !0,
                  enumerable: !1,
                  value: Hu(c),
                  writable: !0,
                });
              }
            : Sn;
        function TS(s) {
          return tl(Ao(s));
        }
        function Kn(s, c, f) {
          var v = -1,
            C = s.length;
          c < 0 && (c = -c > C ? 0 : C + c),
            (f = f > C ? C : f),
            f < 0 && (f += C),
            (C = c > f ? 0 : (f - c) >>> 0),
            (c >>>= 0);
          for (var T = V(C); ++v < C; ) T[v] = s[v + c];
          return T;
        }
        function MS(s, c) {
          var f;
          return (
            ai(s, function (v, C, T) {
              return (f = c(v, C, T)), !f;
            }),
            !!f
          );
        }
        function Za(s, c, f) {
          var v = 0,
            C = s == null ? v : s.length;
          if (typeof c == "number" && c === c && C <= xe) {
            for (; v < C; ) {
              var T = (v + C) >>> 1,
                A = s[T];
              A !== null && !Pn(A) && (f ? A <= c : A < c)
                ? (v = T + 1)
                : (C = T);
            }
            return C;
          }
          return mu(s, c, Sn, f);
        }
        function mu(s, c, f, v) {
          var C = 0,
            T = s == null ? 0 : s.length;
          if (T === 0) return 0;
          c = f(c);
          for (
            var A = c !== c, P = c === null, F = Pn(c), J = c === t;
            C < T;

          ) {
            var Q = Ba((C + T) / 2),
              ie = f(s[Q]),
              me = ie !== t,
              Me = ie === null,
              Be = ie === ie,
              qe = Pn(ie);
            if (A) var Fe = v || Be;
            else
              J
                ? (Fe = Be && (v || me))
                : P
                ? (Fe = Be && me && (v || !Me))
                : F
                ? (Fe = Be && me && !Me && (v || !qe))
                : Me || qe
                ? (Fe = !1)
                : (Fe = v ? ie <= c : ie < c);
            Fe ? (C = Q + 1) : (T = Q);
          }
          return Kt(T, de);
        }
        function Tp(s, c) {
          for (var f = -1, v = s.length, C = 0, T = []; ++f < v; ) {
            var A = s[f],
              P = c ? c(A) : A;
            if (!f || !lr(P, F)) {
              var F = P;
              T[C++] = A === 0 ? 0 : A;
            }
          }
          return T;
        }
        function Mp(s) {
          return typeof s == "number" ? s : Pn(s) ? be : +s;
        }
        function Ln(s) {
          if (typeof s == "string") return s;
          if (Ue(s)) return St(s, Ln) + "";
          if (Pn(s)) return sp ? sp.call(s) : "";
          var c = s + "";
          return c == "0" && 1 / s == -le ? "-0" : c;
        }
        function li(s, c, f) {
          var v = -1,
            C = ka,
            T = s.length,
            A = !0,
            P = [],
            F = P;
          if (f) (A = !1), (C = Uc);
          else if (T >= i) {
            var J = c ? null : FS(s);
            if (J) return Ta(J);
            (A = !1), (C = ls), (F = new Hi());
          } else F = c ? [] : P;
          e: for (; ++v < T; ) {
            var Q = s[v],
              ie = c ? c(Q) : Q;
            if (((Q = f || Q !== 0 ? Q : 0), A && ie === ie)) {
              for (var me = F.length; me--; ) if (F[me] === ie) continue e;
              c && F.push(ie), P.push(Q);
            } else C(F, ie, f) || (F !== P && F.push(ie), P.push(Q));
          }
          return P;
        }
        function yu(s, c) {
          return (
            (c = ci(c, s)), (s = ng(s, c)), s == null || delete s[br(Xn(c))]
          );
        }
        function Rp(s, c, f, v) {
          return vs(s, c, f(ji(s, c)), v);
        }
        function Ya(s, c, f, v) {
          for (
            var C = s.length, T = v ? C : -1;
            (v ? T-- : ++T < C) && c(s[T], T, s);

          );
          return f
            ? Kn(s, v ? 0 : T, v ? T + 1 : C)
            : Kn(s, v ? T + 1 : 0, v ? C : T);
        }
        function Dp(s, c) {
          var f = s;
          return (
            f instanceof Je && (f = f.value()),
            Zc(
              c,
              function (v, C) {
                return C.func.apply(C.thisArg, ii([v], C.args));
              },
              f
            )
          );
        }
        function vu(s, c, f) {
          var v = s.length;
          if (v < 2) return v ? li(s[0]) : [];
          for (var C = -1, T = V(v); ++C < v; )
            for (var A = s[C], P = -1; ++P < v; )
              P != C && (T[C] = gs(T[C] || A, s[P], c, f));
          return li($t(T, 1), c, f);
        }
        function Ip(s, c, f) {
          for (var v = -1, C = s.length, T = c.length, A = {}; ++v < C; ) {
            var P = v < T ? c[v] : t;
            f(A, s[v], P);
          }
          return A;
        }
        function wu(s) {
          return Mt(s) ? s : [];
        }
        function bu(s) {
          return typeof s == "function" ? s : Sn;
        }
        function ci(s, c) {
          return Ue(s) ? s : Ru(s, c) ? [s] : sg(lt(s));
        }
        var RS = Ge;
        function ui(s, c, f) {
          var v = s.length;
          return (f = f === t ? v : f), !c && f >= v ? s : Kn(s, c, f);
        }
        var Ap =
          mx ||
          function (s) {
            return Ht.clearTimeout(s);
          };
        function Lp(s, c) {
          if (c) return s.slice();
          var f = s.length,
            v = ep ? ep(f) : new s.constructor(f);
          return s.copy(v), v;
        }
        function xu(s) {
          var c = new s.constructor(s.byteLength);
          return new La(c).set(new La(s)), c;
        }
        function DS(s, c) {
          var f = c ? xu(s.buffer) : s.buffer;
          return new s.constructor(f, s.byteOffset, s.byteLength);
        }
        function IS(s) {
          var c = new s.constructor(s.source, mh.exec(s));
          return (c.lastIndex = s.lastIndex), c;
        }
        function AS(s) {
          return hs ? gt(hs.call(s)) : {};
        }
        function Pp(s, c) {
          var f = c ? xu(s.buffer) : s.buffer;
          return new s.constructor(f, s.byteOffset, s.length);
        }
        function _p(s, c) {
          if (s !== c) {
            var f = s !== t,
              v = s === null,
              C = s === s,
              T = Pn(s),
              A = c !== t,
              P = c === null,
              F = c === c,
              J = Pn(c);
            if (
              (!P && !J && !T && s > c) ||
              (T && A && F && !P && !J) ||
              (v && A && F) ||
              (!f && F) ||
              !C
            )
              return 1;
            if (
              (!v && !T && !J && s < c) ||
              (J && f && C && !v && !T) ||
              (P && f && C) ||
              (!A && C) ||
              !F
            )
              return -1;
          }
          return 0;
        }
        function LS(s, c, f) {
          for (
            var v = -1,
              C = s.criteria,
              T = c.criteria,
              A = C.length,
              P = f.length;
            ++v < A;

          ) {
            var F = _p(C[v], T[v]);
            if (F) {
              if (v >= P) return F;
              var J = f[v];
              return F * (J == "desc" ? -1 : 1);
            }
          }
          return s.index - c.index;
        }
        function Np(s, c, f, v) {
          for (
            var C = -1,
              T = s.length,
              A = f.length,
              P = -1,
              F = c.length,
              J = Pt(T - A, 0),
              Q = V(F + J),
              ie = !v;
            ++P < F;

          )
            Q[P] = c[P];
          for (; ++C < A; ) (ie || C < T) && (Q[f[C]] = s[C]);
          for (; J--; ) Q[P++] = s[C++];
          return Q;
        }
        function zp(s, c, f, v) {
          for (
            var C = -1,
              T = s.length,
              A = -1,
              P = f.length,
              F = -1,
              J = c.length,
              Q = Pt(T - P, 0),
              ie = V(Q + J),
              me = !v;
            ++C < Q;

          )
            ie[C] = s[C];
          for (var Me = C; ++F < J; ) ie[Me + F] = c[F];
          for (; ++A < P; ) (me || C < T) && (ie[Me + f[A]] = s[C++]);
          return ie;
        }
        function wn(s, c) {
          var f = -1,
            v = s.length;
          for (c || (c = V(v)); ++f < v; ) c[f] = s[f];
          return c;
        }
        function wr(s, c, f, v) {
          var C = !f;
          f || (f = {});
          for (var T = -1, A = c.length; ++T < A; ) {
            var P = c[T],
              F = v ? v(f[P], s[P], P, f, s) : t;
            F === t && (F = s[P]), C ? zr(f, P, F) : ps(f, P, F);
          }
          return f;
        }
        function PS(s, c) {
          return wr(s, Mu(s), c);
        }
        function _S(s, c) {
          return wr(s, Kp(s), c);
        }
        function qa(s, c) {
          return function (f, v) {
            var C = Ue(f) ? Wb : rS,
              T = c ? c() : {};
            return C(f, s, _e(v, 2), T);
          };
        }
        function Mo(s) {
          return Ge(function (c, f) {
            var v = -1,
              C = f.length,
              T = C > 1 ? f[C - 1] : t,
              A = C > 2 ? f[2] : t;
            for (
              T = s.length > 3 && typeof T == "function" ? (C--, T) : t,
                A && dn(f[0], f[1], A) && ((T = C < 3 ? t : T), (C = 1)),
                c = gt(c);
              ++v < C;

            ) {
              var P = f[v];
              P && s(c, P, v, T);
            }
            return c;
          });
        }
        function Bp(s, c) {
          return function (f, v) {
            if (f == null) return f;
            if (!bn(f)) return s(f, v);
            for (
              var C = f.length, T = c ? C : -1, A = gt(f);
              (c ? T-- : ++T < C) && v(A[T], T, A) !== !1;

            );
            return f;
          };
        }
        function Fp(s) {
          return function (c, f, v) {
            for (var C = -1, T = gt(c), A = v(c), P = A.length; P--; ) {
              var F = A[s ? P : ++C];
              if (f(T[F], F, T) === !1) break;
            }
            return c;
          };
        }
        function NS(s, c, f) {
          var v = c & b,
            C = ws(s);
          function T() {
            var A = this && this !== Ht && this instanceof T ? C : s;
            return A.apply(v ? f : this, arguments);
          }
          return T;
        }
        function Wp(s) {
          return function (c) {
            c = lt(c);
            var f = xo(c) ? sr(c) : t,
              v = f ? f[0] : c.charAt(0),
              C = f ? ui(f, 1).join("") : c.slice(1);
            return v[s]() + C;
          };
        }
        function Ro(s) {
          return function (c) {
            return Zc(Bg(zg(c).replace(Ob, "")), s, "");
          };
        }
        function ws(s) {
          return function () {
            var c = arguments;
            switch (c.length) {
              case 0:
                return new s();
              case 1:
                return new s(c[0]);
              case 2:
                return new s(c[0], c[1]);
              case 3:
                return new s(c[0], c[1], c[2]);
              case 4:
                return new s(c[0], c[1], c[2], c[3]);
              case 5:
                return new s(c[0], c[1], c[2], c[3], c[4]);
              case 6:
                return new s(c[0], c[1], c[2], c[3], c[4], c[5]);
              case 7:
                return new s(c[0], c[1], c[2], c[3], c[4], c[5], c[6]);
            }
            var f = To(s.prototype),
              v = s.apply(f, c);
            return Et(v) ? v : f;
          };
        }
        function zS(s, c, f) {
          var v = ws(s);
          function C() {
            for (var T = arguments.length, A = V(T), P = T, F = Do(C); P--; )
              A[P] = arguments[P];
            var J = T < 3 && A[0] !== F && A[T - 1] !== F ? [] : oi(A, F);
            if (((T -= J.length), T < f))
              return Up(s, c, Ga, C.placeholder, t, A, J, t, t, f - T);
            var Q = this && this !== Ht && this instanceof C ? v : s;
            return In(Q, this, A);
          }
          return C;
        }
        function Vp(s) {
          return function (c, f, v) {
            var C = gt(c);
            if (!bn(c)) {
              var T = _e(f, 3);
              (c = Bt(c)),
                (f = function (P) {
                  return T(C[P], P, C);
                });
            }
            var A = s(c, f, v);
            return A > -1 ? C[T ? c[A] : A] : t;
          };
        }
        function Hp(s) {
          return Fr(function (c) {
            var f = c.length,
              v = f,
              C = qn.prototype.thru;
            for (s && c.reverse(); v--; ) {
              var T = c[v];
              if (typeof T != "function") throw new Yn(a);
              if (C && !A && Qa(T) == "wrapper") var A = new qn([], !0);
            }
            for (v = A ? v : f; ++v < f; ) {
              T = c[v];
              var P = Qa(T),
                F = P == "wrapper" ? Ou(T) : t;
              F &&
              Du(F[0]) &&
              F[1] == (N | O | M | Y) &&
              !F[4].length &&
              F[9] == 1
                ? (A = A[Qa(F[0])].apply(A, F[3]))
                : (A = T.length == 1 && Du(T) ? A[P]() : A.thru(T));
            }
            return function () {
              var J = arguments,
                Q = J[0];
              if (A && J.length == 1 && Ue(Q)) return A.plant(Q).value();
              for (var ie = 0, me = f ? c[ie].apply(this, J) : Q; ++ie < f; )
                me = c[ie].call(this, me);
              return me;
            };
          });
        }
        function Ga(s, c, f, v, C, T, A, P, F, J) {
          var Q = c & N,
            ie = c & b,
            me = c & E,
            Me = c & (O | I),
            Be = c & X,
            qe = me ? t : ws(s);
          function Fe() {
            for (var Xe = arguments.length, et = V(Xe), _n = Xe; _n--; )
              et[_n] = arguments[_n];
            if (Me)
              var fn = Do(Fe),
                Nn = Gb(et, fn);
            if (
              (v && (et = Np(et, v, C, Me)),
              T && (et = zp(et, T, A, Me)),
              (Xe -= Nn),
              Me && Xe < J)
            ) {
              var Rt = oi(et, fn);
              return Up(s, c, Ga, Fe.placeholder, f, et, Rt, P, F, J - Xe);
            }
            var cr = ie ? f : this,
              $r = me ? cr[s] : s;
            return (
              (Xe = et.length),
              P ? (et = rC(et, P)) : Be && Xe > 1 && et.reverse(),
              Q && F < Xe && (et.length = F),
              this && this !== Ht && this instanceof Fe && ($r = qe || ws($r)),
              $r.apply(cr, et)
            );
          }
          return Fe;
        }
        function $p(s, c) {
          return function (f, v) {
            return dS(f, s, c(v), {});
          };
        }
        function Ka(s, c) {
          return function (f, v) {
            var C;
            if (f === t && v === t) return c;
            if ((f !== t && (C = f), v !== t)) {
              if (C === t) return v;
              typeof f == "string" || typeof v == "string"
                ? ((f = Ln(f)), (v = Ln(v)))
                : ((f = Mp(f)), (v = Mp(v))),
                (C = s(f, v));
            }
            return C;
          };
        }
        function Su(s) {
          return Fr(function (c) {
            return (
              (c = St(c, An(_e()))),
              Ge(function (f) {
                var v = this;
                return s(c, function (C) {
                  return In(C, v, f);
                });
              })
            );
          });
        }
        function Xa(s, c) {
          c = c === t ? " " : Ln(c);
          var f = c.length;
          if (f < 2) return f ? gu(c, s) : c;
          var v = gu(c, za(s / So(c)));
          return xo(c) ? ui(sr(v), 0, s).join("") : v.slice(0, s);
        }
        function BS(s, c, f, v) {
          var C = c & b,
            T = ws(s);
          function A() {
            for (
              var P = -1,
                F = arguments.length,
                J = -1,
                Q = v.length,
                ie = V(Q + F),
                me = this && this !== Ht && this instanceof A ? T : s;
              ++J < Q;

            )
              ie[J] = v[J];
            for (; F--; ) ie[J++] = arguments[++P];
            return In(me, C ? f : this, ie);
          }
          return A;
        }
        function jp(s) {
          return function (c, f, v) {
            return (
              v && typeof v != "number" && dn(c, f, v) && (f = v = t),
              (c = Hr(c)),
              f === t ? ((f = c), (c = 0)) : (f = Hr(f)),
              (v = v === t ? (c < f ? 1 : -1) : Hr(v)),
              CS(c, f, v, s)
            );
          };
        }
        function Ja(s) {
          return function (c, f) {
            return (
              (typeof c == "string" && typeof f == "string") ||
                ((c = Jn(c)), (f = Jn(f))),
              s(c, f)
            );
          };
        }
        function Up(s, c, f, v, C, T, A, P, F, J) {
          var Q = c & O,
            ie = Q ? A : t,
            me = Q ? t : A,
            Me = Q ? T : t,
            Be = Q ? t : T;
          (c |= Q ? M : D), (c &= ~(Q ? D : M)), c & R || (c &= ~(b | E));
          var qe = [s, c, C, Me, ie, Be, me, P, F, J],
            Fe = f.apply(t, qe);
          return Du(s) && rg(Fe, qe), (Fe.placeholder = v), ig(Fe, s, c);
        }
        function Cu(s) {
          var c = Lt[s];
          return function (f, v) {
            if (
              ((f = Jn(f)), (v = v == null ? 0 : Kt(Ye(v), 292)), v && ip(f))
            ) {
              var C = (lt(f) + "e").split("e"),
                T = c(C[0] + "e" + (+C[1] + v));
              return (
                (C = (lt(T) + "e").split("e")), +(C[0] + "e" + (+C[1] - v))
              );
            }
            return c(f);
          };
        }
        var FS =
          ko && 1 / Ta(new ko([, -0]))[1] == le
            ? function (s) {
                return new ko(s);
              }
            : Uu;
        function Zp(s) {
          return function (c) {
            var f = Xt(c);
            return f == Ne ? Qc(c) : f == ge ? nx(c) : qb(c, s(c));
          };
        }
        function Br(s, c, f, v, C, T, A, P) {
          var F = c & E;
          if (!F && typeof s != "function") throw new Yn(a);
          var J = v ? v.length : 0;
          if (
            (J || ((c &= ~(M | D)), (v = C = t)),
            (A = A === t ? A : Pt(Ye(A), 0)),
            (P = P === t ? P : Ye(P)),
            (J -= C ? C.length : 0),
            c & D)
          ) {
            var Q = v,
              ie = C;
            v = C = t;
          }
          var me = F ? t : Ou(s),
            Me = [s, c, f, v, C, Q, ie, T, A, P];
          if (
            (me && eC(Me, me),
            (s = Me[0]),
            (c = Me[1]),
            (f = Me[2]),
            (v = Me[3]),
            (C = Me[4]),
            (P = Me[9] = Me[9] === t ? (F ? 0 : s.length) : Pt(Me[9] - J, 0)),
            !P && c & (O | I) && (c &= ~(O | I)),
            !c || c == b)
          )
            var Be = NS(s, c, f);
          else
            c == O || c == I
              ? (Be = zS(s, c, P))
              : (c == M || c == (b | M)) && !C.length
              ? (Be = BS(s, c, f, v))
              : (Be = Ga.apply(t, Me));
          var qe = me ? Op : rg;
          return ig(qe(Be, Me), s, c);
        }
        function Yp(s, c, f, v) {
          return s === t || (lr(s, Eo[f]) && !ht.call(v, f)) ? c : s;
        }
        function qp(s, c, f, v, C, T) {
          return (
            Et(s) && Et(c) && (T.set(c, s), Ua(s, c, t, qp, T), T.delete(c)), s
          );
        }
        function WS(s) {
          return Ss(s) ? t : s;
        }
        function Gp(s, c, f, v, C, T) {
          var A = f & m,
            P = s.length,
            F = c.length;
          if (P != F && !(A && F > P)) return !1;
          var J = T.get(s),
            Q = T.get(c);
          if (J && Q) return J == c && Q == s;
          var ie = -1,
            me = !0,
            Me = f & w ? new Hi() : t;
          for (T.set(s, c), T.set(c, s); ++ie < P; ) {
            var Be = s[ie],
              qe = c[ie];
            if (v) var Fe = A ? v(qe, Be, ie, c, s, T) : v(Be, qe, ie, s, c, T);
            if (Fe !== t) {
              if (Fe) continue;
              me = !1;
              break;
            }
            if (Me) {
              if (
                !Yc(c, function (Xe, et) {
                  if (!ls(Me, et) && (Be === Xe || C(Be, Xe, f, v, T)))
                    return Me.push(et);
                })
              ) {
                me = !1;
                break;
              }
            } else if (!(Be === qe || C(Be, qe, f, v, T))) {
              me = !1;
              break;
            }
          }
          return T.delete(s), T.delete(c), me;
        }
        function VS(s, c, f, v, C, T, A) {
          switch (f) {
            case Ie:
              if (s.byteLength != c.byteLength || s.byteOffset != c.byteOffset)
                return !1;
              (s = s.buffer), (c = c.buffer);
            case ve:
              return !(
                s.byteLength != c.byteLength || !T(new La(s), new La(c))
              );
            case K:
            case Se:
            case pt:
              return lr(+s, +c);
            case Ke:
              return s.name == c.name && s.message == c.message;
            case fe:
            case Le:
              return s == c + "";
            case Ne:
              var P = Qc;
            case ge:
              var F = v & m;
              if ((P || (P = Ta), s.size != c.size && !F)) return !1;
              var J = A.get(s);
              if (J) return J == c;
              (v |= w), A.set(s, c);
              var Q = Gp(P(s), P(c), v, C, T, A);
              return A.delete(s), Q;
            case Qe:
              if (hs) return hs.call(s) == hs.call(c);
          }
          return !1;
        }
        function HS(s, c, f, v, C, T) {
          var A = f & m,
            P = Eu(s),
            F = P.length,
            J = Eu(c),
            Q = J.length;
          if (F != Q && !A) return !1;
          for (var ie = F; ie--; ) {
            var me = P[ie];
            if (!(A ? me in c : ht.call(c, me))) return !1;
          }
          var Me = T.get(s),
            Be = T.get(c);
          if (Me && Be) return Me == c && Be == s;
          var qe = !0;
          T.set(s, c), T.set(c, s);
          for (var Fe = A; ++ie < F; ) {
            me = P[ie];
            var Xe = s[me],
              et = c[me];
            if (v) var _n = A ? v(et, Xe, me, c, s, T) : v(Xe, et, me, s, c, T);
            if (!(_n === t ? Xe === et || C(Xe, et, f, v, T) : _n)) {
              qe = !1;
              break;
            }
            Fe || (Fe = me == "constructor");
          }
          if (qe && !Fe) {
            var fn = s.constructor,
              Nn = c.constructor;
            fn != Nn &&
              "constructor" in s &&
              "constructor" in c &&
              !(
                typeof fn == "function" &&
                fn instanceof fn &&
                typeof Nn == "function" &&
                Nn instanceof Nn
              ) &&
              (qe = !1);
          }
          return T.delete(s), T.delete(c), qe;
        }
        function Fr(s) {
          return Au(tg(s, t, ug), s + "");
        }
        function Eu(s) {
          return gp(s, Bt, Mu);
        }
        function ku(s) {
          return gp(s, xn, Kp);
        }
        var Ou = Fa
          ? function (s) {
              return Fa.get(s);
            }
          : Uu;
        function Qa(s) {
          for (
            var c = s.name + "", f = Oo[c], v = ht.call(Oo, c) ? f.length : 0;
            v--;

          ) {
            var C = f[v],
              T = C.func;
            if (T == null || T == s) return C.name;
          }
          return c;
        }
        function Do(s) {
          var c = ht.call(k, "placeholder") ? k : s;
          return c.placeholder;
        }
        function _e() {
          var s = k.iteratee || $u;
          return (
            (s = s === $u ? vp : s),
            arguments.length ? s(arguments[0], arguments[1]) : s
          );
        }
        function el(s, c) {
          var f = s.__data__;
          return KS(c) ? f[typeof c == "string" ? "string" : "hash"] : f.map;
        }
        function Tu(s) {
          for (var c = Bt(s), f = c.length; f--; ) {
            var v = c[f],
              C = s[v];
            c[f] = [v, C, Qp(C)];
          }
          return c;
        }
        function Ui(s, c) {
          var f = Qb(s, c);
          return yp(f) ? f : t;
        }
        function $S(s) {
          var c = ht.call(s, Wi),
            f = s[Wi];
          try {
            s[Wi] = t;
            var v = !0;
          } catch {}
          var C = Ia.call(s);
          return v && (c ? (s[Wi] = f) : delete s[Wi]), C;
        }
        var Mu = tu
            ? function (s) {
                return s == null
                  ? []
                  : ((s = gt(s)),
                    ri(tu(s), function (c) {
                      return np.call(s, c);
                    }));
              }
            : Zu,
          Kp = tu
            ? function (s) {
                for (var c = []; s; ) ii(c, Mu(s)), (s = Pa(s));
                return c;
              }
            : Zu,
          Xt = un;
        ((nu && Xt(new nu(new ArrayBuffer(1))) != Ie) ||
          (us && Xt(new us()) != Ne) ||
          (ru && Xt(ru.resolve()) != B) ||
          (ko && Xt(new ko()) != ge) ||
          (ds && Xt(new ds()) != Ae)) &&
          (Xt = function (s) {
            var c = un(s),
              f = c == L ? s.constructor : t,
              v = f ? Zi(f) : "";
            if (v)
              switch (v) {
                case kx:
                  return Ie;
                case Ox:
                  return Ne;
                case Tx:
                  return B;
                case Mx:
                  return ge;
                case Rx:
                  return Ae;
              }
            return c;
          });
        function jS(s, c, f) {
          for (var v = -1, C = f.length; ++v < C; ) {
            var T = f[v],
              A = T.size;
            switch (T.type) {
              case "drop":
                s += A;
                break;
              case "dropRight":
                c -= A;
                break;
              case "take":
                c = Kt(c, s + A);
                break;
              case "takeRight":
                s = Pt(s, c - A);
                break;
            }
          }
          return { start: s, end: c };
        }
        function US(s) {
          var c = s.match(Bi);
          return c ? c[1].split(as) : [];
        }
        function Xp(s, c, f) {
          c = ci(c, s);
          for (var v = -1, C = c.length, T = !1; ++v < C; ) {
            var A = br(c[v]);
            if (!(T = s != null && f(s, A))) break;
            s = s[A];
          }
          return T || ++v != C
            ? T
            : ((C = s == null ? 0 : s.length),
              !!C && al(C) && Wr(A, C) && (Ue(s) || Yi(s)));
        }
        function ZS(s) {
          var c = s.length,
            f = new s.constructor(c);
          return (
            c &&
              typeof s[0] == "string" &&
              ht.call(s, "index") &&
              ((f.index = s.index), (f.input = s.input)),
            f
          );
        }
        function Jp(s) {
          return typeof s.constructor == "function" && !bs(s) ? To(Pa(s)) : {};
        }
        function YS(s, c, f) {
          var v = s.constructor;
          switch (c) {
            case ve:
              return xu(s);
            case K:
            case Se:
              return new v(+s);
            case Ie:
              return DS(s, f);
            case rt:
            case wt:
            case ze:
            case De:
            case qt:
            case Ar:
            case Lr:
            case ss:
            case yo:
              return Pp(s, f);
            case Ne:
              return new v();
            case pt:
            case Le:
              return new v(s);
            case fe:
              return IS(s);
            case ge:
              return new v();
            case Qe:
              return AS(s);
          }
        }
        function qS(s, c) {
          var f = c.length;
          if (!f) return s;
          var v = f - 1;
          return (
            (c[v] = (f > 1 ? "& " : "") + c[v]),
            (c = c.join(f > 2 ? ", " : " ")),
            s.replace(
              zi,
              `{
/* [wrapped with ` +
                c +
                `] */
`
            )
          );
        }
        function GS(s) {
          return Ue(s) || Yi(s) || !!(rp && s && s[rp]);
        }
        function Wr(s, c) {
          var f = typeof s;
          return (
            (c = c ?? pe),
            !!c &&
              (f == "number" || (f != "symbol" && ab.test(s))) &&
              s > -1 &&
              s % 1 == 0 &&
              s < c
          );
        }
        function dn(s, c, f) {
          if (!Et(f)) return !1;
          var v = typeof c;
          return (
            v == "number" ? bn(f) && Wr(c, f.length) : v == "string" && c in f
          )
            ? lr(f[c], s)
            : !1;
        }
        function Ru(s, c) {
          if (Ue(s)) return !1;
          var f = typeof s;
          return f == "number" ||
            f == "symbol" ||
            f == "boolean" ||
            s == null ||
            Pn(s)
            ? !0
            : Dn.test(s) || !ti.test(s) || (c != null && s in gt(c));
        }
        function KS(s) {
          var c = typeof s;
          return c == "string" ||
            c == "number" ||
            c == "symbol" ||
            c == "boolean"
            ? s !== "__proto__"
            : s === null;
        }
        function Du(s) {
          var c = Qa(s),
            f = k[c];
          if (typeof f != "function" || !(c in Je.prototype)) return !1;
          if (s === f) return !0;
          var v = Ou(f);
          return !!v && s === v[0];
        }
        function XS(s) {
          return !!Qh && Qh in s;
        }
        var JS = Ra ? Vr : Yu;
        function bs(s) {
          var c = s && s.constructor,
            f = (typeof c == "function" && c.prototype) || Eo;
          return s === f;
        }
        function Qp(s) {
          return s === s && !Et(s);
        }
        function eg(s, c) {
          return function (f) {
            return f == null ? !1 : f[s] === c && (c !== t || s in gt(f));
          };
        }
        function QS(s) {
          var c = ol(s, function (v) {
              return f.size === d && f.clear(), v;
            }),
            f = c.cache;
          return c;
        }
        function eC(s, c) {
          var f = s[1],
            v = c[1],
            C = f | v,
            T = C < (b | E | N),
            A =
              (v == N && f == O) ||
              (v == N && f == Y && s[7].length <= c[8]) ||
              (v == (N | Y) && c[7].length <= c[8] && f == O);
          if (!(T || A)) return s;
          v & b && ((s[2] = c[2]), (C |= f & b ? 0 : R));
          var P = c[3];
          if (P) {
            var F = s[3];
            (s[3] = F ? Np(F, P, c[4]) : P), (s[4] = F ? oi(s[3], h) : c[4]);
          }
          return (
            (P = c[5]),
            P &&
              ((F = s[5]),
              (s[5] = F ? zp(F, P, c[6]) : P),
              (s[6] = F ? oi(s[5], h) : c[6])),
            (P = c[7]),
            P && (s[7] = P),
            v & N && (s[8] = s[8] == null ? c[8] : Kt(s[8], c[8])),
            s[9] == null && (s[9] = c[9]),
            (s[0] = c[0]),
            (s[1] = C),
            s
          );
        }
        function tC(s) {
          var c = [];
          if (s != null) for (var f in gt(s)) c.push(f);
          return c;
        }
        function nC(s) {
          return Ia.call(s);
        }
        function tg(s, c, f) {
          return (
            (c = Pt(c === t ? s.length - 1 : c, 0)),
            function () {
              for (
                var v = arguments, C = -1, T = Pt(v.length - c, 0), A = V(T);
                ++C < T;

              )
                A[C] = v[c + C];
              C = -1;
              for (var P = V(c + 1); ++C < c; ) P[C] = v[C];
              return (P[c] = f(A)), In(s, this, P);
            }
          );
        }
        function ng(s, c) {
          return c.length < 2 ? s : ji(s, Kn(c, 0, -1));
        }
        function rC(s, c) {
          for (var f = s.length, v = Kt(c.length, f), C = wn(s); v--; ) {
            var T = c[v];
            s[v] = Wr(T, f) ? C[T] : t;
          }
          return s;
        }
        function Iu(s, c) {
          if (
            !(c === "constructor" && typeof s[c] == "function") &&
            c != "__proto__"
          )
            return s[c];
        }
        var rg = og(Op),
          xs =
            vx ||
            function (s, c) {
              return Ht.setTimeout(s, c);
            },
          Au = og(OS);
        function ig(s, c, f) {
          var v = c + "";
          return Au(s, qS(v, iC(US(v), f)));
        }
        function og(s) {
          var c = 0,
            f = 0;
          return function () {
            var v = Sx(),
              C = te - (v - f);
            if (((f = v), C > 0)) {
              if (++c >= G) return arguments[0];
            } else c = 0;
            return s.apply(t, arguments);
          };
        }
        function tl(s, c) {
          var f = -1,
            v = s.length,
            C = v - 1;
          for (c = c === t ? v : c; ++f < c; ) {
            var T = pu(f, C),
              A = s[T];
            (s[T] = s[f]), (s[f] = A);
          }
          return (s.length = c), s;
        }
        var sg = QS(function (s) {
          var c = [];
          return (
            s.charCodeAt(0) === 46 && c.push(""),
            s.replace(Ni, function (f, v, C, T) {
              c.push(C ? T.replace(tb, "$1") : v || f);
            }),
            c
          );
        });
        function br(s) {
          if (typeof s == "string" || Pn(s)) return s;
          var c = s + "";
          return c == "0" && 1 / s == -le ? "-0" : c;
        }
        function Zi(s) {
          if (s != null) {
            try {
              return Da.call(s);
            } catch {}
            try {
              return s + "";
            } catch {}
          }
          return "";
        }
        function iC(s, c) {
          return (
            Zn(Pe, function (f) {
              var v = "_." + f[0];
              c & f[1] && !ka(s, v) && s.push(v);
            }),
            s.sort()
          );
        }
        function ag(s) {
          if (s instanceof Je) return s.clone();
          var c = new qn(s.__wrapped__, s.__chain__);
          return (
            (c.__actions__ = wn(s.__actions__)),
            (c.__index__ = s.__index__),
            (c.__values__ = s.__values__),
            c
          );
        }
        function oC(s, c, f) {
          (f ? dn(s, c, f) : c === t) ? (c = 1) : (c = Pt(Ye(c), 0));
          var v = s == null ? 0 : s.length;
          if (!v || c < 1) return [];
          for (var C = 0, T = 0, A = V(za(v / c)); C < v; )
            A[T++] = Kn(s, C, (C += c));
          return A;
        }
        function sC(s) {
          for (
            var c = -1, f = s == null ? 0 : s.length, v = 0, C = [];
            ++c < f;

          ) {
            var T = s[c];
            T && (C[v++] = T);
          }
          return C;
        }
        function aC() {
          var s = arguments.length;
          if (!s) return [];
          for (var c = V(s - 1), f = arguments[0], v = s; v--; )
            c[v - 1] = arguments[v];
          return ii(Ue(f) ? wn(f) : [f], $t(c, 1));
        }
        var lC = Ge(function (s, c) {
            return Mt(s) ? gs(s, $t(c, 1, Mt, !0)) : [];
          }),
          cC = Ge(function (s, c) {
            var f = Xn(c);
            return (
              Mt(f) && (f = t), Mt(s) ? gs(s, $t(c, 1, Mt, !0), _e(f, 2)) : []
            );
          }),
          uC = Ge(function (s, c) {
            var f = Xn(c);
            return Mt(f) && (f = t), Mt(s) ? gs(s, $t(c, 1, Mt, !0), t, f) : [];
          });
        function dC(s, c, f) {
          var v = s == null ? 0 : s.length;
          return v
            ? ((c = f || c === t ? 1 : Ye(c)), Kn(s, c < 0 ? 0 : c, v))
            : [];
        }
        function fC(s, c, f) {
          var v = s == null ? 0 : s.length;
          return v
            ? ((c = f || c === t ? 1 : Ye(c)),
              (c = v - c),
              Kn(s, 0, c < 0 ? 0 : c))
            : [];
        }
        function hC(s, c) {
          return s && s.length ? Ya(s, _e(c, 3), !0, !0) : [];
        }
        function pC(s, c) {
          return s && s.length ? Ya(s, _e(c, 3), !0) : [];
        }
        function gC(s, c, f, v) {
          var C = s == null ? 0 : s.length;
          return C
            ? (f && typeof f != "number" && dn(s, c, f) && ((f = 0), (v = C)),
              aS(s, c, f, v))
            : [];
        }
        function lg(s, c, f) {
          var v = s == null ? 0 : s.length;
          if (!v) return -1;
          var C = f == null ? 0 : Ye(f);
          return C < 0 && (C = Pt(v + C, 0)), Oa(s, _e(c, 3), C);
        }
        function cg(s, c, f) {
          var v = s == null ? 0 : s.length;
          if (!v) return -1;
          var C = v - 1;
          return (
            f !== t && ((C = Ye(f)), (C = f < 0 ? Pt(v + C, 0) : Kt(C, v - 1))),
            Oa(s, _e(c, 3), C, !0)
          );
        }
        function ug(s) {
          var c = s == null ? 0 : s.length;
          return c ? $t(s, 1) : [];
        }
        function mC(s) {
          var c = s == null ? 0 : s.length;
          return c ? $t(s, le) : [];
        }
        function yC(s, c) {
          var f = s == null ? 0 : s.length;
          return f ? ((c = c === t ? 1 : Ye(c)), $t(s, c)) : [];
        }
        function vC(s) {
          for (var c = -1, f = s == null ? 0 : s.length, v = {}; ++c < f; ) {
            var C = s[c];
            v[C[0]] = C[1];
          }
          return v;
        }
        function dg(s) {
          return s && s.length ? s[0] : t;
        }
        function wC(s, c, f) {
          var v = s == null ? 0 : s.length;
          if (!v) return -1;
          var C = f == null ? 0 : Ye(f);
          return C < 0 && (C = Pt(v + C, 0)), bo(s, c, C);
        }
        function bC(s) {
          var c = s == null ? 0 : s.length;
          return c ? Kn(s, 0, -1) : [];
        }
        var xC = Ge(function (s) {
            var c = St(s, wu);
            return c.length && c[0] === s[0] ? cu(c) : [];
          }),
          SC = Ge(function (s) {
            var c = Xn(s),
              f = St(s, wu);
            return (
              c === Xn(f) ? (c = t) : f.pop(),
              f.length && f[0] === s[0] ? cu(f, _e(c, 2)) : []
            );
          }),
          CC = Ge(function (s) {
            var c = Xn(s),
              f = St(s, wu);
            return (
              (c = typeof c == "function" ? c : t),
              c && f.pop(),
              f.length && f[0] === s[0] ? cu(f, t, c) : []
            );
          });
        function EC(s, c) {
          return s == null ? "" : bx.call(s, c);
        }
        function Xn(s) {
          var c = s == null ? 0 : s.length;
          return c ? s[c - 1] : t;
        }
        function kC(s, c, f) {
          var v = s == null ? 0 : s.length;
          if (!v) return -1;
          var C = v;
          return (
            f !== t && ((C = Ye(f)), (C = C < 0 ? Pt(v + C, 0) : Kt(C, v - 1))),
            c === c ? ix(s, c, C) : Oa(s, Uh, C, !0)
          );
        }
        function OC(s, c) {
          return s && s.length ? Sp(s, Ye(c)) : t;
        }
        var TC = Ge(fg);
        function fg(s, c) {
          return s && s.length && c && c.length ? hu(s, c) : s;
        }
        function MC(s, c, f) {
          return s && s.length && c && c.length ? hu(s, c, _e(f, 2)) : s;
        }
        function RC(s, c, f) {
          return s && s.length && c && c.length ? hu(s, c, t, f) : s;
        }
        var DC = Fr(function (s, c) {
          var f = s == null ? 0 : s.length,
            v = ou(s, c);
          return (
            kp(
              s,
              St(c, function (C) {
                return Wr(C, f) ? +C : C;
              }).sort(_p)
            ),
            v
          );
        });
        function IC(s, c) {
          var f = [];
          if (!(s && s.length)) return f;
          var v = -1,
            C = [],
            T = s.length;
          for (c = _e(c, 3); ++v < T; ) {
            var A = s[v];
            c(A, v, s) && (f.push(A), C.push(v));
          }
          return kp(s, C), f;
        }
        function Lu(s) {
          return s == null ? s : Ex.call(s);
        }
        function AC(s, c, f) {
          var v = s == null ? 0 : s.length;
          return v
            ? (f && typeof f != "number" && dn(s, c, f)
                ? ((c = 0), (f = v))
                : ((c = c == null ? 0 : Ye(c)), (f = f === t ? v : Ye(f))),
              Kn(s, c, f))
            : [];
        }
        function LC(s, c) {
          return Za(s, c);
        }
        function PC(s, c, f) {
          return mu(s, c, _e(f, 2));
        }
        function _C(s, c) {
          var f = s == null ? 0 : s.length;
          if (f) {
            var v = Za(s, c);
            if (v < f && lr(s[v], c)) return v;
          }
          return -1;
        }
        function NC(s, c) {
          return Za(s, c, !0);
        }
        function zC(s, c, f) {
          return mu(s, c, _e(f, 2), !0);
        }
        function BC(s, c) {
          var f = s == null ? 0 : s.length;
          if (f) {
            var v = Za(s, c, !0) - 1;
            if (lr(s[v], c)) return v;
          }
          return -1;
        }
        function FC(s) {
          return s && s.length ? Tp(s) : [];
        }
        function WC(s, c) {
          return s && s.length ? Tp(s, _e(c, 2)) : [];
        }
        function VC(s) {
          var c = s == null ? 0 : s.length;
          return c ? Kn(s, 1, c) : [];
        }
        function HC(s, c, f) {
          return s && s.length
            ? ((c = f || c === t ? 1 : Ye(c)), Kn(s, 0, c < 0 ? 0 : c))
            : [];
        }
        function $C(s, c, f) {
          var v = s == null ? 0 : s.length;
          return v
            ? ((c = f || c === t ? 1 : Ye(c)),
              (c = v - c),
              Kn(s, c < 0 ? 0 : c, v))
            : [];
        }
        function jC(s, c) {
          return s && s.length ? Ya(s, _e(c, 3), !1, !0) : [];
        }
        function UC(s, c) {
          return s && s.length ? Ya(s, _e(c, 3)) : [];
        }
        var ZC = Ge(function (s) {
            return li($t(s, 1, Mt, !0));
          }),
          YC = Ge(function (s) {
            var c = Xn(s);
            return Mt(c) && (c = t), li($t(s, 1, Mt, !0), _e(c, 2));
          }),
          qC = Ge(function (s) {
            var c = Xn(s);
            return (
              (c = typeof c == "function" ? c : t), li($t(s, 1, Mt, !0), t, c)
            );
          });
        function GC(s) {
          return s && s.length ? li(s) : [];
        }
        function KC(s, c) {
          return s && s.length ? li(s, _e(c, 2)) : [];
        }
        function XC(s, c) {
          return (
            (c = typeof c == "function" ? c : t),
            s && s.length ? li(s, t, c) : []
          );
        }
        function Pu(s) {
          if (!(s && s.length)) return [];
          var c = 0;
          return (
            (s = ri(s, function (f) {
              if (Mt(f)) return (c = Pt(f.length, c)), !0;
            })),
            Xc(c, function (f) {
              return St(s, qc(f));
            })
          );
        }
        function hg(s, c) {
          if (!(s && s.length)) return [];
          var f = Pu(s);
          return c == null
            ? f
            : St(f, function (v) {
                return In(c, t, v);
              });
        }
        var JC = Ge(function (s, c) {
            return Mt(s) ? gs(s, c) : [];
          }),
          QC = Ge(function (s) {
            return vu(ri(s, Mt));
          }),
          e2 = Ge(function (s) {
            var c = Xn(s);
            return Mt(c) && (c = t), vu(ri(s, Mt), _e(c, 2));
          }),
          t2 = Ge(function (s) {
            var c = Xn(s);
            return (c = typeof c == "function" ? c : t), vu(ri(s, Mt), t, c);
          }),
          n2 = Ge(Pu);
        function r2(s, c) {
          return Ip(s || [], c || [], ps);
        }
        function i2(s, c) {
          return Ip(s || [], c || [], vs);
        }
        var o2 = Ge(function (s) {
          var c = s.length,
            f = c > 1 ? s[c - 1] : t;
          return (f = typeof f == "function" ? (s.pop(), f) : t), hg(s, f);
        });
        function pg(s) {
          var c = k(s);
          return (c.__chain__ = !0), c;
        }
        function s2(s, c) {
          return c(s), s;
        }
        function nl(s, c) {
          return c(s);
        }
        var a2 = Fr(function (s) {
          var c = s.length,
            f = c ? s[0] : 0,
            v = this.__wrapped__,
            C = function (T) {
              return ou(T, s);
            };
          return c > 1 ||
            this.__actions__.length ||
            !(v instanceof Je) ||
            !Wr(f)
            ? this.thru(C)
            : ((v = v.slice(f, +f + (c ? 1 : 0))),
              v.__actions__.push({ func: nl, args: [C], thisArg: t }),
              new qn(v, this.__chain__).thru(function (T) {
                return c && !T.length && T.push(t), T;
              }));
        });
        function l2() {
          return pg(this);
        }
        function c2() {
          return new qn(this.value(), this.__chain__);
        }
        function u2() {
          this.__values__ === t && (this.__values__ = Mg(this.value()));
          var s = this.__index__ >= this.__values__.length,
            c = s ? t : this.__values__[this.__index__++];
          return { done: s, value: c };
        }
        function d2() {
          return this;
        }
        function f2(s) {
          for (var c, f = this; f instanceof Va; ) {
            var v = ag(f);
            (v.__index__ = 0),
              (v.__values__ = t),
              c ? (C.__wrapped__ = v) : (c = v);
            var C = v;
            f = f.__wrapped__;
          }
          return (C.__wrapped__ = s), c;
        }
        function h2() {
          var s = this.__wrapped__;
          if (s instanceof Je) {
            var c = s;
            return (
              this.__actions__.length && (c = new Je(this)),
              (c = c.reverse()),
              c.__actions__.push({ func: nl, args: [Lu], thisArg: t }),
              new qn(c, this.__chain__)
            );
          }
          return this.thru(Lu);
        }
        function p2() {
          return Dp(this.__wrapped__, this.__actions__);
        }
        var g2 = qa(function (s, c, f) {
          ht.call(s, f) ? ++s[f] : zr(s, f, 1);
        });
        function m2(s, c, f) {
          var v = Ue(s) ? $h : sS;
          return f && dn(s, c, f) && (c = t), v(s, _e(c, 3));
        }
        function y2(s, c) {
          var f = Ue(s) ? ri : hp;
          return f(s, _e(c, 3));
        }
        var v2 = Vp(lg),
          w2 = Vp(cg);
        function b2(s, c) {
          return $t(rl(s, c), 1);
        }
        function x2(s, c) {
          return $t(rl(s, c), le);
        }
        function S2(s, c, f) {
          return (f = f === t ? 1 : Ye(f)), $t(rl(s, c), f);
        }
        function gg(s, c) {
          var f = Ue(s) ? Zn : ai;
          return f(s, _e(c, 3));
        }
        function mg(s, c) {
          var f = Ue(s) ? Vb : fp;
          return f(s, _e(c, 3));
        }
        var C2 = qa(function (s, c, f) {
          ht.call(s, f) ? s[f].push(c) : zr(s, f, [c]);
        });
        function E2(s, c, f, v) {
          (s = bn(s) ? s : Ao(s)), (f = f && !v ? Ye(f) : 0);
          var C = s.length;
          return (
            f < 0 && (f = Pt(C + f, 0)),
            ll(s) ? f <= C && s.indexOf(c, f) > -1 : !!C && bo(s, c, f) > -1
          );
        }
        var k2 = Ge(function (s, c, f) {
            var v = -1,
              C = typeof c == "function",
              T = bn(s) ? V(s.length) : [];
            return (
              ai(s, function (A) {
                T[++v] = C ? In(c, A, f) : ms(A, c, f);
              }),
              T
            );
          }),
          O2 = qa(function (s, c, f) {
            zr(s, f, c);
          });
        function rl(s, c) {
          var f = Ue(s) ? St : wp;
          return f(s, _e(c, 3));
        }
        function T2(s, c, f, v) {
          return s == null
            ? []
            : (Ue(c) || (c = c == null ? [] : [c]),
              (f = v ? t : f),
              Ue(f) || (f = f == null ? [] : [f]),
              Cp(s, c, f));
        }
        var M2 = qa(
          function (s, c, f) {
            s[f ? 0 : 1].push(c);
          },
          function () {
            return [[], []];
          }
        );
        function R2(s, c, f) {
          var v = Ue(s) ? Zc : Yh,
            C = arguments.length < 3;
          return v(s, _e(c, 4), f, C, ai);
        }
        function D2(s, c, f) {
          var v = Ue(s) ? Hb : Yh,
            C = arguments.length < 3;
          return v(s, _e(c, 4), f, C, fp);
        }
        function I2(s, c) {
          var f = Ue(s) ? ri : hp;
          return f(s, sl(_e(c, 3)));
        }
        function A2(s) {
          var c = Ue(s) ? lp : ES;
          return c(s);
        }
        function L2(s, c, f) {
          (f ? dn(s, c, f) : c === t) ? (c = 1) : (c = Ye(c));
          var v = Ue(s) ? tS : kS;
          return v(s, c);
        }
        function P2(s) {
          var c = Ue(s) ? nS : TS;
          return c(s);
        }
        function _2(s) {
          if (s == null) return 0;
          if (bn(s)) return ll(s) ? So(s) : s.length;
          var c = Xt(s);
          return c == Ne || c == ge ? s.size : du(s).length;
        }
        function N2(s, c, f) {
          var v = Ue(s) ? Yc : MS;
          return f && dn(s, c, f) && (c = t), v(s, _e(c, 3));
        }
        var z2 = Ge(function (s, c) {
            if (s == null) return [];
            var f = c.length;
            return (
              f > 1 && dn(s, c[0], c[1])
                ? (c = [])
                : f > 2 && dn(c[0], c[1], c[2]) && (c = [c[0]]),
              Cp(s, $t(c, 1), [])
            );
          }),
          il =
            yx ||
            function () {
              return Ht.Date.now();
            };
        function B2(s, c) {
          if (typeof c != "function") throw new Yn(a);
          return (
            (s = Ye(s)),
            function () {
              if (--s < 1) return c.apply(this, arguments);
            }
          );
        }
        function yg(s, c, f) {
          return (
            (c = f ? t : c),
            (c = s && c == null ? s.length : c),
            Br(s, N, t, t, t, t, c)
          );
        }
        function vg(s, c) {
          var f;
          if (typeof c != "function") throw new Yn(a);
          return (
            (s = Ye(s)),
            function () {
              return (
                --s > 0 && (f = c.apply(this, arguments)), s <= 1 && (c = t), f
              );
            }
          );
        }
        var _u = Ge(function (s, c, f) {
            var v = b;
            if (f.length) {
              var C = oi(f, Do(_u));
              v |= M;
            }
            return Br(s, v, c, f, C);
          }),
          wg = Ge(function (s, c, f) {
            var v = b | E;
            if (f.length) {
              var C = oi(f, Do(wg));
              v |= M;
            }
            return Br(c, v, s, f, C);
          });
        function bg(s, c, f) {
          c = f ? t : c;
          var v = Br(s, O, t, t, t, t, t, c);
          return (v.placeholder = bg.placeholder), v;
        }
        function xg(s, c, f) {
          c = f ? t : c;
          var v = Br(s, I, t, t, t, t, t, c);
          return (v.placeholder = xg.placeholder), v;
        }
        function Sg(s, c, f) {
          var v,
            C,
            T,
            A,
            P,
            F,
            J = 0,
            Q = !1,
            ie = !1,
            me = !0;
          if (typeof s != "function") throw new Yn(a);
          (c = Jn(c) || 0),
            Et(f) &&
              ((Q = !!f.leading),
              (ie = "maxWait" in f),
              (T = ie ? Pt(Jn(f.maxWait) || 0, c) : T),
              (me = "trailing" in f ? !!f.trailing : me));
          function Me(Rt) {
            var cr = v,
              $r = C;
            return (v = C = t), (J = Rt), (A = s.apply($r, cr)), A;
          }
          function Be(Rt) {
            return (J = Rt), (P = xs(Xe, c)), Q ? Me(Rt) : A;
          }
          function qe(Rt) {
            var cr = Rt - F,
              $r = Rt - J,
              Vg = c - cr;
            return ie ? Kt(Vg, T - $r) : Vg;
          }
          function Fe(Rt) {
            var cr = Rt - F,
              $r = Rt - J;
            return F === t || cr >= c || cr < 0 || (ie && $r >= T);
          }
          function Xe() {
            var Rt = il();
            if (Fe(Rt)) return et(Rt);
            P = xs(Xe, qe(Rt));
          }
          function et(Rt) {
            return (P = t), me && v ? Me(Rt) : ((v = C = t), A);
          }
          function _n() {
            P !== t && Ap(P), (J = 0), (v = F = C = P = t);
          }
          function fn() {
            return P === t ? A : et(il());
          }
          function Nn() {
            var Rt = il(),
              cr = Fe(Rt);
            if (((v = arguments), (C = this), (F = Rt), cr)) {
              if (P === t) return Be(F);
              if (ie) return Ap(P), (P = xs(Xe, c)), Me(F);
            }
            return P === t && (P = xs(Xe, c)), A;
          }
          return (Nn.cancel = _n), (Nn.flush = fn), Nn;
        }
        var F2 = Ge(function (s, c) {
            return dp(s, 1, c);
          }),
          W2 = Ge(function (s, c, f) {
            return dp(s, Jn(c) || 0, f);
          });
        function V2(s) {
          return Br(s, X);
        }
        function ol(s, c) {
          if (typeof s != "function" || (c != null && typeof c != "function"))
            throw new Yn(a);
          var f = function () {
            var v = arguments,
              C = c ? c.apply(this, v) : v[0],
              T = f.cache;
            if (T.has(C)) return T.get(C);
            var A = s.apply(this, v);
            return (f.cache = T.set(C, A) || T), A;
          };
          return (f.cache = new (ol.Cache || Nr)()), f;
        }
        ol.Cache = Nr;
        function sl(s) {
          if (typeof s != "function") throw new Yn(a);
          return function () {
            var c = arguments;
            switch (c.length) {
              case 0:
                return !s.call(this);
              case 1:
                return !s.call(this, c[0]);
              case 2:
                return !s.call(this, c[0], c[1]);
              case 3:
                return !s.call(this, c[0], c[1], c[2]);
            }
            return !s.apply(this, c);
          };
        }
        function H2(s) {
          return vg(2, s);
        }
        var $2 = RS(function (s, c) {
            c =
              c.length == 1 && Ue(c[0])
                ? St(c[0], An(_e()))
                : St($t(c, 1), An(_e()));
            var f = c.length;
            return Ge(function (v) {
              for (var C = -1, T = Kt(v.length, f); ++C < T; )
                v[C] = c[C].call(this, v[C]);
              return In(s, this, v);
            });
          }),
          Nu = Ge(function (s, c) {
            var f = oi(c, Do(Nu));
            return Br(s, M, t, c, f);
          }),
          Cg = Ge(function (s, c) {
            var f = oi(c, Do(Cg));
            return Br(s, D, t, c, f);
          }),
          j2 = Fr(function (s, c) {
            return Br(s, Y, t, t, t, c);
          });
        function U2(s, c) {
          if (typeof s != "function") throw new Yn(a);
          return (c = c === t ? c : Ye(c)), Ge(s, c);
        }
        function Z2(s, c) {
          if (typeof s != "function") throw new Yn(a);
          return (
            (c = c == null ? 0 : Pt(Ye(c), 0)),
            Ge(function (f) {
              var v = f[c],
                C = ui(f, 0, c);
              return v && ii(C, v), In(s, this, C);
            })
          );
        }
        function Y2(s, c, f) {
          var v = !0,
            C = !0;
          if (typeof s != "function") throw new Yn(a);
          return (
            Et(f) &&
              ((v = "leading" in f ? !!f.leading : v),
              (C = "trailing" in f ? !!f.trailing : C)),
            Sg(s, c, { leading: v, maxWait: c, trailing: C })
          );
        }
        function q2(s) {
          return yg(s, 1);
        }
        function G2(s, c) {
          return Nu(bu(c), s);
        }
        function K2() {
          if (!arguments.length) return [];
          var s = arguments[0];
          return Ue(s) ? s : [s];
        }
        function X2(s) {
          return Gn(s, y);
        }
        function J2(s, c) {
          return (c = typeof c == "function" ? c : t), Gn(s, y, c);
        }
        function Q2(s) {
          return Gn(s, p | y);
        }
        function eE(s, c) {
          return (c = typeof c == "function" ? c : t), Gn(s, p | y, c);
        }
        function tE(s, c) {
          return c == null || up(s, c, Bt(c));
        }
        function lr(s, c) {
          return s === c || (s !== s && c !== c);
        }
        var nE = Ja(lu),
          rE = Ja(function (s, c) {
            return s >= c;
          }),
          Yi = mp(
            (function () {
              return arguments;
            })()
          )
            ? mp
            : function (s) {
                return Ot(s) && ht.call(s, "callee") && !np.call(s, "callee");
              },
          Ue = V.isArray,
          iE = zh ? An(zh) : fS;
        function bn(s) {
          return s != null && al(s.length) && !Vr(s);
        }
        function Mt(s) {
          return Ot(s) && bn(s);
        }
        function oE(s) {
          return s === !0 || s === !1 || (Ot(s) && un(s) == K);
        }
        var di = wx || Yu,
          sE = Bh ? An(Bh) : hS;
        function aE(s) {
          return Ot(s) && s.nodeType === 1 && !Ss(s);
        }
        function lE(s) {
          if (s == null) return !0;
          if (
            bn(s) &&
            (Ue(s) ||
              typeof s == "string" ||
              typeof s.splice == "function" ||
              di(s) ||
              Io(s) ||
              Yi(s))
          )
            return !s.length;
          var c = Xt(s);
          if (c == Ne || c == ge) return !s.size;
          if (bs(s)) return !du(s).length;
          for (var f in s) if (ht.call(s, f)) return !1;
          return !0;
        }
        function cE(s, c) {
          return ys(s, c);
        }
        function uE(s, c, f) {
          f = typeof f == "function" ? f : t;
          var v = f ? f(s, c) : t;
          return v === t ? ys(s, c, t, f) : !!v;
        }
        function zu(s) {
          if (!Ot(s)) return !1;
          var c = un(s);
          return (
            c == Ke ||
            c == we ||
            (typeof s.message == "string" &&
              typeof s.name == "string" &&
              !Ss(s))
          );
        }
        function dE(s) {
          return typeof s == "number" && ip(s);
        }
        function Vr(s) {
          if (!Et(s)) return !1;
          var c = un(s);
          return c == re || c == Ve || c == ue || c == $;
        }
        function Eg(s) {
          return typeof s == "number" && s == Ye(s);
        }
        function al(s) {
          return typeof s == "number" && s > -1 && s % 1 == 0 && s <= pe;
        }
        function Et(s) {
          var c = typeof s;
          return s != null && (c == "object" || c == "function");
        }
        function Ot(s) {
          return s != null && typeof s == "object";
        }
        var kg = Fh ? An(Fh) : gS;
        function fE(s, c) {
          return s === c || uu(s, c, Tu(c));
        }
        function hE(s, c, f) {
          return (f = typeof f == "function" ? f : t), uu(s, c, Tu(c), f);
        }
        function pE(s) {
          return Og(s) && s != +s;
        }
        function gE(s) {
          if (JS(s)) throw new je(o);
          return yp(s);
        }
        function mE(s) {
          return s === null;
        }
        function yE(s) {
          return s == null;
        }
        function Og(s) {
          return typeof s == "number" || (Ot(s) && un(s) == pt);
        }
        function Ss(s) {
          if (!Ot(s) || un(s) != L) return !1;
          var c = Pa(s);
          if (c === null) return !0;
          var f = ht.call(c, "constructor") && c.constructor;
          return typeof f == "function" && f instanceof f && Da.call(f) == hx;
        }
        var Bu = Wh ? An(Wh) : mS;
        function vE(s) {
          return Eg(s) && s >= -pe && s <= pe;
        }
        var Tg = Vh ? An(Vh) : yS;
        function ll(s) {
          return typeof s == "string" || (!Ue(s) && Ot(s) && un(s) == Le);
        }
        function Pn(s) {
          return typeof s == "symbol" || (Ot(s) && un(s) == Qe);
        }
        var Io = Hh ? An(Hh) : vS;
        function wE(s) {
          return s === t;
        }
        function bE(s) {
          return Ot(s) && Xt(s) == Ae;
        }
        function xE(s) {
          return Ot(s) && un(s) == Ze;
        }
        var SE = Ja(fu),
          CE = Ja(function (s, c) {
            return s <= c;
          });
        function Mg(s) {
          if (!s) return [];
          if (bn(s)) return ll(s) ? sr(s) : wn(s);
          if (cs && s[cs]) return tx(s[cs]());
          var c = Xt(s),
            f = c == Ne ? Qc : c == ge ? Ta : Ao;
          return f(s);
        }
        function Hr(s) {
          if (!s) return s === 0 ? s : 0;
          if (((s = Jn(s)), s === le || s === -le)) {
            var c = s < 0 ? -1 : 1;
            return c * ce;
          }
          return s === s ? s : 0;
        }
        function Ye(s) {
          var c = Hr(s),
            f = c % 1;
          return c === c ? (f ? c - f : c) : 0;
        }
        function Rg(s) {
          return s ? $i(Ye(s), 0, Oe) : 0;
        }
        function Jn(s) {
          if (typeof s == "number") return s;
          if (Pn(s)) return be;
          if (Et(s)) {
            var c = typeof s.valueOf == "function" ? s.valueOf() : s;
            s = Et(c) ? c + "" : c;
          }
          if (typeof s != "string") return s === 0 ? s : +s;
          s = qh(s);
          var f = ib.test(s);
          return f || sb.test(s)
            ? Bb(s.slice(2), f ? 2 : 8)
            : rb.test(s)
            ? be
            : +s;
        }
        function Dg(s) {
          return wr(s, xn(s));
        }
        function EE(s) {
          return s ? $i(Ye(s), -pe, pe) : s === 0 ? s : 0;
        }
        function lt(s) {
          return s == null ? "" : Ln(s);
        }
        var kE = Mo(function (s, c) {
            if (bs(c) || bn(c)) {
              wr(c, Bt(c), s);
              return;
            }
            for (var f in c) ht.call(c, f) && ps(s, f, c[f]);
          }),
          Ig = Mo(function (s, c) {
            wr(c, xn(c), s);
          }),
          cl = Mo(function (s, c, f, v) {
            wr(c, xn(c), s, v);
          }),
          OE = Mo(function (s, c, f, v) {
            wr(c, Bt(c), s, v);
          }),
          TE = Fr(ou);
        function ME(s, c) {
          var f = To(s);
          return c == null ? f : cp(f, c);
        }
        var RE = Ge(function (s, c) {
            s = gt(s);
            var f = -1,
              v = c.length,
              C = v > 2 ? c[2] : t;
            for (C && dn(c[0], c[1], C) && (v = 1); ++f < v; )
              for (var T = c[f], A = xn(T), P = -1, F = A.length; ++P < F; ) {
                var J = A[P],
                  Q = s[J];
                (Q === t || (lr(Q, Eo[J]) && !ht.call(s, J))) && (s[J] = T[J]);
              }
            return s;
          }),
          DE = Ge(function (s) {
            return s.push(t, qp), In(Ag, t, s);
          });
        function IE(s, c) {
          return jh(s, _e(c, 3), vr);
        }
        function AE(s, c) {
          return jh(s, _e(c, 3), au);
        }
        function LE(s, c) {
          return s == null ? s : su(s, _e(c, 3), xn);
        }
        function PE(s, c) {
          return s == null ? s : pp(s, _e(c, 3), xn);
        }
        function _E(s, c) {
          return s && vr(s, _e(c, 3));
        }
        function NE(s, c) {
          return s && au(s, _e(c, 3));
        }
        function zE(s) {
          return s == null ? [] : ja(s, Bt(s));
        }
        function BE(s) {
          return s == null ? [] : ja(s, xn(s));
        }
        function Fu(s, c, f) {
          var v = s == null ? t : ji(s, c);
          return v === t ? f : v;
        }
        function FE(s, c) {
          return s != null && Xp(s, c, lS);
        }
        function Wu(s, c) {
          return s != null && Xp(s, c, cS);
        }
        var WE = $p(function (s, c, f) {
            c != null && typeof c.toString != "function" && (c = Ia.call(c)),
              (s[c] = f);
          }, Hu(Sn)),
          VE = $p(function (s, c, f) {
            c != null && typeof c.toString != "function" && (c = Ia.call(c)),
              ht.call(s, c) ? s[c].push(f) : (s[c] = [f]);
          }, _e),
          HE = Ge(ms);
        function Bt(s) {
          return bn(s) ? ap(s) : du(s);
        }
        function xn(s) {
          return bn(s) ? ap(s, !0) : wS(s);
        }
        function $E(s, c) {
          var f = {};
          return (
            (c = _e(c, 3)),
            vr(s, function (v, C, T) {
              zr(f, c(v, C, T), v);
            }),
            f
          );
        }
        function jE(s, c) {
          var f = {};
          return (
            (c = _e(c, 3)),
            vr(s, function (v, C, T) {
              zr(f, C, c(v, C, T));
            }),
            f
          );
        }
        var UE = Mo(function (s, c, f) {
            Ua(s, c, f);
          }),
          Ag = Mo(function (s, c, f, v) {
            Ua(s, c, f, v);
          }),
          ZE = Fr(function (s, c) {
            var f = {};
            if (s == null) return f;
            var v = !1;
            (c = St(c, function (T) {
              return (T = ci(T, s)), v || (v = T.length > 1), T;
            })),
              wr(s, ku(s), f),
              v && (f = Gn(f, p | g | y, WS));
            for (var C = c.length; C--; ) yu(f, c[C]);
            return f;
          });
        function YE(s, c) {
          return Lg(s, sl(_e(c)));
        }
        var qE = Fr(function (s, c) {
          return s == null ? {} : xS(s, c);
        });
        function Lg(s, c) {
          if (s == null) return {};
          var f = St(ku(s), function (v) {
            return [v];
          });
          return (
            (c = _e(c)),
            Ep(s, f, function (v, C) {
              return c(v, C[0]);
            })
          );
        }
        function GE(s, c, f) {
          c = ci(c, s);
          var v = -1,
            C = c.length;
          for (C || ((C = 1), (s = t)); ++v < C; ) {
            var T = s == null ? t : s[br(c[v])];
            T === t && ((v = C), (T = f)), (s = Vr(T) ? T.call(s) : T);
          }
          return s;
        }
        function KE(s, c, f) {
          return s == null ? s : vs(s, c, f);
        }
        function XE(s, c, f, v) {
          return (
            (v = typeof v == "function" ? v : t), s == null ? s : vs(s, c, f, v)
          );
        }
        var Pg = Zp(Bt),
          _g = Zp(xn);
        function JE(s, c, f) {
          var v = Ue(s),
            C = v || di(s) || Io(s);
          if (((c = _e(c, 4)), f == null)) {
            var T = s && s.constructor;
            C
              ? (f = v ? new T() : [])
              : Et(s)
              ? (f = Vr(T) ? To(Pa(s)) : {})
              : (f = {});
          }
          return (
            (C ? Zn : vr)(s, function (A, P, F) {
              return c(f, A, P, F);
            }),
            f
          );
        }
        function QE(s, c) {
          return s == null ? !0 : yu(s, c);
        }
        function e6(s, c, f) {
          return s == null ? s : Rp(s, c, bu(f));
        }
        function t6(s, c, f, v) {
          return (
            (v = typeof v == "function" ? v : t),
            s == null ? s : Rp(s, c, bu(f), v)
          );
        }
        function Ao(s) {
          return s == null ? [] : Jc(s, Bt(s));
        }
        function n6(s) {
          return s == null ? [] : Jc(s, xn(s));
        }
        function r6(s, c, f) {
          return (
            f === t && ((f = c), (c = t)),
            f !== t && ((f = Jn(f)), (f = f === f ? f : 0)),
            c !== t && ((c = Jn(c)), (c = c === c ? c : 0)),
            $i(Jn(s), c, f)
          );
        }
        function i6(s, c, f) {
          return (
            (c = Hr(c)),
            f === t ? ((f = c), (c = 0)) : (f = Hr(f)),
            (s = Jn(s)),
            uS(s, c, f)
          );
        }
        function o6(s, c, f) {
          if (
            (f && typeof f != "boolean" && dn(s, c, f) && (c = f = t),
            f === t &&
              (typeof c == "boolean"
                ? ((f = c), (c = t))
                : typeof s == "boolean" && ((f = s), (s = t))),
            s === t && c === t
              ? ((s = 0), (c = 1))
              : ((s = Hr(s)), c === t ? ((c = s), (s = 0)) : (c = Hr(c))),
            s > c)
          ) {
            var v = s;
            (s = c), (c = v);
          }
          if (f || s % 1 || c % 1) {
            var C = op();
            return Kt(s + C * (c - s + zb("1e-" + ((C + "").length - 1))), c);
          }
          return pu(s, c);
        }
        var s6 = Ro(function (s, c, f) {
          return (c = c.toLowerCase()), s + (f ? Ng(c) : c);
        });
        function Ng(s) {
          return Vu(lt(s).toLowerCase());
        }
        function zg(s) {
          return (s = lt(s)), s && s.replace(lb, Kb).replace(Tb, "");
        }
        function a6(s, c, f) {
          (s = lt(s)), (c = Ln(c));
          var v = s.length;
          f = f === t ? v : $i(Ye(f), 0, v);
          var C = f;
          return (f -= c.length), f >= 0 && s.slice(f, C) == c;
        }
        function l6(s) {
          return (s = lt(s)), s && yr.test(s) ? s.replace(Gt, Xb) : s;
        }
        function c6(s) {
          return (s = lt(s)), s && vo.test(s) ? s.replace(Pr, "\\$&") : s;
        }
        var u6 = Ro(function (s, c, f) {
            return s + (f ? "-" : "") + c.toLowerCase();
          }),
          d6 = Ro(function (s, c, f) {
            return s + (f ? " " : "") + c.toLowerCase();
          }),
          f6 = Wp("toLowerCase");
        function h6(s, c, f) {
          (s = lt(s)), (c = Ye(c));
          var v = c ? So(s) : 0;
          if (!c || v >= c) return s;
          var C = (c - v) / 2;
          return Xa(Ba(C), f) + s + Xa(za(C), f);
        }
        function p6(s, c, f) {
          (s = lt(s)), (c = Ye(c));
          var v = c ? So(s) : 0;
          return c && v < c ? s + Xa(c - v, f) : s;
        }
        function g6(s, c, f) {
          (s = lt(s)), (c = Ye(c));
          var v = c ? So(s) : 0;
          return c && v < c ? Xa(c - v, f) + s : s;
        }
        function m6(s, c, f) {
          return (
            f || c == null ? (c = 0) : c && (c = +c),
            Cx(lt(s).replace(ni, ""), c || 0)
          );
        }
        function y6(s, c, f) {
          return (
            (f ? dn(s, c, f) : c === t) ? (c = 1) : (c = Ye(c)), gu(lt(s), c)
          );
        }
        function v6() {
          var s = arguments,
            c = lt(s[0]);
          return s.length < 3 ? c : c.replace(s[1], s[2]);
        }
        var w6 = Ro(function (s, c, f) {
          return s + (f ? "_" : "") + c.toLowerCase();
        });
        function b6(s, c, f) {
          return (
            f && typeof f != "number" && dn(s, c, f) && (c = f = t),
            (f = f === t ? Oe : f >>> 0),
            f
              ? ((s = lt(s)),
                s &&
                (typeof c == "string" || (c != null && !Bu(c))) &&
                ((c = Ln(c)), !c && xo(s))
                  ? ui(sr(s), 0, f)
                  : s.split(c, f))
              : []
          );
        }
        var x6 = Ro(function (s, c, f) {
          return s + (f ? " " : "") + Vu(c);
        });
        function S6(s, c, f) {
          return (
            (s = lt(s)),
            (f = f == null ? 0 : $i(Ye(f), 0, s.length)),
            (c = Ln(c)),
            s.slice(f, f + c.length) == c
          );
        }
        function C6(s, c, f) {
          var v = k.templateSettings;
          f && dn(s, c, f) && (c = t), (s = lt(s)), (c = cl({}, c, v, Yp));
          var C = cl({}, c.imports, v.imports, Yp),
            T = Bt(C),
            A = Jc(C, T),
            P,
            F,
            J = 0,
            Q = c.interpolate || Sa,
            ie = "__p += '",
            me = eu(
              (c.escape || Sa).source +
                "|" +
                Q.source +
                "|" +
                (Q === Rn ? nb : Sa).source +
                "|" +
                (c.evaluate || Sa).source +
                "|$",
              "g"
            ),
            Me =
              "//# sourceURL=" +
              (ht.call(c, "sourceURL")
                ? (c.sourceURL + "").replace(/\s/g, " ")
                : "lodash.templateSources[" + ++Ab + "]") +
              `
`;
          s.replace(me, function (Fe, Xe, et, _n, fn, Nn) {
            return (
              et || (et = _n),
              (ie += s.slice(J, Nn).replace(cb, Jb)),
              Xe &&
                ((P = !0),
                (ie +=
                  `' +
__e(` +
                  Xe +
                  `) +
'`)),
              fn &&
                ((F = !0),
                (ie +=
                  `';
` +
                  fn +
                  `;
__p += '`)),
              et &&
                (ie +=
                  `' +
((__t = (` +
                  et +
                  `)) == null ? '' : __t) +
'`),
              (J = Nn + Fe.length),
              Fe
            );
          }),
            (ie += `';
`);
          var Be = ht.call(c, "variable") && c.variable;
          if (!Be)
            ie =
              `with (obj) {
` +
              ie +
              `
}
`;
          else if (eb.test(Be)) throw new je(l);
          (ie = (F ? ie.replace(_c, "") : ie)
            .replace(Nc, "$1")
            .replace(zc, "$1;")),
            (ie =
              "function(" +
              (Be || "obj") +
              `) {
` +
              (Be
                ? ""
                : `obj || (obj = {});
`) +
              "var __t, __p = ''" +
              (P ? ", __e = _.escape" : "") +
              (F
                ? `, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`
                : `;
`) +
              ie +
              `return __p
}`);
          var qe = Fg(function () {
            return it(T, Me + "return " + ie).apply(t, A);
          });
          if (((qe.source = ie), zu(qe))) throw qe;
          return qe;
        }
        function E6(s) {
          return lt(s).toLowerCase();
        }
        function k6(s) {
          return lt(s).toUpperCase();
        }
        function O6(s, c, f) {
          if (((s = lt(s)), s && (f || c === t))) return qh(s);
          if (!s || !(c = Ln(c))) return s;
          var v = sr(s),
            C = sr(c),
            T = Gh(v, C),
            A = Kh(v, C) + 1;
          return ui(v, T, A).join("");
        }
        function T6(s, c, f) {
          if (((s = lt(s)), s && (f || c === t))) return s.slice(0, Jh(s) + 1);
          if (!s || !(c = Ln(c))) return s;
          var v = sr(s),
            C = Kh(v, sr(c)) + 1;
          return ui(v, 0, C).join("");
        }
        function M6(s, c, f) {
          if (((s = lt(s)), s && (f || c === t))) return s.replace(ni, "");
          if (!s || !(c = Ln(c))) return s;
          var v = sr(s),
            C = Gh(v, sr(c));
          return ui(v, C).join("");
        }
        function R6(s, c) {
          var f = j,
            v = W;
          if (Et(c)) {
            var C = "separator" in c ? c.separator : C;
            (f = "length" in c ? Ye(c.length) : f),
              (v = "omission" in c ? Ln(c.omission) : v);
          }
          s = lt(s);
          var T = s.length;
          if (xo(s)) {
            var A = sr(s);
            T = A.length;
          }
          if (f >= T) return s;
          var P = f - So(v);
          if (P < 1) return v;
          var F = A ? ui(A, 0, P).join("") : s.slice(0, P);
          if (C === t) return F + v;
          if ((A && (P += F.length - P), Bu(C))) {
            if (s.slice(P).search(C)) {
              var J,
                Q = F;
              for (
                C.global || (C = eu(C.source, lt(mh.exec(C)) + "g")),
                  C.lastIndex = 0;
                (J = C.exec(Q));

              )
                var ie = J.index;
              F = F.slice(0, ie === t ? P : ie);
            }
          } else if (s.indexOf(Ln(C), P) != P) {
            var me = F.lastIndexOf(C);
            me > -1 && (F = F.slice(0, me));
          }
          return F + v;
        }
        function D6(s) {
          return (s = lt(s)), s && cn.test(s) ? s.replace(Dt, ox) : s;
        }
        var I6 = Ro(function (s, c, f) {
            return s + (f ? " " : "") + c.toUpperCase();
          }),
          Vu = Wp("toUpperCase");
        function Bg(s, c, f) {
          return (
            (s = lt(s)),
            (c = f ? t : c),
            c === t ? (ex(s) ? lx(s) : Ub(s)) : s.match(c) || []
          );
        }
        var Fg = Ge(function (s, c) {
            try {
              return In(s, t, c);
            } catch (f) {
              return zu(f) ? f : new je(f);
            }
          }),
          A6 = Fr(function (s, c) {
            return (
              Zn(c, function (f) {
                (f = br(f)), zr(s, f, _u(s[f], s));
              }),
              s
            );
          });
        function L6(s) {
          var c = s == null ? 0 : s.length,
            f = _e();
          return (
            (s = c
              ? St(s, function (v) {
                  if (typeof v[1] != "function") throw new Yn(a);
                  return [f(v[0]), v[1]];
                })
              : []),
            Ge(function (v) {
              for (var C = -1; ++C < c; ) {
                var T = s[C];
                if (In(T[0], this, v)) return In(T[1], this, v);
              }
            })
          );
        }
        function P6(s) {
          return oS(Gn(s, p));
        }
        function Hu(s) {
          return function () {
            return s;
          };
        }
        function _6(s, c) {
          return s == null || s !== s ? c : s;
        }
        var N6 = Hp(),
          z6 = Hp(!0);
        function Sn(s) {
          return s;
        }
        function $u(s) {
          return vp(typeof s == "function" ? s : Gn(s, p));
        }
        function B6(s) {
          return bp(Gn(s, p));
        }
        function F6(s, c) {
          return xp(s, Gn(c, p));
        }
        var W6 = Ge(function (s, c) {
            return function (f) {
              return ms(f, s, c);
            };
          }),
          V6 = Ge(function (s, c) {
            return function (f) {
              return ms(s, f, c);
            };
          });
        function ju(s, c, f) {
          var v = Bt(c),
            C = ja(c, v);
          f == null &&
            !(Et(c) && (C.length || !v.length)) &&
            ((f = c), (c = s), (s = this), (C = ja(c, Bt(c))));
          var T = !(Et(f) && "chain" in f) || !!f.chain,
            A = Vr(s);
          return (
            Zn(C, function (P) {
              var F = c[P];
              (s[P] = F),
                A &&
                  (s.prototype[P] = function () {
                    var J = this.__chain__;
                    if (T || J) {
                      var Q = s(this.__wrapped__),
                        ie = (Q.__actions__ = wn(this.__actions__));
                      return (
                        ie.push({ func: F, args: arguments, thisArg: s }),
                        (Q.__chain__ = J),
                        Q
                      );
                    }
                    return F.apply(s, ii([this.value()], arguments));
                  });
            }),
            s
          );
        }
        function H6() {
          return Ht._ === this && (Ht._ = px), this;
        }
        function Uu() {}
        function $6(s) {
          return (
            (s = Ye(s)),
            Ge(function (c) {
              return Sp(c, s);
            })
          );
        }
        var j6 = Su(St),
          U6 = Su($h),
          Z6 = Su(Yc);
        function Wg(s) {
          return Ru(s) ? qc(br(s)) : SS(s);
        }
        function Y6(s) {
          return function (c) {
            return s == null ? t : ji(s, c);
          };
        }
        var q6 = jp(),
          G6 = jp(!0);
        function Zu() {
          return [];
        }
        function Yu() {
          return !1;
        }
        function K6() {
          return {};
        }
        function X6() {
          return "";
        }
        function J6() {
          return !0;
        }
        function Q6(s, c) {
          if (((s = Ye(s)), s < 1 || s > pe)) return [];
          var f = Oe,
            v = Kt(s, Oe);
          (c = _e(c)), (s -= Oe);
          for (var C = Xc(v, c); ++f < s; ) c(f);
          return C;
        }
        function ek(s) {
          return Ue(s) ? St(s, br) : Pn(s) ? [s] : wn(sg(lt(s)));
        }
        function tk(s) {
          var c = ++fx;
          return lt(s) + c;
        }
        var nk = Ka(function (s, c) {
            return s + c;
          }, 0),
          rk = Cu("ceil"),
          ik = Ka(function (s, c) {
            return s / c;
          }, 1),
          ok = Cu("floor");
        function sk(s) {
          return s && s.length ? $a(s, Sn, lu) : t;
        }
        function ak(s, c) {
          return s && s.length ? $a(s, _e(c, 2), lu) : t;
        }
        function lk(s) {
          return Zh(s, Sn);
        }
        function ck(s, c) {
          return Zh(s, _e(c, 2));
        }
        function uk(s) {
          return s && s.length ? $a(s, Sn, fu) : t;
        }
        function dk(s, c) {
          return s && s.length ? $a(s, _e(c, 2), fu) : t;
        }
        var fk = Ka(function (s, c) {
            return s * c;
          }, 1),
          hk = Cu("round"),
          pk = Ka(function (s, c) {
            return s - c;
          }, 0);
        function gk(s) {
          return s && s.length ? Kc(s, Sn) : 0;
        }
        function mk(s, c) {
          return s && s.length ? Kc(s, _e(c, 2)) : 0;
        }
        return (
          (k.after = B2),
          (k.ary = yg),
          (k.assign = kE),
          (k.assignIn = Ig),
          (k.assignInWith = cl),
          (k.assignWith = OE),
          (k.at = TE),
          (k.before = vg),
          (k.bind = _u),
          (k.bindAll = A6),
          (k.bindKey = wg),
          (k.castArray = K2),
          (k.chain = pg),
          (k.chunk = oC),
          (k.compact = sC),
          (k.concat = aC),
          (k.cond = L6),
          (k.conforms = P6),
          (k.constant = Hu),
          (k.countBy = g2),
          (k.create = ME),
          (k.curry = bg),
          (k.curryRight = xg),
          (k.debounce = Sg),
          (k.defaults = RE),
          (k.defaultsDeep = DE),
          (k.defer = F2),
          (k.delay = W2),
          (k.difference = lC),
          (k.differenceBy = cC),
          (k.differenceWith = uC),
          (k.drop = dC),
          (k.dropRight = fC),
          (k.dropRightWhile = hC),
          (k.dropWhile = pC),
          (k.fill = gC),
          (k.filter = y2),
          (k.flatMap = b2),
          (k.flatMapDeep = x2),
          (k.flatMapDepth = S2),
          (k.flatten = ug),
          (k.flattenDeep = mC),
          (k.flattenDepth = yC),
          (k.flip = V2),
          (k.flow = N6),
          (k.flowRight = z6),
          (k.fromPairs = vC),
          (k.functions = zE),
          (k.functionsIn = BE),
          (k.groupBy = C2),
          (k.initial = bC),
          (k.intersection = xC),
          (k.intersectionBy = SC),
          (k.intersectionWith = CC),
          (k.invert = WE),
          (k.invertBy = VE),
          (k.invokeMap = k2),
          (k.iteratee = $u),
          (k.keyBy = O2),
          (k.keys = Bt),
          (k.keysIn = xn),
          (k.map = rl),
          (k.mapKeys = $E),
          (k.mapValues = jE),
          (k.matches = B6),
          (k.matchesProperty = F6),
          (k.memoize = ol),
          (k.merge = UE),
          (k.mergeWith = Ag),
          (k.method = W6),
          (k.methodOf = V6),
          (k.mixin = ju),
          (k.negate = sl),
          (k.nthArg = $6),
          (k.omit = ZE),
          (k.omitBy = YE),
          (k.once = H2),
          (k.orderBy = T2),
          (k.over = j6),
          (k.overArgs = $2),
          (k.overEvery = U6),
          (k.overSome = Z6),
          (k.partial = Nu),
          (k.partialRight = Cg),
          (k.partition = M2),
          (k.pick = qE),
          (k.pickBy = Lg),
          (k.property = Wg),
          (k.propertyOf = Y6),
          (k.pull = TC),
          (k.pullAll = fg),
          (k.pullAllBy = MC),
          (k.pullAllWith = RC),
          (k.pullAt = DC),
          (k.range = q6),
          (k.rangeRight = G6),
          (k.rearg = j2),
          (k.reject = I2),
          (k.remove = IC),
          (k.rest = U2),
          (k.reverse = Lu),
          (k.sampleSize = L2),
          (k.set = KE),
          (k.setWith = XE),
          (k.shuffle = P2),
          (k.slice = AC),
          (k.sortBy = z2),
          (k.sortedUniq = FC),
          (k.sortedUniqBy = WC),
          (k.split = b6),
          (k.spread = Z2),
          (k.tail = VC),
          (k.take = HC),
          (k.takeRight = $C),
          (k.takeRightWhile = jC),
          (k.takeWhile = UC),
          (k.tap = s2),
          (k.throttle = Y2),
          (k.thru = nl),
          (k.toArray = Mg),
          (k.toPairs = Pg),
          (k.toPairsIn = _g),
          (k.toPath = ek),
          (k.toPlainObject = Dg),
          (k.transform = JE),
          (k.unary = q2),
          (k.union = ZC),
          (k.unionBy = YC),
          (k.unionWith = qC),
          (k.uniq = GC),
          (k.uniqBy = KC),
          (k.uniqWith = XC),
          (k.unset = QE),
          (k.unzip = Pu),
          (k.unzipWith = hg),
          (k.update = e6),
          (k.updateWith = t6),
          (k.values = Ao),
          (k.valuesIn = n6),
          (k.without = JC),
          (k.words = Bg),
          (k.wrap = G2),
          (k.xor = QC),
          (k.xorBy = e2),
          (k.xorWith = t2),
          (k.zip = n2),
          (k.zipObject = r2),
          (k.zipObjectDeep = i2),
          (k.zipWith = o2),
          (k.entries = Pg),
          (k.entriesIn = _g),
          (k.extend = Ig),
          (k.extendWith = cl),
          ju(k, k),
          (k.add = nk),
          (k.attempt = Fg),
          (k.camelCase = s6),
          (k.capitalize = Ng),
          (k.ceil = rk),
          (k.clamp = r6),
          (k.clone = X2),
          (k.cloneDeep = Q2),
          (k.cloneDeepWith = eE),
          (k.cloneWith = J2),
          (k.conformsTo = tE),
          (k.deburr = zg),
          (k.defaultTo = _6),
          (k.divide = ik),
          (k.endsWith = a6),
          (k.eq = lr),
          (k.escape = l6),
          (k.escapeRegExp = c6),
          (k.every = m2),
          (k.find = v2),
          (k.findIndex = lg),
          (k.findKey = IE),
          (k.findLast = w2),
          (k.findLastIndex = cg),
          (k.findLastKey = AE),
          (k.floor = ok),
          (k.forEach = gg),
          (k.forEachRight = mg),
          (k.forIn = LE),
          (k.forInRight = PE),
          (k.forOwn = _E),
          (k.forOwnRight = NE),
          (k.get = Fu),
          (k.gt = nE),
          (k.gte = rE),
          (k.has = FE),
          (k.hasIn = Wu),
          (k.head = dg),
          (k.identity = Sn),
          (k.includes = E2),
          (k.indexOf = wC),
          (k.inRange = i6),
          (k.invoke = HE),
          (k.isArguments = Yi),
          (k.isArray = Ue),
          (k.isArrayBuffer = iE),
          (k.isArrayLike = bn),
          (k.isArrayLikeObject = Mt),
          (k.isBoolean = oE),
          (k.isBuffer = di),
          (k.isDate = sE),
          (k.isElement = aE),
          (k.isEmpty = lE),
          (k.isEqual = cE),
          (k.isEqualWith = uE),
          (k.isError = zu),
          (k.isFinite = dE),
          (k.isFunction = Vr),
          (k.isInteger = Eg),
          (k.isLength = al),
          (k.isMap = kg),
          (k.isMatch = fE),
          (k.isMatchWith = hE),
          (k.isNaN = pE),
          (k.isNative = gE),
          (k.isNil = yE),
          (k.isNull = mE),
          (k.isNumber = Og),
          (k.isObject = Et),
          (k.isObjectLike = Ot),
          (k.isPlainObject = Ss),
          (k.isRegExp = Bu),
          (k.isSafeInteger = vE),
          (k.isSet = Tg),
          (k.isString = ll),
          (k.isSymbol = Pn),
          (k.isTypedArray = Io),
          (k.isUndefined = wE),
          (k.isWeakMap = bE),
          (k.isWeakSet = xE),
          (k.join = EC),
          (k.kebabCase = u6),
          (k.last = Xn),
          (k.lastIndexOf = kC),
          (k.lowerCase = d6),
          (k.lowerFirst = f6),
          (k.lt = SE),
          (k.lte = CE),
          (k.max = sk),
          (k.maxBy = ak),
          (k.mean = lk),
          (k.meanBy = ck),
          (k.min = uk),
          (k.minBy = dk),
          (k.stubArray = Zu),
          (k.stubFalse = Yu),
          (k.stubObject = K6),
          (k.stubString = X6),
          (k.stubTrue = J6),
          (k.multiply = fk),
          (k.nth = OC),
          (k.noConflict = H6),
          (k.noop = Uu),
          (k.now = il),
          (k.pad = h6),
          (k.padEnd = p6),
          (k.padStart = g6),
          (k.parseInt = m6),
          (k.random = o6),
          (k.reduce = R2),
          (k.reduceRight = D2),
          (k.repeat = y6),
          (k.replace = v6),
          (k.result = GE),
          (k.round = hk),
          (k.runInContext = z),
          (k.sample = A2),
          (k.size = _2),
          (k.snakeCase = w6),
          (k.some = N2),
          (k.sortedIndex = LC),
          (k.sortedIndexBy = PC),
          (k.sortedIndexOf = _C),
          (k.sortedLastIndex = NC),
          (k.sortedLastIndexBy = zC),
          (k.sortedLastIndexOf = BC),
          (k.startCase = x6),
          (k.startsWith = S6),
          (k.subtract = pk),
          (k.sum = gk),
          (k.sumBy = mk),
          (k.template = C6),
          (k.times = Q6),
          (k.toFinite = Hr),
          (k.toInteger = Ye),
          (k.toLength = Rg),
          (k.toLower = E6),
          (k.toNumber = Jn),
          (k.toSafeInteger = EE),
          (k.toString = lt),
          (k.toUpper = k6),
          (k.trim = O6),
          (k.trimEnd = T6),
          (k.trimStart = M6),
          (k.truncate = R6),
          (k.unescape = D6),
          (k.uniqueId = tk),
          (k.upperCase = I6),
          (k.upperFirst = Vu),
          (k.each = gg),
          (k.eachRight = mg),
          (k.first = dg),
          ju(
            k,
            (function () {
              var s = {};
              return (
                vr(k, function (c, f) {
                  ht.call(k.prototype, f) || (s[f] = c);
                }),
                s
              );
            })(),
            { chain: !1 }
          ),
          (k.VERSION = r),
          Zn(
            [
              "bind",
              "bindKey",
              "curry",
              "curryRight",
              "partial",
              "partialRight",
            ],
            function (s) {
              k[s].placeholder = k;
            }
          ),
          Zn(["drop", "take"], function (s, c) {
            (Je.prototype[s] = function (f) {
              f = f === t ? 1 : Pt(Ye(f), 0);
              var v = this.__filtered__ && !c ? new Je(this) : this.clone();
              return (
                v.__filtered__
                  ? (v.__takeCount__ = Kt(f, v.__takeCount__))
                  : v.__views__.push({
                      size: Kt(f, Oe),
                      type: s + (v.__dir__ < 0 ? "Right" : ""),
                    }),
                v
              );
            }),
              (Je.prototype[s + "Right"] = function (f) {
                return this.reverse()[s](f).reverse();
              });
          }),
          Zn(["filter", "map", "takeWhile"], function (s, c) {
            var f = c + 1,
              v = f == ne || f == oe;
            Je.prototype[s] = function (C) {
              var T = this.clone();
              return (
                T.__iteratees__.push({ iteratee: _e(C, 3), type: f }),
                (T.__filtered__ = T.__filtered__ || v),
                T
              );
            };
          }),
          Zn(["head", "last"], function (s, c) {
            var f = "take" + (c ? "Right" : "");
            Je.prototype[s] = function () {
              return this[f](1).value()[0];
            };
          }),
          Zn(["initial", "tail"], function (s, c) {
            var f = "drop" + (c ? "" : "Right");
            Je.prototype[s] = function () {
              return this.__filtered__ ? new Je(this) : this[f](1);
            };
          }),
          (Je.prototype.compact = function () {
            return this.filter(Sn);
          }),
          (Je.prototype.find = function (s) {
            return this.filter(s).head();
          }),
          (Je.prototype.findLast = function (s) {
            return this.reverse().find(s);
          }),
          (Je.prototype.invokeMap = Ge(function (s, c) {
            return typeof s == "function"
              ? new Je(this)
              : this.map(function (f) {
                  return ms(f, s, c);
                });
          })),
          (Je.prototype.reject = function (s) {
            return this.filter(sl(_e(s)));
          }),
          (Je.prototype.slice = function (s, c) {
            s = Ye(s);
            var f = this;
            return f.__filtered__ && (s > 0 || c < 0)
              ? new Je(f)
              : (s < 0 ? (f = f.takeRight(-s)) : s && (f = f.drop(s)),
                c !== t &&
                  ((c = Ye(c)), (f = c < 0 ? f.dropRight(-c) : f.take(c - s))),
                f);
          }),
          (Je.prototype.takeRightWhile = function (s) {
            return this.reverse().takeWhile(s).reverse();
          }),
          (Je.prototype.toArray = function () {
            return this.take(Oe);
          }),
          vr(Je.prototype, function (s, c) {
            var f = /^(?:filter|find|map|reject)|While$/.test(c),
              v = /^(?:head|last)$/.test(c),
              C = k[v ? "take" + (c == "last" ? "Right" : "") : c],
              T = v || /^find/.test(c);
            C &&
              (k.prototype[c] = function () {
                var A = this.__wrapped__,
                  P = v ? [1] : arguments,
                  F = A instanceof Je,
                  J = P[0],
                  Q = F || Ue(A),
                  ie = function (Xe) {
                    var et = C.apply(k, ii([Xe], P));
                    return v && me ? et[0] : et;
                  };
                Q &&
                  f &&
                  typeof J == "function" &&
                  J.length != 1 &&
                  (F = Q = !1);
                var me = this.__chain__,
                  Me = !!this.__actions__.length,
                  Be = T && !me,
                  qe = F && !Me;
                if (!T && Q) {
                  A = qe ? A : new Je(this);
                  var Fe = s.apply(A, P);
                  return (
                    Fe.__actions__.push({ func: nl, args: [ie], thisArg: t }),
                    new qn(Fe, me)
                  );
                }
                return Be && qe
                  ? s.apply(this, P)
                  : ((Fe = this.thru(ie)),
                    Be ? (v ? Fe.value()[0] : Fe.value()) : Fe);
              });
          }),
          Zn(
            ["pop", "push", "shift", "sort", "splice", "unshift"],
            function (s) {
              var c = Ma[s],
                f = /^(?:push|sort|unshift)$/.test(s) ? "tap" : "thru",
                v = /^(?:pop|shift)$/.test(s);
              k.prototype[s] = function () {
                var C = arguments;
                if (v && !this.__chain__) {
                  var T = this.value();
                  return c.apply(Ue(T) ? T : [], C);
                }
                return this[f](function (A) {
                  return c.apply(Ue(A) ? A : [], C);
                });
              };
            }
          ),
          vr(Je.prototype, function (s, c) {
            var f = k[c];
            if (f) {
              var v = f.name + "";
              ht.call(Oo, v) || (Oo[v] = []), Oo[v].push({ name: c, func: f });
            }
          }),
          (Oo[Ga(t, E).name] = [{ name: "wrapper", func: t }]),
          (Je.prototype.clone = Dx),
          (Je.prototype.reverse = Ix),
          (Je.prototype.value = Ax),
          (k.prototype.at = a2),
          (k.prototype.chain = l2),
          (k.prototype.commit = c2),
          (k.prototype.next = u2),
          (k.prototype.plant = f2),
          (k.prototype.reverse = h2),
          (k.prototype.toJSON = k.prototype.valueOf = k.prototype.value = p2),
          (k.prototype.first = k.prototype.head),
          cs && (k.prototype[cs] = d2),
          k
        );
      },
      Co = cx();
    Fi ? (((Fi.exports = Co)._ = Co), ($c._ = Co)) : (Ht._ = Co);
  }).call(_o);
})(Nl, Nl.exports);
var Te = Nl.exports,
  HO = Array.prototype,
  $O = HO.reverse;
function jO(n) {
  return n == null ? n : $O.call(n);
}
var UO = jO;
const my = Jk(UO);
let dl;
const ZO = new Uint8Array(16);
function YO() {
  if (
    !dl &&
    ((dl =
      typeof crypto < "u" &&
      crypto.getRandomValues &&
      crypto.getRandomValues.bind(crypto)),
    !dl)
  )
    throw new Error(
      "crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported"
    );
  return dl(ZO);
}
const jt = [];
for (let n = 0; n < 256; ++n) jt.push((n + 256).toString(16).slice(1));
function qO(n, e = 0) {
  return (
    jt[n[e + 0]] +
    jt[n[e + 1]] +
    jt[n[e + 2]] +
    jt[n[e + 3]] +
    "-" +
    jt[n[e + 4]] +
    jt[n[e + 5]] +
    "-" +
    jt[n[e + 6]] +
    jt[n[e + 7]] +
    "-" +
    jt[n[e + 8]] +
    jt[n[e + 9]] +
    "-" +
    jt[n[e + 10]] +
    jt[n[e + 11]] +
    jt[n[e + 12]] +
    jt[n[e + 13]] +
    jt[n[e + 14]] +
    jt[n[e + 15]]
  );
}
const GO =
    typeof crypto < "u" && crypto.randomUUID && crypto.randomUUID.bind(crypto),
  i0 = { randomUUID: GO };
function KO(n, e, t) {
  if (i0.randomUUID && !e && !n) return i0.randomUUID();
  n = n || {};
  const r = n.random || (n.rng || YO)();
  if (((r[6] = (r[6] & 15) | 64), (r[8] = (r[8] & 63) | 128), e)) {
    t = t || 0;
    for (let i = 0; i < 16; ++i) e[t + i] = r[i];
    return e;
  }
  return qO(r);
}
const yy = ({
  layerId: n,
  clipPath: e,
  image: t,
  color: r,
  gradientBackground: i,
  boxSize: o,
  position: a,
  rotate: l,
  scale: u,
}) => {
  const { config: d } = S.useContext(ei),
    { actions: h, pageIndex: p, id: g } = go(),
    { selectedLayerIds: y } = Vt(),
    { imageEditor: m } = $e((R) => ({ imageEditor: R.imageEditor })),
    [w, b] = S.useState(null);
  S.useEffect(() => {
    if (t) {
      const R = new Image();
      (R.onload = () => {
        b((O) => O && { ...O, url: R.src });
      }),
        (R.src = t.url);
    }
  }, [t]),
    S.useEffect(() => {
      b(
        !t && !r && !i
          ? (() => {
              const O =
                  d.frame.defaultImage.width / d.frame.defaultImage.height,
                I = o.width / o.height,
                M = O > I ? (o.height / u) * O : o.width / u,
                D = O > I ? o.height / u : (o.width / u) * O;
              return {
                boxSize: { width: M, height: D },
                position: {
                  x: -(M - o.width / u) / 2,
                  y: -(D - o.height / u) / 2,
                },
                rotate: 0,
                url: d.frame.defaultImage.url,
                thumb: d.frame.defaultImage.url,
              };
            })()
          : t
      );
    }, [
      t,
      r,
      i,
      d.frame.defaultImage.width,
      d.frame.defaultImage.height,
      d.frame.defaultImage.url,
      o.width,
      o.height,
      u,
    ]);
  const E = () => {
    t &&
      y.includes(g) &&
      h.openImageEditor({
        boxSize: o,
        position: a,
        rotate: l,
        image: {
          boxSize: { width: t.boxSize.width * u, height: t.boxSize.height * u },
          position: { x: t.position.x * u, y: t.position.y * u },
          rotate: t.rotate || 0,
          url: t.url,
        },
      });
  };
  return x("div", {
    css: { transformOrigin: "0 0" },
    style: {
      width: o.width / u,
      height: o.height / u,
      transform: `scale(${u})`,
      visibility: m && m.pageIndex === p && m.layerId === g ? "hidden" : void 0,
    },
    onDoubleClick: E,
    children: x(ee.FrameContent, {
      boxSize: o,
      clipPath: e,
      color: r,
      gradientBackground: i,
      image: w,
      layerId: n,
      position: a,
      rotate: l,
      scale: u,
    }),
  });
};
yy.info = { name: "Frame", type: "Frame" };
const vy = ({ boxSize: n, scale: e, children: t }) =>
  x("div", {
    css: { transformOrigin: "0 0" },
    style: {
      width: n.width / e,
      height: n.height / e,
      transform: `scale(${e})`,
    },
    children: t,
  });
vy.info = { name: "Group", type: "Group" };
const wy = ({ layerId: n, image: e, boxSize: t, position: r, rotate: i }) => {
  const { actions: o, pageIndex: a, id: l } = go(),
    { selectedLayerIds: u } = Vt(),
    { imageEditor: d } = $e((g) => ({ imageEditor: g.imageEditor })),
    [h, p] = S.useState({ ...e, url: e.thumb });
  return (
    S.useEffect(() => {
      const g = new Image();
      (g.onload = () => {
        p((y) => ({ ...y, url: e.url }));
      }),
        (g.src = e.url);
    }, [e, p]),
    S.useEffect(() => {
      p(e);
    }, [e]),
    x("div", {
      css: {
        pointerEvents: "auto",
        visibility:
          d && d.pageIndex === a && d.layerId === l ? "hidden" : void 0,
      },
      onDoubleClick: () =>
        u.includes(l) &&
        o.openImageEditor({ position: r, rotate: i, boxSize: t, image: e }),
      children: x(ee.ImageContent, {
        boxSize: t,
        image: h,
        layerId: n,
        position: r,
        rotate: i,
      }),
    })
  );
};
wy.info = { name: "Image", type: "Image" };
const by = ({
  layerId: n,
  boxSize: e,
  color: t,
  scale: r = 1,
  rotate: i,
  position: o,
  style: a,
  ...l
}) =>
  H(p1, {
    children: [
      e.height < 32 &&
        x("div", {
          css: {
            top: -(32 - e.height) / 2,
            height: 32,
            width: e.width,
            position: "absolute",
          },
        }),
      x(ee.LineContent, {
        boxSize: e,
        color: t,
        layerId: n,
        position: o,
        rotate: i,
        scale: r,
        style: a,
        ...l,
      }),
    ],
  });
by.info = { name: "Line", type: "Line" };
const xy = ({
  layerId: n,
  boxSize: e,
  children: t,
  color: r,
  gradientBackground: i,
  image: o,
  video: a,
  position: l,
  rotate: u,
  scale: d,
}) => {
  const { actions: h } = go();
  return H(S.Fragment, {
    children: [
      x(ee.RootContent, {
        boxSize: e,
        color: r,
        gradientBackground: i,
        image: o,
        layerId: n,
        position: l,
        rotate: u,
        scale: d,
        video: a,
        onDoubleClick: () =>
          (o || a) &&
          h.openImageEditor({
            boxSize: e,
            position: l,
            rotate: u,
            image: o,
            video: a,
          }),
      }),
      t,
    ],
  });
};
xy.info = { name: "Main", type: "Root" };
const Sy = ({
  layerId: n,
  boxSize: e,
  shape: t,
  color: r,
  gradientBackground: i,
  roundedCorners: o = 0,
  scale: a = 1,
  rotate: l,
  position: u,
  border: d,
}) =>
  x("div", {
    css: { transformOrigin: "0 0" },
    style: {
      width: e.width / (a || 1),
      height: e.height / (a || 1),
      transform: `scale(${a || 1})`,
    },
    children: x(ee.ShapeContent, {
      border: d,
      boxSize: e,
      color: r,
      gradientBackground: i,
      layerId: n,
      position: u,
      rotate: l,
      roundedCorners: o,
      scale: a,
      shape: t,
    }),
  });
Sy.info = { name: "Shape", type: "Shape" };
const Cy = ({ boxSize: n, ...e }) =>
  x("div", {
    css: { transformOrigin: "0 0" },
    style: { width: n.width, height: n.height },
    children: x(ee.SvgContent, { boxSize: n, ...e }),
  });
Cy.info = { name: "Svg", type: "Svg" };
function Ut(n) {
  this.content = n;
}
Ut.prototype = {
  constructor: Ut,
  find: function (n) {
    for (var e = 0; e < this.content.length; e += 2)
      if (this.content[e] === n) return e;
    return -1;
  },
  get: function (n) {
    var e = this.find(n);
    return e == -1 ? void 0 : this.content[e + 1];
  },
  update: function (n, e, t) {
    var r = t && t != n ? this.remove(t) : this,
      i = r.find(n),
      o = r.content.slice();
    return (
      i == -1 ? o.push(t || n, e) : ((o[i + 1] = e), t && (o[i] = t)), new Ut(o)
    );
  },
  remove: function (n) {
    var e = this.find(n);
    if (e == -1) return this;
    var t = this.content.slice();
    return t.splice(e, 2), new Ut(t);
  },
  addToStart: function (n, e) {
    return new Ut([n, e].concat(this.remove(n).content));
  },
  addToEnd: function (n, e) {
    var t = this.remove(n).content.slice();
    return t.push(n, e), new Ut(t);
  },
  addBefore: function (n, e, t) {
    var r = this.remove(e),
      i = r.content.slice(),
      o = r.find(n);
    return i.splice(o == -1 ? i.length : o, 0, e, t), new Ut(i);
  },
  forEach: function (n) {
    for (var e = 0; e < this.content.length; e += 2)
      n(this.content[e], this.content[e + 1]);
  },
  prepend: function (n) {
    return (
      (n = Ut.from(n)),
      n.size ? new Ut(n.content.concat(this.subtract(n).content)) : this
    );
  },
  append: function (n) {
    return (
      (n = Ut.from(n)),
      n.size ? new Ut(this.subtract(n).content.concat(n.content)) : this
    );
  },
  subtract: function (n) {
    var e = this;
    n = Ut.from(n);
    for (var t = 0; t < n.content.length; t += 2) e = e.remove(n.content[t]);
    return e;
  },
  toObject: function () {
    var n = {};
    return (
      this.forEach(function (e, t) {
        n[e] = t;
      }),
      n
    );
  },
  get size() {
    return this.content.length >> 1;
  },
};
Ut.from = function (n) {
  if (n instanceof Ut) return n;
  var e = [];
  if (n) for (var t in n) e.push(t, n[t]);
  return new Ut(e);
};
function Ey(n, e, t) {
  for (let r = 0; ; r++) {
    if (r == n.childCount || r == e.childCount)
      return n.childCount == e.childCount ? null : t;
    let i = n.child(r),
      o = e.child(r);
    if (i == o) {
      t += i.nodeSize;
      continue;
    }
    if (!i.sameMarkup(o)) return t;
    if (i.isText && i.text != o.text) {
      for (let a = 0; i.text[a] == o.text[a]; a++) t++;
      return t;
    }
    if (i.content.size || o.content.size) {
      let a = Ey(i.content, o.content, t + 1);
      if (a != null) return a;
    }
    t += i.nodeSize;
  }
}
function ky(n, e, t, r) {
  for (let i = n.childCount, o = e.childCount; ; ) {
    if (i == 0 || o == 0) return i == o ? null : { a: t, b: r };
    let a = n.child(--i),
      l = e.child(--o),
      u = a.nodeSize;
    if (a == l) {
      (t -= u), (r -= u);
      continue;
    }
    if (!a.sameMarkup(l)) return { a: t, b: r };
    if (a.isText && a.text != l.text) {
      let d = 0,
        h = Math.min(a.text.length, l.text.length);
      for (
        ;
        d < h && a.text[a.text.length - d - 1] == l.text[l.text.length - d - 1];

      )
        d++, t--, r--;
      return { a: t, b: r };
    }
    if (a.content.size || l.content.size) {
      let d = ky(a.content, l.content, t - 1, r - 1);
      if (d) return d;
    }
    (t -= u), (r -= u);
  }
}
class he {
  constructor(e, t) {
    if (((this.content = e), (this.size = t || 0), t == null))
      for (let r = 0; r < e.length; r++) this.size += e[r].nodeSize;
  }
  nodesBetween(e, t, r, i = 0, o) {
    for (let a = 0, l = 0; l < t; a++) {
      let u = this.content[a],
        d = l + u.nodeSize;
      if (d > e && r(u, i + l, o || null, a) !== !1 && u.content.size) {
        let h = l + 1;
        u.nodesBetween(
          Math.max(0, e - h),
          Math.min(u.content.size, t - h),
          r,
          i + h
        );
      }
      l = d;
    }
  }
  descendants(e) {
    this.nodesBetween(0, this.size, e);
  }
  textBetween(e, t, r, i) {
    let o = "",
      a = !0;
    return (
      this.nodesBetween(
        e,
        t,
        (l, u) => {
          l.isText
            ? ((o += l.text.slice(Math.max(e, u) - u, t - u)), (a = !r))
            : l.isLeaf
            ? (i
                ? (o += typeof i == "function" ? i(l) : i)
                : l.type.spec.leafText && (o += l.type.spec.leafText(l)),
              (a = !r))
            : !a && l.isBlock && ((o += r), (a = !0));
        },
        0
      ),
      o
    );
  }
  append(e) {
    if (!e.size) return this;
    if (!this.size) return e;
    let t = this.lastChild,
      r = e.firstChild,
      i = this.content.slice(),
      o = 0;
    for (
      t.isText &&
      t.sameMarkup(r) &&
      ((i[i.length - 1] = t.withText(t.text + r.text)), (o = 1));
      o < e.content.length;
      o++
    )
      i.push(e.content[o]);
    return new he(i, this.size + e.size);
  }
  cut(e, t = this.size) {
    if (e == 0 && t == this.size) return this;
    let r = [],
      i = 0;
    if (t > e)
      for (let o = 0, a = 0; a < t; o++) {
        let l = this.content[o],
          u = a + l.nodeSize;
        u > e &&
          ((a < e || u > t) &&
            (l.isText
              ? (l = l.cut(Math.max(0, e - a), Math.min(l.text.length, t - a)))
              : (l = l.cut(
                  Math.max(0, e - a - 1),
                  Math.min(l.content.size, t - a - 1)
                ))),
          r.push(l),
          (i += l.nodeSize)),
          (a = u);
      }
    return new he(r, i);
  }
  cutByIndex(e, t) {
    return e == t
      ? he.empty
      : e == 0 && t == this.content.length
      ? this
      : new he(this.content.slice(e, t));
  }
  replaceChild(e, t) {
    let r = this.content[e];
    if (r == t) return this;
    let i = this.content.slice(),
      o = this.size + t.nodeSize - r.nodeSize;
    return (i[e] = t), new he(i, o);
  }
  addToStart(e) {
    return new he([e].concat(this.content), this.size + e.nodeSize);
  }
  addToEnd(e) {
    return new he(this.content.concat(e), this.size + e.nodeSize);
  }
  eq(e) {
    if (this.content.length != e.content.length) return !1;
    for (let t = 0; t < this.content.length; t++)
      if (!this.content[t].eq(e.content[t])) return !1;
    return !0;
  }
  get firstChild() {
    return this.content.length ? this.content[0] : null;
  }
  get lastChild() {
    return this.content.length ? this.content[this.content.length - 1] : null;
  }
  get childCount() {
    return this.content.length;
  }
  child(e) {
    let t = this.content[e];
    if (!t) throw new RangeError("Index " + e + " out of range for " + this);
    return t;
  }
  maybeChild(e) {
    return this.content[e] || null;
  }
  forEach(e) {
    for (let t = 0, r = 0; t < this.content.length; t++) {
      let i = this.content[t];
      e(i, r, t), (r += i.nodeSize);
    }
  }
  findDiffStart(e, t = 0) {
    return Ey(this, e, t);
  }
  findDiffEnd(e, t = this.size, r = e.size) {
    return ky(this, e, t, r);
  }
  findIndex(e, t = -1) {
    if (e == 0) return fl(0, e);
    if (e == this.size) return fl(this.content.length, e);
    if (e > this.size || e < 0)
      throw new RangeError(`Position ${e} outside of fragment (${this})`);
    for (let r = 0, i = 0; ; r++) {
      let o = this.child(r),
        a = i + o.nodeSize;
      if (a >= e) return a == e || t > 0 ? fl(r + 1, a) : fl(r, i);
      i = a;
    }
  }
  toString() {
    return "<" + this.toStringInner() + ">";
  }
  toStringInner() {
    return this.content.join(", ");
  }
  toJSON() {
    return this.content.length ? this.content.map((e) => e.toJSON()) : null;
  }
  static fromJSON(e, t) {
    if (!t) return he.empty;
    if (!Array.isArray(t))
      throw new RangeError("Invalid input for Fragment.fromJSON");
    return new he(t.map(e.nodeFromJSON));
  }
  static fromArray(e) {
    if (!e.length) return he.empty;
    let t,
      r = 0;
    for (let i = 0; i < e.length; i++) {
      let o = e[i];
      (r += o.nodeSize),
        i && o.isText && e[i - 1].sameMarkup(o)
          ? (t || (t = e.slice(0, i)),
            (t[t.length - 1] = o.withText(t[t.length - 1].text + o.text)))
          : t && t.push(o);
    }
    return new he(t || e, r);
  }
  static from(e) {
    if (!e) return he.empty;
    if (e instanceof he) return e;
    if (Array.isArray(e)) return this.fromArray(e);
    if (e.attrs) return new he([e], e.nodeSize);
    throw new RangeError(
      "Can not convert " +
        e +
        " to a Fragment" +
        (e.nodesBetween
          ? " (looks like multiple versions of prosemirror-model were loaded)"
          : "")
    );
  }
}
he.empty = new he([], 0);
const Gu = { index: 0, offset: 0 };
function fl(n, e) {
  return (Gu.index = n), (Gu.offset = e), Gu;
}
function zl(n, e) {
  if (n === e) return !0;
  if (!(n && typeof n == "object") || !(e && typeof e == "object")) return !1;
  let t = Array.isArray(n);
  if (Array.isArray(e) != t) return !1;
  if (t) {
    if (n.length != e.length) return !1;
    for (let r = 0; r < n.length; r++) if (!zl(n[r], e[r])) return !1;
  } else {
    for (let r in n) if (!(r in e) || !zl(n[r], e[r])) return !1;
    for (let r in e) if (!(r in n)) return !1;
  }
  return !0;
}
class at {
  constructor(e, t) {
    (this.type = e), (this.attrs = t);
  }
  addToSet(e) {
    let t,
      r = !1;
    for (let i = 0; i < e.length; i++) {
      let o = e[i];
      if (this.eq(o)) return e;
      if (this.type.excludes(o.type)) t || (t = e.slice(0, i));
      else {
        if (o.type.excludes(this.type)) return e;
        !r &&
          o.type.rank > this.type.rank &&
          (t || (t = e.slice(0, i)), t.push(this), (r = !0)),
          t && t.push(o);
      }
    }
    return t || (t = e.slice()), r || t.push(this), t;
  }
  removeFromSet(e) {
    for (let t = 0; t < e.length; t++)
      if (this.eq(e[t])) return e.slice(0, t).concat(e.slice(t + 1));
    return e;
  }
  isInSet(e) {
    for (let t = 0; t < e.length; t++) if (this.eq(e[t])) return !0;
    return !1;
  }
  eq(e) {
    return this == e || (this.type == e.type && zl(this.attrs, e.attrs));
  }
  toJSON() {
    let e = { type: this.type.name };
    for (let t in this.attrs) {
      e.attrs = this.attrs;
      break;
    }
    return e;
  }
  static fromJSON(e, t) {
    if (!t) throw new RangeError("Invalid input for Mark.fromJSON");
    let r = e.marks[t.type];
    if (!r)
      throw new RangeError(`There is no mark type ${t.type} in this schema`);
    return r.create(t.attrs);
  }
  static sameSet(e, t) {
    if (e == t) return !0;
    if (e.length != t.length) return !1;
    for (let r = 0; r < e.length; r++) if (!e[r].eq(t[r])) return !1;
    return !0;
  }
  static setFrom(e) {
    if (!e || (Array.isArray(e) && e.length == 0)) return at.none;
    if (e instanceof at) return [e];
    let t = e.slice();
    return t.sort((r, i) => r.type.rank - i.type.rank), t;
  }
}
at.none = [];
class Bl extends Error {}
class ke {
  constructor(e, t, r) {
    (this.content = e), (this.openStart = t), (this.openEnd = r);
  }
  get size() {
    return this.content.size - this.openStart - this.openEnd;
  }
  insertAt(e, t) {
    let r = Ty(this.content, e + this.openStart, t);
    return r && new ke(r, this.openStart, this.openEnd);
  }
  removeBetween(e, t) {
    return new ke(
      Oy(this.content, e + this.openStart, t + this.openStart),
      this.openStart,
      this.openEnd
    );
  }
  eq(e) {
    return (
      this.content.eq(e.content) &&
      this.openStart == e.openStart &&
      this.openEnd == e.openEnd
    );
  }
  toString() {
    return this.content + "(" + this.openStart + "," + this.openEnd + ")";
  }
  toJSON() {
    if (!this.content.size) return null;
    let e = { content: this.content.toJSON() };
    return (
      this.openStart > 0 && (e.openStart = this.openStart),
      this.openEnd > 0 && (e.openEnd = this.openEnd),
      e
    );
  }
  static fromJSON(e, t) {
    if (!t) return ke.empty;
    let r = t.openStart || 0,
      i = t.openEnd || 0;
    if (typeof r != "number" || typeof i != "number")
      throw new RangeError("Invalid input for Slice.fromJSON");
    return new ke(he.fromJSON(e, t.content), r, i);
  }
  static maxOpen(e, t = !0) {
    let r = 0,
      i = 0;
    for (
      let o = e.firstChild;
      o && !o.isLeaf && (t || !o.type.spec.isolating);
      o = o.firstChild
    )
      r++;
    for (
      let o = e.lastChild;
      o && !o.isLeaf && (t || !o.type.spec.isolating);
      o = o.lastChild
    )
      i++;
    return new ke(e, r, i);
  }
}
ke.empty = new ke(he.empty, 0, 0);
function Oy(n, e, t) {
  let { index: r, offset: i } = n.findIndex(e),
    o = n.maybeChild(r),
    { index: a, offset: l } = n.findIndex(t);
  if (i == e || o.isText) {
    if (l != t && !n.child(a).isText)
      throw new RangeError("Removing non-flat range");
    return n.cut(0, e).append(n.cut(t));
  }
  if (r != a) throw new RangeError("Removing non-flat range");
  return n.replaceChild(r, o.copy(Oy(o.content, e - i - 1, t - i - 1)));
}
function Ty(n, e, t, r) {
  let { index: i, offset: o } = n.findIndex(e),
    a = n.maybeChild(i);
  if (o == e || a.isText)
    return r && !r.canReplace(i, i, t)
      ? null
      : n.cut(0, e).append(t).append(n.cut(e));
  let l = Ty(a.content, e - o - 1, t);
  return l && n.replaceChild(i, a.copy(l));
}
function XO(n, e, t) {
  if (t.openStart > n.depth)
    throw new Bl("Inserted content deeper than insertion position");
  if (n.depth - t.openStart != e.depth - t.openEnd)
    throw new Bl("Inconsistent open depths");
  return My(n, e, t, 0);
}
function My(n, e, t, r) {
  let i = n.index(r),
    o = n.node(r);
  if (i == e.index(r) && r < n.depth - t.openStart) {
    let a = My(n, e, t, r + 1);
    return o.copy(o.content.replaceChild(i, a));
  } else if (t.content.size)
    if (!t.openStart && !t.openEnd && n.depth == r && e.depth == r) {
      let a = n.parent,
        l = a.content;
      return to(
        a,
        l.cut(0, n.parentOffset).append(t.content).append(l.cut(e.parentOffset))
      );
    } else {
      let { start: a, end: l } = JO(t, n);
      return to(o, Dy(n, a, l, e, r));
    }
  else return to(o, Fl(n, e, r));
}
function Ry(n, e) {
  if (!e.type.compatibleContent(n.type))
    throw new Bl("Cannot join " + e.type.name + " onto " + n.type.name);
}
function Kd(n, e, t) {
  let r = n.node(t);
  return Ry(r, e.node(t)), r;
}
function eo(n, e) {
  let t = e.length - 1;
  t >= 0 && n.isText && n.sameMarkup(e[t])
    ? (e[t] = n.withText(e[t].text + n.text))
    : e.push(n);
}
function Ls(n, e, t, r) {
  let i = (e || n).node(t),
    o = 0,
    a = e ? e.index(t) : i.childCount;
  n &&
    ((o = n.index(t)),
    n.depth > t ? o++ : n.textOffset && (eo(n.nodeAfter, r), o++));
  for (let l = o; l < a; l++) eo(i.child(l), r);
  e && e.depth == t && e.textOffset && eo(e.nodeBefore, r);
}
function to(n, e) {
  return n.type.checkContent(e), n.copy(e);
}
function Dy(n, e, t, r, i) {
  let o = n.depth > i && Kd(n, e, i + 1),
    a = r.depth > i && Kd(t, r, i + 1),
    l = [];
  return (
    Ls(null, n, i, l),
    o && a && e.index(i) == t.index(i)
      ? (Ry(o, a), eo(to(o, Dy(n, e, t, r, i + 1)), l))
      : (o && eo(to(o, Fl(n, e, i + 1)), l),
        Ls(e, t, i, l),
        a && eo(to(a, Fl(t, r, i + 1)), l)),
    Ls(r, null, i, l),
    new he(l)
  );
}
function Fl(n, e, t) {
  let r = [];
  if ((Ls(null, n, t, r), n.depth > t)) {
    let i = Kd(n, e, t + 1);
    eo(to(i, Fl(n, e, t + 1)), r);
  }
  return Ls(e, null, t, r), new he(r);
}
function JO(n, e) {
  let t = e.depth - n.openStart,
    i = e.node(t).copy(n.content);
  for (let o = t - 1; o >= 0; o--) i = e.node(o).copy(he.from(i));
  return {
    start: i.resolveNoCache(n.openStart + t),
    end: i.resolveNoCache(i.content.size - n.openEnd - t),
  };
}
class Ys {
  constructor(e, t, r) {
    (this.pos = e),
      (this.path = t),
      (this.parentOffset = r),
      (this.depth = t.length / 3 - 1);
  }
  resolveDepth(e) {
    return e == null ? this.depth : e < 0 ? this.depth + e : e;
  }
  get parent() {
    return this.node(this.depth);
  }
  get doc() {
    return this.node(0);
  }
  node(e) {
    return this.path[this.resolveDepth(e) * 3];
  }
  index(e) {
    return this.path[this.resolveDepth(e) * 3 + 1];
  }
  indexAfter(e) {
    return (
      (e = this.resolveDepth(e)),
      this.index(e) + (e == this.depth && !this.textOffset ? 0 : 1)
    );
  }
  start(e) {
    return (e = this.resolveDepth(e)), e == 0 ? 0 : this.path[e * 3 - 1] + 1;
  }
  end(e) {
    return (
      (e = this.resolveDepth(e)), this.start(e) + this.node(e).content.size
    );
  }
  before(e) {
    if (((e = this.resolveDepth(e)), !e))
      throw new RangeError("There is no position before the top-level node");
    return e == this.depth + 1 ? this.pos : this.path[e * 3 - 1];
  }
  after(e) {
    if (((e = this.resolveDepth(e)), !e))
      throw new RangeError("There is no position after the top-level node");
    return e == this.depth + 1
      ? this.pos
      : this.path[e * 3 - 1] + this.path[e * 3].nodeSize;
  }
  get textOffset() {
    return this.pos - this.path[this.path.length - 1];
  }
  get nodeAfter() {
    let e = this.parent,
      t = this.index(this.depth);
    if (t == e.childCount) return null;
    let r = this.pos - this.path[this.path.length - 1],
      i = e.child(t);
    return r ? e.child(t).cut(r) : i;
  }
  get nodeBefore() {
    let e = this.index(this.depth),
      t = this.pos - this.path[this.path.length - 1];
    return t
      ? this.parent.child(e).cut(0, t)
      : e == 0
      ? null
      : this.parent.child(e - 1);
  }
  posAtIndex(e, t) {
    t = this.resolveDepth(t);
    let r = this.path[t * 3],
      i = t == 0 ? 0 : this.path[t * 3 - 1] + 1;
    for (let o = 0; o < e; o++) i += r.child(o).nodeSize;
    return i;
  }
  marks() {
    let e = this.parent,
      t = this.index();
    if (e.content.size == 0) return at.none;
    if (this.textOffset) return e.child(t).marks;
    let r = e.maybeChild(t - 1),
      i = e.maybeChild(t);
    if (!r) {
      let l = r;
      (r = i), (i = l);
    }
    let o = r.marks;
    for (var a = 0; a < o.length; a++)
      o[a].type.spec.inclusive === !1 &&
        (!i || !o[a].isInSet(i.marks)) &&
        (o = o[a--].removeFromSet(o));
    return o;
  }
  marksAcross(e) {
    let t = this.parent.maybeChild(this.index());
    if (!t || !t.isInline) return null;
    let r = t.marks,
      i = e.parent.maybeChild(e.index());
    for (var o = 0; o < r.length; o++)
      r[o].type.spec.inclusive === !1 &&
        (!i || !r[o].isInSet(i.marks)) &&
        (r = r[o--].removeFromSet(r));
    return r;
  }
  sharedDepth(e) {
    for (let t = this.depth; t > 0; t--)
      if (this.start(t) <= e && this.end(t) >= e) return t;
    return 0;
  }
  blockRange(e = this, t) {
    if (e.pos < this.pos) return e.blockRange(this);
    for (
      let r =
        this.depth - (this.parent.inlineContent || this.pos == e.pos ? 1 : 0);
      r >= 0;
      r--
    )
      if (e.pos <= this.end(r) && (!t || t(this.node(r))))
        return new eT(this, e, r);
    return null;
  }
  sameParent(e) {
    return this.pos - this.parentOffset == e.pos - e.parentOffset;
  }
  max(e) {
    return e.pos > this.pos ? e : this;
  }
  min(e) {
    return e.pos < this.pos ? e : this;
  }
  toString() {
    let e = "";
    for (let t = 1; t <= this.depth; t++)
      e += (e ? "/" : "") + this.node(t).type.name + "_" + this.index(t - 1);
    return e + ":" + this.parentOffset;
  }
  static resolve(e, t) {
    if (!(t >= 0 && t <= e.content.size))
      throw new RangeError("Position " + t + " out of range");
    let r = [],
      i = 0,
      o = t;
    for (let a = e; ; ) {
      let { index: l, offset: u } = a.content.findIndex(o),
        d = o - u;
      if ((r.push(a, l, i + u), !d || ((a = a.child(l)), a.isText))) break;
      (o = d - 1), (i += u + 1);
    }
    return new Ys(t, r, o);
  }
  static resolveCached(e, t) {
    for (let i = 0; i < Ku.length; i++) {
      let o = Ku[i];
      if (o.pos == t && o.doc == e) return o;
    }
    let r = (Ku[Xu] = Ys.resolve(e, t));
    return (Xu = (Xu + 1) % QO), r;
  }
}
let Ku = [],
  Xu = 0,
  QO = 12;
class eT {
  constructor(e, t, r) {
    (this.$from = e), (this.$to = t), (this.depth = r);
  }
  get start() {
    return this.$from.before(this.depth + 1);
  }
  get end() {
    return this.$to.after(this.depth + 1);
  }
  get parent() {
    return this.$from.node(this.depth);
  }
  get startIndex() {
    return this.$from.index(this.depth);
  }
  get endIndex() {
    return this.$to.indexAfter(this.depth);
  }
}
const tT = Object.create(null);
class Rr {
  constructor(e, t, r, i = at.none) {
    (this.type = e),
      (this.attrs = t),
      (this.marks = i),
      (this.content = r || he.empty);
  }
  get nodeSize() {
    return this.isLeaf ? 1 : 2 + this.content.size;
  }
  get childCount() {
    return this.content.childCount;
  }
  child(e) {
    return this.content.child(e);
  }
  maybeChild(e) {
    return this.content.maybeChild(e);
  }
  forEach(e) {
    this.content.forEach(e);
  }
  nodesBetween(e, t, r, i = 0) {
    this.content.nodesBetween(e, t, r, i, this);
  }
  descendants(e) {
    this.nodesBetween(0, this.content.size, e);
  }
  get textContent() {
    return this.isLeaf && this.type.spec.leafText
      ? this.type.spec.leafText(this)
      : this.textBetween(0, this.content.size, "");
  }
  textBetween(e, t, r, i) {
    return this.content.textBetween(e, t, r, i);
  }
  get firstChild() {
    return this.content.firstChild;
  }
  get lastChild() {
    return this.content.lastChild;
  }
  eq(e) {
    return this == e || (this.sameMarkup(e) && this.content.eq(e.content));
  }
  sameMarkup(e) {
    return this.hasMarkup(e.type, e.attrs, e.marks);
  }
  hasMarkup(e, t, r) {
    return (
      this.type == e &&
      zl(this.attrs, t || e.defaultAttrs || tT) &&
      at.sameSet(this.marks, r || at.none)
    );
  }
  copy(e = null) {
    return e == this.content
      ? this
      : new Rr(this.type, this.attrs, e, this.marks);
  }
  mark(e) {
    return e == this.marks
      ? this
      : new Rr(this.type, this.attrs, this.content, e);
  }
  cut(e, t = this.content.size) {
    return e == 0 && t == this.content.size
      ? this
      : this.copy(this.content.cut(e, t));
  }
  slice(e, t = this.content.size, r = !1) {
    if (e == t) return ke.empty;
    let i = this.resolve(e),
      o = this.resolve(t),
      a = r ? 0 : i.sharedDepth(t),
      l = i.start(a),
      d = i.node(a).content.cut(i.pos - l, o.pos - l);
    return new ke(d, i.depth - a, o.depth - a);
  }
  replace(e, t, r) {
    return XO(this.resolve(e), this.resolve(t), r);
  }
  nodeAt(e) {
    for (let t = this; ; ) {
      let { index: r, offset: i } = t.content.findIndex(e);
      if (((t = t.maybeChild(r)), !t)) return null;
      if (i == e || t.isText) return t;
      e -= i + 1;
    }
  }
  childAfter(e) {
    let { index: t, offset: r } = this.content.findIndex(e);
    return { node: this.content.maybeChild(t), index: t, offset: r };
  }
  childBefore(e) {
    if (e == 0) return { node: null, index: 0, offset: 0 };
    let { index: t, offset: r } = this.content.findIndex(e);
    if (r < e) return { node: this.content.child(t), index: t, offset: r };
    let i = this.content.child(t - 1);
    return { node: i, index: t - 1, offset: r - i.nodeSize };
  }
  resolve(e) {
    return Ys.resolveCached(this, e);
  }
  resolveNoCache(e) {
    return Ys.resolve(this, e);
  }
  rangeHasMark(e, t, r) {
    let i = !1;
    return (
      t > e &&
        this.nodesBetween(e, t, (o) => (r.isInSet(o.marks) && (i = !0), !i)),
      i
    );
  }
  get isBlock() {
    return this.type.isBlock;
  }
  get isTextblock() {
    return this.type.isTextblock;
  }
  get inlineContent() {
    return this.type.inlineContent;
  }
  get isInline() {
    return this.type.isInline;
  }
  get isText() {
    return this.type.isText;
  }
  get isLeaf() {
    return this.type.isLeaf;
  }
  get isAtom() {
    return this.type.isAtom;
  }
  toString() {
    if (this.type.spec.toDebugString) return this.type.spec.toDebugString(this);
    let e = this.type.name;
    return (
      this.content.size && (e += "(" + this.content.toStringInner() + ")"),
      Iy(this.marks, e)
    );
  }
  contentMatchAt(e) {
    let t = this.type.contentMatch.matchFragment(this.content, 0, e);
    if (!t)
      throw new Error("Called contentMatchAt on a node with invalid content");
    return t;
  }
  canReplace(e, t, r = he.empty, i = 0, o = r.childCount) {
    let a = this.contentMatchAt(e).matchFragment(r, i, o),
      l = a && a.matchFragment(this.content, t);
    if (!l || !l.validEnd) return !1;
    for (let u = i; u < o; u++)
      if (!this.type.allowsMarks(r.child(u).marks)) return !1;
    return !0;
  }
  canReplaceWith(e, t, r, i) {
    if (i && !this.type.allowsMarks(i)) return !1;
    let o = this.contentMatchAt(e).matchType(r),
      a = o && o.matchFragment(this.content, t);
    return a ? a.validEnd : !1;
  }
  canAppend(e) {
    return e.content.size
      ? this.canReplace(this.childCount, this.childCount, e.content)
      : this.type.compatibleContent(e.type);
  }
  check() {
    this.type.checkContent(this.content);
    let e = at.none;
    for (let t = 0; t < this.marks.length; t++) e = this.marks[t].addToSet(e);
    if (!at.sameSet(e, this.marks))
      throw new RangeError(
        `Invalid collection of marks for node ${
          this.type.name
        }: ${this.marks.map((t) => t.type.name)}`
      );
    this.content.forEach((t) => t.check());
  }
  toJSON() {
    let e = { type: this.type.name };
    for (let t in this.attrs) {
      e.attrs = this.attrs;
      break;
    }
    return (
      this.content.size && (e.content = this.content.toJSON()),
      this.marks.length && (e.marks = this.marks.map((t) => t.toJSON())),
      e
    );
  }
  static fromJSON(e, t) {
    if (!t) throw new RangeError("Invalid input for Node.fromJSON");
    let r = null;
    if (t.marks) {
      if (!Array.isArray(t.marks))
        throw new RangeError("Invalid mark data for Node.fromJSON");
      r = t.marks.map(e.markFromJSON);
    }
    if (t.type == "text") {
      if (typeof t.text != "string")
        throw new RangeError("Invalid text node in JSON");
      return e.text(t.text, r);
    }
    let i = he.fromJSON(e, t.content);
    return e.nodeType(t.type).create(t.attrs, i, r);
  }
}
Rr.prototype.text = void 0;
class Wl extends Rr {
  constructor(e, t, r, i) {
    if ((super(e, t, null, i), !r))
      throw new RangeError("Empty text nodes are not allowed");
    this.text = r;
  }
  toString() {
    return this.type.spec.toDebugString
      ? this.type.spec.toDebugString(this)
      : Iy(this.marks, JSON.stringify(this.text));
  }
  get textContent() {
    return this.text;
  }
  textBetween(e, t) {
    return this.text.slice(e, t);
  }
  get nodeSize() {
    return this.text.length;
  }
  mark(e) {
    return e == this.marks ? this : new Wl(this.type, this.attrs, this.text, e);
  }
  withText(e) {
    return e == this.text ? this : new Wl(this.type, this.attrs, e, this.marks);
  }
  cut(e = 0, t = this.text.length) {
    return e == 0 && t == this.text.length
      ? this
      : this.withText(this.text.slice(e, t));
  }
  eq(e) {
    return this.sameMarkup(e) && this.text == e.text;
  }
  toJSON() {
    let e = super.toJSON();
    return (e.text = this.text), e;
  }
}
function Iy(n, e) {
  for (let t = n.length - 1; t >= 0; t--) e = n[t].type.name + "(" + e + ")";
  return e;
}
class oo {
  constructor(e) {
    (this.validEnd = e), (this.next = []), (this.wrapCache = []);
  }
  static parse(e, t) {
    let r = new nT(e, t);
    if (r.next == null) return oo.empty;
    let i = Ay(r);
    r.next && r.err("Unexpected trailing text");
    let o = cT(lT(i));
    return uT(o, r), o;
  }
  matchType(e) {
    for (let t = 0; t < this.next.length; t++)
      if (this.next[t].type == e) return this.next[t].next;
    return null;
  }
  matchFragment(e, t = 0, r = e.childCount) {
    let i = this;
    for (let o = t; i && o < r; o++) i = i.matchType(e.child(o).type);
    return i;
  }
  get inlineContent() {
    return this.next.length != 0 && this.next[0].type.isInline;
  }
  get defaultType() {
    for (let e = 0; e < this.next.length; e++) {
      let { type: t } = this.next[e];
      if (!(t.isText || t.hasRequiredAttrs())) return t;
    }
    return null;
  }
  compatible(e) {
    for (let t = 0; t < this.next.length; t++)
      for (let r = 0; r < e.next.length; r++)
        if (this.next[t].type == e.next[r].type) return !0;
    return !1;
  }
  fillBefore(e, t = !1, r = 0) {
    let i = [this];
    function o(a, l) {
      let u = a.matchFragment(e, r);
      if (u && (!t || u.validEnd))
        return he.from(l.map((d) => d.createAndFill()));
      for (let d = 0; d < a.next.length; d++) {
        let { type: h, next: p } = a.next[d];
        if (!(h.isText || h.hasRequiredAttrs()) && i.indexOf(p) == -1) {
          i.push(p);
          let g = o(p, l.concat(h));
          if (g) return g;
        }
      }
      return null;
    }
    return o(this, []);
  }
  findWrapping(e) {
    for (let r = 0; r < this.wrapCache.length; r += 2)
      if (this.wrapCache[r] == e) return this.wrapCache[r + 1];
    let t = this.computeWrapping(e);
    return this.wrapCache.push(e, t), t;
  }
  computeWrapping(e) {
    let t = Object.create(null),
      r = [{ match: this, type: null, via: null }];
    for (; r.length; ) {
      let i = r.shift(),
        o = i.match;
      if (o.matchType(e)) {
        let a = [];
        for (let l = i; l.type; l = l.via) a.push(l.type);
        return a.reverse();
      }
      for (let a = 0; a < o.next.length; a++) {
        let { type: l, next: u } = o.next[a];
        !l.isLeaf &&
          !l.hasRequiredAttrs() &&
          !(l.name in t) &&
          (!i.type || u.validEnd) &&
          (r.push({ match: l.contentMatch, type: l, via: i }),
          (t[l.name] = !0));
      }
    }
    return null;
  }
  get edgeCount() {
    return this.next.length;
  }
  edge(e) {
    if (e >= this.next.length)
      throw new RangeError(`There's no ${e}th edge in this content match`);
    return this.next[e];
  }
  toString() {
    let e = [];
    function t(r) {
      e.push(r);
      for (let i = 0; i < r.next.length; i++)
        e.indexOf(r.next[i].next) == -1 && t(r.next[i].next);
    }
    return (
      t(this),
      e.map((r, i) => {
        let o = i + (r.validEnd ? "*" : " ") + " ";
        for (let a = 0; a < r.next.length; a++)
          o +=
            (a ? ", " : "") +
            r.next[a].type.name +
            "->" +
            e.indexOf(r.next[a].next);
        return o;
      }).join(`
`)
    );
  }
}
oo.empty = new oo(!0);
class nT {
  constructor(e, t) {
    (this.string = e),
      (this.nodeTypes = t),
      (this.inline = null),
      (this.pos = 0),
      (this.tokens = e.split(/\s*(?=\b|\W|$)/)),
      this.tokens[this.tokens.length - 1] == "" && this.tokens.pop(),
      this.tokens[0] == "" && this.tokens.shift();
  }
  get next() {
    return this.tokens[this.pos];
  }
  eat(e) {
    return this.next == e && (this.pos++ || !0);
  }
  err(e) {
    throw new SyntaxError(e + " (in content expression '" + this.string + "')");
  }
}
function Ay(n) {
  let e = [];
  do e.push(rT(n));
  while (n.eat("|"));
  return e.length == 1 ? e[0] : { type: "choice", exprs: e };
}
function rT(n) {
  let e = [];
  do e.push(iT(n));
  while (n.next && n.next != ")" && n.next != "|");
  return e.length == 1 ? e[0] : { type: "seq", exprs: e };
}
function iT(n) {
  let e = aT(n);
  for (;;)
    if (n.eat("+")) e = { type: "plus", expr: e };
    else if (n.eat("*")) e = { type: "star", expr: e };
    else if (n.eat("?")) e = { type: "opt", expr: e };
    else if (n.eat("{")) e = oT(n, e);
    else break;
  return e;
}
function o0(n) {
  /\D/.test(n.next) && n.err("Expected number, got '" + n.next + "'");
  let e = Number(n.next);
  return n.pos++, e;
}
function oT(n, e) {
  let t = o0(n),
    r = t;
  return (
    n.eat(",") && (n.next != "}" ? (r = o0(n)) : (r = -1)),
    n.eat("}") || n.err("Unclosed braced range"),
    { type: "range", min: t, max: r, expr: e }
  );
}
function sT(n, e) {
  let t = n.nodeTypes,
    r = t[e];
  if (r) return [r];
  let i = [];
  for (let o in t) {
    let a = t[o];
    a.groups.indexOf(e) > -1 && i.push(a);
  }
  return i.length == 0 && n.err("No node type or group '" + e + "' found"), i;
}
function aT(n) {
  if (n.eat("(")) {
    let e = Ay(n);
    return n.eat(")") || n.err("Missing closing paren"), e;
  } else if (/\W/.test(n.next)) n.err("Unexpected token '" + n.next + "'");
  else {
    let e = sT(n, n.next).map(
      (t) => (
        n.inline == null
          ? (n.inline = t.isInline)
          : n.inline != t.isInline && n.err("Mixing inline and block content"),
        { type: "name", value: t }
      )
    );
    return n.pos++, e.length == 1 ? e[0] : { type: "choice", exprs: e };
  }
}
function lT(n) {
  let e = [[]];
  return i(o(n, 0), t()), e;
  function t() {
    return e.push([]) - 1;
  }
  function r(a, l, u) {
    let d = { term: u, to: l };
    return e[a].push(d), d;
  }
  function i(a, l) {
    a.forEach((u) => (u.to = l));
  }
  function o(a, l) {
    if (a.type == "choice")
      return a.exprs.reduce((u, d) => u.concat(o(d, l)), []);
    if (a.type == "seq")
      for (let u = 0; ; u++) {
        let d = o(a.exprs[u], l);
        if (u == a.exprs.length - 1) return d;
        i(d, (l = t()));
      }
    else if (a.type == "star") {
      let u = t();
      return r(l, u), i(o(a.expr, u), u), [r(u)];
    } else if (a.type == "plus") {
      let u = t();
      return i(o(a.expr, l), u), i(o(a.expr, u), u), [r(u)];
    } else {
      if (a.type == "opt") return [r(l)].concat(o(a.expr, l));
      if (a.type == "range") {
        let u = l;
        for (let d = 0; d < a.min; d++) {
          let h = t();
          i(o(a.expr, u), h), (u = h);
        }
        if (a.max == -1) i(o(a.expr, u), u);
        else
          for (let d = a.min; d < a.max; d++) {
            let h = t();
            r(u, h), i(o(a.expr, u), h), (u = h);
          }
        return [r(u)];
      } else {
        if (a.type == "name") return [r(l, void 0, a.value)];
        throw new Error("Unknown expr type");
      }
    }
  }
}
function Ly(n, e) {
  return e - n;
}
function s0(n, e) {
  let t = [];
  return r(e), t.sort(Ly);
  function r(i) {
    let o = n[i];
    if (o.length == 1 && !o[0].term) return r(o[0].to);
    t.push(i);
    for (let a = 0; a < o.length; a++) {
      let { term: l, to: u } = o[a];
      !l && t.indexOf(u) == -1 && r(u);
    }
  }
}
function cT(n) {
  let e = Object.create(null);
  return t(s0(n, 0));
  function t(r) {
    let i = [];
    r.forEach((a) => {
      n[a].forEach(({ term: l, to: u }) => {
        if (!l) return;
        let d;
        for (let h = 0; h < i.length; h++) i[h][0] == l && (d = i[h][1]);
        s0(n, u).forEach((h) => {
          d || i.push([l, (d = [])]), d.indexOf(h) == -1 && d.push(h);
        });
      });
    });
    let o = (e[r.join(",")] = new oo(r.indexOf(n.length - 1) > -1));
    for (let a = 0; a < i.length; a++) {
      let l = i[a][1].sort(Ly);
      o.next.push({ type: i[a][0], next: e[l.join(",")] || t(l) });
    }
    return o;
  }
}
function uT(n, e) {
  for (let t = 0, r = [n]; t < r.length; t++) {
    let i = r[t],
      o = !i.validEnd,
      a = [];
    for (let l = 0; l < i.next.length; l++) {
      let { type: u, next: d } = i.next[l];
      a.push(u.name),
        o && !(u.isText || u.hasRequiredAttrs()) && (o = !1),
        r.indexOf(d) == -1 && r.push(d);
    }
    o &&
      e.err(
        "Only non-generatable nodes (" +
          a.join(", ") +
          ") in a required position (see https://prosemirror.net/docs/guide/#generatable)"
      );
  }
}
function Py(n) {
  let e = Object.create(null);
  for (let t in n) {
    let r = n[t];
    if (!r.hasDefault) return null;
    e[t] = r.default;
  }
  return e;
}
function _y(n, e) {
  let t = Object.create(null);
  for (let r in n) {
    let i = e && e[r];
    if (i === void 0) {
      let o = n[r];
      if (o.hasDefault) i = o.default;
      else throw new RangeError("No value supplied for attribute " + r);
    }
    t[r] = i;
  }
  return t;
}
function Ny(n) {
  let e = Object.create(null);
  if (n) for (let t in n) e[t] = new dT(n[t]);
  return e;
}
let a0 = class zy {
  constructor(e, t, r) {
    (this.name = e),
      (this.schema = t),
      (this.spec = r),
      (this.markSet = null),
      (this.groups = r.group ? r.group.split(" ") : []),
      (this.attrs = Ny(r.attrs)),
      (this.defaultAttrs = Py(this.attrs)),
      (this.contentMatch = null),
      (this.inlineContent = null),
      (this.isBlock = !(r.inline || e == "text")),
      (this.isText = e == "text");
  }
  get isInline() {
    return !this.isBlock;
  }
  get isTextblock() {
    return this.isBlock && this.inlineContent;
  }
  get isLeaf() {
    return this.contentMatch == oo.empty;
  }
  get isAtom() {
    return this.isLeaf || !!this.spec.atom;
  }
  get whitespace() {
    return this.spec.whitespace || (this.spec.code ? "pre" : "normal");
  }
  hasRequiredAttrs() {
    for (let e in this.attrs) if (this.attrs[e].isRequired) return !0;
    return !1;
  }
  compatibleContent(e) {
    return this == e || this.contentMatch.compatible(e.contentMatch);
  }
  computeAttrs(e) {
    return !e && this.defaultAttrs ? this.defaultAttrs : _y(this.attrs, e);
  }
  create(e = null, t, r) {
    if (this.isText)
      throw new Error("NodeType.create can't construct text nodes");
    return new Rr(this, this.computeAttrs(e), he.from(t), at.setFrom(r));
  }
  createChecked(e = null, t, r) {
    return (
      (t = he.from(t)),
      this.checkContent(t),
      new Rr(this, this.computeAttrs(e), t, at.setFrom(r))
    );
  }
  createAndFill(e = null, t, r) {
    if (((e = this.computeAttrs(e)), (t = he.from(t)), t.size)) {
      let a = this.contentMatch.fillBefore(t);
      if (!a) return null;
      t = a.append(t);
    }
    let i = this.contentMatch.matchFragment(t),
      o = i && i.fillBefore(he.empty, !0);
    return o ? new Rr(this, e, t.append(o), at.setFrom(r)) : null;
  }
  validContent(e) {
    let t = this.contentMatch.matchFragment(e);
    if (!t || !t.validEnd) return !1;
    for (let r = 0; r < e.childCount; r++)
      if (!this.allowsMarks(e.child(r).marks)) return !1;
    return !0;
  }
  checkContent(e) {
    if (!this.validContent(e))
      throw new RangeError(
        `Invalid content for node ${this.name}: ${e.toString().slice(0, 50)}`
      );
  }
  allowsMarkType(e) {
    return this.markSet == null || this.markSet.indexOf(e) > -1;
  }
  allowsMarks(e) {
    if (this.markSet == null) return !0;
    for (let t = 0; t < e.length; t++)
      if (!this.allowsMarkType(e[t].type)) return !1;
    return !0;
  }
  allowedMarks(e) {
    if (this.markSet == null) return e;
    let t;
    for (let r = 0; r < e.length; r++)
      this.allowsMarkType(e[r].type)
        ? t && t.push(e[r])
        : t || (t = e.slice(0, r));
    return t ? (t.length ? t : at.none) : e;
  }
  static compile(e, t) {
    let r = Object.create(null);
    e.forEach((o, a) => (r[o] = new zy(o, t, a)));
    let i = t.spec.topNode || "doc";
    if (!r[i])
      throw new RangeError("Schema is missing its top node type ('" + i + "')");
    if (!r.text) throw new RangeError("Every schema needs a 'text' type");
    for (let o in r.text.attrs)
      throw new RangeError("The text node type should not have attributes");
    return r;
  }
};
class dT {
  constructor(e) {
    (this.hasDefault = Object.prototype.hasOwnProperty.call(e, "default")),
      (this.default = e.default);
  }
  get isRequired() {
    return !this.hasDefault;
  }
}
class yc {
  constructor(e, t, r, i) {
    (this.name = e),
      (this.rank = t),
      (this.schema = r),
      (this.spec = i),
      (this.attrs = Ny(i.attrs)),
      (this.excluded = null);
    let o = Py(this.attrs);
    this.instance = o ? new at(this, o) : null;
  }
  create(e = null) {
    return !e && this.instance
      ? this.instance
      : new at(this, _y(this.attrs, e));
  }
  static compile(e, t) {
    let r = Object.create(null),
      i = 0;
    return e.forEach((o, a) => (r[o] = new yc(o, i++, t, a))), r;
  }
  removeFromSet(e) {
    for (var t = 0; t < e.length; t++)
      e[t].type == this && ((e = e.slice(0, t).concat(e.slice(t + 1))), t--);
    return e;
  }
  isInSet(e) {
    for (let t = 0; t < e.length; t++) if (e[t].type == this) return e[t];
  }
  excludes(e) {
    return this.excluded.indexOf(e) > -1;
  }
}
class By {
  constructor(e) {
    this.cached = Object.create(null);
    let t = (this.spec = {});
    for (let i in e) t[i] = e[i];
    (t.nodes = Ut.from(e.nodes)),
      (t.marks = Ut.from(e.marks || {})),
      (this.nodes = a0.compile(this.spec.nodes, this)),
      (this.marks = yc.compile(this.spec.marks, this));
    let r = Object.create(null);
    for (let i in this.nodes) {
      if (i in this.marks)
        throw new RangeError(i + " can not be both a node and a mark");
      let o = this.nodes[i],
        a = o.spec.content || "",
        l = o.spec.marks;
      (o.contentMatch = r[a] || (r[a] = oo.parse(a, this.nodes))),
        (o.inlineContent = o.contentMatch.inlineContent),
        (o.markSet =
          l == "_"
            ? null
            : l
            ? l0(this, l.split(" "))
            : l == "" || !o.inlineContent
            ? []
            : null);
    }
    for (let i in this.marks) {
      let o = this.marks[i],
        a = o.spec.excludes;
      o.excluded = a == null ? [o] : a == "" ? [] : l0(this, a.split(" "));
    }
    (this.nodeFromJSON = this.nodeFromJSON.bind(this)),
      (this.markFromJSON = this.markFromJSON.bind(this)),
      (this.topNodeType = this.nodes[this.spec.topNode || "doc"]),
      (this.cached.wrappings = Object.create(null));
  }
  node(e, t = null, r, i) {
    if (typeof e == "string") e = this.nodeType(e);
    else if (e instanceof a0) {
      if (e.schema != this)
        throw new RangeError(
          "Node type from different schema used (" + e.name + ")"
        );
    } else throw new RangeError("Invalid node type: " + e);
    return e.createChecked(t, r, i);
  }
  text(e, t) {
    let r = this.nodes.text;
    return new Wl(r, r.defaultAttrs, e, at.setFrom(t));
  }
  mark(e, t) {
    return typeof e == "string" && (e = this.marks[e]), e.create(t);
  }
  nodeFromJSON(e) {
    return Rr.fromJSON(this, e);
  }
  markFromJSON(e) {
    return at.fromJSON(this, e);
  }
  nodeType(e) {
    let t = this.nodes[e];
    if (!t) throw new RangeError("Unknown node type: " + e);
    return t;
  }
}
function l0(n, e) {
  let t = [];
  for (let r = 0; r < e.length; r++) {
    let i = e[r],
      o = n.marks[i],
      a = o;
    if (o) t.push(o);
    else
      for (let l in n.marks) {
        let u = n.marks[l];
        (i == "_" ||
          (u.spec.group && u.spec.group.split(" ").indexOf(i) > -1)) &&
          t.push((a = u));
      }
    if (!a) throw new SyntaxError("Unknown mark type: '" + e[r] + "'");
  }
  return t;
}
class so {
  constructor(e, t) {
    (this.schema = e),
      (this.rules = t),
      (this.tags = []),
      (this.styles = []),
      t.forEach((r) => {
        r.tag ? this.tags.push(r) : r.style && this.styles.push(r);
      }),
      (this.normalizeLists = !this.tags.some((r) => {
        if (!/^(ul|ol)\b/.test(r.tag) || !r.node) return !1;
        let i = e.nodes[r.node];
        return i.contentMatch.matchType(i);
      }));
  }
  parse(e, t = {}) {
    let r = new u0(this, t, !1);
    return r.addAll(e, t.from, t.to), r.finish();
  }
  parseSlice(e, t = {}) {
    let r = new u0(this, t, !0);
    return r.addAll(e, t.from, t.to), ke.maxOpen(r.finish());
  }
  matchTag(e, t, r) {
    for (let i = r ? this.tags.indexOf(r) + 1 : 0; i < this.tags.length; i++) {
      let o = this.tags[i];
      if (
        pT(e, o.tag) &&
        (o.namespace === void 0 || e.namespaceURI == o.namespace) &&
        (!o.context || t.matchesContext(o.context))
      ) {
        if (o.getAttrs) {
          let a = o.getAttrs(e);
          if (a === !1) continue;
          o.attrs = a || void 0;
        }
        return o;
      }
    }
  }
  matchStyle(e, t, r, i) {
    for (
      let o = i ? this.styles.indexOf(i) + 1 : 0;
      o < this.styles.length;
      o++
    ) {
      let a = this.styles[o],
        l = a.style;
      if (
        !(
          l.indexOf(e) != 0 ||
          (a.context && !r.matchesContext(a.context)) ||
          (l.length > e.length &&
            (l.charCodeAt(e.length) != 61 || l.slice(e.length + 1) != t))
        )
      ) {
        if (a.getAttrs) {
          let u = a.getAttrs(t);
          if (u === !1) continue;
          a.attrs = u || void 0;
        }
        return a;
      }
    }
  }
  static schemaRules(e) {
    let t = [];
    function r(i) {
      let o = i.priority == null ? 50 : i.priority,
        a = 0;
      for (; a < t.length; a++) {
        let l = t[a];
        if ((l.priority == null ? 50 : l.priority) < o) break;
      }
      t.splice(a, 0, i);
    }
    for (let i in e.marks) {
      let o = e.marks[i].spec.parseDOM;
      o &&
        o.forEach((a) => {
          r((a = d0(a))), a.mark || a.ignore || a.clearMark || (a.mark = i);
        });
    }
    for (let i in e.nodes) {
      let o = e.nodes[i].spec.parseDOM;
      o &&
        o.forEach((a) => {
          r((a = d0(a))), a.node || a.ignore || a.mark || (a.node = i);
        });
    }
    return t;
  }
  static fromSchema(e) {
    return (
      e.cached.domParser || (e.cached.domParser = new so(e, so.schemaRules(e)))
    );
  }
}
const Fy = {
    address: !0,
    article: !0,
    aside: !0,
    blockquote: !0,
    canvas: !0,
    dd: !0,
    div: !0,
    dl: !0,
    fieldset: !0,
    figcaption: !0,
    figure: !0,
    footer: !0,
    form: !0,
    h1: !0,
    h2: !0,
    h3: !0,
    h4: !0,
    h5: !0,
    h6: !0,
    header: !0,
    hgroup: !0,
    hr: !0,
    li: !0,
    noscript: !0,
    ol: !0,
    output: !0,
    p: !0,
    pre: !0,
    section: !0,
    table: !0,
    tfoot: !0,
    ul: !0,
  },
  fT = { head: !0, noscript: !0, object: !0, script: !0, style: !0, title: !0 },
  Wy = { ol: !0, ul: !0 },
  Vl = 1,
  Hl = 2,
  Ps = 4;
function c0(n, e, t) {
  return e != null
    ? (e ? Vl : 0) | (e === "full" ? Hl : 0)
    : n && n.whitespace == "pre"
    ? Vl | Hl
    : t & ~Ps;
}
class hl {
  constructor(e, t, r, i, o, a, l) {
    (this.type = e),
      (this.attrs = t),
      (this.marks = r),
      (this.pendingMarks = i),
      (this.solid = o),
      (this.options = l),
      (this.content = []),
      (this.activeMarks = at.none),
      (this.stashMarks = []),
      (this.match = a || (l & Ps ? null : e.contentMatch));
  }
  findWrapping(e) {
    if (!this.match) {
      if (!this.type) return [];
      let t = this.type.contentMatch.fillBefore(he.from(e));
      if (t) this.match = this.type.contentMatch.matchFragment(t);
      else {
        let r = this.type.contentMatch,
          i;
        return (i = r.findWrapping(e.type)) ? ((this.match = r), i) : null;
      }
    }
    return this.match.findWrapping(e.type);
  }
  finish(e) {
    if (!(this.options & Vl)) {
      let r = this.content[this.content.length - 1],
        i;
      if (r && r.isText && (i = /[ \t\r\n\u000c]+$/.exec(r.text))) {
        let o = r;
        r.text.length == i[0].length
          ? this.content.pop()
          : (this.content[this.content.length - 1] = o.withText(
              o.text.slice(0, o.text.length - i[0].length)
            ));
      }
    }
    let t = he.from(this.content);
    return (
      !e && this.match && (t = t.append(this.match.fillBefore(he.empty, !0))),
      this.type ? this.type.create(this.attrs, t, this.marks) : t
    );
  }
  popFromStashMark(e) {
    for (let t = this.stashMarks.length - 1; t >= 0; t--)
      if (e.eq(this.stashMarks[t])) return this.stashMarks.splice(t, 1)[0];
  }
  applyPending(e) {
    for (let t = 0, r = this.pendingMarks; t < r.length; t++) {
      let i = r[t];
      (this.type ? this.type.allowsMarkType(i.type) : mT(i.type, e)) &&
        !i.isInSet(this.activeMarks) &&
        ((this.activeMarks = i.addToSet(this.activeMarks)),
        (this.pendingMarks = i.removeFromSet(this.pendingMarks)));
    }
  }
  inlineContext(e) {
    return this.type
      ? this.type.inlineContent
      : this.content.length
      ? this.content[0].isInline
      : e.parentNode && !Fy.hasOwnProperty(e.parentNode.nodeName.toLowerCase());
  }
}
class u0 {
  constructor(e, t, r) {
    (this.parser = e), (this.options = t), (this.isOpen = r), (this.open = 0);
    let i = t.topNode,
      o,
      a = c0(null, t.preserveWhitespace, 0) | (r ? Ps : 0);
    i
      ? (o = new hl(
          i.type,
          i.attrs,
          at.none,
          at.none,
          !0,
          t.topMatch || i.type.contentMatch,
          a
        ))
      : r
      ? (o = new hl(null, null, at.none, at.none, !0, null, a))
      : (o = new hl(e.schema.topNodeType, null, at.none, at.none, !0, null, a)),
      (this.nodes = [o]),
      (this.find = t.findPositions),
      (this.needsBlock = !1);
  }
  get top() {
    return this.nodes[this.open];
  }
  addDOM(e) {
    e.nodeType == 3
      ? this.addTextNode(e)
      : e.nodeType == 1 && this.addElement(e);
  }
  withStyleRules(e, t) {
    let r = e.getAttribute("style");
    if (!r) return t();
    let i = this.readStyles(gT(r));
    if (!i) return;
    let [o, a] = i,
      l = this.top;
    for (let u = 0; u < a.length; u++) this.removePendingMark(a[u], l);
    for (let u = 0; u < o.length; u++) this.addPendingMark(o[u]);
    t();
    for (let u = 0; u < o.length; u++) this.removePendingMark(o[u], l);
    for (let u = 0; u < a.length; u++) this.addPendingMark(a[u]);
  }
  addTextNode(e) {
    let t = e.nodeValue,
      r = this.top;
    if (r.options & Hl || r.inlineContext(e) || /[^ \t\r\n\u000c]/.test(t)) {
      if (r.options & Vl)
        r.options & Hl
          ? (t = t.replace(
              /\r\n?/g,
              `
`
            ))
          : (t = t.replace(/\r?\n|\r/g, " "));
      else if (
        ((t = t.replace(/[ \t\r\n\u000c]+/g, " ")),
        /^[ \t\r\n\u000c]/.test(t) && this.open == this.nodes.length - 1)
      ) {
        let i = r.content[r.content.length - 1],
          o = e.previousSibling;
        (!i ||
          (o && o.nodeName == "BR") ||
          (i.isText && /[ \t\r\n\u000c]$/.test(i.text))) &&
          (t = t.slice(1));
      }
      t && this.insertNode(this.parser.schema.text(t)), this.findInText(e);
    } else this.findInside(e);
  }
  addElement(e, t) {
    let r = e.nodeName.toLowerCase(),
      i;
    Wy.hasOwnProperty(r) && this.parser.normalizeLists && hT(e);
    let o =
      (this.options.ruleFromNode && this.options.ruleFromNode(e)) ||
      (i = this.parser.matchTag(e, this, t));
    if (o ? o.ignore : fT.hasOwnProperty(r))
      this.findInside(e), this.ignoreFallback(e);
    else if (!o || o.skip || o.closeParent) {
      o && o.closeParent
        ? (this.open = Math.max(0, this.open - 1))
        : o && o.skip.nodeType && (e = o.skip);
      let a,
        l = this.top,
        u = this.needsBlock;
      if (Fy.hasOwnProperty(r))
        l.content.length &&
          l.content[0].isInline &&
          this.open &&
          (this.open--, (l = this.top)),
          (a = !0),
          l.type || (this.needsBlock = !0);
      else if (!e.firstChild) {
        this.leafFallback(e);
        return;
      }
      o && o.skip
        ? this.addAll(e)
        : this.withStyleRules(e, () => this.addAll(e)),
        a && this.sync(l),
        (this.needsBlock = u);
    } else
      this.withStyleRules(e, () => {
        this.addElementByRule(e, o, o.consuming === !1 ? i : void 0);
      });
  }
  leafFallback(e) {
    e.nodeName == "BR" &&
      this.top.type &&
      this.top.type.inlineContent &&
      this.addTextNode(
        e.ownerDocument.createTextNode(`
`)
      );
  }
  ignoreFallback(e) {
    e.nodeName == "BR" &&
      (!this.top.type || !this.top.type.inlineContent) &&
      this.findPlace(this.parser.schema.text("-"));
  }
  readStyles(e) {
    let t = at.none,
      r = at.none;
    for (let i = 0; i < e.length; i += 2)
      for (let o = void 0; ; ) {
        let a = this.parser.matchStyle(e[i], e[i + 1], this, o);
        if (!a) break;
        if (a.ignore) return null;
        if (
          (a.clearMark
            ? this.top.pendingMarks
                .concat(this.top.activeMarks)
                .forEach((l) => {
                  a.clearMark(l) && (r = l.addToSet(r));
                })
            : (t = this.parser.schema.marks[a.mark]
                .create(a.attrs)
                .addToSet(t)),
          a.consuming === !1)
        )
          o = a;
        else break;
      }
    return [t, r];
  }
  addElementByRule(e, t, r) {
    let i, o, a;
    t.node
      ? ((o = this.parser.schema.nodes[t.node]),
        o.isLeaf
          ? this.insertNode(o.create(t.attrs)) || this.leafFallback(e)
          : (i = this.enter(o, t.attrs || null, t.preserveWhitespace)))
      : ((a = this.parser.schema.marks[t.mark].create(t.attrs)),
        this.addPendingMark(a));
    let l = this.top;
    if (o && o.isLeaf) this.findInside(e);
    else if (r) this.addElement(e, r);
    else if (t.getContent)
      this.findInside(e),
        t.getContent(e, this.parser.schema).forEach((u) => this.insertNode(u));
    else {
      let u = e;
      typeof t.contentElement == "string"
        ? (u = e.querySelector(t.contentElement))
        : typeof t.contentElement == "function"
        ? (u = t.contentElement(e))
        : t.contentElement && (u = t.contentElement),
        this.findAround(e, u, !0),
        this.addAll(u);
    }
    i && this.sync(l) && this.open--, a && this.removePendingMark(a, l);
  }
  addAll(e, t, r) {
    let i = t || 0;
    for (
      let o = t ? e.childNodes[t] : e.firstChild,
        a = r == null ? null : e.childNodes[r];
      o != a;
      o = o.nextSibling, ++i
    )
      this.findAtPoint(e, i), this.addDOM(o);
    this.findAtPoint(e, i);
  }
  findPlace(e) {
    let t, r;
    for (let i = this.open; i >= 0; i--) {
      let o = this.nodes[i],
        a = o.findWrapping(e);
      if (
        (a && (!t || t.length > a.length) && ((t = a), (r = o), !a.length)) ||
        o.solid
      )
        break;
    }
    if (!t) return !1;
    this.sync(r);
    for (let i = 0; i < t.length; i++) this.enterInner(t[i], null, !1);
    return !0;
  }
  insertNode(e) {
    if (e.isInline && this.needsBlock && !this.top.type) {
      let t = this.textblockFromContext();
      t && this.enterInner(t);
    }
    if (this.findPlace(e)) {
      this.closeExtra();
      let t = this.top;
      t.applyPending(e.type), t.match && (t.match = t.match.matchType(e.type));
      let r = t.activeMarks;
      for (let i = 0; i < e.marks.length; i++)
        (!t.type || t.type.allowsMarkType(e.marks[i].type)) &&
          (r = e.marks[i].addToSet(r));
      return t.content.push(e.mark(r)), !0;
    }
    return !1;
  }
  enter(e, t, r) {
    let i = this.findPlace(e.create(t));
    return i && this.enterInner(e, t, !0, r), i;
  }
  enterInner(e, t = null, r = !1, i) {
    this.closeExtra();
    let o = this.top;
    o.applyPending(e), (o.match = o.match && o.match.matchType(e));
    let a = c0(e, i, o.options);
    o.options & Ps && o.content.length == 0 && (a |= Ps),
      this.nodes.push(new hl(e, t, o.activeMarks, o.pendingMarks, r, null, a)),
      this.open++;
  }
  closeExtra(e = !1) {
    let t = this.nodes.length - 1;
    if (t > this.open) {
      for (; t > this.open; t--)
        this.nodes[t - 1].content.push(this.nodes[t].finish(e));
      this.nodes.length = this.open + 1;
    }
  }
  finish() {
    return (
      (this.open = 0),
      this.closeExtra(this.isOpen),
      this.nodes[0].finish(this.isOpen || this.options.topOpen)
    );
  }
  sync(e) {
    for (let t = this.open; t >= 0; t--)
      if (this.nodes[t] == e) return (this.open = t), !0;
    return !1;
  }
  get currentPos() {
    this.closeExtra();
    let e = 0;
    for (let t = this.open; t >= 0; t--) {
      let r = this.nodes[t].content;
      for (let i = r.length - 1; i >= 0; i--) e += r[i].nodeSize;
      t && e++;
    }
    return e;
  }
  findAtPoint(e, t) {
    if (this.find)
      for (let r = 0; r < this.find.length; r++)
        this.find[r].node == e &&
          this.find[r].offset == t &&
          (this.find[r].pos = this.currentPos);
  }
  findInside(e) {
    if (this.find)
      for (let t = 0; t < this.find.length; t++)
        this.find[t].pos == null &&
          e.nodeType == 1 &&
          e.contains(this.find[t].node) &&
          (this.find[t].pos = this.currentPos);
  }
  findAround(e, t, r) {
    if (e != t && this.find)
      for (let i = 0; i < this.find.length; i++)
        this.find[i].pos == null &&
          e.nodeType == 1 &&
          e.contains(this.find[i].node) &&
          t.compareDocumentPosition(this.find[i].node) & (r ? 2 : 4) &&
          (this.find[i].pos = this.currentPos);
  }
  findInText(e) {
    if (this.find)
      for (let t = 0; t < this.find.length; t++)
        this.find[t].node == e &&
          (this.find[t].pos =
            this.currentPos - (e.nodeValue.length - this.find[t].offset));
  }
  matchesContext(e) {
    if (e.indexOf("|") > -1)
      return e.split(/\s*\|\s*/).some(this.matchesContext, this);
    let t = e.split("/"),
      r = this.options.context,
      i = !this.isOpen && (!r || r.parent.type == this.nodes[0].type),
      o = -(r ? r.depth + 1 : 0) + (i ? 0 : 1),
      a = (l, u) => {
        for (; l >= 0; l--) {
          let d = t[l];
          if (d == "") {
            if (l == t.length - 1 || l == 0) continue;
            for (; u >= o; u--) if (a(l - 1, u)) return !0;
            return !1;
          } else {
            let h =
              u > 0 || (u == 0 && i)
                ? this.nodes[u].type
                : r && u >= o
                ? r.node(u - o).type
                : null;
            if (!h || (h.name != d && h.groups.indexOf(d) == -1)) return !1;
            u--;
          }
        }
        return !0;
      };
    return a(t.length - 1, this.open);
  }
  textblockFromContext() {
    let e = this.options.context;
    if (e)
      for (let t = e.depth; t >= 0; t--) {
        let r = e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;
        if (r && r.isTextblock && r.defaultAttrs) return r;
      }
    for (let t in this.parser.schema.nodes) {
      let r = this.parser.schema.nodes[t];
      if (r.isTextblock && r.defaultAttrs) return r;
    }
  }
  addPendingMark(e) {
    let t = yT(e, this.top.pendingMarks);
    t && this.top.stashMarks.push(t),
      (this.top.pendingMarks = e.addToSet(this.top.pendingMarks));
  }
  removePendingMark(e, t) {
    for (let r = this.open; r >= 0; r--) {
      let i = this.nodes[r];
      if (i.pendingMarks.lastIndexOf(e) > -1)
        i.pendingMarks = e.removeFromSet(i.pendingMarks);
      else {
        i.activeMarks = e.removeFromSet(i.activeMarks);
        let a = i.popFromStashMark(e);
        a &&
          i.type &&
          i.type.allowsMarkType(a.type) &&
          (i.activeMarks = a.addToSet(i.activeMarks));
      }
      if (i == t) break;
    }
  }
}
function hT(n) {
  for (let e = n.firstChild, t = null; e; e = e.nextSibling) {
    let r = e.nodeType == 1 ? e.nodeName.toLowerCase() : null;
    r && Wy.hasOwnProperty(r) && t
      ? (t.appendChild(e), (e = t))
      : r == "li"
      ? (t = e)
      : r && (t = null);
  }
}
function pT(n, e) {
  return (
    n.matches ||
    n.msMatchesSelector ||
    n.webkitMatchesSelector ||
    n.mozMatchesSelector
  ).call(n, e);
}
function gT(n) {
  let e = /\s*([\w-]+)\s*:\s*([^;]+)/g,
    t,
    r = [];
  for (; (t = e.exec(n)); ) r.push(t[1], t[2].trim());
  return r;
}
function d0(n) {
  let e = {};
  for (let t in n) e[t] = n[t];
  return e;
}
function mT(n, e) {
  let t = e.schema.nodes;
  for (let r in t) {
    let i = t[r];
    if (!i.allowsMarkType(n)) continue;
    let o = [],
      a = (l) => {
        o.push(l);
        for (let u = 0; u < l.edgeCount; u++) {
          let { type: d, next: h } = l.edge(u);
          if (d == e || (o.indexOf(h) < 0 && a(h))) return !0;
        }
      };
    if (a(i.contentMatch)) return !0;
  }
}
function yT(n, e) {
  for (let t = 0; t < e.length; t++) if (n.eq(e[t])) return e[t];
}
class qr {
  constructor(e, t) {
    (this.nodes = e), (this.marks = t);
  }
  serializeFragment(e, t = {}, r) {
    r || (r = Ju(t).createDocumentFragment());
    let i = r,
      o = [];
    return (
      e.forEach((a) => {
        if (o.length || a.marks.length) {
          let l = 0,
            u = 0;
          for (; l < o.length && u < a.marks.length; ) {
            let d = a.marks[u];
            if (!this.marks[d.type.name]) {
              u++;
              continue;
            }
            if (!d.eq(o[l][0]) || d.type.spec.spanning === !1) break;
            l++, u++;
          }
          for (; l < o.length; ) i = o.pop()[1];
          for (; u < a.marks.length; ) {
            let d = a.marks[u++],
              h = this.serializeMark(d, a.isInline, t);
            h &&
              (o.push([d, i]),
              i.appendChild(h.dom),
              (i = h.contentDOM || h.dom));
          }
        }
        i.appendChild(this.serializeNodeInner(a, t));
      }),
      r
    );
  }
  serializeNodeInner(e, t) {
    let { dom: r, contentDOM: i } = qr.renderSpec(
      Ju(t),
      this.nodes[e.type.name](e)
    );
    if (i) {
      if (e.isLeaf)
        throw new RangeError("Content hole not allowed in a leaf node spec");
      this.serializeFragment(e.content, t, i);
    }
    return r;
  }
  serializeNode(e, t = {}) {
    let r = this.serializeNodeInner(e, t);
    for (let i = e.marks.length - 1; i >= 0; i--) {
      let o = this.serializeMark(e.marks[i], e.isInline, t);
      o && ((o.contentDOM || o.dom).appendChild(r), (r = o.dom));
    }
    return r;
  }
  serializeMark(e, t, r = {}) {
    let i = this.marks[e.type.name];
    return i && qr.renderSpec(Ju(r), i(e, t));
  }
  static renderSpec(e, t, r = null) {
    if (typeof t == "string") return { dom: e.createTextNode(t) };
    if (t.nodeType != null) return { dom: t };
    if (t.dom && t.dom.nodeType != null) return t;
    let i = t[0],
      o = i.indexOf(" ");
    o > 0 && ((r = i.slice(0, o)), (i = i.slice(o + 1)));
    let a,
      l = r ? e.createElementNS(r, i) : e.createElement(i),
      u = t[1],
      d = 1;
    if (u && typeof u == "object" && u.nodeType == null && !Array.isArray(u)) {
      d = 2;
      for (let h in u)
        if (u[h] != null) {
          let p = h.indexOf(" ");
          p > 0
            ? l.setAttributeNS(h.slice(0, p), h.slice(p + 1), u[h])
            : l.setAttribute(h, u[h]);
        }
    }
    for (let h = d; h < t.length; h++) {
      let p = t[h];
      if (p === 0) {
        if (h < t.length - 1 || h > d)
          throw new RangeError(
            "Content hole must be the only child of its parent node"
          );
        return { dom: l, contentDOM: l };
      } else {
        let { dom: g, contentDOM: y } = qr.renderSpec(e, p, r);
        if ((l.appendChild(g), y)) {
          if (a) throw new RangeError("Multiple content holes");
          a = y;
        }
      }
    }
    return { dom: l, contentDOM: a };
  }
  static fromSchema(e) {
    return (
      e.cached.domSerializer ||
      (e.cached.domSerializer = new qr(
        this.nodesFromSchema(e),
        this.marksFromSchema(e)
      ))
    );
  }
  static nodesFromSchema(e) {
    let t = f0(e.nodes);
    return t.text || (t.text = (r) => r.text), t;
  }
  static marksFromSchema(e) {
    return f0(e.marks);
  }
}
function f0(n) {
  let e = {};
  for (let t in n) {
    let r = n[t].spec.toDOM;
    r && (e[t] = r);
  }
  return e;
}
function Ju(n) {
  return n.document || window.document;
}
const Vy = 65535,
  Hy = Math.pow(2, 16);
function vT(n, e) {
  return n + e * Hy;
}
function h0(n) {
  return n & Vy;
}
function wT(n) {
  return (n - (n & Vy)) / Hy;
}
const $y = 1,
  jy = 2,
  Ml = 4,
  Uy = 8;
class Xd {
  constructor(e, t, r) {
    (this.pos = e), (this.delInfo = t), (this.recover = r);
  }
  get deleted() {
    return (this.delInfo & Uy) > 0;
  }
  get deletedBefore() {
    return (this.delInfo & ($y | Ml)) > 0;
  }
  get deletedAfter() {
    return (this.delInfo & (jy | Ml)) > 0;
  }
  get deletedAcross() {
    return (this.delInfo & Ml) > 0;
  }
}
class Fn {
  constructor(e, t = !1) {
    if (((this.ranges = e), (this.inverted = t), !e.length && Fn.empty))
      return Fn.empty;
  }
  recover(e) {
    let t = 0,
      r = h0(e);
    if (!this.inverted)
      for (let i = 0; i < r; i++)
        t += this.ranges[i * 3 + 2] - this.ranges[i * 3 + 1];
    return this.ranges[r * 3] + t + wT(e);
  }
  mapResult(e, t = 1) {
    return this._map(e, t, !1);
  }
  map(e, t = 1) {
    return this._map(e, t, !0);
  }
  _map(e, t, r) {
    let i = 0,
      o = this.inverted ? 2 : 1,
      a = this.inverted ? 1 : 2;
    for (let l = 0; l < this.ranges.length; l += 3) {
      let u = this.ranges[l] - (this.inverted ? i : 0);
      if (u > e) break;
      let d = this.ranges[l + o],
        h = this.ranges[l + a],
        p = u + d;
      if (e <= p) {
        let g = d ? (e == u ? -1 : e == p ? 1 : t) : t,
          y = u + i + (g < 0 ? 0 : h);
        if (r) return y;
        let m = e == (t < 0 ? u : p) ? null : vT(l / 3, e - u),
          w = e == u ? jy : e == p ? $y : Ml;
        return (t < 0 ? e != u : e != p) && (w |= Uy), new Xd(y, w, m);
      }
      i += h - d;
    }
    return r ? e + i : new Xd(e + i, 0, null);
  }
  touches(e, t) {
    let r = 0,
      i = h0(t),
      o = this.inverted ? 2 : 1,
      a = this.inverted ? 1 : 2;
    for (let l = 0; l < this.ranges.length; l += 3) {
      let u = this.ranges[l] - (this.inverted ? r : 0);
      if (u > e) break;
      let d = this.ranges[l + o],
        h = u + d;
      if (e <= h && l == i * 3) return !0;
      r += this.ranges[l + a] - d;
    }
    return !1;
  }
  forEach(e) {
    let t = this.inverted ? 2 : 1,
      r = this.inverted ? 1 : 2;
    for (let i = 0, o = 0; i < this.ranges.length; i += 3) {
      let a = this.ranges[i],
        l = a - (this.inverted ? o : 0),
        u = a + (this.inverted ? 0 : o),
        d = this.ranges[i + t],
        h = this.ranges[i + r];
      e(l, l + d, u, u + h), (o += h - d);
    }
  }
  invert() {
    return new Fn(this.ranges, !this.inverted);
  }
  toString() {
    return (this.inverted ? "-" : "") + JSON.stringify(this.ranges);
  }
  static offset(e) {
    return e == 0 ? Fn.empty : new Fn(e < 0 ? [0, -e, 0] : [0, 0, e]);
  }
}
Fn.empty = new Fn([]);
class Ho {
  constructor(e = [], t, r = 0, i = e.length) {
    (this.maps = e), (this.mirror = t), (this.from = r), (this.to = i);
  }
  slice(e = 0, t = this.maps.length) {
    return new Ho(this.maps, this.mirror, e, t);
  }
  copy() {
    return new Ho(
      this.maps.slice(),
      this.mirror && this.mirror.slice(),
      this.from,
      this.to
    );
  }
  appendMap(e, t) {
    (this.to = this.maps.push(e)),
      t != null && this.setMirror(this.maps.length - 1, t);
  }
  appendMapping(e) {
    for (let t = 0, r = this.maps.length; t < e.maps.length; t++) {
      let i = e.getMirror(t);
      this.appendMap(e.maps[t], i != null && i < t ? r + i : void 0);
    }
  }
  getMirror(e) {
    if (this.mirror) {
      for (let t = 0; t < this.mirror.length; t++)
        if (this.mirror[t] == e) return this.mirror[t + (t % 2 ? -1 : 1)];
    }
  }
  setMirror(e, t) {
    this.mirror || (this.mirror = []), this.mirror.push(e, t);
  }
  appendMappingInverted(e) {
    for (
      let t = e.maps.length - 1, r = this.maps.length + e.maps.length;
      t >= 0;
      t--
    ) {
      let i = e.getMirror(t);
      this.appendMap(
        e.maps[t].invert(),
        i != null && i > t ? r - i - 1 : void 0
      );
    }
  }
  invert() {
    let e = new Ho();
    return e.appendMappingInverted(this), e;
  }
  map(e, t = 1) {
    if (this.mirror) return this._map(e, t, !0);
    for (let r = this.from; r < this.to; r++) e = this.maps[r].map(e, t);
    return e;
  }
  mapResult(e, t = 1) {
    return this._map(e, t, !1);
  }
  _map(e, t, r) {
    let i = 0;
    for (let o = this.from; o < this.to; o++) {
      let a = this.maps[o],
        l = a.mapResult(e, t);
      if (l.recover != null) {
        let u = this.getMirror(o);
        if (u != null && u > o && u < this.to) {
          (o = u), (e = this.maps[u].recover(l.recover));
          continue;
        }
      }
      (i |= l.delInfo), (e = l.pos);
    }
    return r ? e : new Xd(e, i, null);
  }
}
const Qu = Object.create(null);
class ln {
  getMap() {
    return Fn.empty;
  }
  merge(e) {
    return null;
  }
  static fromJSON(e, t) {
    if (!t || !t.stepType)
      throw new RangeError("Invalid input for Step.fromJSON");
    let r = Qu[t.stepType];
    if (!r) throw new RangeError(`No step type ${t.stepType} defined`);
    return r.fromJSON(e, t);
  }
  static jsonID(e, t) {
    if (e in Qu) throw new RangeError("Duplicate use of step JSON ID " + e);
    return (Qu[e] = t), (t.prototype.jsonID = e), t;
  }
}
class At {
  constructor(e, t) {
    (this.doc = e), (this.failed = t);
  }
  static ok(e) {
    return new At(e, null);
  }
  static fail(e) {
    return new At(null, e);
  }
  static fromReplace(e, t, r, i) {
    try {
      return At.ok(e.replace(t, r, i));
    } catch (o) {
      if (o instanceof Bl) return At.fail(o.message);
      throw o;
    }
  }
}
function _f(n, e, t) {
  let r = [];
  for (let i = 0; i < n.childCount; i++) {
    let o = n.child(i);
    o.content.size && (o = o.copy(_f(o.content, e, o))),
      o.isInline && (o = e(o, t, i)),
      r.push(o);
  }
  return he.fromArray(r);
}
class bi extends ln {
  constructor(e, t, r) {
    super(), (this.from = e), (this.to = t), (this.mark = r);
  }
  apply(e) {
    let t = e.slice(this.from, this.to),
      r = e.resolve(this.from),
      i = r.node(r.sharedDepth(this.to)),
      o = new ke(
        _f(
          t.content,
          (a, l) =>
            !a.isAtom || !l.type.allowsMarkType(this.mark.type)
              ? a
              : a.mark(this.mark.addToSet(a.marks)),
          i
        ),
        t.openStart,
        t.openEnd
      );
    return At.fromReplace(e, this.from, this.to, o);
  }
  invert() {
    return new Tr(this.from, this.to, this.mark);
  }
  map(e) {
    let t = e.mapResult(this.from, 1),
      r = e.mapResult(this.to, -1);
    return (t.deleted && r.deleted) || t.pos >= r.pos
      ? null
      : new bi(t.pos, r.pos, this.mark);
  }
  merge(e) {
    return e instanceof bi &&
      e.mark.eq(this.mark) &&
      this.from <= e.to &&
      this.to >= e.from
      ? new bi(Math.min(this.from, e.from), Math.max(this.to, e.to), this.mark)
      : null;
  }
  toJSON() {
    return {
      stepType: "addMark",
      mark: this.mark.toJSON(),
      from: this.from,
      to: this.to,
    };
  }
  static fromJSON(e, t) {
    if (typeof t.from != "number" || typeof t.to != "number")
      throw new RangeError("Invalid input for AddMarkStep.fromJSON");
    return new bi(t.from, t.to, e.markFromJSON(t.mark));
  }
}
ln.jsonID("addMark", bi);
class Tr extends ln {
  constructor(e, t, r) {
    super(), (this.from = e), (this.to = t), (this.mark = r);
  }
  apply(e) {
    let t = e.slice(this.from, this.to),
      r = new ke(
        _f(t.content, (i) => i.mark(this.mark.removeFromSet(i.marks)), e),
        t.openStart,
        t.openEnd
      );
    return At.fromReplace(e, this.from, this.to, r);
  }
  invert() {
    return new bi(this.from, this.to, this.mark);
  }
  map(e) {
    let t = e.mapResult(this.from, 1),
      r = e.mapResult(this.to, -1);
    return (t.deleted && r.deleted) || t.pos >= r.pos
      ? null
      : new Tr(t.pos, r.pos, this.mark);
  }
  merge(e) {
    return e instanceof Tr &&
      e.mark.eq(this.mark) &&
      this.from <= e.to &&
      this.to >= e.from
      ? new Tr(Math.min(this.from, e.from), Math.max(this.to, e.to), this.mark)
      : null;
  }
  toJSON() {
    return {
      stepType: "removeMark",
      mark: this.mark.toJSON(),
      from: this.from,
      to: this.to,
    };
  }
  static fromJSON(e, t) {
    if (typeof t.from != "number" || typeof t.to != "number")
      throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");
    return new Tr(t.from, t.to, e.markFromJSON(t.mark));
  }
}
ln.jsonID("removeMark", Tr);
class xi extends ln {
  constructor(e, t) {
    super(), (this.pos = e), (this.mark = t);
  }
  apply(e) {
    let t = e.nodeAt(this.pos);
    if (!t) return At.fail("No node at mark step's position");
    let r = t.type.create(t.attrs, null, this.mark.addToSet(t.marks));
    return At.fromReplace(
      e,
      this.pos,
      this.pos + 1,
      new ke(he.from(r), 0, t.isLeaf ? 0 : 1)
    );
  }
  invert(e) {
    let t = e.nodeAt(this.pos);
    if (t) {
      let r = this.mark.addToSet(t.marks);
      if (r.length == t.marks.length) {
        for (let i = 0; i < t.marks.length; i++)
          if (!t.marks[i].isInSet(r)) return new xi(this.pos, t.marks[i]);
        return new xi(this.pos, this.mark);
      }
    }
    return new Yo(this.pos, this.mark);
  }
  map(e) {
    let t = e.mapResult(this.pos, 1);
    return t.deletedAfter ? null : new xi(t.pos, this.mark);
  }
  toJSON() {
    return { stepType: "addNodeMark", pos: this.pos, mark: this.mark.toJSON() };
  }
  static fromJSON(e, t) {
    if (typeof t.pos != "number")
      throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");
    return new xi(t.pos, e.markFromJSON(t.mark));
  }
}
ln.jsonID("addNodeMark", xi);
class Yo extends ln {
  constructor(e, t) {
    super(), (this.pos = e), (this.mark = t);
  }
  apply(e) {
    let t = e.nodeAt(this.pos);
    if (!t) return At.fail("No node at mark step's position");
    let r = t.type.create(t.attrs, null, this.mark.removeFromSet(t.marks));
    return At.fromReplace(
      e,
      this.pos,
      this.pos + 1,
      new ke(he.from(r), 0, t.isLeaf ? 0 : 1)
    );
  }
  invert(e) {
    let t = e.nodeAt(this.pos);
    return !t || !this.mark.isInSet(t.marks)
      ? this
      : new xi(this.pos, this.mark);
  }
  map(e) {
    let t = e.mapResult(this.pos, 1);
    return t.deletedAfter ? null : new Yo(t.pos, this.mark);
  }
  toJSON() {
    return {
      stepType: "removeNodeMark",
      pos: this.pos,
      mark: this.mark.toJSON(),
    };
  }
  static fromJSON(e, t) {
    if (typeof t.pos != "number")
      throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");
    return new Yo(t.pos, e.markFromJSON(t.mark));
  }
}
ln.jsonID("removeNodeMark", Yo);
class nn extends ln {
  constructor(e, t, r, i = !1) {
    super(),
      (this.from = e),
      (this.to = t),
      (this.slice = r),
      (this.structure = i);
  }
  apply(e) {
    return this.structure && Jd(e, this.from, this.to)
      ? At.fail("Structure replace would overwrite content")
      : At.fromReplace(e, this.from, this.to, this.slice);
  }
  getMap() {
    return new Fn([this.from, this.to - this.from, this.slice.size]);
  }
  invert(e) {
    return new nn(
      this.from,
      this.from + this.slice.size,
      e.slice(this.from, this.to)
    );
  }
  map(e) {
    let t = e.mapResult(this.from, 1),
      r = e.mapResult(this.to, -1);
    return t.deletedAcross && r.deletedAcross
      ? null
      : new nn(t.pos, Math.max(t.pos, r.pos), this.slice);
  }
  merge(e) {
    if (!(e instanceof nn) || e.structure || this.structure) return null;
    if (
      this.from + this.slice.size == e.from &&
      !this.slice.openEnd &&
      !e.slice.openStart
    ) {
      let t =
        this.slice.size + e.slice.size == 0
          ? ke.empty
          : new ke(
              this.slice.content.append(e.slice.content),
              this.slice.openStart,
              e.slice.openEnd
            );
      return new nn(this.from, this.to + (e.to - e.from), t, this.structure);
    } else if (e.to == this.from && !this.slice.openStart && !e.slice.openEnd) {
      let t =
        this.slice.size + e.slice.size == 0
          ? ke.empty
          : new ke(
              e.slice.content.append(this.slice.content),
              e.slice.openStart,
              this.slice.openEnd
            );
      return new nn(e.from, this.to, t, this.structure);
    } else return null;
  }
  toJSON() {
    let e = { stepType: "replace", from: this.from, to: this.to };
    return (
      this.slice.size && (e.slice = this.slice.toJSON()),
      this.structure && (e.structure = !0),
      e
    );
  }
  static fromJSON(e, t) {
    if (typeof t.from != "number" || typeof t.to != "number")
      throw new RangeError("Invalid input for ReplaceStep.fromJSON");
    return new nn(t.from, t.to, ke.fromJSON(e, t.slice), !!t.structure);
  }
}
ln.jsonID("replace", nn);
class Vn extends ln {
  constructor(e, t, r, i, o, a, l = !1) {
    super(),
      (this.from = e),
      (this.to = t),
      (this.gapFrom = r),
      (this.gapTo = i),
      (this.slice = o),
      (this.insert = a),
      (this.structure = l);
  }
  apply(e) {
    if (
      this.structure &&
      (Jd(e, this.from, this.gapFrom) || Jd(e, this.gapTo, this.to))
    )
      return At.fail("Structure gap-replace would overwrite content");
    let t = e.slice(this.gapFrom, this.gapTo);
    if (t.openStart || t.openEnd) return At.fail("Gap is not a flat range");
    let r = this.slice.insertAt(this.insert, t.content);
    return r
      ? At.fromReplace(e, this.from, this.to, r)
      : At.fail("Content does not fit in gap");
  }
  getMap() {
    return new Fn([
      this.from,
      this.gapFrom - this.from,
      this.insert,
      this.gapTo,
      this.to - this.gapTo,
      this.slice.size - this.insert,
    ]);
  }
  invert(e) {
    let t = this.gapTo - this.gapFrom;
    return new Vn(
      this.from,
      this.from + this.slice.size + t,
      this.from + this.insert,
      this.from + this.insert + t,
      e
        .slice(this.from, this.to)
        .removeBetween(this.gapFrom - this.from, this.gapTo - this.from),
      this.gapFrom - this.from,
      this.structure
    );
  }
  map(e) {
    let t = e.mapResult(this.from, 1),
      r = e.mapResult(this.to, -1),
      i = e.map(this.gapFrom, -1),
      o = e.map(this.gapTo, 1);
    return (t.deletedAcross && r.deletedAcross) || i < t.pos || o > r.pos
      ? null
      : new Vn(t.pos, r.pos, i, o, this.slice, this.insert, this.structure);
  }
  toJSON() {
    let e = {
      stepType: "replaceAround",
      from: this.from,
      to: this.to,
      gapFrom: this.gapFrom,
      gapTo: this.gapTo,
      insert: this.insert,
    };
    return (
      this.slice.size && (e.slice = this.slice.toJSON()),
      this.structure && (e.structure = !0),
      e
    );
  }
  static fromJSON(e, t) {
    if (
      typeof t.from != "number" ||
      typeof t.to != "number" ||
      typeof t.gapFrom != "number" ||
      typeof t.gapTo != "number" ||
      typeof t.insert != "number"
    )
      throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");
    return new Vn(
      t.from,
      t.to,
      t.gapFrom,
      t.gapTo,
      ke.fromJSON(e, t.slice),
      t.insert,
      !!t.structure
    );
  }
}
ln.jsonID("replaceAround", Vn);
function Jd(n, e, t) {
  let r = n.resolve(e),
    i = t - e,
    o = r.depth;
  for (; i > 0 && o > 0 && r.indexAfter(o) == r.node(o).childCount; ) o--, i--;
  if (i > 0) {
    let a = r.node(o).maybeChild(r.indexAfter(o));
    for (; i > 0; ) {
      if (!a || a.isLeaf) return !0;
      (a = a.firstChild), i--;
    }
  }
  return !1;
}
function bT(n, e, t, r) {
  let i = [],
    o = [],
    a,
    l;
  n.doc.nodesBetween(e, t, (u, d, h) => {
    if (!u.isInline) return;
    let p = u.marks;
    if (!r.isInSet(p) && h.type.allowsMarkType(r.type)) {
      let g = Math.max(d, e),
        y = Math.min(d + u.nodeSize, t),
        m = r.addToSet(p);
      for (let w = 0; w < p.length; w++)
        p[w].isInSet(m) ||
          (a && a.to == g && a.mark.eq(p[w])
            ? (a.to = y)
            : i.push((a = new Tr(g, y, p[w]))));
      l && l.to == g ? (l.to = y) : o.push((l = new bi(g, y, r)));
    }
  }),
    i.forEach((u) => n.step(u)),
    o.forEach((u) => n.step(u));
}
function xT(n, e, t, r) {
  let i = [],
    o = 0;
  n.doc.nodesBetween(e, t, (a, l) => {
    if (!a.isInline) return;
    o++;
    let u = null;
    if (r instanceof yc) {
      let d = a.marks,
        h;
      for (; (h = r.isInSet(d)); )
        (u || (u = [])).push(h), (d = h.removeFromSet(d));
    } else r ? r.isInSet(a.marks) && (u = [r]) : (u = a.marks);
    if (u && u.length) {
      let d = Math.min(l + a.nodeSize, t);
      for (let h = 0; h < u.length; h++) {
        let p = u[h],
          g;
        for (let y = 0; y < i.length; y++) {
          let m = i[y];
          m.step == o - 1 && p.eq(i[y].style) && (g = m);
        }
        g
          ? ((g.to = d), (g.step = o))
          : i.push({ style: p, from: Math.max(l, e), to: d, step: o });
      }
    }
  }),
    i.forEach((a) => n.step(new Tr(a.from, a.to, a.style)));
}
function ST(n, e, t, r = t.contentMatch) {
  let i = n.doc.nodeAt(e),
    o = [],
    a = e + 1;
  for (let l = 0; l < i.childCount; l++) {
    let u = i.child(l),
      d = a + u.nodeSize,
      h = r.matchType(u.type);
    if (!h) o.push(new nn(a, d, ke.empty));
    else {
      r = h;
      for (let p = 0; p < u.marks.length; p++)
        t.allowsMarkType(u.marks[p].type) || n.step(new Tr(a, d, u.marks[p]));
      if (u.isText && !t.spec.code) {
        let p,
          g = /\r?\n|\r/g,
          y;
        for (; (p = g.exec(u.text)); )
          y ||
            (y = new ke(
              he.from(t.schema.text(" ", t.allowedMarks(u.marks))),
              0,
              0
            )),
            o.push(new nn(a + p.index, a + p.index + p[0].length, y));
      }
    }
    a = d;
  }
  if (!r.validEnd) {
    let l = r.fillBefore(he.empty, !0);
    n.replace(a, a, new ke(l, 0, 0));
  }
  for (let l = o.length - 1; l >= 0; l--) n.step(o[l]);
}
function CT(n, e, t) {
  return (
    (e == 0 || n.canReplace(e, n.childCount)) &&
    (t == n.childCount || n.canReplace(0, t))
  );
}
function vc(n) {
  let t = n.parent.content.cutByIndex(n.startIndex, n.endIndex);
  for (let r = n.depth; ; --r) {
    let i = n.$from.node(r),
      o = n.$from.index(r),
      a = n.$to.indexAfter(r);
    if (r < n.depth && i.canReplace(o, a, t)) return r;
    if (r == 0 || i.type.spec.isolating || !CT(i, o, a)) break;
  }
  return null;
}
function ET(n, e, t) {
  let { $from: r, $to: i, depth: o } = e,
    a = r.before(o + 1),
    l = i.after(o + 1),
    u = a,
    d = l,
    h = he.empty,
    p = 0;
  for (let m = o, w = !1; m > t; m--)
    w || r.index(m) > 0
      ? ((w = !0), (h = he.from(r.node(m).copy(h))), p++)
      : u--;
  let g = he.empty,
    y = 0;
  for (let m = o, w = !1; m > t; m--)
    w || i.after(m + 1) < i.end(m)
      ? ((w = !0), (g = he.from(i.node(m).copy(g))), y++)
      : d++;
  n.step(new Vn(u, d, a, l, new ke(h.append(g), p, y), h.size - p, !0));
}
function kT(n, e, t = null, r = n) {
  let i = OT(n, e),
    o = i && TT(r, e);
  return o ? i.map(p0).concat({ type: e, attrs: t }).concat(o.map(p0)) : null;
}
function p0(n) {
  return { type: n, attrs: null };
}
function OT(n, e) {
  let { parent: t, startIndex: r, endIndex: i } = n,
    o = t.contentMatchAt(r).findWrapping(e);
  if (!o) return null;
  let a = o.length ? o[0] : e;
  return t.canReplaceWith(r, i, a) ? o : null;
}
function TT(n, e) {
  let { parent: t, startIndex: r, endIndex: i } = n,
    o = t.child(r),
    a = e.contentMatch.findWrapping(o.type);
  if (!a) return null;
  let u = (a.length ? a[a.length - 1] : e).contentMatch;
  for (let d = r; u && d < i; d++) u = u.matchType(t.child(d).type);
  return !u || !u.validEnd ? null : a;
}
function MT(n, e, t) {
  let r = he.empty;
  for (let a = t.length - 1; a >= 0; a--) {
    if (r.size) {
      let l = t[a].type.contentMatch.matchFragment(r);
      if (!l || !l.validEnd)
        throw new RangeError(
          "Wrapper type given to Transform.wrap does not form valid content of its parent wrapper"
        );
    }
    r = he.from(t[a].type.create(t[a].attrs, r));
  }
  let i = e.start,
    o = e.end;
  n.step(new Vn(i, o, i, o, new ke(r, 0, 0), t.length, !0));
}
function RT(n, e, t, r, i) {
  if (!r.isTextblock)
    throw new RangeError("Type given to setBlockType should be a textblock");
  let o = n.steps.length;
  n.doc.nodesBetween(e, t, (a, l) => {
    if (
      a.isTextblock &&
      !a.hasMarkup(r, i) &&
      DT(n.doc, n.mapping.slice(o).map(l), r)
    ) {
      n.clearIncompatible(n.mapping.slice(o).map(l, 1), r);
      let u = n.mapping.slice(o),
        d = u.map(l, 1),
        h = u.map(l + a.nodeSize, 1);
      return (
        n.step(
          new Vn(
            d,
            h,
            d + 1,
            h - 1,
            new ke(he.from(r.create(i, null, a.marks)), 0, 0),
            1,
            !0
          )
        ),
        !1
      );
    }
  });
}
function DT(n, e, t) {
  let r = n.resolve(e),
    i = r.index();
  return r.parent.canReplaceWith(i, i + 1, t);
}
function IT(n, e, t, r, i) {
  let o = n.doc.nodeAt(e);
  if (!o) throw new RangeError("No node at given position");
  t || (t = o.type);
  let a = t.create(r, null, i || o.marks);
  if (o.isLeaf) return n.replaceWith(e, e + o.nodeSize, a);
  if (!t.validContent(o.content))
    throw new RangeError("Invalid content for node type " + t.name);
  n.step(
    new Vn(
      e,
      e + o.nodeSize,
      e + 1,
      e + o.nodeSize - 1,
      new ke(he.from(a), 0, 0),
      1,
      !0
    )
  );
}
function no(n, e, t = 1, r) {
  let i = n.resolve(e),
    o = i.depth - t,
    a = (r && r[r.length - 1]) || i.parent;
  if (
    o < 0 ||
    i.parent.type.spec.isolating ||
    !i.parent.canReplace(i.index(), i.parent.childCount) ||
    !a.type.validContent(
      i.parent.content.cutByIndex(i.index(), i.parent.childCount)
    )
  )
    return !1;
  for (let d = i.depth - 1, h = t - 2; d > o; d--, h--) {
    let p = i.node(d),
      g = i.index(d);
    if (p.type.spec.isolating) return !1;
    let y = p.content.cutByIndex(g, p.childCount),
      m = r && r[h + 1];
    m && (y = y.replaceChild(0, m.type.create(m.attrs)));
    let w = (r && r[h]) || p;
    if (!p.canReplace(g + 1, p.childCount) || !w.type.validContent(y))
      return !1;
  }
  let l = i.indexAfter(o),
    u = r && r[0];
  return i.node(o).canReplaceWith(l, l, u ? u.type : i.node(o + 1).type);
}
function AT(n, e, t = 1, r) {
  let i = n.doc.resolve(e),
    o = he.empty,
    a = he.empty;
  for (let l = i.depth, u = i.depth - t, d = t - 1; l > u; l--, d--) {
    o = he.from(i.node(l).copy(o));
    let h = r && r[d];
    a = he.from(h ? h.type.create(h.attrs, a) : i.node(l).copy(a));
  }
  n.step(new nn(e, e, new ke(o.append(a), t, t), !0));
}
function ca(n, e) {
  let t = n.resolve(e),
    r = t.index();
  return Zy(t.nodeBefore, t.nodeAfter) && t.parent.canReplace(r, r + 1);
}
function Zy(n, e) {
  return !!(n && e && !n.isLeaf && n.canAppend(e));
}
function Yy(n, e, t = -1) {
  let r = n.resolve(e);
  for (let i = r.depth; ; i--) {
    let o,
      a,
      l = r.index(i);
    if (
      (i == r.depth
        ? ((o = r.nodeBefore), (a = r.nodeAfter))
        : t > 0
        ? ((o = r.node(i + 1)), l++, (a = r.node(i).maybeChild(l)))
        : ((o = r.node(i).maybeChild(l - 1)), (a = r.node(i + 1))),
      o && !o.isTextblock && Zy(o, a) && r.node(i).canReplace(l, l + 1))
    )
      return e;
    if (i == 0) break;
    e = t < 0 ? r.before(i) : r.after(i);
  }
}
function LT(n, e, t) {
  let r = new nn(e - t, e + t, ke.empty, !0);
  n.step(r);
}
function PT(n, e, t) {
  let r = n.resolve(e);
  if (r.parent.canReplaceWith(r.index(), r.index(), t)) return e;
  if (r.parentOffset == 0)
    for (let i = r.depth - 1; i >= 0; i--) {
      let o = r.index(i);
      if (r.node(i).canReplaceWith(o, o, t)) return r.before(i + 1);
      if (o > 0) return null;
    }
  if (r.parentOffset == r.parent.content.size)
    for (let i = r.depth - 1; i >= 0; i--) {
      let o = r.indexAfter(i);
      if (r.node(i).canReplaceWith(o, o, t)) return r.after(i + 1);
      if (o < r.node(i).childCount) return null;
    }
  return null;
}
function _T(n, e, t) {
  let r = n.resolve(e);
  if (!t.content.size) return e;
  let i = t.content;
  for (let o = 0; o < t.openStart; o++) i = i.firstChild.content;
  for (let o = 1; o <= (t.openStart == 0 && t.size ? 2 : 1); o++)
    for (let a = r.depth; a >= 0; a--) {
      let l =
          a == r.depth
            ? 0
            : r.pos <= (r.start(a + 1) + r.end(a + 1)) / 2
            ? -1
            : 1,
        u = r.index(a) + (l > 0 ? 1 : 0),
        d = r.node(a),
        h = !1;
      if (o == 1) h = d.canReplace(u, u, i);
      else {
        let p = d.contentMatchAt(u).findWrapping(i.firstChild.type);
        h = p && d.canReplaceWith(u, u, p[0]);
      }
      if (h) return l == 0 ? r.pos : l < 0 ? r.before(a + 1) : r.after(a + 1);
    }
  return null;
}
function Nf(n, e, t = e, r = ke.empty) {
  if (e == t && !r.size) return null;
  let i = n.resolve(e),
    o = n.resolve(t);
  return qy(i, o, r) ? new nn(e, t, r) : new NT(i, o, r).fit();
}
function qy(n, e, t) {
  return (
    !t.openStart &&
    !t.openEnd &&
    n.start() == e.start() &&
    n.parent.canReplace(n.index(), e.index(), t.content)
  );
}
class NT {
  constructor(e, t, r) {
    (this.$from = e),
      (this.$to = t),
      (this.unplaced = r),
      (this.frontier = []),
      (this.placed = he.empty);
    for (let i = 0; i <= e.depth; i++) {
      let o = e.node(i);
      this.frontier.push({
        type: o.type,
        match: o.contentMatchAt(e.indexAfter(i)),
      });
    }
    for (let i = e.depth; i > 0; i--)
      this.placed = he.from(e.node(i).copy(this.placed));
  }
  get depth() {
    return this.frontier.length - 1;
  }
  fit() {
    for (; this.unplaced.size; ) {
      let d = this.findFittable();
      d ? this.placeNodes(d) : this.openMore() || this.dropNode();
    }
    let e = this.mustMoveInline(),
      t = this.placed.size - this.depth - this.$from.depth,
      r = this.$from,
      i = this.close(e < 0 ? this.$to : r.doc.resolve(e));
    if (!i) return null;
    let o = this.placed,
      a = r.depth,
      l = i.depth;
    for (; a && l && o.childCount == 1; ) (o = o.firstChild.content), a--, l--;
    let u = new ke(o, a, l);
    return e > -1
      ? new Vn(r.pos, e, this.$to.pos, this.$to.end(), u, t)
      : u.size || r.pos != this.$to.pos
      ? new nn(r.pos, i.pos, u)
      : null;
  }
  findFittable() {
    let e = this.unplaced.openStart;
    for (
      let t = this.unplaced.content, r = 0, i = this.unplaced.openEnd;
      r < e;
      r++
    ) {
      let o = t.firstChild;
      if ((t.childCount > 1 && (i = 0), o.type.spec.isolating && i <= r)) {
        e = r;
        break;
      }
      t = o.content;
    }
    for (let t = 1; t <= 2; t++)
      for (let r = t == 1 ? e : this.unplaced.openStart; r >= 0; r--) {
        let i,
          o = null;
        r
          ? ((o = ed(this.unplaced.content, r - 1).firstChild), (i = o.content))
          : (i = this.unplaced.content);
        let a = i.firstChild;
        for (let l = this.depth; l >= 0; l--) {
          let { type: u, match: d } = this.frontier[l],
            h,
            p = null;
          if (
            t == 1 &&
            (a
              ? d.matchType(a.type) || (p = d.fillBefore(he.from(a), !1))
              : o && u.compatibleContent(o.type))
          )
            return { sliceDepth: r, frontierDepth: l, parent: o, inject: p };
          if (t == 2 && a && (h = d.findWrapping(a.type)))
            return { sliceDepth: r, frontierDepth: l, parent: o, wrap: h };
          if (o && d.matchType(o.type)) break;
        }
      }
  }
  openMore() {
    let { content: e, openStart: t, openEnd: r } = this.unplaced,
      i = ed(e, t);
    return !i.childCount || i.firstChild.isLeaf
      ? !1
      : ((this.unplaced = new ke(
          e,
          t + 1,
          Math.max(r, i.size + t >= e.size - r ? t + 1 : 0)
        )),
        !0);
  }
  dropNode() {
    let { content: e, openStart: t, openEnd: r } = this.unplaced,
      i = ed(e, t);
    if (i.childCount <= 1 && t > 0) {
      let o = e.size - t <= t + i.size;
      this.unplaced = new ke(Ts(e, t - 1, 1), t - 1, o ? t - 1 : r);
    } else this.unplaced = new ke(Ts(e, t, 1), t, r);
  }
  placeNodes({
    sliceDepth: e,
    frontierDepth: t,
    parent: r,
    inject: i,
    wrap: o,
  }) {
    for (; this.depth > t; ) this.closeFrontierNode();
    if (o) for (let w = 0; w < o.length; w++) this.openFrontierNode(o[w]);
    let a = this.unplaced,
      l = r ? r.content : a.content,
      u = a.openStart - e,
      d = 0,
      h = [],
      { match: p, type: g } = this.frontier[t];
    if (i) {
      for (let w = 0; w < i.childCount; w++) h.push(i.child(w));
      p = p.matchFragment(i);
    }
    let y = l.size + e - (a.content.size - a.openEnd);
    for (; d < l.childCount; ) {
      let w = l.child(d),
        b = p.matchType(w.type);
      if (!b) break;
      d++,
        (d > 1 || u == 0 || w.content.size) &&
          ((p = b),
          h.push(
            Gy(
              w.mark(g.allowedMarks(w.marks)),
              d == 1 ? u : 0,
              d == l.childCount ? y : -1
            )
          ));
    }
    let m = d == l.childCount;
    m || (y = -1),
      (this.placed = Ms(this.placed, t, he.from(h))),
      (this.frontier[t].match = p),
      m &&
        y < 0 &&
        r &&
        r.type == this.frontier[this.depth].type &&
        this.frontier.length > 1 &&
        this.closeFrontierNode();
    for (let w = 0, b = l; w < y; w++) {
      let E = b.lastChild;
      this.frontier.push({
        type: E.type,
        match: E.contentMatchAt(E.childCount),
      }),
        (b = E.content);
    }
    this.unplaced = m
      ? e == 0
        ? ke.empty
        : new ke(Ts(a.content, e - 1, 1), e - 1, y < 0 ? a.openEnd : e - 1)
      : new ke(Ts(a.content, e, d), a.openStart, a.openEnd);
  }
  mustMoveInline() {
    if (!this.$to.parent.isTextblock) return -1;
    let e = this.frontier[this.depth],
      t;
    if (
      !e.type.isTextblock ||
      !td(this.$to, this.$to.depth, e.type, e.match, !1) ||
      (this.$to.depth == this.depth &&
        (t = this.findCloseLevel(this.$to)) &&
        t.depth == this.depth)
    )
      return -1;
    let { depth: r } = this.$to,
      i = this.$to.after(r);
    for (; r > 1 && i == this.$to.end(--r); ) ++i;
    return i;
  }
  findCloseLevel(e) {
    e: for (let t = Math.min(this.depth, e.depth); t >= 0; t--) {
      let { match: r, type: i } = this.frontier[t],
        o = t < e.depth && e.end(t + 1) == e.pos + (e.depth - (t + 1)),
        a = td(e, t, i, r, o);
      if (a) {
        for (let l = t - 1; l >= 0; l--) {
          let { match: u, type: d } = this.frontier[l],
            h = td(e, l, d, u, !0);
          if (!h || h.childCount) continue e;
        }
        return {
          depth: t,
          fit: a,
          move: o ? e.doc.resolve(e.after(t + 1)) : e,
        };
      }
    }
  }
  close(e) {
    let t = this.findCloseLevel(e);
    if (!t) return null;
    for (; this.depth > t.depth; ) this.closeFrontierNode();
    t.fit.childCount && (this.placed = Ms(this.placed, t.depth, t.fit)),
      (e = t.move);
    for (let r = t.depth + 1; r <= e.depth; r++) {
      let i = e.node(r),
        o = i.type.contentMatch.fillBefore(i.content, !0, e.index(r));
      this.openFrontierNode(i.type, i.attrs, o);
    }
    return e;
  }
  openFrontierNode(e, t = null, r) {
    let i = this.frontier[this.depth];
    (i.match = i.match.matchType(e)),
      (this.placed = Ms(this.placed, this.depth, he.from(e.create(t, r)))),
      this.frontier.push({ type: e, match: e.contentMatch });
  }
  closeFrontierNode() {
    let t = this.frontier.pop().match.fillBefore(he.empty, !0);
    t.childCount && (this.placed = Ms(this.placed, this.frontier.length, t));
  }
}
function Ts(n, e, t) {
  return e == 0
    ? n.cutByIndex(t, n.childCount)
    : n.replaceChild(0, n.firstChild.copy(Ts(n.firstChild.content, e - 1, t)));
}
function Ms(n, e, t) {
  return e == 0
    ? n.append(t)
    : n.replaceChild(
        n.childCount - 1,
        n.lastChild.copy(Ms(n.lastChild.content, e - 1, t))
      );
}
function ed(n, e) {
  for (let t = 0; t < e; t++) n = n.firstChild.content;
  return n;
}
function Gy(n, e, t) {
  if (e <= 0) return n;
  let r = n.content;
  return (
    e > 1 &&
      (r = r.replaceChild(
        0,
        Gy(r.firstChild, e - 1, r.childCount == 1 ? t - 1 : 0)
      )),
    e > 0 &&
      ((r = n.type.contentMatch.fillBefore(r).append(r)),
      t <= 0 &&
        (r = r.append(
          n.type.contentMatch.matchFragment(r).fillBefore(he.empty, !0)
        ))),
    n.copy(r)
  );
}
function td(n, e, t, r, i) {
  let o = n.node(e),
    a = i ? n.indexAfter(e) : n.index(e);
  if (a == o.childCount && !t.compatibleContent(o.type)) return null;
  let l = r.fillBefore(o.content, !0, a);
  return l && !zT(t, o.content, a) ? l : null;
}
function zT(n, e, t) {
  for (let r = t; r < e.childCount; r++)
    if (!n.allowsMarks(e.child(r).marks)) return !0;
  return !1;
}
function BT(n) {
  return n.spec.defining || n.spec.definingForContent;
}
function FT(n, e, t, r) {
  if (!r.size) return n.deleteRange(e, t);
  let i = n.doc.resolve(e),
    o = n.doc.resolve(t);
  if (qy(i, o, r)) return n.step(new nn(e, t, r));
  let a = Xy(i, n.doc.resolve(t));
  a[a.length - 1] == 0 && a.pop();
  let l = -(i.depth + 1);
  a.unshift(l);
  for (let g = i.depth, y = i.pos - 1; g > 0; g--, y--) {
    let m = i.node(g).type.spec;
    if (m.defining || m.definingAsContext || m.isolating) break;
    a.indexOf(g) > -1 ? (l = g) : i.before(g) == y && a.splice(1, 0, -g);
  }
  let u = a.indexOf(l),
    d = [],
    h = r.openStart;
  for (let g = r.content, y = 0; ; y++) {
    let m = g.firstChild;
    if ((d.push(m), y == r.openStart)) break;
    g = m.content;
  }
  for (let g = h - 1; g >= 0; g--) {
    let y = d[g],
      m = BT(y.type);
    if (m && !y.sameMarkup(i.node(Math.abs(l) - 1))) h = g;
    else if (m || !y.type.isTextblock) break;
  }
  for (let g = r.openStart; g >= 0; g--) {
    let y = (g + h + 1) % (r.openStart + 1),
      m = d[y];
    if (m)
      for (let w = 0; w < a.length; w++) {
        let b = a[(w + u) % a.length],
          E = !0;
        b < 0 && ((E = !1), (b = -b));
        let R = i.node(b - 1),
          O = i.index(b - 1);
        if (R.canReplaceWith(O, O, m.type, m.marks))
          return n.replace(
            i.before(b),
            E ? o.after(b) : t,
            new ke(Ky(r.content, 0, r.openStart, y), y, r.openEnd)
          );
      }
  }
  let p = n.steps.length;
  for (
    let g = a.length - 1;
    g >= 0 && (n.replace(e, t, r), !(n.steps.length > p));
    g--
  ) {
    let y = a[g];
    y < 0 || ((e = i.before(y)), (t = o.after(y)));
  }
}
function Ky(n, e, t, r, i) {
  if (e < t) {
    let o = n.firstChild;
    n = n.replaceChild(0, o.copy(Ky(o.content, e + 1, t, r, o)));
  }
  if (e > r) {
    let o = i.contentMatchAt(0),
      a = o.fillBefore(n).append(n);
    n = a.append(o.matchFragment(a).fillBefore(he.empty, !0));
  }
  return n;
}
function WT(n, e, t, r) {
  if (!r.isInline && e == t && n.doc.resolve(e).parent.content.size) {
    let i = PT(n.doc, e, r.type);
    i != null && (e = t = i);
  }
  n.replaceRange(e, t, new ke(he.from(r), 0, 0));
}
function VT(n, e, t) {
  let r = n.doc.resolve(e),
    i = n.doc.resolve(t),
    o = Xy(r, i);
  for (let a = 0; a < o.length; a++) {
    let l = o[a],
      u = a == o.length - 1;
    if ((u && l == 0) || r.node(l).type.contentMatch.validEnd)
      return n.delete(r.start(l), i.end(l));
    if (
      l > 0 &&
      (u || r.node(l - 1).canReplace(r.index(l - 1), i.indexAfter(l - 1)))
    )
      return n.delete(r.before(l), i.after(l));
  }
  for (let a = 1; a <= r.depth && a <= i.depth; a++)
    if (
      e - r.start(a) == r.depth - a &&
      t > r.end(a) &&
      i.end(a) - t != i.depth - a
    )
      return n.delete(r.before(a), t);
  n.delete(e, t);
}
function Xy(n, e) {
  let t = [],
    r = Math.min(n.depth, e.depth);
  for (let i = r; i >= 0; i--) {
    let o = n.start(i);
    if (
      o < n.pos - (n.depth - i) ||
      e.end(i) > e.pos + (e.depth - i) ||
      n.node(i).type.spec.isolating ||
      e.node(i).type.spec.isolating
    )
      break;
    (o == e.start(i) ||
      (i == n.depth &&
        i == e.depth &&
        n.parent.inlineContent &&
        e.parent.inlineContent &&
        i &&
        e.start(i - 1) == o - 1)) &&
      t.push(i);
  }
  return t;
}
class $o extends ln {
  constructor(e, t, r) {
    super(), (this.pos = e), (this.attr = t), (this.value = r);
  }
  apply(e) {
    let t = e.nodeAt(this.pos);
    if (!t) return At.fail("No node at attribute step's position");
    let r = Object.create(null);
    for (let o in t.attrs) r[o] = t.attrs[o];
    r[this.attr] = this.value;
    let i = t.type.create(r, null, t.marks);
    return At.fromReplace(
      e,
      this.pos,
      this.pos + 1,
      new ke(he.from(i), 0, t.isLeaf ? 0 : 1)
    );
  }
  getMap() {
    return Fn.empty;
  }
  invert(e) {
    return new $o(this.pos, this.attr, e.nodeAt(this.pos).attrs[this.attr]);
  }
  map(e) {
    let t = e.mapResult(this.pos, 1);
    return t.deletedAfter ? null : new $o(t.pos, this.attr, this.value);
  }
  toJSON() {
    return {
      stepType: "attr",
      pos: this.pos,
      attr: this.attr,
      value: this.value,
    };
  }
  static fromJSON(e, t) {
    if (typeof t.pos != "number" || typeof t.attr != "string")
      throw new RangeError("Invalid input for AttrStep.fromJSON");
    return new $o(t.pos, t.attr, t.value);
  }
}
ln.jsonID("attr", $o);
class qs extends ln {
  constructor(e, t) {
    super(), (this.attr = e), (this.value = t);
  }
  apply(e) {
    let t = Object.create(null);
    for (let i in e.attrs) t[i] = e.attrs[i];
    t[this.attr] = this.value;
    let r = e.type.create(t, e.content, e.marks);
    return At.ok(r);
  }
  getMap() {
    return Fn.empty;
  }
  invert(e) {
    return new qs(this.attr, e.attrs[this.attr]);
  }
  map(e) {
    return this;
  }
  toJSON() {
    return { stepType: "docAttr", attr: this.attr, value: this.value };
  }
  static fromJSON(e, t) {
    if (typeof t.attr != "string")
      throw new RangeError("Invalid input for DocAttrStep.fromJSON");
    return new qs(t.attr, t.value);
  }
}
ln.jsonID("docAttr", qs);
let qo = class extends Error {};
qo = function n(e) {
  let t = Error.call(this, e);
  return (t.__proto__ = n.prototype), t;
};
qo.prototype = Object.create(Error.prototype);
qo.prototype.constructor = qo;
qo.prototype.name = "TransformError";
class HT {
  constructor(e) {
    (this.doc = e),
      (this.steps = []),
      (this.docs = []),
      (this.mapping = new Ho());
  }
  get before() {
    return this.docs.length ? this.docs[0] : this.doc;
  }
  step(e) {
    let t = this.maybeStep(e);
    if (t.failed) throw new qo(t.failed);
    return this;
  }
  maybeStep(e) {
    let t = e.apply(this.doc);
    return t.failed || this.addStep(e, t.doc), t;
  }
  get docChanged() {
    return this.steps.length > 0;
  }
  addStep(e, t) {
    this.docs.push(this.doc),
      this.steps.push(e),
      this.mapping.appendMap(e.getMap()),
      (this.doc = t);
  }
  replace(e, t = e, r = ke.empty) {
    let i = Nf(this.doc, e, t, r);
    return i && this.step(i), this;
  }
  replaceWith(e, t, r) {
    return this.replace(e, t, new ke(he.from(r), 0, 0));
  }
  delete(e, t) {
    return this.replace(e, t, ke.empty);
  }
  insert(e, t) {
    return this.replaceWith(e, e, t);
  }
  replaceRange(e, t, r) {
    return FT(this, e, t, r), this;
  }
  replaceRangeWith(e, t, r) {
    return WT(this, e, t, r), this;
  }
  deleteRange(e, t) {
    return VT(this, e, t), this;
  }
  lift(e, t) {
    return ET(this, e, t), this;
  }
  join(e, t = 1) {
    return LT(this, e, t), this;
  }
  wrap(e, t) {
    return MT(this, e, t), this;
  }
  setBlockType(e, t = e, r, i = null) {
    return RT(this, e, t, r, i), this;
  }
  setNodeMarkup(e, t, r = null, i) {
    return IT(this, e, t, r, i), this;
  }
  setNodeAttribute(e, t, r) {
    return this.step(new $o(e, t, r)), this;
  }
  setDocAttribute(e, t) {
    return this.step(new qs(e, t)), this;
  }
  addNodeMark(e, t) {
    return this.step(new xi(e, t)), this;
  }
  removeNodeMark(e, t) {
    if (!(t instanceof at)) {
      let r = this.doc.nodeAt(e);
      if (!r) throw new RangeError("No node at position " + e);
      if (((t = t.isInSet(r.marks)), !t)) return this;
    }
    return this.step(new Yo(e, t)), this;
  }
  split(e, t = 1, r) {
    return AT(this, e, t, r), this;
  }
  addMark(e, t, r) {
    return bT(this, e, t, r), this;
  }
  removeMark(e, t, r) {
    return xT(this, e, t, r), this;
  }
  clearIncompatible(e, t, r) {
    return ST(this, e, t, r), this;
  }
}
const nd = Object.create(null);
class tt {
  constructor(e, t, r) {
    (this.$anchor = e),
      (this.$head = t),
      (this.ranges = r || [new $T(e.min(t), e.max(t))]);
  }
  get anchor() {
    return this.$anchor.pos;
  }
  get head() {
    return this.$head.pos;
  }
  get from() {
    return this.$from.pos;
  }
  get to() {
    return this.$to.pos;
  }
  get $from() {
    return this.ranges[0].$from;
  }
  get $to() {
    return this.ranges[0].$to;
  }
  get empty() {
    let e = this.ranges;
    for (let t = 0; t < e.length; t++)
      if (e[t].$from.pos != e[t].$to.pos) return !1;
    return !0;
  }
  content() {
    return this.$from.doc.slice(this.from, this.to, !0);
  }
  replace(e, t = ke.empty) {
    let r = t.content.lastChild,
      i = null;
    for (let l = 0; l < t.openEnd; l++) (i = r), (r = r.lastChild);
    let o = e.steps.length,
      a = this.ranges;
    for (let l = 0; l < a.length; l++) {
      let { $from: u, $to: d } = a[l],
        h = e.mapping.slice(o);
      e.replaceRange(h.map(u.pos), h.map(d.pos), l ? ke.empty : t),
        l == 0 && y0(e, o, (r ? r.isInline : i && i.isTextblock) ? -1 : 1);
    }
  }
  replaceWith(e, t) {
    let r = e.steps.length,
      i = this.ranges;
    for (let o = 0; o < i.length; o++) {
      let { $from: a, $to: l } = i[o],
        u = e.mapping.slice(r),
        d = u.map(a.pos),
        h = u.map(l.pos);
      o
        ? e.deleteRange(d, h)
        : (e.replaceRangeWith(d, h, t), y0(e, r, t.isInline ? -1 : 1));
    }
  }
  static findFrom(e, t, r = !1) {
    let i = e.parent.inlineContent
      ? new nt(e)
      : No(e.node(0), e.parent, e.pos, e.index(), t, r);
    if (i) return i;
    for (let o = e.depth - 1; o >= 0; o--) {
      let a =
        t < 0
          ? No(e.node(0), e.node(o), e.before(o + 1), e.index(o), t, r)
          : No(e.node(0), e.node(o), e.after(o + 1), e.index(o) + 1, t, r);
      if (a) return a;
    }
    return null;
  }
  static near(e, t = 1) {
    return this.findFrom(e, t) || this.findFrom(e, -t) || new Cn(e.node(0));
  }
  static atStart(e) {
    return No(e, e, 0, 0, 1) || new Cn(e);
  }
  static atEnd(e) {
    return No(e, e, e.content.size, e.childCount, -1) || new Cn(e);
  }
  static fromJSON(e, t) {
    if (!t || !t.type)
      throw new RangeError("Invalid input for Selection.fromJSON");
    let r = nd[t.type];
    if (!r) throw new RangeError(`No selection type ${t.type} defined`);
    return r.fromJSON(e, t);
  }
  static jsonID(e, t) {
    if (e in nd)
      throw new RangeError("Duplicate use of selection JSON ID " + e);
    return (nd[e] = t), (t.prototype.jsonID = e), t;
  }
  getBookmark() {
    return nt.between(this.$anchor, this.$head).getBookmark();
  }
}
tt.prototype.visible = !0;
class $T {
  constructor(e, t) {
    (this.$from = e), (this.$to = t);
  }
}
let g0 = !1;
function m0(n) {
  !g0 &&
    !n.parent.inlineContent &&
    ((g0 = !0),
    console.warn(
      "TextSelection endpoint not pointing into a node with inline content (" +
        n.parent.type.name +
        ")"
    ));
}
class nt extends tt {
  constructor(e, t = e) {
    m0(e), m0(t), super(e, t);
  }
  get $cursor() {
    return this.$anchor.pos == this.$head.pos ? this.$head : null;
  }
  map(e, t) {
    let r = e.resolve(t.map(this.head));
    if (!r.parent.inlineContent) return tt.near(r);
    let i = e.resolve(t.map(this.anchor));
    return new nt(i.parent.inlineContent ? i : r, r);
  }
  replace(e, t = ke.empty) {
    if ((super.replace(e, t), t == ke.empty)) {
      let r = this.$from.marksAcross(this.$to);
      r && e.ensureMarks(r);
    }
  }
  eq(e) {
    return e instanceof nt && e.anchor == this.anchor && e.head == this.head;
  }
  getBookmark() {
    return new wc(this.anchor, this.head);
  }
  toJSON() {
    return { type: "text", anchor: this.anchor, head: this.head };
  }
  static fromJSON(e, t) {
    if (typeof t.anchor != "number" || typeof t.head != "number")
      throw new RangeError("Invalid input for TextSelection.fromJSON");
    return new nt(e.resolve(t.anchor), e.resolve(t.head));
  }
  static create(e, t, r = t) {
    let i = e.resolve(t);
    return new this(i, r == t ? i : e.resolve(r));
  }
  static between(e, t, r) {
    let i = e.pos - t.pos;
    if (((!r || i) && (r = i >= 0 ? 1 : -1), !t.parent.inlineContent)) {
      let o = tt.findFrom(t, r, !0) || tt.findFrom(t, -r, !0);
      if (o) t = o.$head;
      else return tt.near(t, r);
    }
    return (
      e.parent.inlineContent ||
        (i == 0
          ? (e = t)
          : ((e = (tt.findFrom(e, -r, !0) || tt.findFrom(e, r, !0)).$anchor),
            e.pos < t.pos != i < 0 && (e = t))),
      new nt(e, t)
    );
  }
}
tt.jsonID("text", nt);
class wc {
  constructor(e, t) {
    (this.anchor = e), (this.head = t);
  }
  map(e) {
    return new wc(e.map(this.anchor), e.map(this.head));
  }
  resolve(e) {
    return nt.between(e.resolve(this.anchor), e.resolve(this.head));
  }
}
class We extends tt {
  constructor(e) {
    let t = e.nodeAfter,
      r = e.node(0).resolve(e.pos + t.nodeSize);
    super(e, r), (this.node = t);
  }
  map(e, t) {
    let { deleted: r, pos: i } = t.mapResult(this.anchor),
      o = e.resolve(i);
    return r ? tt.near(o) : new We(o);
  }
  content() {
    return new ke(he.from(this.node), 0, 0);
  }
  eq(e) {
    return e instanceof We && e.anchor == this.anchor;
  }
  toJSON() {
    return { type: "node", anchor: this.anchor };
  }
  getBookmark() {
    return new zf(this.anchor);
  }
  static fromJSON(e, t) {
    if (typeof t.anchor != "number")
      throw new RangeError("Invalid input for NodeSelection.fromJSON");
    return new We(e.resolve(t.anchor));
  }
  static create(e, t) {
    return new We(e.resolve(t));
  }
  static isSelectable(e) {
    return !e.isText && e.type.spec.selectable !== !1;
  }
}
We.prototype.visible = !1;
tt.jsonID("node", We);
class zf {
  constructor(e) {
    this.anchor = e;
  }
  map(e) {
    let { deleted: t, pos: r } = e.mapResult(this.anchor);
    return t ? new wc(r, r) : new zf(r);
  }
  resolve(e) {
    let t = e.resolve(this.anchor),
      r = t.nodeAfter;
    return r && We.isSelectable(r) ? new We(t) : tt.near(t);
  }
}
class Cn extends tt {
  constructor(e) {
    super(e.resolve(0), e.resolve(e.content.size));
  }
  replace(e, t = ke.empty) {
    if (t == ke.empty) {
      e.delete(0, e.doc.content.size);
      let r = tt.atStart(e.doc);
      r.eq(e.selection) || e.setSelection(r);
    } else super.replace(e, t);
  }
  toJSON() {
    return { type: "all" };
  }
  static fromJSON(e) {
    return new Cn(e);
  }
  map(e) {
    return new Cn(e);
  }
  eq(e) {
    return e instanceof Cn;
  }
  getBookmark() {
    return jT;
  }
}
tt.jsonID("all", Cn);
const jT = {
  map() {
    return this;
  },
  resolve(n) {
    return new Cn(n);
  },
};
function No(n, e, t, r, i, o = !1) {
  if (e.inlineContent) return nt.create(n, t);
  for (let a = r - (i > 0 ? 0 : 1); i > 0 ? a < e.childCount : a >= 0; a += i) {
    let l = e.child(a);
    if (l.isAtom) {
      if (!o && We.isSelectable(l))
        return We.create(n, t - (i < 0 ? l.nodeSize : 0));
    } else {
      let u = No(n, l, t + i, i < 0 ? l.childCount : 0, i, o);
      if (u) return u;
    }
    t += l.nodeSize * i;
  }
  return null;
}
function y0(n, e, t) {
  let r = n.steps.length - 1;
  if (r < e) return;
  let i = n.steps[r];
  if (!(i instanceof nn || i instanceof Vn)) return;
  let o = n.mapping.maps[r],
    a;
  o.forEach((l, u, d, h) => {
    a == null && (a = h);
  }),
    n.setSelection(tt.near(n.doc.resolve(a), t));
}
const v0 = 1,
  pl = 2,
  w0 = 4;
class UT extends HT {
  constructor(e) {
    super(e.doc),
      (this.curSelectionFor = 0),
      (this.updated = 0),
      (this.meta = Object.create(null)),
      (this.time = Date.now()),
      (this.curSelection = e.selection),
      (this.storedMarks = e.storedMarks);
  }
  get selection() {
    return (
      this.curSelectionFor < this.steps.length &&
        ((this.curSelection = this.curSelection.map(
          this.doc,
          this.mapping.slice(this.curSelectionFor)
        )),
        (this.curSelectionFor = this.steps.length)),
      this.curSelection
    );
  }
  setSelection(e) {
    if (e.$from.doc != this.doc)
      throw new RangeError(
        "Selection passed to setSelection must point at the current document"
      );
    return (
      (this.curSelection = e),
      (this.curSelectionFor = this.steps.length),
      (this.updated = (this.updated | v0) & ~pl),
      (this.storedMarks = null),
      this
    );
  }
  get selectionSet() {
    return (this.updated & v0) > 0;
  }
  setStoredMarks(e) {
    return (this.storedMarks = e), (this.updated |= pl), this;
  }
  ensureMarks(e) {
    return (
      at.sameSet(this.storedMarks || this.selection.$from.marks(), e) ||
        this.setStoredMarks(e),
      this
    );
  }
  addStoredMark(e) {
    return this.ensureMarks(
      e.addToSet(this.storedMarks || this.selection.$head.marks())
    );
  }
  removeStoredMark(e) {
    return this.ensureMarks(
      e.removeFromSet(this.storedMarks || this.selection.$head.marks())
    );
  }
  get storedMarksSet() {
    return (this.updated & pl) > 0;
  }
  addStep(e, t) {
    super.addStep(e, t),
      (this.updated = this.updated & ~pl),
      (this.storedMarks = null);
  }
  setTime(e) {
    return (this.time = e), this;
  }
  replaceSelection(e) {
    return this.selection.replace(this, e), this;
  }
  replaceSelectionWith(e, t = !0) {
    let r = this.selection;
    return (
      t &&
        (e = e.mark(
          this.storedMarks ||
            (r.empty ? r.$from.marks() : r.$from.marksAcross(r.$to) || at.none)
        )),
      r.replaceWith(this, e),
      this
    );
  }
  deleteSelection() {
    return this.selection.replace(this), this;
  }
  insertText(e, t, r) {
    let i = this.doc.type.schema;
    if (t == null)
      return e
        ? this.replaceSelectionWith(i.text(e), !0)
        : this.deleteSelection();
    {
      if ((r == null && (r = t), (r = r ?? t), !e))
        return this.deleteRange(t, r);
      let o = this.storedMarks;
      if (!o) {
        let a = this.doc.resolve(t);
        o = r == t ? a.marks() : a.marksAcross(this.doc.resolve(r));
      }
      return (
        this.replaceRangeWith(t, r, i.text(e, o)),
        this.selection.empty || this.setSelection(tt.near(this.selection.$to)),
        this
      );
    }
  }
  setMeta(e, t) {
    return (this.meta[typeof e == "string" ? e : e.key] = t), this;
  }
  getMeta(e) {
    return this.meta[typeof e == "string" ? e : e.key];
  }
  get isGeneric() {
    for (let e in this.meta) return !1;
    return !0;
  }
  scrollIntoView() {
    return (this.updated |= w0), this;
  }
  get scrolledIntoView() {
    return (this.updated & w0) > 0;
  }
}
function b0(n, e) {
  return !e || !n ? n : n.bind(e);
}
class Rs {
  constructor(e, t, r) {
    (this.name = e), (this.init = b0(t.init, r)), (this.apply = b0(t.apply, r));
  }
}
const ZT = [
  new Rs("doc", {
    init(n) {
      return n.doc || n.schema.topNodeType.createAndFill();
    },
    apply(n) {
      return n.doc;
    },
  }),
  new Rs("selection", {
    init(n, e) {
      return n.selection || tt.atStart(e.doc);
    },
    apply(n) {
      return n.selection;
    },
  }),
  new Rs("storedMarks", {
    init(n) {
      return n.storedMarks || null;
    },
    apply(n, e, t, r) {
      return r.selection.$cursor ? n.storedMarks : null;
    },
  }),
  new Rs("scrollToSelection", {
    init() {
      return 0;
    },
    apply(n, e) {
      return n.scrolledIntoView ? e + 1 : e;
    },
  }),
];
class rd {
  constructor(e, t) {
    (this.schema = e),
      (this.plugins = []),
      (this.pluginsByKey = Object.create(null)),
      (this.fields = ZT.slice()),
      t &&
        t.forEach((r) => {
          if (this.pluginsByKey[r.key])
            throw new RangeError(
              "Adding different instances of a keyed plugin (" + r.key + ")"
            );
          this.plugins.push(r),
            (this.pluginsByKey[r.key] = r),
            r.spec.state && this.fields.push(new Rs(r.key, r.spec.state, r));
        });
  }
}
class Bo {
  constructor(e) {
    this.config = e;
  }
  get schema() {
    return this.config.schema;
  }
  get plugins() {
    return this.config.plugins;
  }
  apply(e) {
    return this.applyTransaction(e).state;
  }
  filterTransaction(e, t = -1) {
    for (let r = 0; r < this.config.plugins.length; r++)
      if (r != t) {
        let i = this.config.plugins[r];
        if (
          i.spec.filterTransaction &&
          !i.spec.filterTransaction.call(i, e, this)
        )
          return !1;
      }
    return !0;
  }
  applyTransaction(e) {
    if (!this.filterTransaction(e)) return { state: this, transactions: [] };
    let t = [e],
      r = this.applyInner(e),
      i = null;
    for (;;) {
      let o = !1;
      for (let a = 0; a < this.config.plugins.length; a++) {
        let l = this.config.plugins[a];
        if (l.spec.appendTransaction) {
          let u = i ? i[a].n : 0,
            d = i ? i[a].state : this,
            h =
              u < t.length &&
              l.spec.appendTransaction.call(l, u ? t.slice(u) : t, d, r);
          if (h && r.filterTransaction(h, a)) {
            if ((h.setMeta("appendedTransaction", e), !i)) {
              i = [];
              for (let p = 0; p < this.config.plugins.length; p++)
                i.push(
                  p < a ? { state: r, n: t.length } : { state: this, n: 0 }
                );
            }
            t.push(h), (r = r.applyInner(h)), (o = !0);
          }
          i && (i[a] = { state: r, n: t.length });
        }
      }
      if (!o) return { state: r, transactions: t };
    }
  }
  applyInner(e) {
    if (!e.before.eq(this.doc))
      throw new RangeError("Applying a mismatched transaction");
    let t = new Bo(this.config),
      r = this.config.fields;
    for (let i = 0; i < r.length; i++) {
      let o = r[i];
      t[o.name] = o.apply(e, this[o.name], this, t);
    }
    return t;
  }
  get tr() {
    return new UT(this);
  }
  static create(e) {
    let t = new rd(e.doc ? e.doc.type.schema : e.schema, e.plugins),
      r = new Bo(t);
    for (let i = 0; i < t.fields.length; i++)
      r[t.fields[i].name] = t.fields[i].init(e, r);
    return r;
  }
  reconfigure(e) {
    let t = new rd(this.schema, e.plugins),
      r = t.fields,
      i = new Bo(t);
    for (let o = 0; o < r.length; o++) {
      let a = r[o].name;
      i[a] = this.hasOwnProperty(a) ? this[a] : r[o].init(e, i);
    }
    return i;
  }
  toJSON(e) {
    let t = { doc: this.doc.toJSON(), selection: this.selection.toJSON() };
    if (
      (this.storedMarks &&
        (t.storedMarks = this.storedMarks.map((r) => r.toJSON())),
      e && typeof e == "object")
    )
      for (let r in e) {
        if (r == "doc" || r == "selection")
          throw new RangeError(
            "The JSON fields `doc` and `selection` are reserved"
          );
        let i = e[r],
          o = i.spec.state;
        o && o.toJSON && (t[r] = o.toJSON.call(i, this[i.key]));
      }
    return t;
  }
  static fromJSON(e, t, r) {
    if (!t) throw new RangeError("Invalid input for EditorState.fromJSON");
    if (!e.schema)
      throw new RangeError("Required config field 'schema' missing");
    let i = new rd(e.schema, e.plugins),
      o = new Bo(i);
    return (
      i.fields.forEach((a) => {
        if (a.name == "doc") o.doc = Rr.fromJSON(e.schema, t.doc);
        else if (a.name == "selection")
          o.selection = tt.fromJSON(o.doc, t.selection);
        else if (a.name == "storedMarks")
          t.storedMarks &&
            (o.storedMarks = t.storedMarks.map(e.schema.markFromJSON));
        else {
          if (r)
            for (let l in r) {
              let u = r[l],
                d = u.spec.state;
              if (
                u.key == a.name &&
                d &&
                d.fromJSON &&
                Object.prototype.hasOwnProperty.call(t, l)
              ) {
                o[a.name] = d.fromJSON.call(u, e, t[l], o);
                return;
              }
            }
          o[a.name] = a.init(e, o);
        }
      }),
      o
    );
  }
}
function Jy(n, e, t) {
  for (let r in n) {
    let i = n[r];
    i instanceof Function
      ? (i = i.bind(e))
      : r == "handleDOMEvents" && (i = Jy(i, e, {})),
      (t[r] = i);
  }
  return t;
}
class ua {
  constructor(e) {
    (this.spec = e),
      (this.props = {}),
      e.props && Jy(e.props, this, this.props),
      (this.key = e.key ? e.key.key : Qy("plugin"));
  }
  getState(e) {
    return e[this.key];
  }
}
const id = Object.create(null);
function Qy(n) {
  return n in id ? n + "$" + ++id[n] : ((id[n] = 0), n + "$");
}
class ev {
  constructor(e = "key") {
    this.key = Qy(e);
  }
  get(e) {
    return e.config.pluginsByKey[this.key];
  }
  getState(e) {
    return e[this.key];
  }
}
const tv = (n, e) =>
  n.selection.empty
    ? !1
    : (e && e(n.tr.deleteSelection().scrollIntoView()), !0);
function YT(n, e) {
  let { $cursor: t } = n.selection;
  return !t || (e ? !e.endOfTextblock("backward", n) : t.parentOffset > 0)
    ? null
    : t;
}
const qT = (n, e, t) => {
  let r = YT(n, t);
  if (!r) return !1;
  let i = nv(r);
  if (!i) {
    let a = r.blockRange(),
      l = a && vc(a);
    return l == null ? !1 : (e && e(n.tr.lift(a, l).scrollIntoView()), !0);
  }
  let o = i.nodeBefore;
  if (!o.type.spec.isolating && ov(n, i, e)) return !0;
  if (r.parent.content.size == 0 && (Go(o, "end") || We.isSelectable(o))) {
    let a = Nf(n.doc, r.before(), r.after(), ke.empty);
    if (a && a.slice.size < a.to - a.from) {
      if (e) {
        let l = n.tr.step(a);
        l.setSelection(
          Go(o, "end")
            ? tt.findFrom(l.doc.resolve(l.mapping.map(i.pos, -1)), -1)
            : We.create(l.doc, i.pos - o.nodeSize)
        ),
          e(l.scrollIntoView());
      }
      return !0;
    }
  }
  return o.isAtom && i.depth == r.depth - 1
    ? (e && e(n.tr.delete(i.pos - o.nodeSize, i.pos).scrollIntoView()), !0)
    : !1;
};
function Go(n, e, t = !1) {
  for (let r = n; r; r = e == "start" ? r.firstChild : r.lastChild) {
    if (r.isTextblock) return !0;
    if (t && r.childCount != 1) return !1;
  }
  return !1;
}
const GT = (n, e, t) => {
  let { $head: r, empty: i } = n.selection,
    o = r;
  if (!i) return !1;
  if (r.parent.isTextblock) {
    if (t ? !t.endOfTextblock("backward", n) : r.parentOffset > 0) return !1;
    o = nv(r);
  }
  let a = o && o.nodeBefore;
  return !a || !We.isSelectable(a)
    ? !1
    : (e &&
        e(
          n.tr
            .setSelection(We.create(n.doc, o.pos - a.nodeSize))
            .scrollIntoView()
        ),
      !0);
};
function nv(n) {
  if (!n.parent.type.spec.isolating)
    for (let e = n.depth - 1; e >= 0; e--) {
      if (n.index(e) > 0) return n.doc.resolve(n.before(e + 1));
      if (n.node(e).type.spec.isolating) break;
    }
  return null;
}
function KT(n, e) {
  let { $cursor: t } = n.selection;
  return !t ||
    (e
      ? !e.endOfTextblock("forward", n)
      : t.parentOffset < t.parent.content.size)
    ? null
    : t;
}
const XT = (n, e, t) => {
    let r = KT(n, t);
    if (!r) return !1;
    let i = rv(r);
    if (!i) return !1;
    let o = i.nodeAfter;
    if (ov(n, i, e)) return !0;
    if (r.parent.content.size == 0 && (Go(o, "start") || We.isSelectable(o))) {
      let a = Nf(n.doc, r.before(), r.after(), ke.empty);
      if (a && a.slice.size < a.to - a.from) {
        if (e) {
          let l = n.tr.step(a);
          l.setSelection(
            Go(o, "start")
              ? tt.findFrom(l.doc.resolve(l.mapping.map(i.pos)), 1)
              : We.create(l.doc, l.mapping.map(i.pos))
          ),
            e(l.scrollIntoView());
        }
        return !0;
      }
    }
    return o.isAtom && i.depth == r.depth - 1
      ? (e && e(n.tr.delete(i.pos, i.pos + o.nodeSize).scrollIntoView()), !0)
      : !1;
  },
  JT = (n, e, t) => {
    let { $head: r, empty: i } = n.selection,
      o = r;
    if (!i) return !1;
    if (r.parent.isTextblock) {
      if (
        t
          ? !t.endOfTextblock("forward", n)
          : r.parentOffset < r.parent.content.size
      )
        return !1;
      o = rv(r);
    }
    let a = o && o.nodeAfter;
    return !a || !We.isSelectable(a)
      ? !1
      : (e && e(n.tr.setSelection(We.create(n.doc, o.pos)).scrollIntoView()),
        !0);
  };
function rv(n) {
  if (!n.parent.type.spec.isolating)
    for (let e = n.depth - 1; e >= 0; e--) {
      let t = n.node(e);
      if (n.index(e) + 1 < t.childCount) return n.doc.resolve(n.after(e + 1));
      if (t.type.spec.isolating) break;
    }
  return null;
}
const QT = (n, e) => {
    let t = n.selection,
      r = t instanceof We,
      i;
    if (r) {
      if (t.node.isTextblock || !ca(n.doc, t.from)) return !1;
      i = t.from;
    } else if (((i = Yy(n.doc, t.from, -1)), i == null)) return !1;
    if (e) {
      let o = n.tr.join(i);
      r &&
        o.setSelection(
          We.create(o.doc, i - n.doc.resolve(i).nodeBefore.nodeSize)
        ),
        e(o.scrollIntoView());
    }
    return !0;
  },
  eM = (n, e) => {
    let t = n.selection,
      r;
    if (t instanceof We) {
      if (t.node.isTextblock || !ca(n.doc, t.to)) return !1;
      r = t.to;
    } else if (((r = Yy(n.doc, t.to, 1)), r == null)) return !1;
    return e && e(n.tr.join(r).scrollIntoView()), !0;
  },
  tM = (n, e) => {
    let { $from: t, $to: r } = n.selection,
      i = t.blockRange(r),
      o = i && vc(i);
    return o == null ? !1 : (e && e(n.tr.lift(i, o).scrollIntoView()), !0);
  },
  nM = (n, e) => {
    let { $head: t, $anchor: r } = n.selection;
    return !t.parent.type.spec.code || !t.sameParent(r)
      ? !1
      : (e &&
          e(
            n.tr
              .insertText(
                `
`
              )
              .scrollIntoView()
          ),
        !0);
  };
function Bf(n) {
  for (let e = 0; e < n.edgeCount; e++) {
    let { type: t } = n.edge(e);
    if (t.isTextblock && !t.hasRequiredAttrs()) return t;
  }
  return null;
}
const iv = (n, e) => {
    let { $head: t, $anchor: r } = n.selection;
    if (!t.parent.type.spec.code || !t.sameParent(r)) return !1;
    let i = t.node(-1),
      o = t.indexAfter(-1),
      a = Bf(i.contentMatchAt(o));
    if (!a || !i.canReplaceWith(o, o, a)) return !1;
    if (e) {
      let l = t.after(),
        u = n.tr.replaceWith(l, l, a.createAndFill());
      u.setSelection(tt.near(u.doc.resolve(l), 1)), e(u.scrollIntoView());
    }
    return !0;
  },
  rM = (n, e) => {
    let t = n.selection,
      { $from: r, $to: i } = t;
    if (t instanceof Cn || r.parent.inlineContent || i.parent.inlineContent)
      return !1;
    let o = Bf(i.parent.contentMatchAt(i.indexAfter()));
    if (!o || !o.isTextblock) return !1;
    if (e) {
      let a = (!r.parentOffset && i.index() < i.parent.childCount ? r : i).pos,
        l = n.tr.insert(a, o.createAndFill());
      l.setSelection(nt.create(l.doc, a + 1)), e(l.scrollIntoView());
    }
    return !0;
  },
  iM = (n, e) => {
    let { $cursor: t } = n.selection;
    if (!t || t.parent.content.size) return !1;
    if (t.depth > 1 && t.after() != t.end(-1)) {
      let o = t.before();
      if (no(n.doc, o)) return e && e(n.tr.split(o).scrollIntoView()), !0;
    }
    let r = t.blockRange(),
      i = r && vc(r);
    return i == null ? !1 : (e && e(n.tr.lift(r, i).scrollIntoView()), !0);
  };
function oM(n) {
  return (e, t) => {
    let { $from: r, $to: i } = e.selection;
    if (e.selection instanceof We && e.selection.node.isBlock)
      return !r.parentOffset || !no(e.doc, r.pos)
        ? !1
        : (t && t(e.tr.split(r.pos).scrollIntoView()), !0);
    if (!r.parent.isBlock) return !1;
    if (t) {
      let o = i.parentOffset == i.parent.content.size,
        a = e.tr;
      (e.selection instanceof nt || e.selection instanceof Cn) &&
        a.deleteSelection();
      let l =
          r.depth == 0 ? null : Bf(r.node(-1).contentMatchAt(r.indexAfter(-1))),
        u = n && n(i.parent, o),
        d = u ? [u] : o && l ? [{ type: l }] : void 0,
        h = no(a.doc, a.mapping.map(r.pos), 1, d);
      if (
        (!d &&
          !h &&
          no(a.doc, a.mapping.map(r.pos), 1, l ? [{ type: l }] : void 0) &&
          (l && (d = [{ type: l }]), (h = !0)),
        h &&
          (a.split(a.mapping.map(r.pos), 1, d),
          !o && !r.parentOffset && r.parent.type != l))
      ) {
        let p = a.mapping.map(r.before()),
          g = a.doc.resolve(p);
        l &&
          r.node(-1).canReplaceWith(g.index(), g.index() + 1, l) &&
          a.setNodeMarkup(a.mapping.map(r.before()), l);
      }
      t(a.scrollIntoView());
    }
    return !0;
  };
}
const sM = oM(),
  aM = (n, e) => {
    let { $from: t, to: r } = n.selection,
      i,
      o = t.sharedDepth(r);
    return o == 0
      ? !1
      : ((i = t.before(o)), e && e(n.tr.setSelection(We.create(n.doc, i))), !0);
  },
  lM = (n, e) => (e && e(n.tr.setSelection(new Cn(n.doc))), !0);
function cM(n, e, t) {
  let r = e.nodeBefore,
    i = e.nodeAfter,
    o = e.index();
  return !r || !i || !r.type.compatibleContent(i.type)
    ? !1
    : !r.content.size && e.parent.canReplace(o - 1, o)
    ? (t && t(n.tr.delete(e.pos - r.nodeSize, e.pos).scrollIntoView()), !0)
    : !e.parent.canReplace(o, o + 1) || !(i.isTextblock || ca(n.doc, e.pos))
    ? !1
    : (t &&
        t(
          n.tr
            .clearIncompatible(e.pos, r.type, r.contentMatchAt(r.childCount))
            .join(e.pos)
            .scrollIntoView()
        ),
      !0);
}
function ov(n, e, t) {
  let r = e.nodeBefore,
    i = e.nodeAfter,
    o,
    a;
  if (r.type.spec.isolating || i.type.spec.isolating) return !1;
  if (cM(n, e, t)) return !0;
  let l = e.parent.canReplace(e.index(), e.index() + 1);
  if (
    l &&
    (o = (a = r.contentMatchAt(r.childCount)).findWrapping(i.type)) &&
    a.matchType(o[0] || i.type).validEnd
  ) {
    if (t) {
      let p = e.pos + i.nodeSize,
        g = he.empty;
      for (let w = o.length - 1; w >= 0; w--) g = he.from(o[w].create(null, g));
      g = he.from(r.copy(g));
      let y = n.tr.step(
          new Vn(e.pos - 1, p, e.pos, p, new ke(g, 1, 0), o.length, !0)
        ),
        m = p + 2 * o.length;
      ca(y.doc, m) && y.join(m), t(y.scrollIntoView());
    }
    return !0;
  }
  let u = tt.findFrom(e, 1),
    d = u && u.$from.blockRange(u.$to),
    h = d && vc(d);
  if (h != null && h >= e.depth)
    return t && t(n.tr.lift(d, h).scrollIntoView()), !0;
  if (l && Go(i, "start", !0) && Go(r, "end")) {
    let p = r,
      g = [];
    for (; g.push(p), !p.isTextblock; ) p = p.lastChild;
    let y = i,
      m = 1;
    for (; !y.isTextblock; y = y.firstChild) m++;
    if (p.canReplace(p.childCount, p.childCount, y.content)) {
      if (t) {
        let w = he.empty;
        for (let E = g.length - 1; E >= 0; E--) w = he.from(g[E].copy(w));
        let b = n.tr.step(
          new Vn(
            e.pos - g.length,
            e.pos + i.nodeSize,
            e.pos + m,
            e.pos + i.nodeSize - m,
            new ke(w, g.length, 0),
            0,
            !0
          )
        );
        t(b.scrollIntoView());
      }
      return !0;
    }
  }
  return !1;
}
function sv(n) {
  return function (e, t) {
    let r = e.selection,
      i = n < 0 ? r.$from : r.$to,
      o = i.depth;
    for (; i.node(o).isInline; ) {
      if (!o) return !1;
      o--;
    }
    return i.node(o).isTextblock
      ? (t &&
          t(e.tr.setSelection(nt.create(e.doc, n < 0 ? i.start(o) : i.end(o)))),
        !0)
      : !1;
  };
}
const uM = sv(-1),
  dM = sv(1);
function fM(n, e = null) {
  return function (t, r) {
    let i = !1;
    for (let o = 0; o < t.selection.ranges.length && !i; o++) {
      let {
        $from: { pos: a },
        $to: { pos: l },
      } = t.selection.ranges[o];
      t.doc.nodesBetween(a, l, (u, d) => {
        if (i) return !1;
        if (!(!u.isTextblock || u.hasMarkup(n, e)))
          if (u.type == n) i = !0;
          else {
            let h = t.doc.resolve(d),
              p = h.index();
            i = h.parent.canReplaceWith(p, p + 1, n);
          }
      });
    }
    if (!i) return !1;
    if (r) {
      let o = t.tr;
      for (let a = 0; a < t.selection.ranges.length; a++) {
        let {
          $from: { pos: l },
          $to: { pos: u },
        } = t.selection.ranges[a];
        o.setBlockType(l, u, n, e);
      }
      r(o.scrollIntoView());
    }
    return !0;
  };
}
function bc(...n) {
  return function (e, t, r) {
    for (let i = 0; i < n.length; i++) if (n[i](e, t, r)) return !0;
    return !1;
  };
}
let od = bc(tv, qT, GT),
  x0 = bc(tv, XT, JT);
const Zr = {
    Enter: bc(nM, rM, iM, sM),
    "Mod-Enter": iv,
    Backspace: od,
    "Mod-Backspace": od,
    "Shift-Backspace": od,
    Delete: x0,
    "Mod-Delete": x0,
    "Mod-a": lM,
  },
  av = {
    "Ctrl-h": Zr.Backspace,
    "Alt-Backspace": Zr["Mod-Backspace"],
    "Ctrl-d": Zr.Delete,
    "Ctrl-Alt-Backspace": Zr["Mod-Delete"],
    "Alt-Delete": Zr["Mod-Delete"],
    "Alt-d": Zr["Mod-Delete"],
    "Ctrl-a": uM,
    "Ctrl-e": dM,
  };
for (let n in Zr) av[n] = Zr[n];
const hM =
    typeof navigator < "u"
      ? /Mac|iP(hone|[oa]d)/.test(navigator.platform)
      : typeof os < "u" && os.platform
      ? os.platform() == "darwin"
      : !1,
  pM = hM ? av : Zr;
var Jr = {
    8: "Backspace",
    9: "Tab",
    10: "Enter",
    12: "NumLock",
    13: "Enter",
    16: "Shift",
    17: "Control",
    18: "Alt",
    20: "CapsLock",
    27: "Escape",
    32: " ",
    33: "PageUp",
    34: "PageDown",
    35: "End",
    36: "Home",
    37: "ArrowLeft",
    38: "ArrowUp",
    39: "ArrowRight",
    40: "ArrowDown",
    44: "PrintScreen",
    45: "Insert",
    46: "Delete",
    59: ";",
    61: "=",
    91: "Meta",
    92: "Meta",
    106: "*",
    107: "+",
    108: ",",
    109: "-",
    110: ".",
    111: "/",
    144: "NumLock",
    145: "ScrollLock",
    160: "Shift",
    161: "Shift",
    162: "Control",
    163: "Control",
    164: "Alt",
    165: "Alt",
    173: "-",
    186: ";",
    187: "=",
    188: ",",
    189: "-",
    190: ".",
    191: "/",
    192: "`",
    219: "[",
    220: "\\",
    221: "]",
    222: "'",
  },
  $l = {
    48: ")",
    49: "!",
    50: "@",
    51: "#",
    52: "$",
    53: "%",
    54: "^",
    55: "&",
    56: "*",
    57: "(",
    59: ":",
    61: "+",
    173: "_",
    186: ":",
    187: "+",
    188: "<",
    189: "_",
    190: ">",
    191: "?",
    192: "~",
    219: "{",
    220: "|",
    221: "}",
    222: '"',
  },
  gM = typeof navigator < "u" && /Mac/.test(navigator.platform),
  mM =
    typeof navigator < "u" &&
    /MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);
for (var Yt = 0; Yt < 10; Yt++) Jr[48 + Yt] = Jr[96 + Yt] = String(Yt);
for (var Yt = 1; Yt <= 24; Yt++) Jr[Yt + 111] = "F" + Yt;
for (var Yt = 65; Yt <= 90; Yt++)
  (Jr[Yt] = String.fromCharCode(Yt + 32)), ($l[Yt] = String.fromCharCode(Yt));
for (var sd in Jr) $l.hasOwnProperty(sd) || ($l[sd] = Jr[sd]);
function Ff(n) {
  var e =
      (gM && n.metaKey && n.shiftKey && !n.ctrlKey && !n.altKey) ||
      (mM && n.shiftKey && n.key && n.key.length == 1) ||
      n.key == "Unidentified",
    t =
      (!e && n.key) ||
      (n.shiftKey ? $l : Jr)[n.keyCode] ||
      n.key ||
      "Unidentified";
  return (
    t == "Esc" && (t = "Escape"),
    t == "Del" && (t = "Delete"),
    t == "Left" && (t = "ArrowLeft"),
    t == "Up" && (t = "ArrowUp"),
    t == "Right" && (t = "ArrowRight"),
    t == "Down" && (t = "ArrowDown"),
    t
  );
}
const yM =
  typeof navigator < "u" ? /Mac|iP(hone|[oa]d)/.test(navigator.platform) : !1;
function vM(n) {
  let e = n.split(/-(?!$)/),
    t = e[e.length - 1];
  t == "Space" && (t = " ");
  let r, i, o, a;
  for (let l = 0; l < e.length - 1; l++) {
    let u = e[l];
    if (/^(cmd|meta|m)$/i.test(u)) a = !0;
    else if (/^a(lt)?$/i.test(u)) r = !0;
    else if (/^(c|ctrl|control)$/i.test(u)) i = !0;
    else if (/^s(hift)?$/i.test(u)) o = !0;
    else if (/^mod$/i.test(u)) yM ? (a = !0) : (i = !0);
    else throw new Error("Unrecognized modifier name: " + u);
  }
  return (
    r && (t = "Alt-" + t),
    i && (t = "Ctrl-" + t),
    a && (t = "Meta-" + t),
    o && (t = "Shift-" + t),
    t
  );
}
function wM(n) {
  let e = Object.create(null);
  for (let t in n) e[vM(t)] = n[t];
  return e;
}
function ad(n, e, t = !0) {
  return (
    e.altKey && (n = "Alt-" + n),
    e.ctrlKey && (n = "Ctrl-" + n),
    e.metaKey && (n = "Meta-" + n),
    t && e.shiftKey && (n = "Shift-" + n),
    n
  );
}
function bM(n) {
  let e = wM(n);
  return function (t, r) {
    let i = Ff(r),
      o,
      a = e[ad(i, r)];
    if (a && a(t.state, t.dispatch, t)) return !0;
    if (i.length == 1 && i != " ") {
      if (r.shiftKey) {
        let l = e[ad(i, r, !1)];
        if (l && l(t.state, t.dispatch, t)) return !0;
      }
      if (
        (r.shiftKey || r.altKey || r.metaKey || i.charCodeAt(0) > 127) &&
        (o = Jr[r.keyCode]) &&
        o != i
      ) {
        let l = e[ad(o, r)];
        if (l && l(t.state, t.dispatch, t)) return !0;
      }
    }
    return !1;
  };
}
const hn = function (n) {
    for (var e = 0; ; e++) if (((n = n.previousSibling), !n)) return e;
  },
  Gs = function (n) {
    let e = n.assignedSlot || n.parentNode;
    return e && e.nodeType == 11 ? e.host : e;
  };
let S0 = null;
const Ur = function (n, e, t) {
    let r = S0 || (S0 = document.createRange());
    return r.setEnd(n, t ?? n.nodeValue.length), r.setStart(n, e || 0), r;
  },
  ao = function (n, e, t, r) {
    return t && (C0(n, e, t, r, -1) || C0(n, e, t, r, 1));
  },
  xM = /^(img|br|input|textarea|hr)$/i;
function C0(n, e, t, r, i) {
  for (;;) {
    if (n == t && e == r) return !0;
    if (e == (i < 0 ? 0 : Or(n))) {
      let o = n.parentNode;
      if (
        !o ||
        o.nodeType != 1 ||
        Wf(n) ||
        xM.test(n.nodeName) ||
        n.contentEditable == "false"
      )
        return !1;
      (e = hn(n) + (i < 0 ? 0 : 1)), (n = o);
    } else if (n.nodeType == 1) {
      if (
        ((n = n.childNodes[e + (i < 0 ? -1 : 0)]), n.contentEditable == "false")
      )
        return !1;
      e = i < 0 ? Or(n) : 0;
    } else return !1;
  }
}
function Or(n) {
  return n.nodeType == 3 ? n.nodeValue.length : n.childNodes.length;
}
function SM(n, e, t) {
  for (let r = e == 0, i = e == Or(n); r || i; ) {
    if (n == t) return !0;
    let o = hn(n);
    if (((n = n.parentNode), !n)) return !1;
    (r = r && o == 0), (i = i && o == Or(n));
  }
}
function Wf(n) {
  let e;
  for (let t = n; t && !(e = t.pmViewDesc); t = t.parentNode);
  return e && e.node && e.node.isBlock && (e.dom == n || e.contentDOM == n);
}
const xc = function (n) {
  return (
    n.focusNode && ao(n.focusNode, n.focusOffset, n.anchorNode, n.anchorOffset)
  );
};
function Xi(n, e) {
  let t = document.createEvent("Event");
  return (
    t.initEvent("keydown", !0, !0), (t.keyCode = n), (t.key = t.code = e), t
  );
}
function CM(n) {
  let e = n.activeElement;
  for (; e && e.shadowRoot; ) e = e.shadowRoot.activeElement;
  return e;
}
function EM(n, e, t) {
  if (n.caretPositionFromPoint)
    try {
      let r = n.caretPositionFromPoint(e, t);
      if (r) return { node: r.offsetNode, offset: r.offset };
    } catch {}
  if (n.caretRangeFromPoint) {
    let r = n.caretRangeFromPoint(e, t);
    if (r) return { node: r.startContainer, offset: r.startOffset };
  }
}
const Dr = typeof navigator < "u" ? navigator : null,
  E0 = typeof document < "u" ? document : null,
  Pi = (Dr && Dr.userAgent) || "",
  Qd = /Edge\/(\d+)/.exec(Pi),
  lv = /MSIE \d/.exec(Pi),
  ef = /Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Pi),
  En = !!(lv || ef || Qd),
  Ci = lv ? document.documentMode : ef ? +ef[1] : Qd ? +Qd[1] : 0,
  gr = !En && /gecko\/(\d+)/i.test(Pi);
gr && +(/Firefox\/(\d+)/.exec(Pi) || [0, 0])[1];
const tf = !En && /Chrome\/(\d+)/.exec(Pi),
  on = !!tf,
  kM = tf ? +tf[1] : 0,
  pn = !En && !!Dr && /Apple Computer/.test(Dr.vendor),
  Ko = pn && (/Mobile\/\w+/.test(Pi) || (!!Dr && Dr.maxTouchPoints > 2)),
  Qn = Ko || (Dr ? /Mac/.test(Dr.platform) : !1),
  OM = Dr ? /Win/.test(Dr.platform) : !1,
  hr = /Android \d/.test(Pi),
  da = !!E0 && "webkitFontSmoothing" in E0.documentElement.style,
  TM = da
    ? +(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent) || [0, 0])[1]
    : 0;
function MM(n) {
  return {
    left: 0,
    right: n.documentElement.clientWidth,
    top: 0,
    bottom: n.documentElement.clientHeight,
  };
}
function jr(n, e) {
  return typeof n == "number" ? n : n[e];
}
function RM(n) {
  let e = n.getBoundingClientRect(),
    t = e.width / n.offsetWidth || 1,
    r = e.height / n.offsetHeight || 1;
  return {
    left: e.left,
    right: e.left + n.clientWidth * t,
    top: e.top,
    bottom: e.top + n.clientHeight * r,
  };
}
function k0(n, e, t) {
  let r = n.someProp("scrollThreshold") || 0,
    i = n.someProp("scrollMargin") || 5,
    o = n.dom.ownerDocument;
  for (let a = t || n.dom; a; a = Gs(a)) {
    if (a.nodeType != 1) continue;
    let l = a,
      u = l == o.body,
      d = u ? MM(o) : RM(l),
      h = 0,
      p = 0;
    if (
      (e.top < d.top + jr(r, "top")
        ? (p = -(d.top - e.top + jr(i, "top")))
        : e.bottom > d.bottom - jr(r, "bottom") &&
          (p =
            e.bottom - e.top > d.bottom - d.top
              ? e.top + jr(i, "top") - d.top
              : e.bottom - d.bottom + jr(i, "bottom")),
      e.left < d.left + jr(r, "left")
        ? (h = -(d.left - e.left + jr(i, "left")))
        : e.right > d.right - jr(r, "right") &&
          (h = e.right - d.right + jr(i, "right")),
      h || p)
    )
      if (u) o.defaultView.scrollBy(h, p);
      else {
        let g = l.scrollLeft,
          y = l.scrollTop;
        p && (l.scrollTop += p), h && (l.scrollLeft += h);
        let m = l.scrollLeft - g,
          w = l.scrollTop - y;
        e = {
          left: e.left - m,
          top: e.top - w,
          right: e.right - m,
          bottom: e.bottom - w,
        };
      }
    if (u || /^(fixed|sticky)$/.test(getComputedStyle(a).position)) break;
  }
}
function DM(n) {
  let e = n.dom.getBoundingClientRect(),
    t = Math.max(0, e.top),
    r,
    i;
  for (
    let o = (e.left + e.right) / 2, a = t + 1;
    a < Math.min(innerHeight, e.bottom);
    a += 5
  ) {
    let l = n.root.elementFromPoint(o, a);
    if (!l || l == n.dom || !n.dom.contains(l)) continue;
    let u = l.getBoundingClientRect();
    if (u.top >= t - 20) {
      (r = l), (i = u.top);
      break;
    }
  }
  return { refDOM: r, refTop: i, stack: cv(n.dom) };
}
function cv(n) {
  let e = [],
    t = n.ownerDocument;
  for (
    let r = n;
    r && (e.push({ dom: r, top: r.scrollTop, left: r.scrollLeft }), n != t);
    r = Gs(r)
  );
  return e;
}
function IM({ refDOM: n, refTop: e, stack: t }) {
  let r = n ? n.getBoundingClientRect().top : 0;
  uv(t, r == 0 ? 0 : r - e);
}
function uv(n, e) {
  for (let t = 0; t < n.length; t++) {
    let { dom: r, top: i, left: o } = n[t];
    r.scrollTop != i + e && (r.scrollTop = i + e),
      r.scrollLeft != o && (r.scrollLeft = o);
  }
}
let Lo = null;
function AM(n) {
  if (n.setActive) return n.setActive();
  if (Lo) return n.focus(Lo);
  let e = cv(n);
  n.focus(
    Lo == null
      ? {
          get preventScroll() {
            return (Lo = { preventScroll: !0 }), !0;
          },
        }
      : void 0
  ),
    Lo || ((Lo = !1), uv(e, 0));
}
function dv(n, e) {
  let t,
    r = 2e8,
    i,
    o = 0,
    a = e.top,
    l = e.top,
    u,
    d;
  for (let h = n.firstChild, p = 0; h; h = h.nextSibling, p++) {
    let g;
    if (h.nodeType == 1) g = h.getClientRects();
    else if (h.nodeType == 3) g = Ur(h).getClientRects();
    else continue;
    for (let y = 0; y < g.length; y++) {
      let m = g[y];
      if (m.top <= a && m.bottom >= l) {
        (a = Math.max(m.bottom, a)), (l = Math.min(m.top, l));
        let w =
          m.left > e.left
            ? m.left - e.left
            : m.right < e.left
            ? e.left - m.right
            : 0;
        if (w < r) {
          (t = h),
            (r = w),
            (i =
              w && t.nodeType == 3
                ? { left: m.right < e.left ? m.right : m.left, top: e.top }
                : e),
            h.nodeType == 1 &&
              w &&
              (o = p + (e.left >= (m.left + m.right) / 2 ? 1 : 0));
          continue;
        }
      } else
        m.top > e.top &&
          !u &&
          m.left <= e.left &&
          m.right >= e.left &&
          ((u = h),
          (d = {
            left: Math.max(m.left, Math.min(m.right, e.left)),
            top: m.top,
          }));
      !t &&
        ((e.left >= m.right && e.top >= m.top) ||
          (e.left >= m.left && e.top >= m.bottom)) &&
        (o = p + 1);
    }
  }
  return (
    !t && u && ((t = u), (i = d), (r = 0)),
    t && t.nodeType == 3
      ? LM(t, i)
      : !t || (r && t.nodeType == 1)
      ? { node: n, offset: o }
      : dv(t, i)
  );
}
function LM(n, e) {
  let t = n.nodeValue.length,
    r = document.createRange();
  for (let i = 0; i < t; i++) {
    r.setEnd(n, i + 1), r.setStart(n, i);
    let o = pi(r, 1);
    if (o.top != o.bottom && Vf(e, o))
      return {
        node: n,
        offset: i + (e.left >= (o.left + o.right) / 2 ? 1 : 0),
      };
  }
  return { node: n, offset: 0 };
}
function Vf(n, e) {
  return (
    n.left >= e.left - 1 &&
    n.left <= e.right + 1 &&
    n.top >= e.top - 1 &&
    n.top <= e.bottom + 1
  );
}
function PM(n, e) {
  let t = n.parentNode;
  return t &&
    /^li$/i.test(t.nodeName) &&
    e.left < n.getBoundingClientRect().left
    ? t
    : n;
}
function _M(n, e, t) {
  let { node: r, offset: i } = dv(e, t),
    o = -1;
  if (r.nodeType == 1 && !r.firstChild) {
    let a = r.getBoundingClientRect();
    o = a.left != a.right && t.left > (a.left + a.right) / 2 ? 1 : -1;
  }
  return n.docView.posFromDOM(r, i, o);
}
function NM(n, e, t, r) {
  let i = -1;
  for (let o = e, a = !1; o != n.dom; ) {
    let l = n.docView.nearestDesc(o, !0);
    if (!l) return null;
    if (
      l.dom.nodeType == 1 &&
      ((l.node.isBlock && l.parent && !a) || !l.contentDOM)
    ) {
      let u = l.dom.getBoundingClientRect();
      if (
        (l.node.isBlock &&
          l.parent &&
          !a &&
          ((a = !0),
          u.left > r.left || u.top > r.top
            ? (i = l.posBefore)
            : (u.right < r.left || u.bottom < r.top) && (i = l.posAfter)),
        !l.contentDOM && i < 0 && !l.node.isText)
      )
        return (
          l.node.isBlock
            ? r.top < (u.top + u.bottom) / 2
            : r.left < (u.left + u.right) / 2
        )
          ? l.posBefore
          : l.posAfter;
    }
    o = l.dom.parentNode;
  }
  return i > -1 ? i : n.docView.posFromDOM(e, t, -1);
}
function fv(n, e, t) {
  let r = n.childNodes.length;
  if (r && t.top < t.bottom)
    for (
      let i = Math.max(
          0,
          Math.min(
            r - 1,
            Math.floor((r * (e.top - t.top)) / (t.bottom - t.top)) - 2
          )
        ),
        o = i;
      ;

    ) {
      let a = n.childNodes[o];
      if (a.nodeType == 1) {
        let l = a.getClientRects();
        for (let u = 0; u < l.length; u++) {
          let d = l[u];
          if (Vf(e, d)) return fv(a, e, d);
        }
      }
      if ((o = (o + 1) % r) == i) break;
    }
  return n;
}
function zM(n, e) {
  let t = n.dom.ownerDocument,
    r,
    i = 0,
    o = EM(t, e.left, e.top);
  o && ({ node: r, offset: i } = o);
  let a = (n.root.elementFromPoint ? n.root : t).elementFromPoint(
      e.left,
      e.top
    ),
    l;
  if (!a || !n.dom.contains(a.nodeType != 1 ? a.parentNode : a)) {
    let d = n.dom.getBoundingClientRect();
    if (!Vf(e, d) || ((a = fv(n.dom, e, d)), !a)) return null;
  }
  if (pn) for (let d = a; r && d; d = Gs(d)) d.draggable && (r = void 0);
  if (((a = PM(a, e)), r)) {
    if (
      gr &&
      r.nodeType == 1 &&
      ((i = Math.min(i, r.childNodes.length)), i < r.childNodes.length)
    ) {
      let h = r.childNodes[i],
        p;
      h.nodeName == "IMG" &&
        (p = h.getBoundingClientRect()).right <= e.left &&
        p.bottom > e.top &&
        i++;
    }
    let d;
    da &&
      i &&
      r.nodeType == 1 &&
      (d = r.childNodes[i - 1]).nodeType == 1 &&
      d.contentEditable == "false" &&
      d.getBoundingClientRect().top >= e.top &&
      i--,
      r == n.dom &&
      i == r.childNodes.length - 1 &&
      r.lastChild.nodeType == 1 &&
      e.top > r.lastChild.getBoundingClientRect().bottom
        ? (l = n.state.doc.content.size)
        : (i == 0 || r.nodeType != 1 || r.childNodes[i - 1].nodeName != "BR") &&
          (l = NM(n, r, i, e));
  }
  l == null && (l = _M(n, a, e));
  let u = n.docView.nearestDesc(a, !0);
  return { pos: l, inside: u ? u.posAtStart - u.border : -1 };
}
function O0(n) {
  return n.top < n.bottom || n.left < n.right;
}
function pi(n, e) {
  let t = n.getClientRects();
  if (t.length) {
    let r = t[e < 0 ? 0 : t.length - 1];
    if (O0(r)) return r;
  }
  return Array.prototype.find.call(t, O0) || n.getBoundingClientRect();
}
const BM = /[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;
function hv(n, e, t) {
  let { node: r, offset: i, atom: o } = n.docView.domFromPos(e, t < 0 ? -1 : 1),
    a = da || gr;
  if (r.nodeType == 3)
    if (a && (BM.test(r.nodeValue) || (t < 0 ? !i : i == r.nodeValue.length))) {
      let u = pi(Ur(r, i, i), t);
      if (gr && i && /\s/.test(r.nodeValue[i - 1]) && i < r.nodeValue.length) {
        let d = pi(Ur(r, i - 1, i - 1), -1);
        if (d.top == u.top) {
          let h = pi(Ur(r, i, i + 1), -1);
          if (h.top != u.top) return Es(h, h.left < d.left);
        }
      }
      return u;
    } else {
      let u = i,
        d = i,
        h = t < 0 ? 1 : -1;
      return (
        t < 0 && !i
          ? (d++, (h = -1))
          : t >= 0 && i == r.nodeValue.length
          ? (u--, (h = 1))
          : t < 0
          ? u--
          : d++,
        Es(pi(Ur(r, u, d), h), h < 0)
      );
    }
  if (!n.state.doc.resolve(e - (o || 0)).parent.inlineContent) {
    if (o == null && i && (t < 0 || i == Or(r))) {
      let u = r.childNodes[i - 1];
      if (u.nodeType == 1) return ld(u.getBoundingClientRect(), !1);
    }
    if (o == null && i < Or(r)) {
      let u = r.childNodes[i];
      if (u.nodeType == 1) return ld(u.getBoundingClientRect(), !0);
    }
    return ld(r.getBoundingClientRect(), t >= 0);
  }
  if (o == null && i && (t < 0 || i == Or(r))) {
    let u = r.childNodes[i - 1],
      d =
        u.nodeType == 3
          ? Ur(u, Or(u) - (a ? 0 : 1))
          : u.nodeType == 1 && (u.nodeName != "BR" || !u.nextSibling)
          ? u
          : null;
    if (d) return Es(pi(d, 1), !1);
  }
  if (o == null && i < Or(r)) {
    let u = r.childNodes[i];
    for (; u.pmViewDesc && u.pmViewDesc.ignoreForCoords; ) u = u.nextSibling;
    let d = u
      ? u.nodeType == 3
        ? Ur(u, 0, a ? 0 : 1)
        : u.nodeType == 1
        ? u
        : null
      : null;
    if (d) return Es(pi(d, -1), !0);
  }
  return Es(pi(r.nodeType == 3 ? Ur(r) : r, -t), t >= 0);
}
function Es(n, e) {
  if (n.width == 0) return n;
  let t = e ? n.left : n.right;
  return { top: n.top, bottom: n.bottom, left: t, right: t };
}
function ld(n, e) {
  if (n.height == 0) return n;
  let t = e ? n.top : n.bottom;
  return { top: t, bottom: t, left: n.left, right: n.right };
}
function pv(n, e, t) {
  let r = n.state,
    i = n.root.activeElement;
  r != e && n.updateState(e), i != n.dom && n.focus();
  try {
    return t();
  } finally {
    r != e && n.updateState(r), i != n.dom && i && i.focus();
  }
}
function FM(n, e, t) {
  let r = e.selection,
    i = t == "up" ? r.$from : r.$to;
  return pv(n, e, () => {
    let { node: o } = n.docView.domFromPos(i.pos, t == "up" ? -1 : 1);
    for (;;) {
      let l = n.docView.nearestDesc(o, !0);
      if (!l) break;
      if (l.node.isBlock) {
        o = l.contentDOM || l.dom;
        break;
      }
      o = l.dom.parentNode;
    }
    let a = hv(n, i.pos, 1);
    for (let l = o.firstChild; l; l = l.nextSibling) {
      let u;
      if (l.nodeType == 1) u = l.getClientRects();
      else if (l.nodeType == 3)
        u = Ur(l, 0, l.nodeValue.length).getClientRects();
      else continue;
      for (let d = 0; d < u.length; d++) {
        let h = u[d];
        if (
          h.bottom > h.top + 1 &&
          (t == "up"
            ? a.top - h.top > (h.bottom - a.top) * 2
            : h.bottom - a.bottom > (a.bottom - h.top) * 2)
        )
          return !1;
      }
    }
    return !0;
  });
}
const WM = /[\u0590-\u08ac]/;
function VM(n, e, t) {
  let { $head: r } = e.selection;
  if (!r.parent.isTextblock) return !1;
  let i = r.parentOffset,
    o = !i,
    a = i == r.parent.content.size,
    l = n.domSelection();
  return !WM.test(r.parent.textContent) || !l.modify
    ? t == "left" || t == "backward"
      ? o
      : a
    : pv(n, e, () => {
        let {
            focusNode: u,
            focusOffset: d,
            anchorNode: h,
            anchorOffset: p,
          } = n.domSelectionRange(),
          g = l.caretBidiLevel;
        l.modify("move", t, "character");
        let y = r.depth ? n.docView.domAfterPos(r.before()) : n.dom,
          { focusNode: m, focusOffset: w } = n.domSelectionRange(),
          b =
            (m && !y.contains(m.nodeType == 1 ? m : m.parentNode)) ||
            (u == m && d == w);
        try {
          l.collapse(h, p),
            u && (u != h || d != p) && l.extend && l.extend(u, d);
        } catch {}
        return g != null && (l.caretBidiLevel = g), b;
      });
}
let T0 = null,
  M0 = null,
  R0 = !1;
function HM(n, e, t) {
  return T0 == e && M0 == t
    ? R0
    : ((T0 = e),
      (M0 = t),
      (R0 = t == "up" || t == "down" ? FM(n, e, t) : VM(n, e, t)));
}
const nr = 0,
  D0 = 1,
  Ji = 2,
  Ir = 3;
class fa {
  constructor(e, t, r, i) {
    (this.parent = e),
      (this.children = t),
      (this.dom = r),
      (this.contentDOM = i),
      (this.dirty = nr),
      (r.pmViewDesc = this);
  }
  matchesWidget(e) {
    return !1;
  }
  matchesMark(e) {
    return !1;
  }
  matchesNode(e, t, r) {
    return !1;
  }
  matchesHack(e) {
    return !1;
  }
  parseRule() {
    return null;
  }
  stopEvent(e) {
    return !1;
  }
  get size() {
    let e = 0;
    for (let t = 0; t < this.children.length; t++) e += this.children[t].size;
    return e;
  }
  get border() {
    return 0;
  }
  destroy() {
    (this.parent = void 0),
      this.dom.pmViewDesc == this && (this.dom.pmViewDesc = void 0);
    for (let e = 0; e < this.children.length; e++) this.children[e].destroy();
  }
  posBeforeChild(e) {
    for (let t = 0, r = this.posAtStart; ; t++) {
      let i = this.children[t];
      if (i == e) return r;
      r += i.size;
    }
  }
  get posBefore() {
    return this.parent.posBeforeChild(this);
  }
  get posAtStart() {
    return this.parent ? this.parent.posBeforeChild(this) + this.border : 0;
  }
  get posAfter() {
    return this.posBefore + this.size;
  }
  get posAtEnd() {
    return this.posAtStart + this.size - 2 * this.border;
  }
  localPosFromDOM(e, t, r) {
    if (
      this.contentDOM &&
      this.contentDOM.contains(e.nodeType == 1 ? e : e.parentNode)
    )
      if (r < 0) {
        let o, a;
        if (e == this.contentDOM) o = e.childNodes[t - 1];
        else {
          for (; e.parentNode != this.contentDOM; ) e = e.parentNode;
          o = e.previousSibling;
        }
        for (; o && !((a = o.pmViewDesc) && a.parent == this); )
          o = o.previousSibling;
        return o ? this.posBeforeChild(a) + a.size : this.posAtStart;
      } else {
        let o, a;
        if (e == this.contentDOM) o = e.childNodes[t];
        else {
          for (; e.parentNode != this.contentDOM; ) e = e.parentNode;
          o = e.nextSibling;
        }
        for (; o && !((a = o.pmViewDesc) && a.parent == this); )
          o = o.nextSibling;
        return o ? this.posBeforeChild(a) : this.posAtEnd;
      }
    let i;
    if (e == this.dom && this.contentDOM) i = t > hn(this.contentDOM);
    else if (
      this.contentDOM &&
      this.contentDOM != this.dom &&
      this.dom.contains(this.contentDOM)
    )
      i = e.compareDocumentPosition(this.contentDOM) & 2;
    else if (this.dom.firstChild) {
      if (t == 0)
        for (let o = e; ; o = o.parentNode) {
          if (o == this.dom) {
            i = !1;
            break;
          }
          if (o.previousSibling) break;
        }
      if (i == null && t == e.childNodes.length)
        for (let o = e; ; o = o.parentNode) {
          if (o == this.dom) {
            i = !0;
            break;
          }
          if (o.nextSibling) break;
        }
    }
    return i ?? r > 0 ? this.posAtEnd : this.posAtStart;
  }
  nearestDesc(e, t = !1) {
    for (let r = !0, i = e; i; i = i.parentNode) {
      let o = this.getDesc(i),
        a;
      if (o && (!t || o.node))
        if (
          r &&
          (a = o.nodeDOM) &&
          !(a.nodeType == 1
            ? a.contains(e.nodeType == 1 ? e : e.parentNode)
            : a == e)
        )
          r = !1;
        else return o;
    }
  }
  getDesc(e) {
    let t = e.pmViewDesc;
    for (let r = t; r; r = r.parent) if (r == this) return t;
  }
  posFromDOM(e, t, r) {
    for (let i = e; i; i = i.parentNode) {
      let o = this.getDesc(i);
      if (o) return o.localPosFromDOM(e, t, r);
    }
    return -1;
  }
  descAt(e) {
    for (let t = 0, r = 0; t < this.children.length; t++) {
      let i = this.children[t],
        o = r + i.size;
      if (r == e && o != r) {
        for (; !i.border && i.children.length; ) i = i.children[0];
        return i;
      }
      if (e < o) return i.descAt(e - r - i.border);
      r = o;
    }
  }
  domFromPos(e, t) {
    if (!this.contentDOM) return { node: this.dom, offset: 0, atom: e + 1 };
    let r = 0,
      i = 0;
    for (let o = 0; r < this.children.length; r++) {
      let a = this.children[r],
        l = o + a.size;
      if (l > e || a instanceof mv) {
        i = e - o;
        break;
      }
      o = l;
    }
    if (i) return this.children[r].domFromPos(i - this.children[r].border, t);
    for (
      let o;
      r && !(o = this.children[r - 1]).size && o instanceof gv && o.side >= 0;
      r--
    );
    if (t <= 0) {
      let o,
        a = !0;
      for (
        ;
        (o = r ? this.children[r - 1] : null),
          !(!o || o.dom.parentNode == this.contentDOM);
        r--, a = !1
      );
      return o && t && a && !o.border && !o.domAtom
        ? o.domFromPos(o.size, t)
        : { node: this.contentDOM, offset: o ? hn(o.dom) + 1 : 0 };
    } else {
      let o,
        a = !0;
      for (
        ;
        (o = r < this.children.length ? this.children[r] : null),
          !(!o || o.dom.parentNode == this.contentDOM);
        r++, a = !1
      );
      return o && a && !o.border && !o.domAtom
        ? o.domFromPos(0, t)
        : {
            node: this.contentDOM,
            offset: o ? hn(o.dom) : this.contentDOM.childNodes.length,
          };
    }
  }
  parseRange(e, t, r = 0) {
    if (this.children.length == 0)
      return {
        node: this.contentDOM,
        from: e,
        to: t,
        fromOffset: 0,
        toOffset: this.contentDOM.childNodes.length,
      };
    let i = -1,
      o = -1;
    for (let a = r, l = 0; ; l++) {
      let u = this.children[l],
        d = a + u.size;
      if (i == -1 && e <= d) {
        let h = a + u.border;
        if (
          e >= h &&
          t <= d - u.border &&
          u.node &&
          u.contentDOM &&
          this.contentDOM.contains(u.contentDOM)
        )
          return u.parseRange(e, t, h);
        e = a;
        for (let p = l; p > 0; p--) {
          let g = this.children[p - 1];
          if (
            g.size &&
            g.dom.parentNode == this.contentDOM &&
            !g.emptyChildAt(1)
          ) {
            i = hn(g.dom) + 1;
            break;
          }
          e -= g.size;
        }
        i == -1 && (i = 0);
      }
      if (i > -1 && (d > t || l == this.children.length - 1)) {
        t = d;
        for (let h = l + 1; h < this.children.length; h++) {
          let p = this.children[h];
          if (
            p.size &&
            p.dom.parentNode == this.contentDOM &&
            !p.emptyChildAt(-1)
          ) {
            o = hn(p.dom);
            break;
          }
          t += p.size;
        }
        o == -1 && (o = this.contentDOM.childNodes.length);
        break;
      }
      a = d;
    }
    return {
      node: this.contentDOM,
      from: e,
      to: t,
      fromOffset: i,
      toOffset: o,
    };
  }
  emptyChildAt(e) {
    if (this.border || !this.contentDOM || !this.children.length) return !1;
    let t = this.children[e < 0 ? 0 : this.children.length - 1];
    return t.size == 0 || t.emptyChildAt(e);
  }
  domAfterPos(e) {
    let { node: t, offset: r } = this.domFromPos(e, 0);
    if (t.nodeType != 1 || r == t.childNodes.length)
      throw new RangeError("No node after pos " + e);
    return t.childNodes[r];
  }
  setSelection(e, t, r, i = !1) {
    let o = Math.min(e, t),
      a = Math.max(e, t);
    for (let g = 0, y = 0; g < this.children.length; g++) {
      let m = this.children[g],
        w = y + m.size;
      if (o > y && a < w)
        return m.setSelection(e - y - m.border, t - y - m.border, r, i);
      y = w;
    }
    let l = this.domFromPos(e, e ? -1 : 1),
      u = t == e ? l : this.domFromPos(t, t ? -1 : 1),
      d = r.getSelection(),
      h = !1;
    if ((gr || pn) && e == t) {
      let { node: g, offset: y } = l;
      if (g.nodeType == 3) {
        if (
          ((h = !!(
            y &&
            g.nodeValue[y - 1] ==
              `
`
          )),
          h && y == g.nodeValue.length)
        )
          for (let m = g, w; m; m = m.parentNode) {
            if ((w = m.nextSibling)) {
              w.nodeName == "BR" &&
                (l = u = { node: w.parentNode, offset: hn(w) + 1 });
              break;
            }
            let b = m.pmViewDesc;
            if (b && b.node && b.node.isBlock) break;
          }
      } else {
        let m = g.childNodes[y - 1];
        h = m && (m.nodeName == "BR" || m.contentEditable == "false");
      }
    }
    if (
      gr &&
      d.focusNode &&
      d.focusNode != u.node &&
      d.focusNode.nodeType == 1
    ) {
      let g = d.focusNode.childNodes[d.focusOffset];
      g && g.contentEditable == "false" && (i = !0);
    }
    if (
      !(i || (h && pn)) &&
      ao(l.node, l.offset, d.anchorNode, d.anchorOffset) &&
      ao(u.node, u.offset, d.focusNode, d.focusOffset)
    )
      return;
    let p = !1;
    if ((d.extend || e == t) && !h) {
      d.collapse(l.node, l.offset);
      try {
        e != t && d.extend(u.node, u.offset), (p = !0);
      } catch {}
    }
    if (!p) {
      if (e > t) {
        let y = l;
        (l = u), (u = y);
      }
      let g = document.createRange();
      g.setEnd(u.node, u.offset),
        g.setStart(l.node, l.offset),
        d.removeAllRanges(),
        d.addRange(g);
    }
  }
  ignoreMutation(e) {
    return !this.contentDOM && e.type != "selection";
  }
  get contentLost() {
    return (
      this.contentDOM &&
      this.contentDOM != this.dom &&
      !this.dom.contains(this.contentDOM)
    );
  }
  markDirty(e, t) {
    for (let r = 0, i = 0; i < this.children.length; i++) {
      let o = this.children[i],
        a = r + o.size;
      if (r == a ? e <= a && t >= r : e < a && t > r) {
        let l = r + o.border,
          u = a - o.border;
        if (e >= l && t <= u) {
          (this.dirty = e == r || t == a ? Ji : D0),
            e == l &&
            t == u &&
            (o.contentLost || o.dom.parentNode != this.contentDOM)
              ? (o.dirty = Ir)
              : o.markDirty(e - l, t - l);
          return;
        } else
          o.dirty =
            o.dom == o.contentDOM &&
            o.dom.parentNode == this.contentDOM &&
            !o.children.length
              ? Ji
              : Ir;
      }
      r = a;
    }
    this.dirty = Ji;
  }
  markParentsDirty() {
    let e = 1;
    for (let t = this.parent; t; t = t.parent, e++) {
      let r = e == 1 ? Ji : D0;
      t.dirty < r && (t.dirty = r);
    }
  }
  get domAtom() {
    return !1;
  }
  get ignoreForCoords() {
    return !1;
  }
}
class gv extends fa {
  constructor(e, t, r, i) {
    let o,
      a = t.type.toDOM;
    if (
      (typeof a == "function" &&
        (a = a(r, () => {
          if (!o) return i;
          if (o.parent) return o.parent.posBeforeChild(o);
        })),
      !t.type.spec.raw)
    ) {
      if (a.nodeType != 1) {
        let l = document.createElement("span");
        l.appendChild(a), (a = l);
      }
      (a.contentEditable = "false"), a.classList.add("ProseMirror-widget");
    }
    super(e, [], a, null), (this.widget = t), (this.widget = t), (o = this);
  }
  matchesWidget(e) {
    return this.dirty == nr && e.type.eq(this.widget.type);
  }
  parseRule() {
    return { ignore: !0 };
  }
  stopEvent(e) {
    let t = this.widget.spec.stopEvent;
    return t ? t(e) : !1;
  }
  ignoreMutation(e) {
    return e.type != "selection" || this.widget.spec.ignoreSelection;
  }
  destroy() {
    this.widget.type.destroy(this.dom), super.destroy();
  }
  get domAtom() {
    return !0;
  }
  get side() {
    return this.widget.type.side;
  }
}
class $M extends fa {
  constructor(e, t, r, i) {
    super(e, [], t, null), (this.textDOM = r), (this.text = i);
  }
  get size() {
    return this.text.length;
  }
  localPosFromDOM(e, t) {
    return e != this.textDOM
      ? this.posAtStart + (t ? this.size : 0)
      : this.posAtStart + t;
  }
  domFromPos(e) {
    return { node: this.textDOM, offset: e };
  }
  ignoreMutation(e) {
    return e.type === "characterData" && e.target.nodeValue == e.oldValue;
  }
}
class lo extends fa {
  constructor(e, t, r, i) {
    super(e, [], r, i), (this.mark = t);
  }
  static create(e, t, r, i) {
    let o = i.nodeViews[t.type.name],
      a = o && o(t, i, r);
    return (
      (!a || !a.dom) && (a = qr.renderSpec(document, t.type.spec.toDOM(t, r))),
      new lo(e, t, a.dom, a.contentDOM || a.dom)
    );
  }
  parseRule() {
    return this.dirty & Ir || this.mark.type.spec.reparseInView
      ? null
      : {
          mark: this.mark.type.name,
          attrs: this.mark.attrs,
          contentElement: this.contentDOM,
        };
  }
  matchesMark(e) {
    return this.dirty != Ir && this.mark.eq(e);
  }
  markDirty(e, t) {
    if ((super.markDirty(e, t), this.dirty != nr)) {
      let r = this.parent;
      for (; !r.node; ) r = r.parent;
      r.dirty < this.dirty && (r.dirty = this.dirty), (this.dirty = nr);
    }
  }
  slice(e, t, r) {
    let i = lo.create(this.parent, this.mark, !0, r),
      o = this.children,
      a = this.size;
    t < a && (o = of(o, t, a, r)), e > 0 && (o = of(o, 0, e, r));
    for (let l = 0; l < o.length; l++) o[l].parent = i;
    return (i.children = o), i;
  }
}
class Ei extends fa {
  constructor(e, t, r, i, o, a, l, u, d) {
    super(e, [], o, a),
      (this.node = t),
      (this.outerDeco = r),
      (this.innerDeco = i),
      (this.nodeDOM = l);
  }
  static create(e, t, r, i, o, a) {
    let l = o.nodeViews[t.type.name],
      u,
      d =
        l &&
        l(
          t,
          o,
          () => {
            if (!u) return a;
            if (u.parent) return u.parent.posBeforeChild(u);
          },
          r,
          i
        ),
      h = d && d.dom,
      p = d && d.contentDOM;
    if (t.isText) {
      if (!h) h = document.createTextNode(t.text);
      else if (h.nodeType != 3)
        throw new RangeError("Text must be rendered as a DOM text node");
    } else
      h ||
        ({ dom: h, contentDOM: p } = qr.renderSpec(
          document,
          t.type.spec.toDOM(t)
        ));
    !p &&
      !t.isText &&
      h.nodeName != "BR" &&
      (h.hasAttribute("contenteditable") || (h.contentEditable = "false"),
      t.type.spec.draggable && (h.draggable = !0));
    let g = h;
    return (
      (h = wv(h, r, t)),
      d
        ? (u = new jM(e, t, r, i, h, p || null, g, d, o, a + 1))
        : t.isText
        ? new Sc(e, t, r, i, h, g, o)
        : new Ei(e, t, r, i, h, p || null, g, o, a + 1)
    );
  }
  parseRule() {
    if (this.node.type.spec.reparseInView) return null;
    let e = { node: this.node.type.name, attrs: this.node.attrs };
    if (
      (this.node.type.whitespace == "pre" && (e.preserveWhitespace = "full"),
      !this.contentDOM)
    )
      e.getContent = () => this.node.content;
    else if (!this.contentLost) e.contentElement = this.contentDOM;
    else {
      for (let t = this.children.length - 1; t >= 0; t--) {
        let r = this.children[t];
        if (this.dom.contains(r.dom.parentNode)) {
          e.contentElement = r.dom.parentNode;
          break;
        }
      }
      e.contentElement || (e.getContent = () => he.empty);
    }
    return e;
  }
  matchesNode(e, t, r) {
    return (
      this.dirty == nr &&
      e.eq(this.node) &&
      rf(t, this.outerDeco) &&
      r.eq(this.innerDeco)
    );
  }
  get size() {
    return this.node.nodeSize;
  }
  get border() {
    return this.node.isLeaf ? 0 : 1;
  }
  updateChildren(e, t) {
    let r = this.node.inlineContent,
      i = t,
      o = e.composing ? this.localCompositionInfo(e, t) : null,
      a = o && o.pos > -1 ? o : null,
      l = o && o.pos < 0,
      u = new ZM(this, a && a.node, e);
    GM(
      this.node,
      this.innerDeco,
      (d, h, p) => {
        d.spec.marks
          ? u.syncToMarks(d.spec.marks, r, e)
          : d.type.side >= 0 &&
            !p &&
            u.syncToMarks(
              h == this.node.childCount ? at.none : this.node.child(h).marks,
              r,
              e
            ),
          u.placeWidget(d, e, i);
      },
      (d, h, p, g) => {
        u.syncToMarks(d.marks, r, e);
        let y;
        u.findNodeMatch(d, h, p, g) ||
          (l &&
            e.state.selection.from > i &&
            e.state.selection.to < i + d.nodeSize &&
            (y = u.findIndexWithChild(o.node)) > -1 &&
            u.updateNodeAt(d, h, p, y, e)) ||
          u.updateNextNode(d, h, p, e, g, i) ||
          u.addNode(d, h, p, e, i),
          (i += d.nodeSize);
      }
    ),
      u.syncToMarks([], r, e),
      this.node.isTextblock && u.addTextblockHacks(),
      u.destroyRest(),
      (u.changed || this.dirty == Ji) &&
        (a && this.protectLocalComposition(e, a),
        yv(this.contentDOM, this.children, e),
        Ko && KM(this.dom));
  }
  localCompositionInfo(e, t) {
    let { from: r, to: i } = e.state.selection;
    if (
      !(e.state.selection instanceof nt) ||
      r < t ||
      i > t + this.node.content.size
    )
      return null;
    let o = e.domSelectionRange(),
      a = XM(o.focusNode, o.focusOffset);
    if (!a || !this.dom.contains(a.parentNode)) return null;
    if (this.node.inlineContent) {
      let l = a.nodeValue,
        u = JM(this.node.content, l, r - t, i - t);
      return u < 0 ? null : { node: a, pos: u, text: l };
    } else return { node: a, pos: -1, text: "" };
  }
  protectLocalComposition(e, { node: t, pos: r, text: i }) {
    if (this.getDesc(t)) return;
    let o = t;
    for (; o.parentNode != this.contentDOM; o = o.parentNode) {
      for (; o.previousSibling; ) o.parentNode.removeChild(o.previousSibling);
      for (; o.nextSibling; ) o.parentNode.removeChild(o.nextSibling);
      o.pmViewDesc && (o.pmViewDesc = void 0);
    }
    let a = new $M(this, o, t, i);
    e.input.compositionNodes.push(a),
      (this.children = of(this.children, r, r + i.length, e, a));
  }
  update(e, t, r, i) {
    return this.dirty == Ir || !e.sameMarkup(this.node)
      ? !1
      : (this.updateInner(e, t, r, i), !0);
  }
  updateInner(e, t, r, i) {
    this.updateOuterDeco(t),
      (this.node = e),
      (this.innerDeco = r),
      this.contentDOM && this.updateChildren(i, this.posAtStart),
      (this.dirty = nr);
  }
  updateOuterDeco(e) {
    if (rf(e, this.outerDeco)) return;
    let t = this.nodeDOM.nodeType != 1,
      r = this.dom;
    (this.dom = vv(
      this.dom,
      this.nodeDOM,
      nf(this.outerDeco, this.node, t),
      nf(e, this.node, t)
    )),
      this.dom != r && ((r.pmViewDesc = void 0), (this.dom.pmViewDesc = this)),
      (this.outerDeco = e);
  }
  selectNode() {
    this.nodeDOM.nodeType == 1 &&
      this.nodeDOM.classList.add("ProseMirror-selectednode"),
      (this.contentDOM || !this.node.type.spec.draggable) &&
        (this.dom.draggable = !0);
  }
  deselectNode() {
    this.nodeDOM.nodeType == 1 &&
      this.nodeDOM.classList.remove("ProseMirror-selectednode"),
      (this.contentDOM || !this.node.type.spec.draggable) &&
        this.dom.removeAttribute("draggable");
  }
  get domAtom() {
    return this.node.isAtom;
  }
}
function I0(n, e, t, r, i) {
  wv(r, e, n);
  let o = new Ei(void 0, n, e, t, r, r, r, i, 0);
  return o.contentDOM && o.updateChildren(i, 0), o;
}
class Sc extends Ei {
  constructor(e, t, r, i, o, a, l) {
    super(e, t, r, i, o, null, a, l, 0);
  }
  parseRule() {
    let e = this.nodeDOM.parentNode;
    for (; e && e != this.dom && !e.pmIsDeco; ) e = e.parentNode;
    return { skip: e || !0 };
  }
  update(e, t, r, i) {
    return this.dirty == Ir ||
      (this.dirty != nr && !this.inParent()) ||
      !e.sameMarkup(this.node)
      ? !1
      : (this.updateOuterDeco(t),
        (this.dirty != nr || e.text != this.node.text) &&
          e.text != this.nodeDOM.nodeValue &&
          ((this.nodeDOM.nodeValue = e.text),
          i.trackWrites == this.nodeDOM && (i.trackWrites = null)),
        (this.node = e),
        (this.dirty = nr),
        !0);
  }
  inParent() {
    let e = this.parent.contentDOM;
    for (let t = this.nodeDOM; t; t = t.parentNode) if (t == e) return !0;
    return !1;
  }
  domFromPos(e) {
    return { node: this.nodeDOM, offset: e };
  }
  localPosFromDOM(e, t, r) {
    return e == this.nodeDOM
      ? this.posAtStart + Math.min(t, this.node.text.length)
      : super.localPosFromDOM(e, t, r);
  }
  ignoreMutation(e) {
    return e.type != "characterData" && e.type != "selection";
  }
  slice(e, t, r) {
    let i = this.node.cut(e, t),
      o = document.createTextNode(i.text);
    return new Sc(this.parent, i, this.outerDeco, this.innerDeco, o, o, r);
  }
  markDirty(e, t) {
    super.markDirty(e, t),
      this.dom != this.nodeDOM &&
        (e == 0 || t == this.nodeDOM.nodeValue.length) &&
        (this.dirty = Ir);
  }
  get domAtom() {
    return !1;
  }
}
class mv extends fa {
  parseRule() {
    return { ignore: !0 };
  }
  matchesHack(e) {
    return this.dirty == nr && this.dom.nodeName == e;
  }
  get domAtom() {
    return !0;
  }
  get ignoreForCoords() {
    return this.dom.nodeName == "IMG";
  }
}
class jM extends Ei {
  constructor(e, t, r, i, o, a, l, u, d, h) {
    super(e, t, r, i, o, a, l, d, h), (this.spec = u);
  }
  update(e, t, r, i) {
    if (this.dirty == Ir) return !1;
    if (this.spec.update) {
      let o = this.spec.update(e, t, r);
      return o && this.updateInner(e, t, r, i), o;
    } else return !this.contentDOM && !e.isLeaf ? !1 : super.update(e, t, r, i);
  }
  selectNode() {
    this.spec.selectNode ? this.spec.selectNode() : super.selectNode();
  }
  deselectNode() {
    this.spec.deselectNode ? this.spec.deselectNode() : super.deselectNode();
  }
  setSelection(e, t, r, i) {
    this.spec.setSelection
      ? this.spec.setSelection(e, t, r)
      : super.setSelection(e, t, r, i);
  }
  destroy() {
    this.spec.destroy && this.spec.destroy(), super.destroy();
  }
  stopEvent(e) {
    return this.spec.stopEvent ? this.spec.stopEvent(e) : !1;
  }
  ignoreMutation(e) {
    return this.spec.ignoreMutation
      ? this.spec.ignoreMutation(e)
      : super.ignoreMutation(e);
  }
}
function yv(n, e, t) {
  let r = n.firstChild,
    i = !1;
  for (let o = 0; o < e.length; o++) {
    let a = e[o],
      l = a.dom;
    if (l.parentNode == n) {
      for (; l != r; ) (r = A0(r)), (i = !0);
      r = r.nextSibling;
    } else (i = !0), n.insertBefore(l, r);
    if (a instanceof lo) {
      let u = r ? r.previousSibling : n.lastChild;
      yv(a.contentDOM, a.children, t), (r = u ? u.nextSibling : n.firstChild);
    }
  }
  for (; r; ) (r = A0(r)), (i = !0);
  i && t.trackWrites == n && (t.trackWrites = null);
}
const _s = function (n) {
  n && (this.nodeName = n);
};
_s.prototype = Object.create(null);
const Qi = [new _s()];
function nf(n, e, t) {
  if (n.length == 0) return Qi;
  let r = t ? Qi[0] : new _s(),
    i = [r];
  for (let o = 0; o < n.length; o++) {
    let a = n[o].type.attrs;
    if (a) {
      a.nodeName && i.push((r = new _s(a.nodeName)));
      for (let l in a) {
        let u = a[l];
        u != null &&
          (t &&
            i.length == 1 &&
            i.push((r = new _s(e.isInline ? "span" : "div"))),
          l == "class"
            ? (r.class = (r.class ? r.class + " " : "") + u)
            : l == "style"
            ? (r.style = (r.style ? r.style + ";" : "") + u)
            : l != "nodeName" && (r[l] = u));
      }
    }
  }
  return i;
}
function vv(n, e, t, r) {
  if (t == Qi && r == Qi) return e;
  let i = e;
  for (let o = 0; o < r.length; o++) {
    let a = r[o],
      l = t[o];
    if (o) {
      let u;
      (l &&
        l.nodeName == a.nodeName &&
        i != n &&
        (u = i.parentNode) &&
        u.nodeName.toLowerCase() == a.nodeName) ||
        ((u = document.createElement(a.nodeName)),
        (u.pmIsDeco = !0),
        u.appendChild(i),
        (l = Qi[0])),
        (i = u);
    }
    UM(i, l || Qi[0], a);
  }
  return i;
}
function UM(n, e, t) {
  for (let r in e)
    r != "class" &&
      r != "style" &&
      r != "nodeName" &&
      !(r in t) &&
      n.removeAttribute(r);
  for (let r in t)
    r != "class" &&
      r != "style" &&
      r != "nodeName" &&
      t[r] != e[r] &&
      n.setAttribute(r, t[r]);
  if (e.class != t.class) {
    let r = e.class ? e.class.split(" ").filter(Boolean) : [],
      i = t.class ? t.class.split(" ").filter(Boolean) : [];
    for (let o = 0; o < r.length; o++)
      i.indexOf(r[o]) == -1 && n.classList.remove(r[o]);
    for (let o = 0; o < i.length; o++)
      r.indexOf(i[o]) == -1 && n.classList.add(i[o]);
    n.classList.length == 0 && n.removeAttribute("class");
  }
  if (e.style != t.style) {
    if (e.style) {
      let r =
          /\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,
        i;
      for (; (i = r.exec(e.style)); ) n.style.removeProperty(i[1]);
    }
    t.style && (n.style.cssText += t.style);
  }
}
function wv(n, e, t) {
  return vv(n, n, Qi, nf(e, t, n.nodeType != 1));
}
function rf(n, e) {
  if (n.length != e.length) return !1;
  for (let t = 0; t < n.length; t++) if (!n[t].type.eq(e[t].type)) return !1;
  return !0;
}
function A0(n) {
  let e = n.nextSibling;
  return n.parentNode.removeChild(n), e;
}
class ZM {
  constructor(e, t, r) {
    (this.lock = t),
      (this.view = r),
      (this.index = 0),
      (this.stack = []),
      (this.changed = !1),
      (this.top = e),
      (this.preMatch = YM(e.node.content, e));
  }
  destroyBetween(e, t) {
    if (e != t) {
      for (let r = e; r < t; r++) this.top.children[r].destroy();
      this.top.children.splice(e, t - e), (this.changed = !0);
    }
  }
  destroyRest() {
    this.destroyBetween(this.index, this.top.children.length);
  }
  syncToMarks(e, t, r) {
    let i = 0,
      o = this.stack.length >> 1,
      a = Math.min(o, e.length);
    for (
      ;
      i < a &&
      (i == o - 1 ? this.top : this.stack[(i + 1) << 1]).matchesMark(e[i]) &&
      e[i].type.spec.spanning !== !1;

    )
      i++;
    for (; i < o; )
      this.destroyRest(),
        (this.top.dirty = nr),
        (this.index = this.stack.pop()),
        (this.top = this.stack.pop()),
        o--;
    for (; o < e.length; ) {
      this.stack.push(this.top, this.index + 1);
      let l = -1;
      for (
        let u = this.index;
        u < Math.min(this.index + 3, this.top.children.length);
        u++
      ) {
        let d = this.top.children[u];
        if (d.matchesMark(e[o]) && !this.isLocked(d.dom)) {
          l = u;
          break;
        }
      }
      if (l > -1)
        l > this.index &&
          ((this.changed = !0), this.destroyBetween(this.index, l)),
          (this.top = this.top.children[this.index]);
      else {
        let u = lo.create(this.top, e[o], t, r);
        this.top.children.splice(this.index, 0, u),
          (this.top = u),
          (this.changed = !0);
      }
      (this.index = 0), o++;
    }
  }
  findNodeMatch(e, t, r, i) {
    let o = -1,
      a;
    if (
      i >= this.preMatch.index &&
      (a = this.preMatch.matches[i - this.preMatch.index]).parent == this.top &&
      a.matchesNode(e, t, r)
    )
      o = this.top.children.indexOf(a, this.index);
    else
      for (
        let l = this.index, u = Math.min(this.top.children.length, l + 5);
        l < u;
        l++
      ) {
        let d = this.top.children[l];
        if (d.matchesNode(e, t, r) && !this.preMatch.matched.has(d)) {
          o = l;
          break;
        }
      }
    return o < 0 ? !1 : (this.destroyBetween(this.index, o), this.index++, !0);
  }
  updateNodeAt(e, t, r, i, o) {
    let a = this.top.children[i];
    return (
      a.dirty == Ir && a.dom == a.contentDOM && (a.dirty = Ji),
      a.update(e, t, r, o)
        ? (this.destroyBetween(this.index, i), this.index++, !0)
        : !1
    );
  }
  findIndexWithChild(e) {
    for (;;) {
      let t = e.parentNode;
      if (!t) return -1;
      if (t == this.top.contentDOM) {
        let r = e.pmViewDesc;
        if (r) {
          for (let i = this.index; i < this.top.children.length; i++)
            if (this.top.children[i] == r) return i;
        }
        return -1;
      }
      e = t;
    }
  }
  updateNextNode(e, t, r, i, o, a) {
    for (let l = this.index; l < this.top.children.length; l++) {
      let u = this.top.children[l];
      if (u instanceof Ei) {
        let d = this.preMatch.matched.get(u);
        if (d != null && d != o) return !1;
        let h = u.dom,
          p,
          g =
            this.isLocked(h) &&
            !(
              e.isText &&
              u.node &&
              u.node.isText &&
              u.nodeDOM.nodeValue == e.text &&
              u.dirty != Ir &&
              rf(t, u.outerDeco)
            );
        if (!g && u.update(e, t, r, i))
          return (
            this.destroyBetween(this.index, l),
            u.dom != h && (this.changed = !0),
            this.index++,
            !0
          );
        if (!g && (p = this.recreateWrapper(u, e, t, r, i, a)))
          return (
            (this.top.children[this.index] = p),
            p.contentDOM &&
              ((p.dirty = Ji), p.updateChildren(i, a + 1), (p.dirty = nr)),
            (this.changed = !0),
            this.index++,
            !0
          );
        break;
      }
    }
    return !1;
  }
  recreateWrapper(e, t, r, i, o, a) {
    if (
      e.dirty ||
      t.isAtom ||
      !e.children.length ||
      !e.node.content.eq(t.content)
    )
      return null;
    let l = Ei.create(this.top, t, r, i, o, a);
    if (l.contentDOM) {
      (l.children = e.children), (e.children = []);
      for (let u of l.children) u.parent = l;
    }
    return e.destroy(), l;
  }
  addNode(e, t, r, i, o) {
    let a = Ei.create(this.top, e, t, r, i, o);
    a.contentDOM && a.updateChildren(i, o + 1),
      this.top.children.splice(this.index++, 0, a),
      (this.changed = !0);
  }
  placeWidget(e, t, r) {
    let i =
      this.index < this.top.children.length
        ? this.top.children[this.index]
        : null;
    if (
      i &&
      i.matchesWidget(e) &&
      (e == i.widget || !i.widget.type.toDOM.parentNode)
    )
      this.index++;
    else {
      let o = new gv(this.top, e, t, r);
      this.top.children.splice(this.index++, 0, o), (this.changed = !0);
    }
  }
  addTextblockHacks() {
    let e = this.top.children[this.index - 1],
      t = this.top;
    for (; e instanceof lo; ) (t = e), (e = t.children[t.children.length - 1]);
    (!e ||
      !(e instanceof Sc) ||
      /\n$/.test(e.node.text) ||
      (this.view.requiresGeckoHackNode && /\s$/.test(e.node.text))) &&
      ((pn || on) &&
        e &&
        e.dom.contentEditable == "false" &&
        this.addHackNode("IMG", t),
      this.addHackNode("BR", this.top));
  }
  addHackNode(e, t) {
    if (
      t == this.top &&
      this.index < t.children.length &&
      t.children[this.index].matchesHack(e)
    )
      this.index++;
    else {
      let r = document.createElement(e);
      e == "IMG" && ((r.className = "ProseMirror-separator"), (r.alt = "")),
        e == "BR" && (r.className = "ProseMirror-trailingBreak");
      let i = new mv(this.top, [], r, null);
      t != this.top
        ? t.children.push(i)
        : t.children.splice(this.index++, 0, i),
        (this.changed = !0);
    }
  }
  isLocked(e) {
    return (
      this.lock &&
      (e == this.lock || (e.nodeType == 1 && e.contains(this.lock.parentNode)))
    );
  }
}
function YM(n, e) {
  let t = e,
    r = t.children.length,
    i = n.childCount,
    o = new Map(),
    a = [];
  e: for (; i > 0; ) {
    let l;
    for (;;)
      if (r) {
        let d = t.children[r - 1];
        if (d instanceof lo) (t = d), (r = d.children.length);
        else {
          (l = d), r--;
          break;
        }
      } else {
        if (t == e) break e;
        (r = t.parent.children.indexOf(t)), (t = t.parent);
      }
    let u = l.node;
    if (u) {
      if (u != n.child(i - 1)) break;
      --i, o.set(l, i), a.push(l);
    }
  }
  return { index: i, matched: o, matches: a.reverse() };
}
function qM(n, e) {
  return n.type.side - e.type.side;
}
function GM(n, e, t, r) {
  let i = e.locals(n),
    o = 0;
  if (i.length == 0) {
    for (let d = 0; d < n.childCount; d++) {
      let h = n.child(d);
      r(h, i, e.forChild(o, h), d), (o += h.nodeSize);
    }
    return;
  }
  let a = 0,
    l = [],
    u = null;
  for (let d = 0; ; ) {
    let h, p;
    for (; a < i.length && i[a].to == o; ) {
      let b = i[a++];
      b.widget && (h ? (p || (p = [h])).push(b) : (h = b));
    }
    if (h)
      if (p) {
        p.sort(qM);
        for (let b = 0; b < p.length; b++) t(p[b], d, !!u);
      } else t(h, d, !!u);
    let g, y;
    if (u) (y = -1), (g = u), (u = null);
    else if (d < n.childCount) (y = d), (g = n.child(d++));
    else break;
    for (let b = 0; b < l.length; b++) l[b].to <= o && l.splice(b--, 1);
    for (; a < i.length && i[a].from <= o && i[a].to > o; ) l.push(i[a++]);
    let m = o + g.nodeSize;
    if (g.isText) {
      let b = m;
      a < i.length && i[a].from < b && (b = i[a].from);
      for (let E = 0; E < l.length; E++) l[E].to < b && (b = l[E].to);
      b < m && ((u = g.cut(b - o)), (g = g.cut(0, b - o)), (m = b), (y = -1));
    }
    let w = g.isInline && !g.isLeaf ? l.filter((b) => !b.inline) : l.slice();
    r(g, w, e.forChild(o, g), y), (o = m);
  }
}
function KM(n) {
  if (n.nodeName == "UL" || n.nodeName == "OL") {
    let e = n.style.cssText;
    (n.style.cssText = e + "; list-style: square !important"),
      window.getComputedStyle(n).listStyle,
      (n.style.cssText = e);
  }
}
function XM(n, e) {
  for (;;) {
    if (n.nodeType == 3) return n;
    if (n.nodeType == 1 && e > 0) {
      if (n.childNodes.length > e && n.childNodes[e].nodeType == 3)
        return n.childNodes[e];
      (n = n.childNodes[e - 1]), (e = Or(n));
    } else if (n.nodeType == 1 && e < n.childNodes.length)
      (n = n.childNodes[e]), (e = 0);
    else return null;
  }
}
function JM(n, e, t, r) {
  for (let i = 0, o = 0; i < n.childCount && o <= r; ) {
    let a = n.child(i++),
      l = o;
    if (((o += a.nodeSize), !a.isText)) continue;
    let u = a.text;
    for (; i < n.childCount; ) {
      let d = n.child(i++);
      if (((o += d.nodeSize), !d.isText)) break;
      u += d.text;
    }
    if (o >= t) {
      if (o >= r && u.slice(r - e.length - l, r - l) == e) return r - e.length;
      let d = l < r ? u.lastIndexOf(e, r - l - 1) : -1;
      if (d >= 0 && d + e.length + l >= t) return l + d;
      if (
        t == r &&
        u.length >= r + e.length - l &&
        u.slice(r - l, r - l + e.length) == e
      )
        return r;
    }
  }
  return -1;
}
function of(n, e, t, r, i) {
  let o = [];
  for (let a = 0, l = 0; a < n.length; a++) {
    let u = n[a],
      d = l,
      h = (l += u.size);
    d >= t || h <= e
      ? o.push(u)
      : (d < e && o.push(u.slice(0, e - d, r)),
        i && (o.push(i), (i = void 0)),
        h > t && o.push(u.slice(t - d, u.size, r)));
  }
  return o;
}
function Hf(n, e = null) {
  let t = n.domSelectionRange(),
    r = n.state.doc;
  if (!t.focusNode) return null;
  let i = n.docView.nearestDesc(t.focusNode),
    o = i && i.size == 0,
    a = n.docView.posFromDOM(t.focusNode, t.focusOffset, 1);
  if (a < 0) return null;
  let l = r.resolve(a),
    u,
    d;
  if (xc(t)) {
    for (u = l; i && !i.node; ) i = i.parent;
    let h = i.node;
    if (
      i &&
      h.isAtom &&
      We.isSelectable(h) &&
      i.parent &&
      !(h.isInline && SM(t.focusNode, t.focusOffset, i.dom))
    ) {
      let p = i.posBefore;
      d = new We(a == p ? l : r.resolve(p));
    }
  } else {
    let h = n.docView.posFromDOM(t.anchorNode, t.anchorOffset, 1);
    if (h < 0) return null;
    u = r.resolve(h);
  }
  if (!d) {
    let h = e == "pointer" || (n.state.selection.head < l.pos && !o) ? 1 : -1;
    d = $f(n, u, l, h);
  }
  return d;
}
function bv(n) {
  return n.editable
    ? n.hasFocus()
    : Sv(n) && document.activeElement && document.activeElement.contains(n.dom);
}
function Kr(n, e = !1) {
  let t = n.state.selection;
  if ((xv(n, t), !!bv(n))) {
    if (!e && n.input.mouseDown && n.input.mouseDown.allowDefault && on) {
      let r = n.domSelectionRange(),
        i = n.domObserver.currentSelection;
      if (
        r.anchorNode &&
        i.anchorNode &&
        ao(r.anchorNode, r.anchorOffset, i.anchorNode, i.anchorOffset)
      ) {
        (n.input.mouseDown.delayedSelectionSync = !0),
          n.domObserver.setCurSelection();
        return;
      }
    }
    if ((n.domObserver.disconnectSelection(), n.cursorWrapper)) eR(n);
    else {
      let { anchor: r, head: i } = t,
        o,
        a;
      L0 &&
        !(t instanceof nt) &&
        (t.$from.parent.inlineContent || (o = P0(n, t.from)),
        !t.empty && !t.$from.parent.inlineContent && (a = P0(n, t.to))),
        n.docView.setSelection(r, i, n.root, e),
        L0 && (o && _0(o), a && _0(a)),
        t.visible
          ? n.dom.classList.remove("ProseMirror-hideselection")
          : (n.dom.classList.add("ProseMirror-hideselection"),
            "onselectionchange" in document && QM(n));
    }
    n.domObserver.setCurSelection(), n.domObserver.connectSelection();
  }
}
const L0 = pn || (on && kM < 63);
function P0(n, e) {
  let { node: t, offset: r } = n.docView.domFromPos(e, 0),
    i = r < t.childNodes.length ? t.childNodes[r] : null,
    o = r ? t.childNodes[r - 1] : null;
  if (pn && i && i.contentEditable == "false") return cd(i);
  if (
    (!i || i.contentEditable == "false") &&
    (!o || o.contentEditable == "false")
  ) {
    if (i) return cd(i);
    if (o) return cd(o);
  }
}
function cd(n) {
  return (
    (n.contentEditable = "true"),
    pn && n.draggable && ((n.draggable = !1), (n.wasDraggable = !0)),
    n
  );
}
function _0(n) {
  (n.contentEditable = "false"),
    n.wasDraggable && ((n.draggable = !0), (n.wasDraggable = null));
}
function QM(n) {
  let e = n.dom.ownerDocument;
  e.removeEventListener("selectionchange", n.input.hideSelectionGuard);
  let t = n.domSelectionRange(),
    r = t.anchorNode,
    i = t.anchorOffset;
  e.addEventListener(
    "selectionchange",
    (n.input.hideSelectionGuard = () => {
      (t.anchorNode != r || t.anchorOffset != i) &&
        (e.removeEventListener("selectionchange", n.input.hideSelectionGuard),
        setTimeout(() => {
          (!bv(n) || n.state.selection.visible) &&
            n.dom.classList.remove("ProseMirror-hideselection");
        }, 20));
    })
  );
}
function eR(n) {
  let e = n.domSelection(),
    t = document.createRange(),
    r = n.cursorWrapper.dom,
    i = r.nodeName == "IMG";
  i ? t.setEnd(r.parentNode, hn(r) + 1) : t.setEnd(r, 0),
    t.collapse(!1),
    e.removeAllRanges(),
    e.addRange(t),
    !i &&
      !n.state.selection.visible &&
      En &&
      Ci <= 11 &&
      ((r.disabled = !0), (r.disabled = !1));
}
function xv(n, e) {
  if (e instanceof We) {
    let t = n.docView.descAt(e.from);
    t != n.lastSelectedViewDesc &&
      (N0(n), t && t.selectNode(), (n.lastSelectedViewDesc = t));
  } else N0(n);
}
function N0(n) {
  n.lastSelectedViewDesc &&
    (n.lastSelectedViewDesc.parent && n.lastSelectedViewDesc.deselectNode(),
    (n.lastSelectedViewDesc = void 0));
}
function $f(n, e, t, r) {
  return (
    n.someProp("createSelectionBetween", (i) => i(n, e, t)) ||
    nt.between(e, t, r)
  );
}
function z0(n) {
  return n.editable && !n.hasFocus() ? !1 : Sv(n);
}
function Sv(n) {
  let e = n.domSelectionRange();
  if (!e.anchorNode) return !1;
  try {
    return (
      n.dom.contains(
        e.anchorNode.nodeType == 3 ? e.anchorNode.parentNode : e.anchorNode
      ) &&
      (n.editable ||
        n.dom.contains(
          e.focusNode.nodeType == 3 ? e.focusNode.parentNode : e.focusNode
        ))
    );
  } catch {
    return !1;
  }
}
function tR(n) {
  let e = n.docView.domFromPos(n.state.selection.anchor, 0),
    t = n.domSelectionRange();
  return ao(e.node, e.offset, t.anchorNode, t.anchorOffset);
}
function sf(n, e) {
  let { $anchor: t, $head: r } = n.selection,
    i = e > 0 ? t.max(r) : t.min(r),
    o = i.parent.inlineContent
      ? i.depth
        ? n.doc.resolve(e > 0 ? i.after() : i.before())
        : null
      : i;
  return o && tt.findFrom(o, e);
}
function gi(n, e) {
  return n.dispatch(n.state.tr.setSelection(e).scrollIntoView()), !0;
}
function B0(n, e, t) {
  let r = n.state.selection;
  if (r instanceof nt)
    if (t.indexOf("s") > -1) {
      let { $head: i } = r,
        o = i.textOffset ? null : e < 0 ? i.nodeBefore : i.nodeAfter;
      if (!o || o.isText || !o.isLeaf) return !1;
      let a = n.state.doc.resolve(i.pos + o.nodeSize * (e < 0 ? -1 : 1));
      return gi(n, new nt(r.$anchor, a));
    } else if (r.empty) {
      if (n.endOfTextblock(e > 0 ? "forward" : "backward")) {
        let i = sf(n.state, e);
        return i && i instanceof We ? gi(n, i) : !1;
      } else if (!(Qn && t.indexOf("m") > -1)) {
        let i = r.$head,
          o = i.textOffset ? null : e < 0 ? i.nodeBefore : i.nodeAfter,
          a;
        if (!o || o.isText) return !1;
        let l = e < 0 ? i.pos - o.nodeSize : i.pos;
        return o.isAtom || ((a = n.docView.descAt(l)) && !a.contentDOM)
          ? We.isSelectable(o)
            ? gi(n, new We(e < 0 ? n.state.doc.resolve(i.pos - o.nodeSize) : i))
            : da
            ? gi(n, new nt(n.state.doc.resolve(e < 0 ? l : l + o.nodeSize)))
            : !1
          : !1;
      }
    } else return !1;
  else {
    if (r instanceof We && r.node.isInline)
      return gi(n, new nt(e > 0 ? r.$to : r.$from));
    {
      let i = sf(n.state, e);
      return i ? gi(n, i) : !1;
    }
  }
}
function jl(n) {
  return n.nodeType == 3 ? n.nodeValue.length : n.childNodes.length;
}
function Ns(n, e) {
  let t = n.pmViewDesc;
  return t && t.size == 0 && (e < 0 || n.nextSibling || n.nodeName != "BR");
}
function Po(n, e) {
  return e < 0 ? nR(n) : rR(n);
}
function nR(n) {
  let e = n.domSelectionRange(),
    t = e.focusNode,
    r = e.focusOffset;
  if (!t) return;
  let i,
    o,
    a = !1;
  for (
    gr && t.nodeType == 1 && r < jl(t) && Ns(t.childNodes[r], -1) && (a = !0);
    ;

  )
    if (r > 0) {
      if (t.nodeType != 1) break;
      {
        let l = t.childNodes[r - 1];
        if (Ns(l, -1)) (i = t), (o = --r);
        else if (l.nodeType == 3) (t = l), (r = t.nodeValue.length);
        else break;
      }
    } else {
      if (Cv(t)) break;
      {
        let l = t.previousSibling;
        for (; l && Ns(l, -1); )
          (i = t.parentNode), (o = hn(l)), (l = l.previousSibling);
        if (l) (t = l), (r = jl(t));
        else {
          if (((t = t.parentNode), t == n.dom)) break;
          r = 0;
        }
      }
    }
  a ? af(n, t, r) : i && af(n, i, o);
}
function rR(n) {
  let e = n.domSelectionRange(),
    t = e.focusNode,
    r = e.focusOffset;
  if (!t) return;
  let i = jl(t),
    o,
    a;
  for (;;)
    if (r < i) {
      if (t.nodeType != 1) break;
      let l = t.childNodes[r];
      if (Ns(l, 1)) (o = t), (a = ++r);
      else break;
    } else {
      if (Cv(t)) break;
      {
        let l = t.nextSibling;
        for (; l && Ns(l, 1); )
          (o = l.parentNode), (a = hn(l) + 1), (l = l.nextSibling);
        if (l) (t = l), (r = 0), (i = jl(t));
        else {
          if (((t = t.parentNode), t == n.dom)) break;
          r = i = 0;
        }
      }
    }
  o && af(n, o, a);
}
function Cv(n) {
  let e = n.pmViewDesc;
  return e && e.node && e.node.isBlock;
}
function iR(n, e) {
  for (; n && e == n.childNodes.length && !Wf(n); )
    (e = hn(n) + 1), (n = n.parentNode);
  for (; n && e < n.childNodes.length; ) {
    let t = n.childNodes[e];
    if (t.nodeType == 3) return t;
    if (t.nodeType == 1 && t.contentEditable == "false") break;
    (n = t), (e = 0);
  }
}
function oR(n, e) {
  for (; n && !e && !Wf(n); ) (e = hn(n)), (n = n.parentNode);
  for (; n && e; ) {
    let t = n.childNodes[e - 1];
    if (t.nodeType == 3) return t;
    if (t.nodeType == 1 && t.contentEditable == "false") break;
    (n = t), (e = n.childNodes.length);
  }
}
function af(n, e, t) {
  if (e.nodeType != 3) {
    let o, a;
    (a = iR(e, t))
      ? ((e = a), (t = 0))
      : (o = oR(e, t)) && ((e = o), (t = o.nodeValue.length));
  }
  let r = n.domSelection();
  if (xc(r)) {
    let o = document.createRange();
    o.setEnd(e, t), o.setStart(e, t), r.removeAllRanges(), r.addRange(o);
  } else r.extend && r.extend(e, t);
  n.domObserver.setCurSelection();
  let { state: i } = n;
  setTimeout(() => {
    n.state == i && Kr(n);
  }, 50);
}
function F0(n, e) {
  let t = n.state.doc.resolve(e);
  if (!(on || OM) && t.parent.inlineContent) {
    let i = n.coordsAtPos(e);
    if (e > t.start()) {
      let o = n.coordsAtPos(e - 1),
        a = (o.top + o.bottom) / 2;
      if (a > i.top && a < i.bottom && Math.abs(o.left - i.left) > 1)
        return o.left < i.left ? "ltr" : "rtl";
    }
    if (e < t.end()) {
      let o = n.coordsAtPos(e + 1),
        a = (o.top + o.bottom) / 2;
      if (a > i.top && a < i.bottom && Math.abs(o.left - i.left) > 1)
        return o.left > i.left ? "ltr" : "rtl";
    }
  }
  return getComputedStyle(n.dom).direction == "rtl" ? "rtl" : "ltr";
}
function W0(n, e, t) {
  let r = n.state.selection;
  if (
    (r instanceof nt && !r.empty) ||
    t.indexOf("s") > -1 ||
    (Qn && t.indexOf("m") > -1)
  )
    return !1;
  let { $from: i, $to: o } = r;
  if (!i.parent.inlineContent || n.endOfTextblock(e < 0 ? "up" : "down")) {
    let a = sf(n.state, e);
    if (a && a instanceof We) return gi(n, a);
  }
  if (!i.parent.inlineContent) {
    let a = e < 0 ? i : o,
      l = r instanceof Cn ? tt.near(a, e) : tt.findFrom(a, e);
    return l ? gi(n, l) : !1;
  }
  return !1;
}
function V0(n, e) {
  if (!(n.state.selection instanceof nt)) return !0;
  let { $head: t, $anchor: r, empty: i } = n.state.selection;
  if (!t.sameParent(r)) return !0;
  if (!i) return !1;
  if (n.endOfTextblock(e > 0 ? "forward" : "backward")) return !0;
  let o = !t.textOffset && (e < 0 ? t.nodeBefore : t.nodeAfter);
  if (o && !o.isText) {
    let a = n.state.tr;
    return (
      e < 0
        ? a.delete(t.pos - o.nodeSize, t.pos)
        : a.delete(t.pos, t.pos + o.nodeSize),
      n.dispatch(a),
      !0
    );
  }
  return !1;
}
function H0(n, e, t) {
  n.domObserver.stop(), (e.contentEditable = t), n.domObserver.start();
}
function sR(n) {
  if (!pn || n.state.selection.$head.parentOffset > 0) return !1;
  let { focusNode: e, focusOffset: t } = n.domSelectionRange();
  if (
    e &&
    e.nodeType == 1 &&
    t == 0 &&
    e.firstChild &&
    e.firstChild.contentEditable == "false"
  ) {
    let r = e.firstChild;
    H0(n, r, "true"), setTimeout(() => H0(n, r, "false"), 20);
  }
  return !1;
}
function aR(n) {
  let e = "";
  return (
    n.ctrlKey && (e += "c"),
    n.metaKey && (e += "m"),
    n.altKey && (e += "a"),
    n.shiftKey && (e += "s"),
    e
  );
}
function lR(n, e) {
  let t = e.keyCode,
    r = aR(e);
  if (t == 8 || (Qn && t == 72 && r == "c")) return V0(n, -1) || Po(n, -1);
  if ((t == 46 && !e.shiftKey) || (Qn && t == 68 && r == "c"))
    return V0(n, 1) || Po(n, 1);
  if (t == 13 || t == 27) return !0;
  if (t == 37 || (Qn && t == 66 && r == "c")) {
    let i = t == 37 ? (F0(n, n.state.selection.from) == "ltr" ? -1 : 1) : -1;
    return B0(n, i, r) || Po(n, i);
  } else if (t == 39 || (Qn && t == 70 && r == "c")) {
    let i = t == 39 ? (F0(n, n.state.selection.from) == "ltr" ? 1 : -1) : 1;
    return B0(n, i, r) || Po(n, i);
  } else {
    if (t == 38 || (Qn && t == 80 && r == "c"))
      return W0(n, -1, r) || Po(n, -1);
    if (t == 40 || (Qn && t == 78 && r == "c"))
      return sR(n) || W0(n, 1, r) || Po(n, 1);
    if (r == (Qn ? "m" : "c") && (t == 66 || t == 73 || t == 89 || t == 90))
      return !0;
  }
  return !1;
}
function Ev(n, e) {
  n.someProp("transformCopied", (y) => {
    e = y(e, n);
  });
  let t = [],
    { content: r, openStart: i, openEnd: o } = e;
  for (
    ;
    i > 1 && o > 1 && r.childCount == 1 && r.firstChild.childCount == 1;

  ) {
    i--, o--;
    let y = r.firstChild;
    t.push(y.type.name, y.attrs != y.type.defaultAttrs ? y.attrs : null),
      (r = y.content);
  }
  let a = n.someProp("clipboardSerializer") || qr.fromSchema(n.state.schema),
    l = Dv(),
    u = l.createElement("div");
  u.appendChild(a.serializeFragment(r, { document: l }));
  let d = u.firstChild,
    h,
    p = 0;
  for (; d && d.nodeType == 1 && (h = Rv[d.nodeName.toLowerCase()]); ) {
    for (let y = h.length - 1; y >= 0; y--) {
      let m = l.createElement(h[y]);
      for (; u.firstChild; ) m.appendChild(u.firstChild);
      u.appendChild(m), p++;
    }
    d = u.firstChild;
  }
  d &&
    d.nodeType == 1 &&
    d.setAttribute(
      "data-pm-slice",
      `${i} ${o}${p ? ` -${p}` : ""} ${JSON.stringify(t)}`
    );
  let g =
    n.someProp("clipboardTextSerializer", (y) => y(e, n)) ||
    e.content.textBetween(
      0,
      e.content.size,
      `

`
    );
  return { dom: u, text: g };
}
function kv(n, e, t, r, i) {
  let o = i.parent.type.spec.code,
    a,
    l;
  if (!t && !e) return null;
  let u = e && (r || o || !t);
  if (u) {
    if (
      (n.someProp("transformPastedText", (g) => {
        e = g(e, o || r, n);
      }),
      o)
    )
      return e
        ? new ke(
            he.from(
              n.state.schema.text(
                e.replace(
                  /\r\n?/g,
                  `
`
                )
              )
            ),
            0,
            0
          )
        : ke.empty;
    let p = n.someProp("clipboardTextParser", (g) => g(e, i, r, n));
    if (p) l = p;
    else {
      let g = i.marks(),
        { schema: y } = n.state,
        m = qr.fromSchema(y);
      (a = document.createElement("div")),
        e.split(/(?:\r\n?|\n)+/).forEach((w) => {
          let b = a.appendChild(document.createElement("p"));
          w && b.appendChild(m.serializeNode(y.text(w, g)));
        });
    }
  } else
    n.someProp("transformPastedHTML", (p) => {
      t = p(t, n);
    }),
      (a = dR(t)),
      da && fR(a);
  let d = a && a.querySelector("[data-pm-slice]"),
    h =
      d &&
      /^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(
        d.getAttribute("data-pm-slice") || ""
      );
  if (h && h[3])
    for (let p = +h[3]; p > 0; p--) {
      let g = a.firstChild;
      for (; g && g.nodeType != 1; ) g = g.nextSibling;
      if (!g) break;
      a = g;
    }
  if (
    (l ||
      (l = (
        n.someProp("clipboardParser") ||
        n.someProp("domParser") ||
        so.fromSchema(n.state.schema)
      ).parseSlice(a, {
        preserveWhitespace: !!(u || h),
        context: i,
        ruleFromNode(g) {
          return g.nodeName == "BR" &&
            !g.nextSibling &&
            g.parentNode &&
            !cR.test(g.parentNode.nodeName)
            ? { ignore: !0 }
            : null;
        },
      })),
    h)
  )
    l = hR($0(l, +h[1], +h[2]), h[4]);
  else if (((l = ke.maxOpen(uR(l.content, i), !0)), l.openStart || l.openEnd)) {
    let p = 0,
      g = 0;
    for (
      let y = l.content.firstChild;
      p < l.openStart && !y.type.spec.isolating;
      p++, y = y.firstChild
    );
    for (
      let y = l.content.lastChild;
      g < l.openEnd && !y.type.spec.isolating;
      g++, y = y.lastChild
    );
    l = $0(l, p, g);
  }
  return (
    n.someProp("transformPasted", (p) => {
      l = p(l, n);
    }),
    l
  );
}
const cR =
  /^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;
function uR(n, e) {
  if (n.childCount < 2) return n;
  for (let t = e.depth; t >= 0; t--) {
    let i = e.node(t).contentMatchAt(e.index(t)),
      o,
      a = [];
    if (
      (n.forEach((l) => {
        if (!a) return;
        let u = i.findWrapping(l.type),
          d;
        if (!u) return (a = null);
        if ((d = a.length && o.length && Tv(u, o, l, a[a.length - 1], 0)))
          a[a.length - 1] = d;
        else {
          a.length && (a[a.length - 1] = Mv(a[a.length - 1], o.length));
          let h = Ov(l, u);
          a.push(h), (i = i.matchType(h.type)), (o = u);
        }
      }),
      a)
    )
      return he.from(a);
  }
  return n;
}
function Ov(n, e, t = 0) {
  for (let r = e.length - 1; r >= t; r--) n = e[r].create(null, he.from(n));
  return n;
}
function Tv(n, e, t, r, i) {
  if (i < n.length && i < e.length && n[i] == e[i]) {
    let o = Tv(n, e, t, r.lastChild, i + 1);
    if (o) return r.copy(r.content.replaceChild(r.childCount - 1, o));
    if (
      r
        .contentMatchAt(r.childCount)
        .matchType(i == n.length - 1 ? t.type : n[i + 1])
    )
      return r.copy(r.content.append(he.from(Ov(t, n, i + 1))));
  }
}
function Mv(n, e) {
  if (e == 0) return n;
  let t = n.content.replaceChild(n.childCount - 1, Mv(n.lastChild, e - 1)),
    r = n.contentMatchAt(n.childCount).fillBefore(he.empty, !0);
  return n.copy(t.append(r));
}
function lf(n, e, t, r, i, o) {
  let a = e < 0 ? n.firstChild : n.lastChild,
    l = a.content;
  return (
    n.childCount > 1 && (o = 0),
    i < r - 1 && (l = lf(l, e, t, r, i + 1, o)),
    i >= t &&
      (l =
        e < 0
          ? a
              .contentMatchAt(0)
              .fillBefore(l, o <= i)
              .append(l)
          : l.append(a.contentMatchAt(a.childCount).fillBefore(he.empty, !0))),
    n.replaceChild(e < 0 ? 0 : n.childCount - 1, a.copy(l))
  );
}
function $0(n, e, t) {
  return (
    e < n.openStart &&
      (n = new ke(
        lf(n.content, -1, e, n.openStart, 0, n.openEnd),
        e,
        n.openEnd
      )),
    t < n.openEnd &&
      (n = new ke(lf(n.content, 1, t, n.openEnd, 0, 0), n.openStart, t)),
    n
  );
}
const Rv = {
  thead: ["table"],
  tbody: ["table"],
  tfoot: ["table"],
  caption: ["table"],
  colgroup: ["table"],
  col: ["table", "colgroup"],
  tr: ["table", "tbody"],
  td: ["table", "tbody", "tr"],
  th: ["table", "tbody", "tr"],
};
let j0 = null;
function Dv() {
  return j0 || (j0 = document.implementation.createHTMLDocument("title"));
}
function dR(n) {
  let e = /^(\s*<meta [^>]*>)*/.exec(n);
  e && (n = n.slice(e[0].length));
  let t = Dv().createElement("div"),
    r = /<([a-z][^>\s]+)/i.exec(n),
    i;
  if (
    ((i = r && Rv[r[1].toLowerCase()]) &&
      (n =
        i.map((o) => "<" + o + ">").join("") +
        n +
        i
          .map((o) => "</" + o + ">")
          .reverse()
          .join("")),
    (t.innerHTML = n),
    i)
  )
    for (let o = 0; o < i.length; o++) t = t.querySelector(i[o]) || t;
  return t;
}
function fR(n) {
  let e = n.querySelectorAll(
    on ? "span:not([class]):not([style])" : "span.Apple-converted-space"
  );
  for (let t = 0; t < e.length; t++) {
    let r = e[t];
    r.childNodes.length == 1 &&
      r.textContent == "" &&
      r.parentNode &&
      r.parentNode.replaceChild(n.ownerDocument.createTextNode(" "), r);
  }
}
function hR(n, e) {
  if (!n.size) return n;
  let t = n.content.firstChild.type.schema,
    r;
  try {
    r = JSON.parse(e);
  } catch {
    return n;
  }
  let { content: i, openStart: o, openEnd: a } = n;
  for (let l = r.length - 2; l >= 0; l -= 2) {
    let u = t.nodes[r[l]];
    if (!u || u.hasRequiredAttrs()) break;
    (i = he.from(u.create(r[l + 1], i))), o++, a++;
  }
  return new ke(i, o, a);
}
const gn = {},
  mn = {},
  pR = { touchstart: !0, touchmove: !0 };
class gR {
  constructor() {
    (this.shiftKey = !1),
      (this.mouseDown = null),
      (this.lastKeyCode = null),
      (this.lastKeyCodeTime = 0),
      (this.lastClick = { time: 0, x: 0, y: 0, type: "" }),
      (this.lastSelectionOrigin = null),
      (this.lastSelectionTime = 0),
      (this.lastIOSEnter = 0),
      (this.lastIOSEnterFallbackTimeout = -1),
      (this.lastFocus = 0),
      (this.lastTouch = 0),
      (this.lastAndroidDelete = 0),
      (this.composing = !1),
      (this.composingTimeout = -1),
      (this.compositionNodes = []),
      (this.compositionEndedAt = -2e8),
      (this.compositionID = 1),
      (this.compositionPendingChanges = 0),
      (this.domChangeCount = 0),
      (this.eventHandlers = Object.create(null)),
      (this.hideSelectionGuard = null);
  }
}
function mR(n) {
  for (let e in gn) {
    let t = gn[e];
    n.dom.addEventListener(
      e,
      (n.input.eventHandlers[e] = (r) => {
        vR(n, r) && !jf(n, r) && (n.editable || !(r.type in mn)) && t(n, r);
      }),
      pR[e] ? { passive: !0 } : void 0
    );
  }
  pn && n.dom.addEventListener("input", () => null), cf(n);
}
function Si(n, e) {
  (n.input.lastSelectionOrigin = e), (n.input.lastSelectionTime = Date.now());
}
function yR(n) {
  n.domObserver.stop();
  for (let e in n.input.eventHandlers)
    n.dom.removeEventListener(e, n.input.eventHandlers[e]);
  clearTimeout(n.input.composingTimeout),
    clearTimeout(n.input.lastIOSEnterFallbackTimeout);
}
function cf(n) {
  n.someProp("handleDOMEvents", (e) => {
    for (let t in e)
      n.input.eventHandlers[t] ||
        n.dom.addEventListener(t, (n.input.eventHandlers[t] = (r) => jf(n, r)));
  });
}
function jf(n, e) {
  return n.someProp("handleDOMEvents", (t) => {
    let r = t[e.type];
    return r ? r(n, e) || e.defaultPrevented : !1;
  });
}
function vR(n, e) {
  if (!e.bubbles) return !0;
  if (e.defaultPrevented) return !1;
  for (let t = e.target; t != n.dom; t = t.parentNode)
    if (!t || t.nodeType == 11 || (t.pmViewDesc && t.pmViewDesc.stopEvent(e)))
      return !1;
  return !0;
}
function wR(n, e) {
  !jf(n, e) &&
    gn[e.type] &&
    (n.editable || !(e.type in mn)) &&
    gn[e.type](n, e);
}
mn.keydown = (n, e) => {
  let t = e;
  if (
    ((n.input.shiftKey = t.keyCode == 16 || t.shiftKey),
    !Av(n, t) &&
      ((n.input.lastKeyCode = t.keyCode),
      (n.input.lastKeyCodeTime = Date.now()),
      !(hr && on && t.keyCode == 13)))
  )
    if (
      (t.keyCode != 229 && n.domObserver.forceFlush(),
      Ko && t.keyCode == 13 && !t.ctrlKey && !t.altKey && !t.metaKey)
    ) {
      let r = Date.now();
      (n.input.lastIOSEnter = r),
        (n.input.lastIOSEnterFallbackTimeout = setTimeout(() => {
          n.input.lastIOSEnter == r &&
            (n.someProp("handleKeyDown", (i) => i(n, Xi(13, "Enter"))),
            (n.input.lastIOSEnter = 0));
        }, 200));
    } else
      n.someProp("handleKeyDown", (r) => r(n, t)) || lR(n, t)
        ? t.preventDefault()
        : Si(n, "key");
};
mn.keyup = (n, e) => {
  e.keyCode == 16 && (n.input.shiftKey = !1);
};
mn.keypress = (n, e) => {
  let t = e;
  if (Av(n, t) || !t.charCode || (t.ctrlKey && !t.altKey) || (Qn && t.metaKey))
    return;
  if (n.someProp("handleKeyPress", (i) => i(n, t))) {
    t.preventDefault();
    return;
  }
  let r = n.state.selection;
  if (!(r instanceof nt) || !r.$from.sameParent(r.$to)) {
    let i = String.fromCharCode(t.charCode);
    !/[\r\n]/.test(i) &&
      !n.someProp("handleTextInput", (o) => o(n, r.$from.pos, r.$to.pos, i)) &&
      n.dispatch(n.state.tr.insertText(i).scrollIntoView()),
      t.preventDefault();
  }
};
function Cc(n) {
  return { left: n.clientX, top: n.clientY };
}
function bR(n, e) {
  let t = e.x - n.clientX,
    r = e.y - n.clientY;
  return t * t + r * r < 100;
}
function Uf(n, e, t, r, i) {
  if (r == -1) return !1;
  let o = n.state.doc.resolve(r);
  for (let a = o.depth + 1; a > 0; a--)
    if (
      n.someProp(e, (l) =>
        a > o.depth
          ? l(n, t, o.nodeAfter, o.before(a), i, !0)
          : l(n, t, o.node(a), o.before(a), i, !1)
      )
    )
      return !0;
  return !1;
}
function jo(n, e, t) {
  n.focused || n.focus();
  let r = n.state.tr.setSelection(e);
  t == "pointer" && r.setMeta("pointer", !0), n.dispatch(r);
}
function xR(n, e) {
  if (e == -1) return !1;
  let t = n.state.doc.resolve(e),
    r = t.nodeAfter;
  return r && r.isAtom && We.isSelectable(r)
    ? (jo(n, new We(t), "pointer"), !0)
    : !1;
}
function SR(n, e) {
  if (e == -1) return !1;
  let t = n.state.selection,
    r,
    i;
  t instanceof We && (r = t.node);
  let o = n.state.doc.resolve(e);
  for (let a = o.depth + 1; a > 0; a--) {
    let l = a > o.depth ? o.nodeAfter : o.node(a);
    if (We.isSelectable(l)) {
      r &&
      t.$from.depth > 0 &&
      a >= t.$from.depth &&
      o.before(t.$from.depth + 1) == t.$from.pos
        ? (i = o.before(t.$from.depth))
        : (i = o.before(a));
      break;
    }
  }
  return i != null ? (jo(n, We.create(n.state.doc, i), "pointer"), !0) : !1;
}
function CR(n, e, t, r, i) {
  return (
    Uf(n, "handleClickOn", e, t, r) ||
    n.someProp("handleClick", (o) => o(n, e, r)) ||
    (i ? SR(n, t) : xR(n, t))
  );
}
function ER(n, e, t, r) {
  return (
    Uf(n, "handleDoubleClickOn", e, t, r) ||
    n.someProp("handleDoubleClick", (i) => i(n, e, r))
  );
}
function kR(n, e, t, r) {
  return (
    Uf(n, "handleTripleClickOn", e, t, r) ||
    n.someProp("handleTripleClick", (i) => i(n, e, r)) ||
    OR(n, t, r)
  );
}
function OR(n, e, t) {
  if (t.button != 0) return !1;
  let r = n.state.doc;
  if (e == -1)
    return r.inlineContent
      ? (jo(n, nt.create(r, 0, r.content.size), "pointer"), !0)
      : !1;
  let i = r.resolve(e);
  for (let o = i.depth + 1; o > 0; o--) {
    let a = o > i.depth ? i.nodeAfter : i.node(o),
      l = i.before(o);
    if (a.inlineContent)
      jo(n, nt.create(r, l + 1, l + 1 + a.content.size), "pointer");
    else if (We.isSelectable(a)) jo(n, We.create(r, l), "pointer");
    else continue;
    return !0;
  }
}
function Zf(n) {
  return Ul(n);
}
const Iv = Qn ? "metaKey" : "ctrlKey";
gn.mousedown = (n, e) => {
  let t = e;
  n.input.shiftKey = t.shiftKey;
  let r = Zf(n),
    i = Date.now(),
    o = "singleClick";
  i - n.input.lastClick.time < 500 &&
    bR(t, n.input.lastClick) &&
    !t[Iv] &&
    (n.input.lastClick.type == "singleClick"
      ? (o = "doubleClick")
      : n.input.lastClick.type == "doubleClick" && (o = "tripleClick")),
    (n.input.lastClick = { time: i, x: t.clientX, y: t.clientY, type: o });
  let a = n.posAtCoords(Cc(t));
  a &&
    (o == "singleClick"
      ? (n.input.mouseDown && n.input.mouseDown.done(),
        (n.input.mouseDown = new TR(n, a, t, !!r)))
      : (o == "doubleClick" ? ER : kR)(n, a.pos, a.inside, t)
      ? t.preventDefault()
      : Si(n, "pointer"));
};
class TR {
  constructor(e, t, r, i) {
    (this.view = e),
      (this.pos = t),
      (this.event = r),
      (this.flushed = i),
      (this.delayedSelectionSync = !1),
      (this.mightDrag = null),
      (this.startDoc = e.state.doc),
      (this.selectNode = !!r[Iv]),
      (this.allowDefault = r.shiftKey);
    let o, a;
    if (t.inside > -1) (o = e.state.doc.nodeAt(t.inside)), (a = t.inside);
    else {
      let h = e.state.doc.resolve(t.pos);
      (o = h.parent), (a = h.depth ? h.before() : 0);
    }
    const l = i ? null : r.target,
      u = l ? e.docView.nearestDesc(l, !0) : null;
    this.target = u ? u.dom : null;
    let { selection: d } = e.state;
    ((r.button == 0 &&
      o.type.spec.draggable &&
      o.type.spec.selectable !== !1) ||
      (d instanceof We && d.from <= a && d.to > a)) &&
      (this.mightDrag = {
        node: o,
        pos: a,
        addAttr: !!(this.target && !this.target.draggable),
        setUneditable: !!(
          this.target &&
          gr &&
          !this.target.hasAttribute("contentEditable")
        ),
      }),
      this.target &&
        this.mightDrag &&
        (this.mightDrag.addAttr || this.mightDrag.setUneditable) &&
        (this.view.domObserver.stop(),
        this.mightDrag.addAttr && (this.target.draggable = !0),
        this.mightDrag.setUneditable &&
          setTimeout(() => {
            this.view.input.mouseDown == this &&
              this.target.setAttribute("contentEditable", "false");
          }, 20),
        this.view.domObserver.start()),
      e.root.addEventListener("mouseup", (this.up = this.up.bind(this))),
      e.root.addEventListener("mousemove", (this.move = this.move.bind(this))),
      Si(e, "pointer");
  }
  done() {
    this.view.root.removeEventListener("mouseup", this.up),
      this.view.root.removeEventListener("mousemove", this.move),
      this.mightDrag &&
        this.target &&
        (this.view.domObserver.stop(),
        this.mightDrag.addAttr && this.target.removeAttribute("draggable"),
        this.mightDrag.setUneditable &&
          this.target.removeAttribute("contentEditable"),
        this.view.domObserver.start()),
      this.delayedSelectionSync && setTimeout(() => Kr(this.view)),
      (this.view.input.mouseDown = null);
  }
  up(e) {
    if ((this.done(), !this.view.dom.contains(e.target))) return;
    let t = this.pos;
    this.view.state.doc != this.startDoc && (t = this.view.posAtCoords(Cc(e))),
      this.updateAllowDefault(e),
      this.allowDefault || !t
        ? Si(this.view, "pointer")
        : CR(this.view, t.pos, t.inside, e, this.selectNode)
        ? e.preventDefault()
        : e.button == 0 &&
          (this.flushed ||
            (pn && this.mightDrag && !this.mightDrag.node.isAtom) ||
            (on &&
              !this.view.state.selection.visible &&
              Math.min(
                Math.abs(t.pos - this.view.state.selection.from),
                Math.abs(t.pos - this.view.state.selection.to)
              ) <= 2))
        ? (jo(
            this.view,
            tt.near(this.view.state.doc.resolve(t.pos)),
            "pointer"
          ),
          e.preventDefault())
        : Si(this.view, "pointer");
  }
  move(e) {
    this.updateAllowDefault(e),
      Si(this.view, "pointer"),
      e.buttons == 0 && this.done();
  }
  updateAllowDefault(e) {
    !this.allowDefault &&
      (Math.abs(this.event.x - e.clientX) > 4 ||
        Math.abs(this.event.y - e.clientY) > 4) &&
      (this.allowDefault = !0);
  }
}
gn.touchstart = (n) => {
  (n.input.lastTouch = Date.now()), Zf(n), Si(n, "pointer");
};
gn.touchmove = (n) => {
  (n.input.lastTouch = Date.now()), Si(n, "pointer");
};
gn.contextmenu = (n) => Zf(n);
function Av(n, e) {
  return n.composing
    ? !0
    : pn && Math.abs(e.timeStamp - n.input.compositionEndedAt) < 500
    ? ((n.input.compositionEndedAt = -2e8), !0)
    : !1;
}
const MR = hr ? 5e3 : -1;
mn.compositionstart = mn.compositionupdate = (n) => {
  if (!n.composing) {
    n.domObserver.flush();
    let { state: e } = n,
      t = e.selection.$from;
    if (
      e.selection.empty &&
      (e.storedMarks ||
        (!t.textOffset &&
          t.parentOffset &&
          t.nodeBefore.marks.some((r) => r.type.spec.inclusive === !1)))
    )
      (n.markCursor = n.state.storedMarks || t.marks()),
        Ul(n, !0),
        (n.markCursor = null);
    else if (
      (Ul(n),
      gr &&
        e.selection.empty &&
        t.parentOffset &&
        !t.textOffset &&
        t.nodeBefore.marks.length)
    ) {
      let r = n.domSelectionRange();
      for (
        let i = r.focusNode, o = r.focusOffset;
        i && i.nodeType == 1 && o != 0;

      ) {
        let a = o < 0 ? i.lastChild : i.childNodes[o - 1];
        if (!a) break;
        if (a.nodeType == 3) {
          n.domSelection().collapse(a, a.nodeValue.length);
          break;
        } else (i = a), (o = -1);
      }
    }
    n.input.composing = !0;
  }
  Lv(n, MR);
};
mn.compositionend = (n, e) => {
  n.composing &&
    ((n.input.composing = !1),
    (n.input.compositionEndedAt = e.timeStamp),
    (n.input.compositionPendingChanges = n.domObserver.pendingRecords().length
      ? n.input.compositionID
      : 0),
    n.input.compositionPendingChanges &&
      Promise.resolve().then(() => n.domObserver.flush()),
    n.input.compositionID++,
    Lv(n, 20));
};
function Lv(n, e) {
  clearTimeout(n.input.composingTimeout),
    e > -1 && (n.input.composingTimeout = setTimeout(() => Ul(n), e));
}
function Pv(n) {
  for (
    n.composing &&
    ((n.input.composing = !1), (n.input.compositionEndedAt = RR()));
    n.input.compositionNodes.length > 0;

  )
    n.input.compositionNodes.pop().markParentsDirty();
}
function RR() {
  let n = document.createEvent("Event");
  return n.initEvent("event", !0, !0), n.timeStamp;
}
function Ul(n, e = !1) {
  if (!(hr && n.domObserver.flushingSoon >= 0)) {
    if (
      (n.domObserver.forceFlush(), Pv(n), e || (n.docView && n.docView.dirty))
    ) {
      let t = Hf(n);
      return (
        t && !t.eq(n.state.selection)
          ? n.dispatch(n.state.tr.setSelection(t))
          : n.updateState(n.state),
        !0
      );
    }
    return !1;
  }
}
function DR(n, e) {
  if (!n.dom.parentNode) return;
  let t = n.dom.parentNode.appendChild(document.createElement("div"));
  t.appendChild(e),
    (t.style.cssText = "position: fixed; left: -10000px; top: 10px");
  let r = getSelection(),
    i = document.createRange();
  i.selectNodeContents(e),
    n.dom.blur(),
    r.removeAllRanges(),
    r.addRange(i),
    setTimeout(() => {
      t.parentNode && t.parentNode.removeChild(t), n.focus();
    }, 50);
}
const Xo = (En && Ci < 15) || (Ko && TM < 604);
gn.copy = mn.cut = (n, e) => {
  let t = e,
    r = n.state.selection,
    i = t.type == "cut";
  if (r.empty) return;
  let o = Xo ? null : t.clipboardData,
    a = r.content(),
    { dom: l, text: u } = Ev(n, a);
  o
    ? (t.preventDefault(),
      o.clearData(),
      o.setData("text/html", l.innerHTML),
      o.setData("text/plain", u))
    : DR(n, l),
    i &&
      n.dispatch(
        n.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent", "cut")
      );
};
function IR(n) {
  return n.openStart == 0 && n.openEnd == 0 && n.content.childCount == 1
    ? n.content.firstChild
    : null;
}
function AR(n, e) {
  if (!n.dom.parentNode) return;
  let t = n.input.shiftKey || n.state.selection.$from.parent.type.spec.code,
    r = n.dom.parentNode.appendChild(
      document.createElement(t ? "textarea" : "div")
    );
  t || (r.contentEditable = "true"),
    (r.style.cssText = "position: fixed; left: -10000px; top: 10px"),
    r.focus();
  let i = n.input.shiftKey && n.input.lastKeyCode != 45;
  setTimeout(() => {
    n.focus(),
      r.parentNode && r.parentNode.removeChild(r),
      t ? Ks(n, r.value, null, i, e) : Ks(n, r.textContent, r.innerHTML, i, e);
  }, 50);
}
function Ks(n, e, t, r, i) {
  let o = kv(n, e, t, r, n.state.selection.$from);
  if (n.someProp("handlePaste", (u) => u(n, i, o || ke.empty))) return !0;
  if (!o) return !1;
  let a = IR(o),
    l = a
      ? n.state.tr.replaceSelectionWith(a, r)
      : n.state.tr.replaceSelection(o);
  return (
    n.dispatch(
      l.scrollIntoView().setMeta("paste", !0).setMeta("uiEvent", "paste")
    ),
    !0
  );
}
mn.paste = (n, e) => {
  let t = e;
  if (n.composing && !hr) return;
  let r = Xo ? null : t.clipboardData,
    i = n.input.shiftKey && n.input.lastKeyCode != 45;
  r && Ks(n, r.getData("text/plain"), r.getData("text/html"), i, t)
    ? t.preventDefault()
    : AR(n, t);
};
class LR {
  constructor(e, t) {
    (this.slice = e), (this.move = t);
  }
}
const _v = Qn ? "altKey" : "ctrlKey";
gn.dragstart = (n, e) => {
  let t = e,
    r = n.input.mouseDown;
  if ((r && r.done(), !t.dataTransfer)) return;
  let i = n.state.selection,
    o = i.empty ? null : n.posAtCoords(Cc(t));
  if (!(o && o.pos >= i.from && o.pos <= (i instanceof We ? i.to - 1 : i.to))) {
    if (r && r.mightDrag)
      n.dispatch(
        n.state.tr.setSelection(We.create(n.state.doc, r.mightDrag.pos))
      );
    else if (t.target && t.target.nodeType == 1) {
      let d = n.docView.nearestDesc(t.target, !0);
      d &&
        d.node.type.spec.draggable &&
        d != n.docView &&
        n.dispatch(
          n.state.tr.setSelection(We.create(n.state.doc, d.posBefore))
        );
    }
  }
  let a = n.state.selection.content(),
    { dom: l, text: u } = Ev(n, a);
  t.dataTransfer.clearData(),
    t.dataTransfer.setData(Xo ? "Text" : "text/html", l.innerHTML),
    (t.dataTransfer.effectAllowed = "copyMove"),
    Xo || t.dataTransfer.setData("text/plain", u),
    (n.dragging = new LR(a, !t[_v]));
};
gn.dragend = (n) => {
  let e = n.dragging;
  window.setTimeout(() => {
    n.dragging == e && (n.dragging = null);
  }, 50);
};
mn.dragover = mn.dragenter = (n, e) => e.preventDefault();
mn.drop = (n, e) => {
  let t = e,
    r = n.dragging;
  if (((n.dragging = null), !t.dataTransfer)) return;
  let i = n.posAtCoords(Cc(t));
  if (!i) return;
  let o = n.state.doc.resolve(i.pos),
    a = r && r.slice;
  a
    ? n.someProp("transformPasted", (m) => {
        a = m(a, n);
      })
    : (a = kv(
        n,
        t.dataTransfer.getData(Xo ? "Text" : "text/plain"),
        Xo ? null : t.dataTransfer.getData("text/html"),
        !1,
        o
      ));
  let l = !!(r && !t[_v]);
  if (n.someProp("handleDrop", (m) => m(n, t, a || ke.empty, l))) {
    t.preventDefault();
    return;
  }
  if (!a) return;
  t.preventDefault();
  let u = a ? _T(n.state.doc, o.pos, a) : o.pos;
  u == null && (u = o.pos);
  let d = n.state.tr;
  l && d.deleteSelection();
  let h = d.mapping.map(u),
    p = a.openStart == 0 && a.openEnd == 0 && a.content.childCount == 1,
    g = d.doc;
  if (
    (p
      ? d.replaceRangeWith(h, h, a.content.firstChild)
      : d.replaceRange(h, h, a),
    d.doc.eq(g))
  )
    return;
  let y = d.doc.resolve(h);
  if (
    p &&
    We.isSelectable(a.content.firstChild) &&
    y.nodeAfter &&
    y.nodeAfter.sameMarkup(a.content.firstChild)
  )
    d.setSelection(new We(y));
  else {
    let m = d.mapping.map(u);
    d.mapping.maps[d.mapping.maps.length - 1].forEach((w, b, E, R) => (m = R)),
      d.setSelection($f(n, y, d.doc.resolve(m)));
  }
  n.focus(), n.dispatch(d.setMeta("uiEvent", "drop"));
};
gn.focus = (n) => {
  (n.input.lastFocus = Date.now()),
    n.focused ||
      (n.domObserver.stop(),
      n.dom.classList.add("ProseMirror-focused"),
      n.domObserver.start(),
      (n.focused = !0),
      setTimeout(() => {
        n.docView &&
          n.hasFocus() &&
          !n.domObserver.currentSelection.eq(n.domSelectionRange()) &&
          Kr(n);
      }, 20));
};
gn.blur = (n, e) => {
  let t = e;
  n.focused &&
    (n.domObserver.stop(),
    n.dom.classList.remove("ProseMirror-focused"),
    n.domObserver.start(),
    t.relatedTarget &&
      n.dom.contains(t.relatedTarget) &&
      n.domObserver.currentSelection.clear(),
    (n.focused = !1));
};
gn.beforeinput = (n, e) => {
  if (on && hr && e.inputType == "deleteContentBackward") {
    n.domObserver.flushSoon();
    let { domChangeCount: r } = n.input;
    setTimeout(() => {
      if (
        n.input.domChangeCount != r ||
        (n.dom.blur(),
        n.focus(),
        n.someProp("handleKeyDown", (o) => o(n, Xi(8, "Backspace"))))
      )
        return;
      let { $cursor: i } = n.state.selection;
      i &&
        i.pos > 0 &&
        n.dispatch(n.state.tr.delete(i.pos - 1, i.pos).scrollIntoView());
    }, 50);
  }
};
for (let n in mn) gn[n] = mn[n];
function Xs(n, e) {
  if (n == e) return !0;
  for (let t in n) if (n[t] !== e[t]) return !1;
  for (let t in e) if (!(t in n)) return !1;
  return !0;
}
class Zl {
  constructor(e, t) {
    (this.toDOM = e), (this.spec = t || ro), (this.side = this.spec.side || 0);
  }
  map(e, t, r, i) {
    let { pos: o, deleted: a } = e.mapResult(
      t.from + i,
      this.side < 0 ? -1 : 1
    );
    return a ? null : new tr(o - r, o - r, this);
  }
  valid() {
    return !0;
  }
  eq(e) {
    return (
      this == e ||
      (e instanceof Zl &&
        ((this.spec.key && this.spec.key == e.spec.key) ||
          (this.toDOM == e.toDOM && Xs(this.spec, e.spec))))
    );
  }
  destroy(e) {
    this.spec.destroy && this.spec.destroy(e);
  }
}
class ki {
  constructor(e, t) {
    (this.attrs = e), (this.spec = t || ro);
  }
  map(e, t, r, i) {
    let o = e.map(t.from + i, this.spec.inclusiveStart ? -1 : 1) - r,
      a = e.map(t.to + i, this.spec.inclusiveEnd ? 1 : -1) - r;
    return o >= a ? null : new tr(o, a, this);
  }
  valid(e, t) {
    return t.from < t.to;
  }
  eq(e) {
    return (
      this == e ||
      (e instanceof ki && Xs(this.attrs, e.attrs) && Xs(this.spec, e.spec))
    );
  }
  static is(e) {
    return e.type instanceof ki;
  }
  destroy() {}
}
class Yf {
  constructor(e, t) {
    (this.attrs = e), (this.spec = t || ro);
  }
  map(e, t, r, i) {
    let o = e.mapResult(t.from + i, 1);
    if (o.deleted) return null;
    let a = e.mapResult(t.to + i, -1);
    return a.deleted || a.pos <= o.pos
      ? null
      : new tr(o.pos - r, a.pos - r, this);
  }
  valid(e, t) {
    let { index: r, offset: i } = e.content.findIndex(t.from),
      o;
    return i == t.from && !(o = e.child(r)).isText && i + o.nodeSize == t.to;
  }
  eq(e) {
    return (
      this == e ||
      (e instanceof Yf && Xs(this.attrs, e.attrs) && Xs(this.spec, e.spec))
    );
  }
  destroy() {}
}
class tr {
  constructor(e, t, r) {
    (this.from = e), (this.to = t), (this.type = r);
  }
  copy(e, t) {
    return new tr(e, t, this.type);
  }
  eq(e, t = 0) {
    return (
      this.type.eq(e.type) && this.from + t == e.from && this.to + t == e.to
    );
  }
  map(e, t, r) {
    return this.type.map(e, this, t, r);
  }
  static widget(e, t, r) {
    return new tr(e, e, new Zl(t, r));
  }
  static inline(e, t, r, i) {
    return new tr(e, t, new ki(r, i));
  }
  static node(e, t, r, i) {
    return new tr(e, t, new Yf(r, i));
  }
  get spec() {
    return this.type.spec;
  }
  get inline() {
    return this.type instanceof ki;
  }
  get widget() {
    return this.type instanceof Zl;
  }
}
const zo = [],
  ro = {};
class _t {
  constructor(e, t) {
    (this.local = e.length ? e : zo), (this.children = t.length ? t : zo);
  }
  static create(e, t) {
    return t.length ? Yl(t, e, 0, ro) : en;
  }
  find(e, t, r) {
    let i = [];
    return this.findInner(e ?? 0, t ?? 1e9, i, 0, r), i;
  }
  findInner(e, t, r, i, o) {
    for (let a = 0; a < this.local.length; a++) {
      let l = this.local[a];
      l.from <= t &&
        l.to >= e &&
        (!o || o(l.spec)) &&
        r.push(l.copy(l.from + i, l.to + i));
    }
    for (let a = 0; a < this.children.length; a += 3)
      if (this.children[a] < t && this.children[a + 1] > e) {
        let l = this.children[a] + 1;
        this.children[a + 2].findInner(e - l, t - l, r, i + l, o);
      }
  }
  map(e, t, r) {
    return this == en || e.maps.length == 0
      ? this
      : this.mapInner(e, t, 0, 0, r || ro);
  }
  mapInner(e, t, r, i, o) {
    let a;
    for (let l = 0; l < this.local.length; l++) {
      let u = this.local[l].map(e, r, i);
      u && u.type.valid(t, u)
        ? (a || (a = [])).push(u)
        : o.onRemove && o.onRemove(this.local[l].spec);
    }
    return this.children.length
      ? PR(this.children, a || [], e, t, r, i, o)
      : a
      ? new _t(a.sort(io), zo)
      : en;
  }
  add(e, t) {
    return t.length
      ? this == en
        ? _t.create(e, t)
        : this.addInner(e, t, 0)
      : this;
  }
  addInner(e, t, r) {
    let i,
      o = 0;
    e.forEach((l, u) => {
      let d = u + r,
        h;
      if ((h = zv(t, l, d))) {
        for (i || (i = this.children.slice()); o < i.length && i[o] < u; )
          o += 3;
        i[o] == u
          ? (i[o + 2] = i[o + 2].addInner(l, h, d + 1))
          : i.splice(o, 0, u, u + l.nodeSize, Yl(h, l, d + 1, ro)),
          (o += 3);
      }
    });
    let a = Nv(o ? Bv(t) : t, -r);
    for (let l = 0; l < a.length; l++)
      a[l].type.valid(e, a[l]) || a.splice(l--, 1);
    return new _t(
      a.length ? this.local.concat(a).sort(io) : this.local,
      i || this.children
    );
  }
  remove(e) {
    return e.length == 0 || this == en ? this : this.removeInner(e, 0);
  }
  removeInner(e, t) {
    let r = this.children,
      i = this.local;
    for (let o = 0; o < r.length; o += 3) {
      let a,
        l = r[o] + t,
        u = r[o + 1] + t;
      for (let h = 0, p; h < e.length; h++)
        (p = e[h]) &&
          p.from > l &&
          p.to < u &&
          ((e[h] = null), (a || (a = [])).push(p));
      if (!a) continue;
      r == this.children && (r = this.children.slice());
      let d = r[o + 2].removeInner(a, l + 1);
      d != en ? (r[o + 2] = d) : (r.splice(o, 3), (o -= 3));
    }
    if (i.length) {
      for (let o = 0, a; o < e.length; o++)
        if ((a = e[o]))
          for (let l = 0; l < i.length; l++)
            i[l].eq(a, t) &&
              (i == this.local && (i = this.local.slice()), i.splice(l--, 1));
    }
    return r == this.children && i == this.local
      ? this
      : i.length || r.length
      ? new _t(i, r)
      : en;
  }
  forChild(e, t) {
    if (this == en) return this;
    if (t.isLeaf) return _t.empty;
    let r, i;
    for (let l = 0; l < this.children.length; l += 3)
      if (this.children[l] >= e) {
        this.children[l] == e && (r = this.children[l + 2]);
        break;
      }
    let o = e + 1,
      a = o + t.content.size;
    for (let l = 0; l < this.local.length; l++) {
      let u = this.local[l];
      if (u.from < a && u.to > o && u.type instanceof ki) {
        let d = Math.max(o, u.from) - o,
          h = Math.min(a, u.to) - o;
        d < h && (i || (i = [])).push(u.copy(d, h));
      }
    }
    if (i) {
      let l = new _t(i.sort(io), zo);
      return r ? new wi([l, r]) : l;
    }
    return r || en;
  }
  eq(e) {
    if (this == e) return !0;
    if (
      !(e instanceof _t) ||
      this.local.length != e.local.length ||
      this.children.length != e.children.length
    )
      return !1;
    for (let t = 0; t < this.local.length; t++)
      if (!this.local[t].eq(e.local[t])) return !1;
    for (let t = 0; t < this.children.length; t += 3)
      if (
        this.children[t] != e.children[t] ||
        this.children[t + 1] != e.children[t + 1] ||
        !this.children[t + 2].eq(e.children[t + 2])
      )
        return !1;
    return !0;
  }
  locals(e) {
    return qf(this.localsInner(e));
  }
  localsInner(e) {
    if (this == en) return zo;
    if (e.inlineContent || !this.local.some(ki.is)) return this.local;
    let t = [];
    for (let r = 0; r < this.local.length; r++)
      this.local[r].type instanceof ki || t.push(this.local[r]);
    return t;
  }
}
_t.empty = new _t([], []);
_t.removeOverlap = qf;
const en = _t.empty;
class wi {
  constructor(e) {
    this.members = e;
  }
  map(e, t) {
    const r = this.members.map((i) => i.map(e, t, ro));
    return wi.from(r);
  }
  forChild(e, t) {
    if (t.isLeaf) return _t.empty;
    let r = [];
    for (let i = 0; i < this.members.length; i++) {
      let o = this.members[i].forChild(e, t);
      o != en && (o instanceof wi ? (r = r.concat(o.members)) : r.push(o));
    }
    return wi.from(r);
  }
  eq(e) {
    if (!(e instanceof wi) || e.members.length != this.members.length)
      return !1;
    for (let t = 0; t < this.members.length; t++)
      if (!this.members[t].eq(e.members[t])) return !1;
    return !0;
  }
  locals(e) {
    let t,
      r = !0;
    for (let i = 0; i < this.members.length; i++) {
      let o = this.members[i].localsInner(e);
      if (o.length)
        if (!t) t = o;
        else {
          r && ((t = t.slice()), (r = !1));
          for (let a = 0; a < o.length; a++) t.push(o[a]);
        }
    }
    return t ? qf(r ? t : t.sort(io)) : zo;
  }
  static from(e) {
    switch (e.length) {
      case 0:
        return en;
      case 1:
        return e[0];
      default:
        return new wi(
          e.every((t) => t instanceof _t)
            ? e
            : e.reduce((t, r) => t.concat(r instanceof _t ? r : r.members), [])
        );
    }
  }
}
function PR(n, e, t, r, i, o, a) {
  let l = n.slice();
  for (let d = 0, h = o; d < t.maps.length; d++) {
    let p = 0;
    t.maps[d].forEach((g, y, m, w) => {
      let b = w - m - (y - g);
      for (let E = 0; E < l.length; E += 3) {
        let R = l[E + 1];
        if (R < 0 || g > R + h - p) continue;
        let O = l[E] + h - p;
        y >= O
          ? (l[E + 1] = g <= O ? -2 : -1)
          : m >= i && b && ((l[E] += b), (l[E + 1] += b));
      }
      p += b;
    }),
      (h = t.maps[d].map(h, -1));
  }
  let u = !1;
  for (let d = 0; d < l.length; d += 3)
    if (l[d + 1] < 0) {
      if (l[d + 1] == -2) {
        (u = !0), (l[d + 1] = -1);
        continue;
      }
      let h = t.map(n[d] + o),
        p = h - i;
      if (p < 0 || p >= r.content.size) {
        u = !0;
        continue;
      }
      let g = t.map(n[d + 1] + o, -1),
        y = g - i,
        { index: m, offset: w } = r.content.findIndex(p),
        b = r.maybeChild(m);
      if (b && w == p && w + b.nodeSize == y) {
        let E = l[d + 2].mapInner(t, b, h + 1, n[d] + o + 1, a);
        E != en
          ? ((l[d] = p), (l[d + 1] = y), (l[d + 2] = E))
          : ((l[d + 1] = -2), (u = !0));
      } else u = !0;
    }
  if (u) {
    let d = _R(l, n, e, t, i, o, a),
      h = Yl(d, r, 0, a);
    e = h.local;
    for (let p = 0; p < l.length; p += 3)
      l[p + 1] < 0 && (l.splice(p, 3), (p -= 3));
    for (let p = 0, g = 0; p < h.children.length; p += 3) {
      let y = h.children[p];
      for (; g < l.length && l[g] < y; ) g += 3;
      l.splice(g, 0, h.children[p], h.children[p + 1], h.children[p + 2]);
    }
  }
  return new _t(e.sort(io), l);
}
function Nv(n, e) {
  if (!e || !n.length) return n;
  let t = [];
  for (let r = 0; r < n.length; r++) {
    let i = n[r];
    t.push(new tr(i.from + e, i.to + e, i.type));
  }
  return t;
}
function _R(n, e, t, r, i, o, a) {
  function l(u, d) {
    for (let h = 0; h < u.local.length; h++) {
      let p = u.local[h].map(r, i, d);
      p ? t.push(p) : a.onRemove && a.onRemove(u.local[h].spec);
    }
    for (let h = 0; h < u.children.length; h += 3)
      l(u.children[h + 2], u.children[h] + d + 1);
  }
  for (let u = 0; u < n.length; u += 3)
    n[u + 1] == -1 && l(n[u + 2], e[u] + o + 1);
  return t;
}
function zv(n, e, t) {
  if (e.isLeaf) return null;
  let r = t + e.nodeSize,
    i = null;
  for (let o = 0, a; o < n.length; o++)
    (a = n[o]) &&
      a.from > t &&
      a.to < r &&
      ((i || (i = [])).push(a), (n[o] = null));
  return i;
}
function Bv(n) {
  let e = [];
  for (let t = 0; t < n.length; t++) n[t] != null && e.push(n[t]);
  return e;
}
function Yl(n, e, t, r) {
  let i = [],
    o = !1;
  e.forEach((l, u) => {
    let d = zv(n, l, u + t);
    if (d) {
      o = !0;
      let h = Yl(d, l, t + u + 1, r);
      h != en && i.push(u, u + l.nodeSize, h);
    }
  });
  let a = Nv(o ? Bv(n) : n, -t).sort(io);
  for (let l = 0; l < a.length; l++)
    a[l].type.valid(e, a[l]) ||
      (r.onRemove && r.onRemove(a[l].spec), a.splice(l--, 1));
  return a.length || i.length ? new _t(a, i) : en;
}
function io(n, e) {
  return n.from - e.from || n.to - e.to;
}
function qf(n) {
  let e = n;
  for (let t = 0; t < e.length - 1; t++) {
    let r = e[t];
    if (r.from != r.to)
      for (let i = t + 1; i < e.length; i++) {
        let o = e[i];
        if (o.from == r.from) {
          o.to != r.to &&
            (e == n && (e = n.slice()),
            (e[i] = o.copy(o.from, r.to)),
            U0(e, i + 1, o.copy(r.to, o.to)));
          continue;
        } else {
          o.from < r.to &&
            (e == n && (e = n.slice()),
            (e[t] = r.copy(r.from, o.from)),
            U0(e, i, r.copy(o.from, r.to)));
          break;
        }
      }
  }
  return e;
}
function U0(n, e, t) {
  for (; e < n.length && io(t, n[e]) > 0; ) e++;
  n.splice(e, 0, t);
}
function ud(n) {
  let e = [];
  return (
    n.someProp("decorations", (t) => {
      let r = t(n.state);
      r && r != en && e.push(r);
    }),
    n.cursorWrapper && e.push(_t.create(n.state.doc, [n.cursorWrapper.deco])),
    wi.from(e)
  );
}
const NR = {
    childList: !0,
    characterData: !0,
    characterDataOldValue: !0,
    attributes: !0,
    attributeOldValue: !0,
    subtree: !0,
  },
  zR = En && Ci <= 11;
class BR {
  constructor() {
    (this.anchorNode = null),
      (this.anchorOffset = 0),
      (this.focusNode = null),
      (this.focusOffset = 0);
  }
  set(e) {
    (this.anchorNode = e.anchorNode),
      (this.anchorOffset = e.anchorOffset),
      (this.focusNode = e.focusNode),
      (this.focusOffset = e.focusOffset);
  }
  clear() {
    this.anchorNode = this.focusNode = null;
  }
  eq(e) {
    return (
      e.anchorNode == this.anchorNode &&
      e.anchorOffset == this.anchorOffset &&
      e.focusNode == this.focusNode &&
      e.focusOffset == this.focusOffset
    );
  }
}
class FR {
  constructor(e, t) {
    (this.view = e),
      (this.handleDOMChange = t),
      (this.queue = []),
      (this.flushingSoon = -1),
      (this.observer = null),
      (this.currentSelection = new BR()),
      (this.onCharData = null),
      (this.suppressingSelectionUpdates = !1),
      (this.observer =
        window.MutationObserver &&
        new window.MutationObserver((r) => {
          for (let i = 0; i < r.length; i++) this.queue.push(r[i]);
          En &&
          Ci <= 11 &&
          r.some(
            (i) =>
              (i.type == "childList" && i.removedNodes.length) ||
              (i.type == "characterData" &&
                i.oldValue.length > i.target.nodeValue.length)
          )
            ? this.flushSoon()
            : this.flush();
        })),
      zR &&
        (this.onCharData = (r) => {
          this.queue.push({
            target: r.target,
            type: "characterData",
            oldValue: r.prevValue,
          }),
            this.flushSoon();
        }),
      (this.onSelectionChange = this.onSelectionChange.bind(this));
  }
  flushSoon() {
    this.flushingSoon < 0 &&
      (this.flushingSoon = window.setTimeout(() => {
        (this.flushingSoon = -1), this.flush();
      }, 20));
  }
  forceFlush() {
    this.flushingSoon > -1 &&
      (window.clearTimeout(this.flushingSoon),
      (this.flushingSoon = -1),
      this.flush());
  }
  start() {
    this.observer &&
      (this.observer.takeRecords(), this.observer.observe(this.view.dom, NR)),
      this.onCharData &&
        this.view.dom.addEventListener(
          "DOMCharacterDataModified",
          this.onCharData
        ),
      this.connectSelection();
  }
  stop() {
    if (this.observer) {
      let e = this.observer.takeRecords();
      if (e.length) {
        for (let t = 0; t < e.length; t++) this.queue.push(e[t]);
        window.setTimeout(() => this.flush(), 20);
      }
      this.observer.disconnect();
    }
    this.onCharData &&
      this.view.dom.removeEventListener(
        "DOMCharacterDataModified",
        this.onCharData
      ),
      this.disconnectSelection();
  }
  connectSelection() {
    this.view.dom.ownerDocument.addEventListener(
      "selectionchange",
      this.onSelectionChange
    );
  }
  disconnectSelection() {
    this.view.dom.ownerDocument.removeEventListener(
      "selectionchange",
      this.onSelectionChange
    );
  }
  suppressSelectionUpdates() {
    (this.suppressingSelectionUpdates = !0),
      setTimeout(() => (this.suppressingSelectionUpdates = !1), 50);
  }
  onSelectionChange() {
    if (z0(this.view)) {
      if (this.suppressingSelectionUpdates) return Kr(this.view);
      if (En && Ci <= 11 && !this.view.state.selection.empty) {
        let e = this.view.domSelectionRange();
        if (
          e.focusNode &&
          ao(e.focusNode, e.focusOffset, e.anchorNode, e.anchorOffset)
        )
          return this.flushSoon();
      }
      this.flush();
    }
  }
  setCurSelection() {
    this.currentSelection.set(this.view.domSelectionRange());
  }
  ignoreSelectionChange(e) {
    if (!e.focusNode) return !0;
    let t = new Set(),
      r;
    for (let o = e.focusNode; o; o = Gs(o)) t.add(o);
    for (let o = e.anchorNode; o; o = Gs(o))
      if (t.has(o)) {
        r = o;
        break;
      }
    let i = r && this.view.docView.nearestDesc(r);
    if (
      i &&
      i.ignoreMutation({
        type: "selection",
        target: r.nodeType == 3 ? r.parentNode : r,
      })
    )
      return this.setCurSelection(), !0;
  }
  pendingRecords() {
    if (this.observer)
      for (let e of this.observer.takeRecords()) this.queue.push(e);
    return this.queue;
  }
  flush() {
    let { view: e } = this;
    if (!e.docView || this.flushingSoon > -1) return;
    let t = this.pendingRecords();
    t.length && (this.queue = []);
    let r = e.domSelectionRange(),
      i =
        !this.suppressingSelectionUpdates &&
        !this.currentSelection.eq(r) &&
        z0(e) &&
        !this.ignoreSelectionChange(r),
      o = -1,
      a = -1,
      l = !1,
      u = [];
    if (e.editable)
      for (let h = 0; h < t.length; h++) {
        let p = this.registerMutation(t[h], u);
        p &&
          ((o = o < 0 ? p.from : Math.min(p.from, o)),
          (a = a < 0 ? p.to : Math.max(p.to, a)),
          p.typeOver && (l = !0));
      }
    if (gr && u.length > 1) {
      let h = u.filter((p) => p.nodeName == "BR");
      if (h.length == 2) {
        let p = h[0],
          g = h[1];
        p.parentNode && p.parentNode.parentNode == g.parentNode
          ? g.remove()
          : p.remove();
      }
    }
    let d = null;
    o < 0 &&
    i &&
    e.input.lastFocus > Date.now() - 200 &&
    Math.max(e.input.lastTouch, e.input.lastClick.time) < Date.now() - 300 &&
    xc(r) &&
    (d = Hf(e)) &&
    d.eq(tt.near(e.state.doc.resolve(0), 1))
      ? ((e.input.lastFocus = 0),
        Kr(e),
        this.currentSelection.set(r),
        e.scrollToSelection())
      : (o > -1 || i) &&
        (o > -1 && (e.docView.markDirty(o, a), WR(e)),
        this.handleDOMChange(o, a, l, u),
        e.docView && e.docView.dirty
          ? e.updateState(e.state)
          : this.currentSelection.eq(r) || Kr(e),
        this.currentSelection.set(r));
  }
  registerMutation(e, t) {
    if (t.indexOf(e.target) > -1) return null;
    let r = this.view.docView.nearestDesc(e.target);
    if (
      (e.type == "attributes" &&
        (r == this.view.docView ||
          e.attributeName == "contenteditable" ||
          (e.attributeName == "style" &&
            !e.oldValue &&
            !e.target.getAttribute("style")))) ||
      !r ||
      r.ignoreMutation(e)
    )
      return null;
    if (e.type == "childList") {
      for (let h = 0; h < e.addedNodes.length; h++) t.push(e.addedNodes[h]);
      if (
        r.contentDOM &&
        r.contentDOM != r.dom &&
        !r.contentDOM.contains(e.target)
      )
        return { from: r.posBefore, to: r.posAfter };
      let i = e.previousSibling,
        o = e.nextSibling;
      if (En && Ci <= 11 && e.addedNodes.length)
        for (let h = 0; h < e.addedNodes.length; h++) {
          let { previousSibling: p, nextSibling: g } = e.addedNodes[h];
          (!p || Array.prototype.indexOf.call(e.addedNodes, p) < 0) && (i = p),
            (!g || Array.prototype.indexOf.call(e.addedNodes, g) < 0) &&
              (o = g);
        }
      let a = i && i.parentNode == e.target ? hn(i) + 1 : 0,
        l = r.localPosFromDOM(e.target, a, -1),
        u = o && o.parentNode == e.target ? hn(o) : e.target.childNodes.length,
        d = r.localPosFromDOM(e.target, u, 1);
      return { from: l, to: d };
    } else
      return e.type == "attributes"
        ? { from: r.posAtStart - r.border, to: r.posAtEnd + r.border }
        : {
            from: r.posAtStart,
            to: r.posAtEnd,
            typeOver: e.target.nodeValue == e.oldValue,
          };
  }
}
let Z0 = new WeakMap(),
  Y0 = !1;
function WR(n) {
  if (
    !Z0.has(n) &&
    (Z0.set(n, null),
    ["normal", "nowrap", "pre-line"].indexOf(
      getComputedStyle(n.dom).whiteSpace
    ) !== -1)
  ) {
    if (((n.requiresGeckoHackNode = gr), Y0)) return;
    console.warn(
      "ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."
    ),
      (Y0 = !0);
  }
}
function VR(n) {
  let e;
  function t(u) {
    u.preventDefault(),
      u.stopImmediatePropagation(),
      (e = u.getTargetRanges()[0]);
  }
  n.dom.addEventListener("beforeinput", t, !0),
    document.execCommand("indent"),
    n.dom.removeEventListener("beforeinput", t, !0);
  let r = e.startContainer,
    i = e.startOffset,
    o = e.endContainer,
    a = e.endOffset,
    l = n.domAtPos(n.state.selection.anchor);
  return (
    ao(l.node, l.offset, o, a) && ([r, i, o, a] = [o, a, r, i]),
    { anchorNode: r, anchorOffset: i, focusNode: o, focusOffset: a }
  );
}
function HR(n, e, t) {
  let {
      node: r,
      fromOffset: i,
      toOffset: o,
      from: a,
      to: l,
    } = n.docView.parseRange(e, t),
    u = n.domSelectionRange(),
    d,
    h = u.anchorNode;
  if (
    (h &&
      n.dom.contains(h.nodeType == 1 ? h : h.parentNode) &&
      ((d = [{ node: h, offset: u.anchorOffset }]),
      xc(u) || d.push({ node: u.focusNode, offset: u.focusOffset })),
    on && n.input.lastKeyCode === 8)
  )
    for (let b = o; b > i; b--) {
      let E = r.childNodes[b - 1],
        R = E.pmViewDesc;
      if (E.nodeName == "BR" && !R) {
        o = b;
        break;
      }
      if (!R || R.size) break;
    }
  let p = n.state.doc,
    g = n.someProp("domParser") || so.fromSchema(n.state.schema),
    y = p.resolve(a),
    m = null,
    w = g.parse(r, {
      topNode: y.parent,
      topMatch: y.parent.contentMatchAt(y.index()),
      topOpen: !0,
      from: i,
      to: o,
      preserveWhitespace: y.parent.type.whitespace == "pre" ? "full" : !0,
      findPositions: d,
      ruleFromNode: $R,
      context: y,
    });
  if (d && d[0].pos != null) {
    let b = d[0].pos,
      E = d[1] && d[1].pos;
    E == null && (E = b), (m = { anchor: b + a, head: E + a });
  }
  return { doc: w, sel: m, from: a, to: l };
}
function $R(n) {
  let e = n.pmViewDesc;
  if (e) return e.parseRule();
  if (n.nodeName == "BR" && n.parentNode) {
    if (pn && /^(ul|ol)$/i.test(n.parentNode.nodeName)) {
      let t = document.createElement("div");
      return t.appendChild(document.createElement("li")), { skip: t };
    } else if (
      n.parentNode.lastChild == n ||
      (pn && /^(tr|table)$/i.test(n.parentNode.nodeName))
    )
      return { ignore: !0 };
  } else if (n.nodeName == "IMG" && n.getAttribute("mark-placeholder"))
    return { ignore: !0 };
  return null;
}
const jR =
  /^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;
function UR(n, e, t, r, i) {
  let o =
    n.input.compositionPendingChanges ||
    (n.composing ? n.input.compositionID : 0);
  if (((n.input.compositionPendingChanges = 0), e < 0)) {
    let X =
        n.input.lastSelectionTime > Date.now() - 50
          ? n.input.lastSelectionOrigin
          : null,
      j = Hf(n, X);
    if (j && !n.state.selection.eq(j)) {
      if (
        on &&
        hr &&
        n.input.lastKeyCode === 13 &&
        Date.now() - 100 < n.input.lastKeyCodeTime &&
        n.someProp("handleKeyDown", (G) => G(n, Xi(13, "Enter")))
      )
        return;
      let W = n.state.tr.setSelection(j);
      X == "pointer"
        ? W.setMeta("pointer", !0)
        : X == "key" && W.scrollIntoView(),
        o && W.setMeta("composition", o),
        n.dispatch(W);
    }
    return;
  }
  let a = n.state.doc.resolve(e),
    l = a.sharedDepth(t);
  (e = a.before(l + 1)), (t = n.state.doc.resolve(t).after(l + 1));
  let u = n.state.selection,
    d = HR(n, e, t),
    h = n.state.doc,
    p = h.slice(d.from, d.to),
    g,
    y;
  n.input.lastKeyCode === 8 && Date.now() - 100 < n.input.lastKeyCodeTime
    ? ((g = n.state.selection.to), (y = "end"))
    : ((g = n.state.selection.from), (y = "start")),
    (n.input.lastKeyCode = null);
  let m = qR(p.content, d.doc.content, d.from, g, y);
  if (
    ((Ko && n.input.lastIOSEnter > Date.now() - 225) || hr) &&
    i.some((X) => X.nodeType == 1 && !jR.test(X.nodeName)) &&
    (!m || m.endA >= m.endB) &&
    n.someProp("handleKeyDown", (X) => X(n, Xi(13, "Enter")))
  ) {
    n.input.lastIOSEnter = 0;
    return;
  }
  if (!m)
    if (
      r &&
      u instanceof nt &&
      !u.empty &&
      u.$head.sameParent(u.$anchor) &&
      !n.composing &&
      !(d.sel && d.sel.anchor != d.sel.head)
    )
      m = { start: u.from, endA: u.to, endB: u.to };
    else {
      if (d.sel) {
        let X = q0(n, n.state.doc, d.sel);
        if (X && !X.eq(n.state.selection)) {
          let j = n.state.tr.setSelection(X);
          o && j.setMeta("composition", o), n.dispatch(j);
        }
      }
      return;
    }
  if (
    on &&
    n.cursorWrapper &&
    d.sel &&
    d.sel.anchor == n.cursorWrapper.deco.from &&
    d.sel.head == d.sel.anchor
  ) {
    let X = m.endB - m.start;
    d.sel = { anchor: d.sel.anchor + X, head: d.sel.anchor + X };
  }
  n.input.domChangeCount++,
    n.state.selection.from < n.state.selection.to &&
      m.start == m.endB &&
      n.state.selection instanceof nt &&
      (m.start > n.state.selection.from &&
      m.start <= n.state.selection.from + 2 &&
      n.state.selection.from >= d.from
        ? (m.start = n.state.selection.from)
        : m.endA < n.state.selection.to &&
          m.endA >= n.state.selection.to - 2 &&
          n.state.selection.to <= d.to &&
          ((m.endB += n.state.selection.to - m.endA),
          (m.endA = n.state.selection.to))),
    En &&
      Ci <= 11 &&
      m.endB == m.start + 1 &&
      m.endA == m.start &&
      m.start > d.from &&
      d.doc.textBetween(m.start - d.from - 1, m.start - d.from + 1) == " " &&
      (m.start--, m.endA--, m.endB--);
  let w = d.doc.resolveNoCache(m.start - d.from),
    b = d.doc.resolveNoCache(m.endB - d.from),
    E = h.resolve(m.start),
    R = w.sameParent(b) && w.parent.inlineContent && E.end() >= m.endA,
    O;
  if (
    ((Ko &&
      n.input.lastIOSEnter > Date.now() - 225 &&
      (!R || i.some((X) => X.nodeName == "DIV" || X.nodeName == "P"))) ||
      (!R &&
        w.pos < d.doc.content.size &&
        !w.sameParent(b) &&
        (O = tt.findFrom(d.doc.resolve(w.pos + 1), 1, !0)) &&
        O.head == b.pos)) &&
    n.someProp("handleKeyDown", (X) => X(n, Xi(13, "Enter")))
  ) {
    n.input.lastIOSEnter = 0;
    return;
  }
  if (
    n.state.selection.anchor > m.start &&
    YR(h, m.start, m.endA, w, b) &&
    n.someProp("handleKeyDown", (X) => X(n, Xi(8, "Backspace")))
  ) {
    hr && on && n.domObserver.suppressSelectionUpdates();
    return;
  }
  on && hr && m.endB == m.start && (n.input.lastAndroidDelete = Date.now()),
    hr &&
      !R &&
      w.start() != b.start() &&
      b.parentOffset == 0 &&
      w.depth == b.depth &&
      d.sel &&
      d.sel.anchor == d.sel.head &&
      d.sel.head == m.endA &&
      ((m.endB -= 2),
      (b = d.doc.resolveNoCache(m.endB - d.from)),
      setTimeout(() => {
        n.someProp("handleKeyDown", function (X) {
          return X(n, Xi(13, "Enter"));
        });
      }, 20));
  let I = m.start,
    M = m.endA,
    D,
    N,
    Y;
  if (R) {
    if (w.pos == b.pos)
      En &&
        Ci <= 11 &&
        w.parentOffset == 0 &&
        (n.domObserver.suppressSelectionUpdates(), setTimeout(() => Kr(n), 20)),
        (D = n.state.tr.delete(I, M)),
        (N = h.resolve(m.start).marksAcross(h.resolve(m.endA)));
    else if (
      m.endA == m.endB &&
      (Y = ZR(
        w.parent.content.cut(w.parentOffset, b.parentOffset),
        E.parent.content.cut(E.parentOffset, m.endA - E.start())
      ))
    )
      (D = n.state.tr),
        Y.type == "add" ? D.addMark(I, M, Y.mark) : D.removeMark(I, M, Y.mark);
    else if (
      w.parent.child(w.index()).isText &&
      w.index() == b.index() - (b.textOffset ? 0 : 1)
    ) {
      let X = w.parent.textBetween(w.parentOffset, b.parentOffset);
      if (n.someProp("handleTextInput", (j) => j(n, I, M, X))) return;
      D = n.state.tr.insertText(X, I, M);
    }
  }
  if (
    (D ||
      (D = n.state.tr.replace(
        I,
        M,
        d.doc.slice(m.start - d.from, m.endB - d.from)
      )),
    d.sel)
  ) {
    let X = q0(n, D.doc, d.sel);
    X &&
      !(
        (on &&
          hr &&
          n.composing &&
          X.empty &&
          (m.start != m.endB || n.input.lastAndroidDelete < Date.now() - 100) &&
          (X.head == I || X.head == D.mapping.map(M) - 1)) ||
        (En && X.empty && X.head == I)
      ) &&
      D.setSelection(X);
  }
  N && D.ensureMarks(N),
    o && D.setMeta("composition", o),
    n.dispatch(D.scrollIntoView());
}
function q0(n, e, t) {
  return Math.max(t.anchor, t.head) > e.content.size
    ? null
    : $f(n, e.resolve(t.anchor), e.resolve(t.head));
}
function ZR(n, e) {
  let t = n.firstChild.marks,
    r = e.firstChild.marks,
    i = t,
    o = r,
    a,
    l,
    u;
  for (let h = 0; h < r.length; h++) i = r[h].removeFromSet(i);
  for (let h = 0; h < t.length; h++) o = t[h].removeFromSet(o);
  if (i.length == 1 && o.length == 0)
    (l = i[0]), (a = "add"), (u = (h) => h.mark(l.addToSet(h.marks)));
  else if (i.length == 0 && o.length == 1)
    (l = o[0]), (a = "remove"), (u = (h) => h.mark(l.removeFromSet(h.marks)));
  else return null;
  let d = [];
  for (let h = 0; h < e.childCount; h++) d.push(u(e.child(h)));
  if (he.from(d).eq(n)) return { mark: l, type: a };
}
function YR(n, e, t, r, i) {
  if (!r.parent.isTextblock || t - e <= i.pos - r.pos || dd(r, !0, !1) < i.pos)
    return !1;
  let o = n.resolve(e);
  if (o.parentOffset < o.parent.content.size || !o.parent.isTextblock)
    return !1;
  let a = n.resolve(dd(o, !0, !0));
  return !a.parent.isTextblock || a.pos > t || dd(a, !0, !1) < t
    ? !1
    : r.parent.content.cut(r.parentOffset).eq(a.parent.content);
}
function dd(n, e, t) {
  let r = n.depth,
    i = e ? n.end() : n.pos;
  for (; r > 0 && (e || n.indexAfter(r) == n.node(r).childCount); )
    r--, i++, (e = !1);
  if (t) {
    let o = n.node(r).maybeChild(n.indexAfter(r));
    for (; o && !o.isLeaf; ) (o = o.firstChild), i++;
  }
  return i;
}
function qR(n, e, t, r, i) {
  let o = n.findDiffStart(e, t);
  if (o == null) return null;
  let { a, b: l } = n.findDiffEnd(e, t + n.size, t + e.size);
  if (i == "end") {
    let u = Math.max(0, o - Math.min(a, l));
    r -= a + u - o;
  }
  if (a < o && n.size < e.size) {
    let u = r <= o && r >= a ? o - r : 0;
    (o -= u), (l = o + (l - a)), (a = o);
  } else if (l < o) {
    let u = r <= o && r >= l ? o - r : 0;
    (o -= u), (a = o + (a - l)), (l = o);
  }
  return { start: o, endA: a, endB: l };
}
class GR {
  constructor(e, t) {
    (this._root = null),
      (this.focused = !1),
      (this.trackWrites = null),
      (this.mounted = !1),
      (this.markCursor = null),
      (this.cursorWrapper = null),
      (this.lastSelectedViewDesc = void 0),
      (this.input = new gR()),
      (this.prevDirectPlugins = []),
      (this.pluginViews = []),
      (this.requiresGeckoHackNode = !1),
      (this.dragging = null),
      (this._props = t),
      (this.state = t.state),
      (this.directPlugins = t.plugins || []),
      this.directPlugins.forEach(Q0),
      (this.dispatch = this.dispatch.bind(this)),
      (this.dom = (e && e.mount) || document.createElement("div")),
      e &&
        (e.appendChild
          ? e.appendChild(this.dom)
          : typeof e == "function"
          ? e(this.dom)
          : e.mount && (this.mounted = !0)),
      (this.editable = X0(this)),
      K0(this),
      (this.nodeViews = J0(this)),
      (this.docView = I0(this.state.doc, G0(this), ud(this), this.dom, this)),
      (this.domObserver = new FR(this, (r, i, o, a) => UR(this, r, i, o, a))),
      this.domObserver.start(),
      mR(this),
      this.updatePluginViews();
  }
  get composing() {
    return this.input.composing;
  }
  get props() {
    if (this._props.state != this.state) {
      let e = this._props;
      this._props = {};
      for (let t in e) this._props[t] = e[t];
      this._props.state = this.state;
    }
    return this._props;
  }
  update(e) {
    e.handleDOMEvents != this._props.handleDOMEvents && cf(this);
    let t = this._props;
    (this._props = e),
      e.plugins && (e.plugins.forEach(Q0), (this.directPlugins = e.plugins)),
      this.updateStateInner(e.state, t);
  }
  setProps(e) {
    let t = {};
    for (let r in this._props) t[r] = this._props[r];
    t.state = this.state;
    for (let r in e) t[r] = e[r];
    this.update(t);
  }
  updateState(e) {
    this.updateStateInner(e, this._props);
  }
  updateStateInner(e, t) {
    let r = this.state,
      i = !1,
      o = !1;
    e.storedMarks && this.composing && (Pv(this), (o = !0)), (this.state = e);
    let a = r.plugins != e.plugins || this._props.plugins != t.plugins;
    if (
      a ||
      this._props.plugins != t.plugins ||
      this._props.nodeViews != t.nodeViews
    ) {
      let g = J0(this);
      XR(g, this.nodeViews) && ((this.nodeViews = g), (i = !0));
    }
    (a || t.handleDOMEvents != this._props.handleDOMEvents) && cf(this),
      (this.editable = X0(this)),
      K0(this);
    let l = ud(this),
      u = G0(this),
      d =
        r.plugins != e.plugins && !r.doc.eq(e.doc)
          ? "reset"
          : e.scrollToSelection > r.scrollToSelection
          ? "to selection"
          : "preserve",
      h = i || !this.docView.matchesNode(e.doc, u, l);
    (h || !e.selection.eq(r.selection)) && (o = !0);
    let p =
      d == "preserve" && o && this.dom.style.overflowAnchor == null && DM(this);
    if (o) {
      this.domObserver.stop();
      let g =
        h &&
        (En || on) &&
        !this.composing &&
        !r.selection.empty &&
        !e.selection.empty &&
        KR(r.selection, e.selection);
      if (h) {
        let y = on
          ? (this.trackWrites = this.domSelectionRange().focusNode)
          : null;
        (i || !this.docView.update(e.doc, u, l, this)) &&
          (this.docView.updateOuterDeco([]),
          this.docView.destroy(),
          (this.docView = I0(e.doc, u, l, this.dom, this))),
          y && !this.trackWrites && (g = !0);
      }
      g ||
      !(
        this.input.mouseDown &&
        this.domObserver.currentSelection.eq(this.domSelectionRange()) &&
        tR(this)
      )
        ? Kr(this, g)
        : (xv(this, e.selection), this.domObserver.setCurSelection()),
        this.domObserver.start();
    }
    this.updatePluginViews(r),
      d == "reset"
        ? (this.dom.scrollTop = 0)
        : d == "to selection"
        ? this.scrollToSelection()
        : p && IM(p);
  }
  scrollToSelection() {
    let e = this.domSelectionRange().focusNode;
    if (!this.someProp("handleScrollToSelection", (t) => t(this)))
      if (this.state.selection instanceof We) {
        let t = this.docView.domAfterPos(this.state.selection.from);
        t.nodeType == 1 && k0(this, t.getBoundingClientRect(), e);
      } else k0(this, this.coordsAtPos(this.state.selection.head, 1), e);
  }
  destroyPluginViews() {
    let e;
    for (; (e = this.pluginViews.pop()); ) e.destroy && e.destroy();
  }
  updatePluginViews(e) {
    if (
      !e ||
      e.plugins != this.state.plugins ||
      this.directPlugins != this.prevDirectPlugins
    ) {
      (this.prevDirectPlugins = this.directPlugins), this.destroyPluginViews();
      for (let t = 0; t < this.directPlugins.length; t++) {
        let r = this.directPlugins[t];
        r.spec.view && this.pluginViews.push(r.spec.view(this));
      }
      for (let t = 0; t < this.state.plugins.length; t++) {
        let r = this.state.plugins[t];
        r.spec.view && this.pluginViews.push(r.spec.view(this));
      }
    } else
      for (let t = 0; t < this.pluginViews.length; t++) {
        let r = this.pluginViews[t];
        r.update && r.update(this, e);
      }
  }
  someProp(e, t) {
    let r = this._props && this._props[e],
      i;
    if (r != null && (i = t ? t(r) : r)) return i;
    for (let a = 0; a < this.directPlugins.length; a++) {
      let l = this.directPlugins[a].props[e];
      if (l != null && (i = t ? t(l) : l)) return i;
    }
    let o = this.state.plugins;
    if (o)
      for (let a = 0; a < o.length; a++) {
        let l = o[a].props[e];
        if (l != null && (i = t ? t(l) : l)) return i;
      }
  }
  hasFocus() {
    if (En) {
      let e = this.root.activeElement;
      if (e == this.dom) return !0;
      if (!e || !this.dom.contains(e)) return !1;
      for (; e && this.dom != e && this.dom.contains(e); ) {
        if (e.contentEditable == "false") return !1;
        e = e.parentElement;
      }
      return !0;
    }
    return this.root.activeElement == this.dom;
  }
  focus() {
    this.domObserver.stop(),
      this.editable && AM(this.dom),
      Kr(this),
      this.domObserver.start();
  }
  get root() {
    let e = this._root;
    if (e == null) {
      for (let t = this.dom.parentNode; t; t = t.parentNode)
        if (t.nodeType == 9 || (t.nodeType == 11 && t.host))
          return (
            t.getSelection ||
              (Object.getPrototypeOf(t).getSelection = () =>
                t.ownerDocument.getSelection()),
            (this._root = t)
          );
    }
    return e || document;
  }
  updateRoot() {
    this._root = null;
  }
  posAtCoords(e) {
    return zM(this, e);
  }
  coordsAtPos(e, t = 1) {
    return hv(this, e, t);
  }
  domAtPos(e, t = 0) {
    return this.docView.domFromPos(e, t);
  }
  nodeDOM(e) {
    let t = this.docView.descAt(e);
    return t ? t.nodeDOM : null;
  }
  posAtDOM(e, t, r = -1) {
    let i = this.docView.posFromDOM(e, t, r);
    if (i == null) throw new RangeError("DOM position not inside the editor");
    return i;
  }
  endOfTextblock(e, t) {
    return HM(this, t || this.state, e);
  }
  pasteHTML(e, t) {
    return Ks(this, "", e, !1, t || new ClipboardEvent("paste"));
  }
  pasteText(e, t) {
    return Ks(this, e, null, !0, t || new ClipboardEvent("paste"));
  }
  destroy() {
    this.docView &&
      (yR(this),
      this.destroyPluginViews(),
      this.mounted
        ? (this.docView.update(this.state.doc, [], ud(this), this),
          (this.dom.textContent = ""))
        : this.dom.parentNode && this.dom.parentNode.removeChild(this.dom),
      this.docView.destroy(),
      (this.docView = null));
  }
  get isDestroyed() {
    return this.docView == null;
  }
  dispatchEvent(e) {
    return wR(this, e);
  }
  dispatch(e) {
    let t = this._props.dispatchTransaction;
    t ? t.call(this, e) : this.updateState(this.state.apply(e));
  }
  domSelectionRange() {
    return pn &&
      this.root.nodeType === 11 &&
      CM(this.dom.ownerDocument) == this.dom
      ? VR(this)
      : this.domSelection();
  }
  domSelection() {
    return this.root.getSelection();
  }
}
function G0(n) {
  let e = Object.create(null);
  return (
    (e.class = "ProseMirror"),
    (e.contenteditable = String(n.editable)),
    n.someProp("attributes", (t) => {
      if ((typeof t == "function" && (t = t(n.state)), t))
        for (let r in t)
          r == "class"
            ? (e.class += " " + t[r])
            : r == "style"
            ? (e.style = (e.style ? e.style + ";" : "") + t[r])
            : !e[r] &&
              r != "contenteditable" &&
              r != "nodeName" &&
              (e[r] = String(t[r]));
    }),
    e.translate || (e.translate = "no"),
    [tr.node(0, n.state.doc.content.size, e)]
  );
}
function K0(n) {
  if (n.markCursor) {
    let e = document.createElement("img");
    (e.className = "ProseMirror-separator"),
      e.setAttribute("mark-placeholder", "true"),
      e.setAttribute("alt", ""),
      (n.cursorWrapper = {
        dom: e,
        deco: tr.widget(n.state.selection.head, e, {
          raw: !0,
          marks: n.markCursor,
        }),
      });
  } else n.cursorWrapper = null;
}
function X0(n) {
  return !n.someProp("editable", (e) => e(n.state) === !1);
}
function KR(n, e) {
  let t = Math.min(
    n.$anchor.sharedDepth(n.head),
    e.$anchor.sharedDepth(e.head)
  );
  return n.$anchor.start(t) != e.$anchor.start(t);
}
function J0(n) {
  let e = Object.create(null);
  function t(r) {
    for (let i in r)
      Object.prototype.hasOwnProperty.call(e, i) || (e[i] = r[i]);
  }
  return n.someProp("nodeViews", t), n.someProp("markViews", t), e;
}
function XR(n, e) {
  let t = 0,
    r = 0;
  for (let i in n) {
    if (n[i] != e[i]) return !0;
    t++;
  }
  for (let i in e) r++;
  return t != r;
}
function Q0(n) {
  if (n.spec.state || n.spec.filterTransaction || n.spec.appendTransaction)
    throw new RangeError(
      "Plugins passed directly to the view must not have a state component"
    );
}
class Tt extends tt {
  constructor(e) {
    super(e, e);
  }
  map(e, t) {
    let r = e.resolve(t.map(this.head));
    return Tt.valid(r) ? new Tt(r) : tt.near(r);
  }
  content() {
    return ke.empty;
  }
  eq(e) {
    return e instanceof Tt && e.head == this.head;
  }
  toJSON() {
    return { type: "gapcursor", pos: this.head };
  }
  static fromJSON(e, t) {
    if (typeof t.pos != "number")
      throw new RangeError("Invalid input for GapCursor.fromJSON");
    return new Tt(e.resolve(t.pos));
  }
  getBookmark() {
    return new Gf(this.anchor);
  }
  static valid(e) {
    let t = e.parent;
    if (t.isTextblock || !JR(e) || !QR(e)) return !1;
    let r = t.type.spec.allowGapCursor;
    if (r != null) return r;
    let i = t.contentMatchAt(e.index()).defaultType;
    return i && i.isTextblock;
  }
  static findGapCursorFrom(e, t, r = !1) {
    e: for (;;) {
      if (!r && Tt.valid(e)) return e;
      let i = e.pos,
        o = null;
      for (let a = e.depth; ; a--) {
        let l = e.node(a);
        if (t > 0 ? e.indexAfter(a) < l.childCount : e.index(a) > 0) {
          o = l.child(t > 0 ? e.indexAfter(a) : e.index(a) - 1);
          break;
        } else if (a == 0) return null;
        i += t;
        let u = e.doc.resolve(i);
        if (Tt.valid(u)) return u;
      }
      for (;;) {
        let a = t > 0 ? o.firstChild : o.lastChild;
        if (!a) {
          if (o.isAtom && !o.isText && !We.isSelectable(o)) {
            (e = e.doc.resolve(i + o.nodeSize * t)), (r = !1);
            continue e;
          }
          break;
        }
        (o = a), (i += t);
        let l = e.doc.resolve(i);
        if (Tt.valid(l)) return l;
      }
      return null;
    }
  }
}
Tt.prototype.visible = !1;
Tt.findFrom = Tt.findGapCursorFrom;
tt.jsonID("gapcursor", Tt);
class Gf {
  constructor(e) {
    this.pos = e;
  }
  map(e) {
    return new Gf(e.map(this.pos));
  }
  resolve(e) {
    let t = e.resolve(this.pos);
    return Tt.valid(t) ? new Tt(t) : tt.near(t);
  }
}
function JR(n) {
  for (let e = n.depth; e >= 0; e--) {
    let t = n.index(e),
      r = n.node(e);
    if (t == 0) {
      if (r.type.spec.isolating) return !0;
      continue;
    }
    for (let i = r.child(t - 1); ; i = i.lastChild) {
      if (
        (i.childCount == 0 && !i.inlineContent) ||
        i.isAtom ||
        i.type.spec.isolating
      )
        return !0;
      if (i.inlineContent) return !1;
    }
  }
  return !0;
}
function QR(n) {
  for (let e = n.depth; e >= 0; e--) {
    let t = n.indexAfter(e),
      r = n.node(e);
    if (t == r.childCount) {
      if (r.type.spec.isolating) return !0;
      continue;
    }
    for (let i = r.child(t); ; i = i.firstChild) {
      if (
        (i.childCount == 0 && !i.inlineContent) ||
        i.isAtom ||
        i.type.spec.isolating
      )
        return !0;
      if (i.inlineContent) return !1;
    }
  }
  return !0;
}
function e4() {
  return new ua({
    props: {
      decorations: i4,
      createSelectionBetween(n, e, t) {
        return e.pos == t.pos && Tt.valid(t) ? new Tt(t) : null;
      },
      handleClick: n4,
      handleKeyDown: t4,
      handleDOMEvents: { beforeinput: r4 },
    },
  });
}
const t4 = bM({
  ArrowLeft: gl("horiz", -1),
  ArrowRight: gl("horiz", 1),
  ArrowUp: gl("vert", -1),
  ArrowDown: gl("vert", 1),
});
function gl(n, e) {
  const t = n == "vert" ? (e > 0 ? "down" : "up") : e > 0 ? "right" : "left";
  return function (r, i, o) {
    let a = r.selection,
      l = e > 0 ? a.$to : a.$from,
      u = a.empty;
    if (a instanceof nt) {
      if (!o.endOfTextblock(t) || l.depth == 0) return !1;
      (u = !1), (l = r.doc.resolve(e > 0 ? l.after() : l.before()));
    }
    let d = Tt.findGapCursorFrom(l, e, u);
    return d ? (i && i(r.tr.setSelection(new Tt(d))), !0) : !1;
  };
}
function n4(n, e, t) {
  if (!n || !n.editable) return !1;
  let r = n.state.doc.resolve(e);
  if (!Tt.valid(r)) return !1;
  let i = n.posAtCoords({ left: t.clientX, top: t.clientY });
  return i && i.inside > -1 && We.isSelectable(n.state.doc.nodeAt(i.inside))
    ? !1
    : (n.dispatch(n.state.tr.setSelection(new Tt(r))), !0);
}
function r4(n, e) {
  if (
    e.inputType != "insertCompositionText" ||
    !(n.state.selection instanceof Tt)
  )
    return !1;
  let { $from: t } = n.state.selection,
    r = t.parent
      .contentMatchAt(t.index())
      .findWrapping(n.state.schema.nodes.text);
  if (!r) return !1;
  let i = he.empty;
  for (let a = r.length - 1; a >= 0; a--)
    i = he.from(r[a].createAndFill(null, i));
  let o = n.state.tr.replace(t.pos, t.pos, new ke(i, 0, 0));
  return o.setSelection(nt.near(o.doc.resolve(t.pos + 1))), n.dispatch(o), !1;
}
function i4(n) {
  if (!(n.selection instanceof Tt)) return null;
  let e = document.createElement("div");
  return (
    (e.className = "ProseMirror-gapcursor"),
    _t.create(n.doc, [tr.widget(n.selection.head, e, { key: "gapcursor" })])
  );
}
var ql = 200,
  Wt = function () {};
Wt.prototype.append = function (e) {
  return e.length
    ? ((e = Wt.from(e)),
      (!this.length && e) ||
        (e.length < ql && this.leafAppend(e)) ||
        (this.length < ql && e.leafPrepend(this)) ||
        this.appendInner(e))
    : this;
};
Wt.prototype.prepend = function (e) {
  return e.length ? Wt.from(e).append(this) : this;
};
Wt.prototype.appendInner = function (e) {
  return new o4(this, e);
};
Wt.prototype.slice = function (e, t) {
  return (
    e === void 0 && (e = 0),
    t === void 0 && (t = this.length),
    e >= t
      ? Wt.empty
      : this.sliceInner(Math.max(0, e), Math.min(this.length, t))
  );
};
Wt.prototype.get = function (e) {
  if (!(e < 0 || e >= this.length)) return this.getInner(e);
};
Wt.prototype.forEach = function (e, t, r) {
  t === void 0 && (t = 0),
    r === void 0 && (r = this.length),
    t <= r
      ? this.forEachInner(e, t, r, 0)
      : this.forEachInvertedInner(e, t, r, 0);
};
Wt.prototype.map = function (e, t, r) {
  t === void 0 && (t = 0), r === void 0 && (r = this.length);
  var i = [];
  return (
    this.forEach(
      function (o, a) {
        return i.push(e(o, a));
      },
      t,
      r
    ),
    i
  );
};
Wt.from = function (e) {
  return e instanceof Wt ? e : e && e.length ? new Fv(e) : Wt.empty;
};
var Fv = (function (n) {
  function e(r) {
    n.call(this), (this.values = r);
  }
  n && (e.__proto__ = n),
    (e.prototype = Object.create(n && n.prototype)),
    (e.prototype.constructor = e);
  var t = { length: { configurable: !0 }, depth: { configurable: !0 } };
  return (
    (e.prototype.flatten = function () {
      return this.values;
    }),
    (e.prototype.sliceInner = function (i, o) {
      return i == 0 && o == this.length ? this : new e(this.values.slice(i, o));
    }),
    (e.prototype.getInner = function (i) {
      return this.values[i];
    }),
    (e.prototype.forEachInner = function (i, o, a, l) {
      for (var u = o; u < a; u++)
        if (i(this.values[u], l + u) === !1) return !1;
    }),
    (e.prototype.forEachInvertedInner = function (i, o, a, l) {
      for (var u = o - 1; u >= a; u--)
        if (i(this.values[u], l + u) === !1) return !1;
    }),
    (e.prototype.leafAppend = function (i) {
      if (this.length + i.length <= ql)
        return new e(this.values.concat(i.flatten()));
    }),
    (e.prototype.leafPrepend = function (i) {
      if (this.length + i.length <= ql)
        return new e(i.flatten().concat(this.values));
    }),
    (t.length.get = function () {
      return this.values.length;
    }),
    (t.depth.get = function () {
      return 0;
    }),
    Object.defineProperties(e.prototype, t),
    e
  );
})(Wt);
Wt.empty = new Fv([]);
var o4 = (function (n) {
  function e(t, r) {
    n.call(this),
      (this.left = t),
      (this.right = r),
      (this.length = t.length + r.length),
      (this.depth = Math.max(t.depth, r.depth) + 1);
  }
  return (
    n && (e.__proto__ = n),
    (e.prototype = Object.create(n && n.prototype)),
    (e.prototype.constructor = e),
    (e.prototype.flatten = function () {
      return this.left.flatten().concat(this.right.flatten());
    }),
    (e.prototype.getInner = function (r) {
      return r < this.left.length
        ? this.left.get(r)
        : this.right.get(r - this.left.length);
    }),
    (e.prototype.forEachInner = function (r, i, o, a) {
      var l = this.left.length;
      if (
        (i < l && this.left.forEachInner(r, i, Math.min(o, l), a) === !1) ||
        (o > l &&
          this.right.forEachInner(
            r,
            Math.max(i - l, 0),
            Math.min(this.length, o) - l,
            a + l
          ) === !1)
      )
        return !1;
    }),
    (e.prototype.forEachInvertedInner = function (r, i, o, a) {
      var l = this.left.length;
      if (
        (i > l &&
          this.right.forEachInvertedInner(
            r,
            i - l,
            Math.max(o, l) - l,
            a + l
          ) === !1) ||
        (o < l &&
          this.left.forEachInvertedInner(r, Math.min(i, l), o, a) === !1)
      )
        return !1;
    }),
    (e.prototype.sliceInner = function (r, i) {
      if (r == 0 && i == this.length) return this;
      var o = this.left.length;
      return i <= o
        ? this.left.slice(r, i)
        : r >= o
        ? this.right.slice(r - o, i - o)
        : this.left.slice(r, o).append(this.right.slice(0, i - o));
    }),
    (e.prototype.leafAppend = function (r) {
      var i = this.right.leafAppend(r);
      if (i) return new e(this.left, i);
    }),
    (e.prototype.leafPrepend = function (r) {
      var i = this.left.leafPrepend(r);
      if (i) return new e(i, this.right);
    }),
    (e.prototype.appendInner = function (r) {
      return this.left.depth >= Math.max(this.right.depth, r.depth) + 1
        ? new e(this.left, new e(this.right, r))
        : new e(this, r);
    }),
    e
  );
})(Wt);
const s4 = 500;
class pr {
  constructor(e, t) {
    (this.items = e), (this.eventCount = t);
  }
  popEvent(e, t) {
    if (this.eventCount == 0) return null;
    let r = this.items.length;
    for (; ; r--)
      if (this.items.get(r - 1).selection) {
        --r;
        break;
      }
    let i, o;
    t && ((i = this.remapping(r, this.items.length)), (o = i.maps.length));
    let a = e.tr,
      l,
      u,
      d = [],
      h = [];
    return (
      this.items.forEach(
        (p, g) => {
          if (!p.step) {
            i || ((i = this.remapping(r, g + 1)), (o = i.maps.length)),
              o--,
              h.push(p);
            return;
          }
          if (i) {
            h.push(new xr(p.map));
            let y = p.step.map(i.slice(o)),
              m;
            y &&
              a.maybeStep(y).doc &&
              ((m = a.mapping.maps[a.mapping.maps.length - 1]),
              d.push(new xr(m, void 0, void 0, d.length + h.length))),
              o--,
              m && i.appendMap(m, o);
          } else a.maybeStep(p.step);
          if (p.selection)
            return (
              (l = i ? p.selection.map(i.slice(o)) : p.selection),
              (u = new pr(
                this.items.slice(0, r).append(h.reverse().concat(d)),
                this.eventCount - 1
              )),
              !1
            );
        },
        this.items.length,
        0
      ),
      { remaining: u, transform: a, selection: l }
    );
  }
  addTransform(e, t, r, i) {
    let o = [],
      a = this.eventCount,
      l = this.items,
      u = !i && l.length ? l.get(l.length - 1) : null;
    for (let h = 0; h < e.steps.length; h++) {
      let p = e.steps[h].invert(e.docs[h]),
        g = new xr(e.mapping.maps[h], p, t),
        y;
      (y = u && u.merge(g)) &&
        ((g = y), h ? o.pop() : (l = l.slice(0, l.length - 1))),
        o.push(g),
        t && (a++, (t = void 0)),
        i || (u = g);
    }
    let d = a - r.depth;
    return d > l4 && ((l = a4(l, d)), (a -= d)), new pr(l.append(o), a);
  }
  remapping(e, t) {
    let r = new Ho();
    return (
      this.items.forEach(
        (i, o) => {
          let a =
            i.mirrorOffset != null && o - i.mirrorOffset >= e
              ? r.maps.length - i.mirrorOffset
              : void 0;
          r.appendMap(i.map, a);
        },
        e,
        t
      ),
      r
    );
  }
  addMaps(e) {
    return this.eventCount == 0
      ? this
      : new pr(this.items.append(e.map((t) => new xr(t))), this.eventCount);
  }
  rebased(e, t) {
    if (!this.eventCount) return this;
    let r = [],
      i = Math.max(0, this.items.length - t),
      o = e.mapping,
      a = e.steps.length,
      l = this.eventCount;
    this.items.forEach((g) => {
      g.selection && l--;
    }, i);
    let u = t;
    this.items.forEach((g) => {
      let y = o.getMirror(--u);
      if (y == null) return;
      a = Math.min(a, y);
      let m = o.maps[y];
      if (g.step) {
        let w = e.steps[y].invert(e.docs[y]),
          b = g.selection && g.selection.map(o.slice(u + 1, y));
        b && l++, r.push(new xr(m, w, b));
      } else r.push(new xr(m));
    }, i);
    let d = [];
    for (let g = t; g < a; g++) d.push(new xr(o.maps[g]));
    let h = this.items.slice(0, i).append(d).append(r),
      p = new pr(h, l);
    return (
      p.emptyItemCount() > s4 && (p = p.compress(this.items.length - r.length)),
      p
    );
  }
  emptyItemCount() {
    let e = 0;
    return (
      this.items.forEach((t) => {
        t.step || e++;
      }),
      e
    );
  }
  compress(e = this.items.length) {
    let t = this.remapping(0, e),
      r = t.maps.length,
      i = [],
      o = 0;
    return (
      this.items.forEach(
        (a, l) => {
          if (l >= e) i.push(a), a.selection && o++;
          else if (a.step) {
            let u = a.step.map(t.slice(r)),
              d = u && u.getMap();
            if ((r--, d && t.appendMap(d, r), u)) {
              let h = a.selection && a.selection.map(t.slice(r));
              h && o++;
              let p = new xr(d.invert(), u, h),
                g,
                y = i.length - 1;
              (g = i.length && i[y].merge(p)) ? (i[y] = g) : i.push(p);
            }
          } else a.map && r--;
        },
        this.items.length,
        0
      ),
      new pr(Wt.from(i.reverse()), o)
    );
  }
}
pr.empty = new pr(Wt.empty, 0);
function a4(n, e) {
  let t;
  return (
    n.forEach((r, i) => {
      if (r.selection && e-- == 0) return (t = i), !1;
    }),
    n.slice(t)
  );
}
class xr {
  constructor(e, t, r, i) {
    (this.map = e),
      (this.step = t),
      (this.selection = r),
      (this.mirrorOffset = i);
  }
  merge(e) {
    if (this.step && e.step && !e.selection) {
      let t = e.step.merge(this.step);
      if (t) return new xr(t.getMap().invert(), t, this.selection);
    }
  }
}
class mi {
  constructor(e, t, r, i, o) {
    (this.done = e),
      (this.undone = t),
      (this.prevRanges = r),
      (this.prevTime = i),
      (this.prevComposition = o);
  }
}
const l4 = 20;
function c4(n, e, t, r) {
  let i = t.getMeta(Oi),
    o;
  if (i) return i.historyState;
  t.getMeta(d4) && (n = new mi(n.done, n.undone, null, 0, -1));
  let a = t.getMeta("appendedTransaction");
  if (t.steps.length == 0) return n;
  if (a && a.getMeta(Oi))
    return a.getMeta(Oi).redo
      ? new mi(
          n.done.addTransform(t, void 0, r, Rl(e)),
          n.undone,
          em(t.mapping.maps[t.steps.length - 1]),
          n.prevTime,
          n.prevComposition
        )
      : new mi(
          n.done,
          n.undone.addTransform(t, void 0, r, Rl(e)),
          null,
          n.prevTime,
          n.prevComposition
        );
  if (
    t.getMeta("addToHistory") !== !1 &&
    !(a && a.getMeta("addToHistory") === !1)
  ) {
    let l = t.getMeta("composition"),
      u =
        n.prevTime == 0 ||
        (!a &&
          n.prevComposition != l &&
          (n.prevTime < (t.time || 0) - r.newGroupDelay ||
            !u4(t, n.prevRanges))),
      d = a
        ? fd(n.prevRanges, t.mapping)
        : em(t.mapping.maps[t.steps.length - 1]);
    return new mi(
      n.done.addTransform(t, u ? e.selection.getBookmark() : void 0, r, Rl(e)),
      pr.empty,
      d,
      t.time,
      l ?? n.prevComposition
    );
  } else
    return (o = t.getMeta("rebased"))
      ? new mi(
          n.done.rebased(t, o),
          n.undone.rebased(t, o),
          fd(n.prevRanges, t.mapping),
          n.prevTime,
          n.prevComposition
        )
      : new mi(
          n.done.addMaps(t.mapping.maps),
          n.undone.addMaps(t.mapping.maps),
          fd(n.prevRanges, t.mapping),
          n.prevTime,
          n.prevComposition
        );
}
function u4(n, e) {
  if (!e) return !1;
  if (!n.docChanged) return !0;
  let t = !1;
  return (
    n.mapping.maps[0].forEach((r, i) => {
      for (let o = 0; o < e.length; o += 2)
        r <= e[o + 1] && i >= e[o] && (t = !0);
    }),
    t
  );
}
function em(n) {
  let e = [];
  return n.forEach((t, r, i, o) => e.push(i, o)), e;
}
function fd(n, e) {
  if (!n) return null;
  let t = [];
  for (let r = 0; r < n.length; r += 2) {
    let i = e.map(n[r], 1),
      o = e.map(n[r + 1], -1);
    i <= o && t.push(i, o);
  }
  return t;
}
function Wv(n, e, t, r) {
  let i = Rl(e),
    o = Oi.get(e).spec.config,
    a = (r ? n.undone : n.done).popEvent(e, i);
  if (!a) return;
  let l = a.selection.resolve(a.transform.doc),
    u = (r ? n.done : n.undone).addTransform(
      a.transform,
      e.selection.getBookmark(),
      o,
      i
    ),
    d = new mi(r ? u : a.remaining, r ? a.remaining : u, null, 0, -1);
  t(
    a.transform
      .setSelection(l)
      .setMeta(Oi, { redo: r, historyState: d })
      .scrollIntoView()
  );
}
let hd = !1,
  tm = null;
function Rl(n) {
  let e = n.plugins;
  if (tm != e) {
    (hd = !1), (tm = e);
    for (let t = 0; t < e.length; t++)
      if (e[t].spec.historyPreserveItems) {
        hd = !0;
        break;
      }
  }
  return hd;
}
const Oi = new ev("history"),
  d4 = new ev("closeHistory");
function f4(n = {}) {
  return (
    (n = { depth: n.depth || 100, newGroupDelay: n.newGroupDelay || 500 }),
    new ua({
      key: Oi,
      state: {
        init() {
          return new mi(pr.empty, pr.empty, null, 0, -1);
        },
        apply(e, t, r) {
          return c4(t, r, e, n);
        },
      },
      config: n,
      props: {
        handleDOMEvents: {
          beforeinput(e, t) {
            let r = t.inputType,
              i = r == "historyUndo" ? Vv : r == "historyRedo" ? Hv : null;
            return i ? (t.preventDefault(), i(e.state, e.dispatch)) : !1;
          },
        },
      },
    })
  );
}
const Vv = (n, e) => {
    let t = Oi.getState(n);
    return !t || t.done.eventCount == 0 ? !1 : (e && Wv(t, n, e, !1), !0);
  },
  Hv = (n, e) => {
    let t = Oi.getState(n);
    return !t || t.undone.eventCount == 0 ? !1 : (e && Wv(t, n, e, !0), !0);
  };
class _i {
  constructor(e, t) {
    (this.match = e),
      (this.match = e),
      (this.handler = typeof t == "string" ? h4(t) : t);
  }
}
function h4(n) {
  return function (e, t, r, i) {
    let o = n;
    if (t[1]) {
      let a = t[0].lastIndexOf(t[1]);
      (o += t[0].slice(a + t[1].length)), (r += a);
      let l = r - i;
      l > 0 && ((o = t[0].slice(a - l, a) + o), (r = i));
    }
    return e.tr.insertText(o, r, i);
  };
}
const p4 = 500;
function g4({ rules: n }) {
  let e = new ua({
    state: {
      init() {
        return null;
      },
      apply(t, r) {
        let i = t.getMeta(this);
        return i || (t.selectionSet || t.docChanged ? null : r);
      },
    },
    props: {
      handleTextInput(t, r, i, o) {
        return nm(t, r, i, o, n, e);
      },
      handleDOMEvents: {
        compositionend: (t) => {
          setTimeout(() => {
            let { $cursor: r } = t.state.selection;
            r && nm(t, r.pos, r.pos, "", n, e);
          });
        },
      },
    },
    isInputRules: !0,
  });
  return e;
}
function nm(n, e, t, r, i, o) {
  if (n.composing) return !1;
  let a = n.state,
    l = a.doc.resolve(e);
  if (l.parent.type.spec.code) return !1;
  let u =
    l.parent.textBetween(
      Math.max(0, l.parentOffset - p4),
      l.parentOffset,
      null,
      ""
    ) + r;
  for (let d = 0; d < i.length; d++) {
    let h = i[d].match.exec(u),
      p = h && i[d].handler(a, h, e - (h[0].length - r.length), t);
    if (p)
      return (
        n.dispatch(p.setMeta(o, { transform: p, from: e, to: t, text: r })), !0
      );
  }
  return !1;
}
const m4 = (n, e) => {
    let t = n.plugins;
    for (let r = 0; r < t.length; r++) {
      let i = t[r],
        o;
      if (i.spec.isInputRules && (o = i.getState(n))) {
        if (e) {
          let a = n.tr,
            l = o.transform;
          for (let u = l.steps.length - 1; u >= 0; u--)
            a.step(l.steps[u].invert(l.docs[u]));
          if (o.text) {
            let u = a.doc.resolve(o.from).marks();
            a.replaceWith(o.from, o.to, n.schema.text(o.text, u));
          } else a.delete(o.from, o.to);
          e(a);
        }
        return !0;
      }
    }
    return !1;
  },
  y4 = new _i(/--$/, ""),
  v4 = new _i(/\.\.\.$/, ""),
  w4 = new _i(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(")$/, ""),
  b4 = new _i(/"$/, ""),
  x4 = new _i(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(')$/, ""),
  S4 = new _i(/'$/, ""),
  C4 = [w4, b4, x4, S4];
function Kf(n, e, t = null, r) {
  return new _i(n, (i, o, a, l) => {
    let u = t instanceof Function ? t(o) : t,
      d = i.tr.delete(a, l),
      h = d.doc.resolve(a),
      p = h.blockRange(),
      g = p && kT(p, e, u);
    if (!g) return null;
    d.wrap(p, g);
    let y = d.doc.resolve(a - 1).nodeBefore;
    return (
      y && y.type == e && ca(d.doc, a - 1) && (!r || r(o, y)) && d.join(a - 1),
      d
    );
  });
}
function $v(n, e, t = null) {
  return new _i(n, (r, i, o, a) => {
    let l = r.doc.resolve(o),
      u = t instanceof Function ? t(i) : t;
    return l.node(-1).canReplaceWith(l.index(-1), l.indexAfter(-1), e)
      ? r.tr.delete(o, a).setBlockType(o, o, e, u)
      : null;
  });
}
function Ec(n, e) {
  if (typeof n == "string") {
    if (!e.marks[n]) throw Error(`There is no mark type named '${n}'!`);
    return e.marks[n];
  }
  return n;
}
function E4(n, e) {
  const t = Ec(e, n.schema),
    { from: r, to: i, empty: o } = n.selection,
    a = [];
  o
    ? (n.storedMarks && a.push(...n.storedMarks),
      a.push(...n.selection.$head.marks()))
    : n.doc.nodesBetween(r, i, (u) => {
        a.push(...u.marks);
      });
  const l = a.find((u) => u.type.name === t.name);
  return l ? { ...l.attrs } : {};
}
const ha =
  (n, e = {}) =>
  (t, r) => {
    const i = t.tr.setSelection(t.selection),
      { selection: o } = i,
      { empty: a, ranges: l } = o,
      u = Ec(n, t.schema);
    if (a) {
      const d = E4(t, u);
      i.addStoredMark(u.create({ ...d, ...e }));
    } else
      l.forEach((d) => {
        const h = d.$from.pos,
          p = d.$to.pos;
        t.doc.nodesBetween(h, p, (g, y) => {
          const m = Math.max(y, h),
            w = Math.min(y + g.nodeSize, p);
          g.marks.find((E) => E.type === u)
            ? g.marks.forEach((E) => {
                u === E.type && i.addMark(m, w, u.create({ ...E.attrs, ...e }));
              })
            : i.addMark(m, w, u.create(e));
        });
      });
    return r ? (r(i), !0) : !1;
  };
function Gl(n, e) {
  const t = Object.keys(e);
  return t.length ? t.every((r) => e[r] === n[r]) : !0;
}
function uf(n, e, t = {}) {
  const { empty: r, ranges: i } = n.selection,
    o = e ? Ec(e, n.schema) : null;
  if (r)
    return !!(n.storedMarks || n.selection.$from.marks())
      .filter((p) => (o ? o.name === p.type.name : !0))
      .find((p) => Gl(p.attrs, t));
  let a = 0;
  const l = [];
  if (
    (i.forEach(({ $from: p, $to: g }) => {
      const y = p.pos,
        m = g.pos;
      n.doc.nodesBetween(y, m, (w, b) => {
        if (!w.isText && !w.marks.length) return;
        const E = Math.max(y, b),
          R = Math.min(m, b + w.nodeSize),
          O = R - E;
        (a += O), l.push(...w.marks.map((I) => ({ mark: I, from: E, to: R })));
      });
    }),
    a === 0)
  )
    return !1;
  const u = l
      .filter((p) => (o ? o.name === p.mark.type.name : !0))
      .filter((p) => Gl(p.mark.attrs, t))
      .reduce((p, g) => p + g.to - g.from, 0),
    d = l
      .filter((p) => (o ? p.mark.type !== o && p.mark.type.excludes(o) : !0))
      .reduce((p, g) => p + g.to - g.from, 0);
  return (u > 0 ? u + d : u) >= a;
}
function df(n, e, t = {}) {
  return n.find((r) => r.type === e && Gl(r.attrs, t));
}
function k4(n, e, t = {}) {
  return !!df(n, e, t);
}
function O4(n, e, t = {}) {
  if (!n || !e) return;
  let r = n.parent.childAfter(n.parentOffset);
  if (
    (n.parentOffset === r.offset &&
      r.offset !== 0 &&
      (r = n.parent.childBefore(n.parentOffset)),
    !r.node)
  )
    return;
  const i = df([...r.node.marks], e, t);
  if (!i) return;
  let o = r.index,
    a = n.start() + r.offset,
    l = o + 1,
    u = a + r.node.nodeSize;
  for (
    df([...r.node.marks], e, t);
    o > 0 && i.isInSet(n.parent.child(o - 1).marks);

  )
    (o -= 1), (a -= n.parent.child(o).nodeSize);
  for (; l < n.parent.childCount && k4([...n.parent.child(l).marks], e, t); )
    (u += n.parent.child(l).nodeSize), (l += 1);
  return { from: a, to: u };
}
const kc =
    (n, e = {}) =>
    (t, r) => {
      var p;
      const { extendEmptyMarkRange: i = !1 } = e,
        o = t.tr,
        { selection: a } = o,
        l = t.schema.mark(n),
        { $from: u, empty: d, ranges: h } = a;
      if (d && i) {
        let { from: g, to: y } = a;
        const m =
            (p = u.marks().find((b) => b.type === l.type)) == null
              ? void 0
              : p.attrs,
          w = O4(u, l.type, m);
        w && ((g = w.from), (y = w.to)), o.removeMark(g, y, l);
      } else
        h.forEach((g) => {
          o.removeMark(g.$from.pos, g.$to.pos, l);
        });
      return o.removeStoredMark(l), r ? (r(o), !0) : !1;
    },
  Xf =
    (n, e = {}, t = {}) =>
    (r, i, ...o) => {
      const a = Ec(n, r.schema);
      return uf(r, a) ? kc(a, t)(r, i, ...o) : ha(a, e)(r, i, ...o);
    },
  Kl = (...n) => Xf("bold")(...n),
  T4 = (...n) => kc("bold")(...n),
  M4 = (...n) => ha("bold")(...n),
  pd = (n, e) => {
    const t = n.tr.setSelection(n.selection),
      { $from: r, $to: i } = t.selection,
      o = r.blockRange(i);
    return o && e
      ? (e(n.tr.removeMark(o.start, o.end, n.schema.mark("bold"))), !0)
      : !1;
  },
  Xl = (...n) => Xf("italic")(...n),
  R4 = (...n) => kc("italic")(...n),
  D4 = (...n) => ha("italic")(...n),
  gd = (n, e) => {
    const { $from: t, $to: r } = n.selection,
      i = t.blockRange(r);
    if (i && e) {
      const o = n.schema.mark("bold");
      return e(n.tr.removeMark(i.start, i.end, o)), !0;
    }
    return !1;
  },
  Qt = (n) => (e, t) => {
    const r = e.tr,
      { doc: i } = r,
      { from: o, to: a } = n,
      l = nt.atStart(i).from,
      u = nt.atEnd(i).to,
      d = Math.min(Math.max(o, l), u),
      h = Math.min(Math.max(a, l), u),
      p = nt.create(i, d, h);
    return r.setSelection(p), t ? (t(r), !0) : !1;
  },
  dr = (n, e, ...t) => (
    Qt({ from: 0, to: n.doc.content.size })(n, e, ...t), !0
  ),
  I4 = (n, e) =>
    A4((t) => ({ type: t.type.schema.nodes.paragraph, attrs: t.attrs }))(n, e);
function A4(n) {
  return (e, t) => {
    const { $from: r, $to: i } = e.selection;
    if (e.selection instanceof We && e.selection.node.isBlock)
      return !r.parentOffset || !no(e.doc, r.pos)
        ? !1
        : (t && t(e.tr.split(r.pos).scrollIntoView()), !0);
    if (!r.parent.isBlock) return !1;
    const o = i.parentOffset === i.parent.content.size,
      a = e.tr;
    (e.selection instanceof nt || e.selection instanceof Cn) &&
      a.deleteSelection();
    const l =
        r.depth === 0 ? null : L4(r.node(-1).contentMatchAt(r.indexAfter(-1))),
      u = n && n(i.parent, o);
    let d = u ? [u] : o && l ? [{ type: l }] : void 0,
      h = no(a.doc, a.mapping.map(r.pos), 1, d);
    if (
      (!d &&
        !h &&
        no(a.doc, a.mapping.map(r.pos), 1, l ? [{ type: l }] : void 0) &&
        (l && (d = [{ type: l }]), (h = !0)),
      h &&
        (a.split(a.mapping.map(r.pos), 1, d),
        !o && !r.parentOffset && r.parent.type !== l))
    ) {
      const g = a.mapping.map(r.before()),
        y = a.doc.resolve(g);
      l &&
        r.node(-1).canReplaceWith(y.index(), y.index() + 1, l) &&
        a.setNodeMarkup(a.mapping.map(r.before()), l);
    }
    const p =
      e.storedMarks ||
      (e.selection.$to.parentOffset && e.selection.$from.marks());
    return p && a.ensureMarks(p), t && t(a), !0;
  };
}
function L4(n) {
  for (let e = 0; e < n.edgeCount; e++) {
    const { type: t } = n.edge(e);
    if (t.isTextblock && !t.hasRequiredAttrs()) return t;
  }
  return null;
}
function P4(n, e) {
  const t = {};
  let r;
  function i(o, a) {
    if (e) {
      const l = e[o];
      if (l === !1) return;
      l && (o = l);
    }
    t[o] = a;
  }
  if (
    (i("Mod-z", Vv),
    i("Mod-y", Hv),
    i("Mod-a", dr),
    i("Backspace", m4),
    i("Alt-ArrowUp", QT),
    i("Alt-ArrowDown", eM),
    i("Mod-BracketLeft", tM),
    i("Escape", aM),
    (r = n.marks.bold) && (i("Mod-b", Kl), i("Mod-B", Kl)),
    (r = n.marks.italic) && (i("Mod-i", Xl), i("Mod-I", Xl)),
    i("Enter", I4),
    (r = n.nodes.hard_break))
  ) {
    const o = r,
      a = bc(
        iv,
        (l, u) => (
          u && u(l.tr.replaceSelectionWith(o.create()).scrollIntoView()), !0
        )
      );
    i("Mod-Enter", a), i("Shift-Enter", a), WO && i("Ctrl-Enter", a);
  }
  return (r = n.nodes.paragraph) && i("Shift-Ctrl-0", fM(r)), t;
}
const _4 = () =>
  new ua({
    view() {
      return {
        update: function (n, e) {
          const t = n.state;
          if (!(e && e.doc.eq(t.doc) && e.selection.eq(t.selection))) {
            if (e && !e.doc.eq(t.doc)) {
              n.events.emit("update", n);
              return;
            }
            n.events.emit("selectionUpdate", n);
          }
        },
      };
    },
  });
function N4(n) {
  return Kf(/^\s*>\s$/, n);
}
function z4(n) {
  return Kf(
    /^(\d+)\.\s$/,
    n,
    (e) => ({ order: +e[1] }),
    (e, t) => t.childCount + t.attrs.order === +e[1]
  );
}
function B4(n) {
  return Kf(/^\s*([-+*])\s$/, n);
}
function F4(n) {
  return $v(/^```$/, n);
}
function W4(n, e) {
  return $v(new RegExp("^(#{1," + e + "})\\s$"), n, (t) => ({
    level: t[1].length,
  }));
}
function V4(n) {
  const e = C4.concat(v4, y4);
  let t;
  return (
    (t = n.nodes.blockquote) && e.push(N4(t)),
    (t = n.nodes.ordered_list) && e.push(z4(t)),
    (t = n.nodes.bullet_list) && e.push(B4(t)),
    (t = n.nodes.code_block) && e.push(F4(t)),
    (t = n.nodes.heading) && e.push(W4(t, 6)),
    g4({ rules: e })
  );
}
function H4(n) {
  const e = Object.create(null);
  for (const t in n) e[ae.normalizeKeyName(t)] = n[t];
  return e;
}
function rm(n) {
  return new ua({ props: { handleKeyDown: $4(n) } });
}
function $4(n) {
  const e = H4(n);
  return function (t, r) {
    r.stopPropagation();
    const i = Ff(r),
      o = e[ae.modifiers(i, r)];
    let a;
    if (o && o(t.state, t.dispatch, t)) return !0;
    if (i.length === 1 && i !== " ") {
      if (r.shiftKey) {
        const l = e[ae.modifiers(i, r, !1)];
        if (l && l(t.state, t.dispatch, t)) return !0;
      }
      if (
        (r.shiftKey || r.altKey || r.metaKey || i.charCodeAt(0) > 127) &&
        (a = Jr[r.keyCode]) &&
        a !== i
      ) {
        const l = e[ae.modifiers(a, r)];
        if (l && l(t.state, t.dispatch, t)) return !0;
      }
    }
    return !1;
  };
}
const j4 = {
    parseDOM: [
      { tag: "strong" },
      { tag: "b", getAttrs: (n) => n.style.fontWeight !== "normal" && null },
      {
        style: "font-weight",
        getAttrs: (n) => /^(bold(er)?|[5-9]\d{2,})$/.test(n) && null,
      },
    ],
    toDOM() {
      return ["strong", 0];
    },
  },
  U4 = {
    content: "listItem+",
    group: "block",
    attrs: {
      align: { default: null },
      style: { default: "list-style-type: disc;padding-left: 1.7em;margin:0;" },
    },
    parseDOM: [{ tag: "ul" }],
    toDOM(n) {
      return ["ul", n.attrs, 0];
    },
  },
  Z4 = {
    parseDOM: [{ tag: "i" }, { tag: "em" }, { style: "font-style=italic" }],
    toDOM() {
      return ["em", 0];
    },
  },
  Y4 = {
    content: "paragraph block*",
    parseDOM: [{ tag: "li" }],
    attrs: {
      align: { default: null },
      style: { default: "display: list-item; " },
    },
    toDOM(n) {
      return ["li", n.attrs, 0];
    },
    defining: !0,
  },
  q4 = {
    attrs: {
      textAlign: { default: null },
      color: { default: null },
      fontFamily: { default: null },
      fontSize: { default: null },
      lineHeight: { default: null },
      letterSpacing: { default: null },
      textTransform: { default: null },
      marginLeft: { default: null },
      indent: { default: null },
      listType: { default: "" },
    },
    content: "inline*",
    group: "block",
    parseDOM: [{ tag: "p", getAttrs: (n) => G4(n) }],
    toDOM: (n) => K4(n),
  },
  G4 = (n) => {
    const {
        lineHeight: e,
        letterSpacing: t,
        textTransform: r,
        textAlign: i,
        fontFamily: o,
        fontSize: a,
        color: l,
      } = n.style,
      u = n.getAttribute("data-indent"),
      d = u ? parseInt(u, 10) : 0,
      h = d && n.getAttribute("data-list-type") === "ordered" ? "ordered" : "";
    return {
      textAlign: i,
      textTransform: r,
      lineHeight: e,
      letterSpacing: parseFloat(t),
      fontFamily: o.replaceAll('"', ""),
      fontSize: a,
      color: l,
      indent: d,
      listType: h,
    };
  },
  K4 = (n) => {
    const {
        textAlign: e,
        textTransform: t,
        lineHeight: r,
        letterSpacing: i,
        fontFamily: o,
        fontSize: a,
        color: l,
        indent: u,
        listType: d,
      } = n.attrs,
      h = {};
    let p = "";
    if (
      (e && e !== "left" && (p += `text-align: ${e};`),
      o && (p += `font-family: ${o};`),
      t && (p += `text-transform: ${t};`),
      a && (p += `font-size: ${a};`),
      l && (p += `color: ${l};`),
      u)
    )
      if (
        ((p += `--indent-level: ${u};`),
        (p += "display: list-item;"),
        (h["data-indent"] = String(u)),
        (h["data-list-type"] = d),
        d === "ordered")
      ) {
        p += "list-style-type: none;";
        const g = ["decimal", "lower-alpha", "lower-roman"],
          y = g[(u - 1) % g.length];
        p += `--counter-list-marker: ${y};`;
      } else p += "list-style-type: disc;";
    return (
      (p += `line-height: ${r || 1.4};`),
      (p += `letter-spacing: ${i}em;`),
      p && (h.style = p),
      ["p", h, 0]
    );
  },
  X4 = {
    attrs: { color: { default: "" } },
    inline: !0,
    group: "inline",
    parseDOM: [{ style: "color", getAttrs: (n) => ({ color: n }) }],
    toDOM(n) {
      const { color: e } = n.attrs;
      let t = "";
      return e && (t += `color: ${e};`), ["span", { style: t }, 0];
    },
  },
  J4 = {
    parseDOM: [
      { tag: "u" },
      {
        style: "text-decoration-line",
        getAttrs: (n) => n === "underline" && null,
      },
      { style: "text-decoration", getAttrs: (n) => n === "underline" && null },
    ],
    toDOM() {
      return ["u", 0];
    },
  },
  Q4 = ["br"],
  eD = {
    doc: { content: "block+" },
    paragraph: q4,
    listItem: Y4,
    bulletList: U4,
    text: { group: "inline" },
    hard_break: {
      inline: !0,
      group: "inline",
      selectable: !1,
      parseDOM: [{ tag: "br" }],
      toDOM() {
        return Q4;
      },
    },
  },
  tD = {
    link: {
      attrs: { href: {}, title: { default: null } },
      inclusive: !1,
      parseDOM: [
        {
          tag: "a[href]",
          getAttrs(n) {
            return {
              href: n.getAttribute("href"),
              title: n.getAttribute("title"),
            };
          },
        },
      ],
      toDOM(n) {
        const { href: e, title: t } = n.attrs;
        return ["a", { href: e, title: t }, 0];
      },
    },
    italic: Z4,
    bold: j4,
    underline: J4,
    color: X4,
  },
  im = new By({ nodes: eD, marks: tD });
class nD {
  constructor() {
    this.callbacks = {};
  }
  on(e, t) {
    return (
      this.callbacks[e] || (this.callbacks[e] = []),
      this.callbacks[e].push(t),
      this
    );
  }
  emit(e, ...t) {
    const r = this.callbacks[e];
    return r && r.forEach((i) => i.apply(this, t)), this;
  }
  off(e, t) {
    const r = this.callbacks[e];
    return (
      r &&
        (t
          ? (this.callbacks[e] = r.filter((i) => i !== t))
          : delete this.callbacks[e]),
      this
    );
  }
}
const md = new By({ nodes: im.spec.nodes, marks: im.spec.marks }),
  jv = ({ content: n, ele: e = null, handleDOMEvents: t = {} }) => {
    const r = document.createElement("div");
    r.innerHTML = n;
    const i = Bo.create({
        doc: so.fromSchema(md).parse(r),
        plugins: [V4(md), rm(P4(md)), rm(pM), e4(), f4(), _4()],
      }),
      o = new GR(e, {
        attributes: { class: "lidojs-text" },
        state: i,
        handleDOMEvents: t,
      });
    return (o.events = new nD()), o;
  },
  Uv = ({
    text: n,
    boxSize: e,
    scale: t,
    fonts: r,
    colors: i,
    fontSizes: o,
    effect: a,
    rotate: l,
    position: u,
    ...d
  }) => {
    const { actions: h, id: p, pageIndex: g } = go(),
      { selectedLayerIds: y } = Vt(),
      { textEditor: m } = $e((E) => ({ textEditor: E.textEditor }));
    S.useEffect(() => {
      const E = jv({ content: n });
      E && h.setTextEditor(E);
    }, []);
    const w = S.useCallback(() => {
        y.includes(p) && h.openTextEditor();
      }, [h, p, y]),
      b = S.useMemo(
        () => (m ? m.pageIndex === g && m.layerId === p : !1),
        [p, g, m]
      );
    return x("div", {
      css: { transformOrigin: "0 0" },
      style: {
        width: e.width / t,
        height: e.height / t,
        transform: `scale(${t})`,
        opacity: b ? 0 : 1,
      },
      onDoubleClick: w,
      children: x(ee.TextContent, {
        boxSize: e,
        colors: i,
        effect: a,
        fontSizes: o,
        fonts: r,
        position: u,
        rotate: l,
        scale: t,
        text: n,
        ...d,
      }),
    });
  };
Uv.info = { name: "Text", type: "Text" };
const Zv = ({ video: n, boxSize: e, position: t, rotate: r, ...i }) => {
  const { actions: o, pageIndex: a, id: l } = go(),
    { selectedLayerIds: u } = Vt(),
    { imageEditor: d } = $e((h) => ({ imageEditor: h.imageEditor }));
  return x("div", {
    css: {
      pointerEvents: "auto",
      visibility: d && d.pageIndex === a && d.layerId === l ? "hidden" : void 0,
    },
    onDoubleClick: () =>
      u.includes(l) &&
      o.openImageEditor({ position: t, rotate: r, boxSize: e, video: n }),
    children: x(ee.VideoContent, {
      boxSize: e,
      position: t,
      rotate: r,
      video: n,
      ...i,
    }),
  });
};
Zv.info = { name: "Video", type: "Video" };
const Ds = {
    RootLayer: xy,
    ShapeLayer: Sy,
    TextLayer: Uv,
    ImageLayer: wy,
    GroupLayer: vy,
    FrameLayer: yy,
    SvgLayer: Cy,
    LineLayer: by,
    VideoLayer: Zv,
  },
  rD = (n) => {
    const e = typeof n == "string" ? "string" : n.name;
    return (() => {
      if (Ds[e]) return e;
      for (let r = 0; r < Object.keys(Ds).length; r++) {
        const i = Object.keys(Ds)[r];
        if (Ds[i] === n) return i;
      }
      return n;
    })();
  },
  ur = () => KO(),
  zn = (n) => {
    const { type: e, props: t } = iD(n);
    return {
      ...e.info,
      comp: e,
      props: t,
      locked: n.locked,
      child: n.child,
      parent: n.parent,
    };
  },
  iD = (n) => {
    const {
        type: { resolvedName: e },
        props: t,
      } = n,
      r = Ds[e];
    return S.createElement(r, t);
  },
  pa = (n, e) => {
    let t = {};
    return (
      (t[e] = {
        type: { resolvedName: rD(n[e].data.comp) },
        props: n[e].data.props,
        locked: n[e].data.locked,
        child: n[e].data.child,
        parent: n[e].data.parent,
      }),
      n[e].data.child.forEach((r) => {
        t = { ...t, ...pa(n, r) };
      }),
      t
    );
  },
  Ti = (n) => n.data.type === "Root",
  oD = (n) => n.data.parent === "ROOT",
  Jo = (n) => n.data.type === "Group",
  Qr = (n) => n.data.type === "Text",
  Mi = (n) => n.data.type === "Frame",
  Jf = (n) => n.data.type === "Svg",
  Fo = (n) => n.data.type === "Image",
  Jl = (n) => n.data.type === "Shape",
  Yv = (n) => n.data.type === "Line",
  ml = (n) => n.data.type === "Video",
  qv = () => {
    const n = S.useRef(!1);
    return (
      S.useEffect(() => {
        const e = (t) => {
          n.current = t.shiftKey;
        };
        return (
          window.addEventListener("keydown", e, { capture: !0 }),
          window.addEventListener("keyup", e, { capture: !0 }),
          () => {
            window.removeEventListener("keydown", e, { capture: !0 }),
              window.removeEventListener("keyup", e, { capture: !0 });
          }
        );
      }, []),
      n
    );
  },
  sD = ({ frameRef: n, pageListRef: e }) => {
    const t = S.useRef(null),
      r = S.useRef(null),
      i = qv(),
      [, o, a] = ae.useLinkedRef({}),
      [, l, u] = ae.useLinkedRef(),
      { selectedLayers: d, selectedLayerIds: h } = Vt(),
      {
        actions: p,
        state: g,
        hoveredLayer: y,
        controlBox: m,
        scale: w,
        hoveredPage: b,
        activePage: E,
        pageSize: R,
        layers: O,
        mainLayers: I,
        isPageLocked: M,
      } = $e((W, G) => {
        const te = parseInt(Object.keys(W.hoveredLayer)[0]),
          ne = W.hoveredLayer[te];
        return {
          scale: W.scale,
          hoveredPage: te,
          isPageLocked:
            W.pages.length > 0 && W.pages[W.activePage]
              ? W.pages[W.activePage].layers.ROOT.data.locked
              : !1,
          controlBox: W.controlBox,
          hoveredLayer: ne ? W.pages[te].layers[ne] : null,
          activePage: W.activePage,
          pageSize: G.getPageSize(),
          fontList: W.fontList,
          layers: W.pages[te] && W.pages[te].layers,
          mainLayers:
            W.pages[te] &&
            my(
              W.pages[te].layers.ROOT.data.child.map(
                (se) => W.pages[te].layers[se]
              )
            ),
        };
      }),
      D = ({ clientX: W, clientY: G }) => {
        var ce;
        const te = o(),
          ne = (ce = t.current) == null ? void 0 : ce.start,
          se = (W - ne.clientX) / w,
          oe = (G - ne.clientY) / w,
          le = { layers: {} };
        Object.entries(te).forEach(([be, Oe]) => {
          le.layers[be] = { x: Oe.position.x + se, y: Oe.position.y + oe };
        });
        const pe = l();
        return (
          pe &&
            (le.controlBox = { x: pe.position.x + se, y: pe.position.y + oe }),
          le
        );
      },
      N = Te.throttle((W) => {
        if (!t.current) return;
        const { clientX: G, clientY: te } = ae.getPosition(W);
        (t.current.last = {
          clientX: G + n.current.scrollLeft,
          clientY: te + n.current.scrollTop,
        }),
          (t.current.e = W);
        const ne = D(t.current.last),
          se = l(),
          oe =
            ne.controlBox && se && !i.current
              ? om(
                  { ...se, position: ne.controlBox },
                  Object.keys(ne.layers),
                  O,
                  w
                )
              : null;
        !i.current &&
          (t.current.last.clientX !== t.current.start.clientX ||
            t.current.last.clientY !== t.current.start.clientY) &&
          p.setGuideline({
            horizontal: (oe == null ? void 0 : oe.line.horizontal) || [],
            vertical: (oe == null ? void 0 : oe.line.vertical) || [],
          }),
          p.setDragData(!0, Object.keys(ne.layers)),
          Object.entries(ne.layers).forEach(([ce, be]) => {
            t.current &&
              p.history
                .merge()
                .setProp(t.current.pageIndex, ce, {
                  position: {
                    x: be.x + ((oe == null ? void 0 : oe.x) || 0),
                    y: be.y + ((oe == null ? void 0 : oe.y) || 0),
                  },
                });
          });
        const le = Object.keys(ne.layers),
          pe = g.pages[t.current.pageIndex].layers[le[0]];
        if (le.length === 1 && Fo(pe)) {
          const ce = I.find((be) => {
            if (be.id !== pe.id) {
              const Oe = new WebKitCSSMatrix(
                  ee.getTransformStyle({ rotate: be.data.props.rotate })
                ),
                de = e.current[E].getBoundingClientRect(),
                xe = ee.visualCorners(
                  {
                    width: be.data.props.boxSize.width * w,
                    height: be.data.props.boxSize.height * w,
                  },
                  Oe,
                  {
                    x: de.x + be.data.props.position.x * w,
                    y: de.y + be.data.props.position.y * w,
                  }
                );
              if (ee.isPointInsideBox({ x: G, y: te }, xe)) return !0;
            }
            return !1;
          });
          if (
            (r.current &&
              (p.history
                .merge()
                .setProp(t.current.pageIndex, pe.id, {
                  transparency:
                    r.current.imageLayer.data.props.image.transparency || 1,
                }),
              p.history
                .merge()
                .setProp(t.current.pageIndex, r.current.affectedFrame.id, {
                  image: r.current.affectedFrame.data.props.image
                    ? {
                        url: r.current.affectedFrame.data.props.image.url,
                        boxSize:
                          r.current.affectedFrame.data.props.image.boxSize,
                        position:
                          r.current.affectedFrame.data.props.image.position,
                        rotate: r.current.affectedFrame.data.props.image.rotate,
                      }
                    : null,
                }),
              (r.current = null)),
            ce && Mi(ce))
          ) {
            const be = pe.data.props.image,
              Oe = ce.data.props.boxSize.width / ce.data.props.boxSize.height,
              de = be.boxSize.width / be.boxSize.height;
            (r.current = {
              imageLayer: Te.cloneDeep(pe),
              affectedFrame: Te.cloneDeep(ce),
            }),
              p.history
                .merge()
                .setProp(t.current.pageIndex, pe.id, { transparency: 0.5 }),
              Oe > de
                ? p.history
                    .merge()
                    .setProp(t.current.pageIndex, ce.id, {
                      image: {
                        url: be.url,
                        thumb: be.thumb,
                        boxSize: {
                          width:
                            ce.data.props.boxSize.width / ce.data.props.scale,
                          height:
                            ce.data.props.boxSize.width /
                            ce.data.props.scale /
                            de,
                        },
                        rotate: 0,
                        position: {
                          x: 0,
                          y:
                            -(
                              ce.data.props.boxSize.width /
                                ce.data.props.scale /
                                de -
                              ce.data.props.boxSize.height / ce.data.props.scale
                            ) / 2,
                        },
                      },
                    })
                : p.history
                    .merge()
                    .setProp(t.current.pageIndex, ce.id, {
                      image: {
                        url: be.url,
                        thumb: be.thumb,
                        boxSize: {
                          width:
                            (ce.data.props.boxSize.height /
                              ce.data.props.scale) *
                            de,
                          height:
                            ce.data.props.boxSize.height / ce.data.props.scale,
                        },
                        position: {
                          x:
                            -(
                              (ce.data.props.boxSize.height /
                                ce.data.props.scale) *
                                de -
                              ce.data.props.boxSize.width / ce.data.props.scale
                            ) / 2,
                          y: 0,
                        },
                        rotate: 0,
                      },
                    });
          }
        }
        ne.controlBox &&
          se &&
          (p.setDragData(!0, le),
          p.setControlBox({
            ...se,
            position: {
              x: ne.controlBox.x + ((oe == null ? void 0 : oe.x) || 0),
              y: ne.controlBox.y + ((oe == null ? void 0 : oe.y) || 0),
            },
          }));
      }, 16),
      Y = () => {
        var te;
        if (!t.current) return;
        const { clientX: W, clientY: G } = t.current.last;
        if (
          (p.setGuideline({ vertical: [], horizontal: [] }),
          W === t.current.start.clientX && G === t.current.start.clientY)
        )
          y && p.selectLayers(b, y.id, i.current ? "add" : "replace"),
            p.history.back();
        else {
          const ne = l();
          let se = !1;
          const oe = D({ clientX: W, clientY: G }),
            le =
              oe.controlBox && ne && !i.current
                ? om(
                    { ...ne, position: oe.controlBox },
                    Object.keys(oe.layers),
                    O,
                    w
                  )
                : null;
          if (oe.controlBox && ne) {
            const pe = {
                ...ne,
                position: {
                  x: oe.controlBox.x + ((le == null ? void 0 : le.x) || 0),
                  y: oe.controlBox.y + ((le == null ? void 0 : le.y) || 0),
                },
              },
              ce = ee.boundingRect(pe.boxSize, pe.position, pe.rotate);
            (ce.x >= R.width ||
              ce.y >= R.height ||
              ce.x + ce.width < 0 ||
              ce.y + ce.height < 0) &&
              (p.deleteLayer(
                (te = t.current) == null ? void 0 : te.pageIndex,
                Object.keys(oe.layers)
              ),
              (se = !0));
          }
          !se &&
            Object.entries(oe.layers).forEach(([pe, ce]) => {
              t.current &&
                p.history
                  .merge()
                  .setProp(t.current.pageIndex, pe, {
                    position: {
                      x: ce.x + ((le == null ? void 0 : le.x) || 0),
                      y: ce.y + ((le == null ? void 0 : le.y) || 0),
                    },
                  });
            }),
            r.current &&
              (p.history
                .merge()
                .deleteLayer(t.current.pageIndex, r.current.imageLayer.id),
              (r.current = null)),
            oe.controlBox &&
              ne &&
              !se &&
              p.setControlBox({
                ...ne,
                position: {
                  x: oe.controlBox.x + ((le == null ? void 0 : le.x) || 0),
                  y: oe.controlBox.y + ((le == null ? void 0 : le.y) || 0),
                },
              });
        }
        (t.current = null),
          a({}),
          p.setDragData(!1),
          window.removeEventListener("mousemove", N),
          window.removeEventListener("mouseup", Y),
          window.removeEventListener("mouseleave", Y),
          window.removeEventListener("touchmove", N),
          window.removeEventListener("touchend", Y);
      },
      X = () => {
        p.history.new(),
          window.addEventListener("touchmove", N),
          window.addEventListener("mousemove", N),
          window.addEventListener("mouseup", Y, { once: !0 }),
          window.addEventListener("mouseleave", Y, { once: !0 }),
          window.addEventListener("touchend", Y, { once: !0 });
      };
    return (
      S.useEffect(() => {
        const W = () => {
            t.current && N(t.current.e);
          },
          G = n.current;
        return (
          G == null || G.addEventListener("scroll", W),
          () => {
            G == null || G.removeEventListener("scroll", W);
          }
        );
      }, [n, N]),
      {
        onDragStart: (W) => {
          const { clientX: G, clientY: te } = ae.getPosition(W);
          t.current = {
            start: {
              clientX: G + n.current.scrollLeft,
              clientY: te + n.current.scrollTop,
            },
            last: {
              clientX: G + n.current.scrollLeft,
              clientY: te + n.current.scrollTop,
            },
            pageIndex: E,
            e: W,
          };
          const ne = {};
          let se = !1,
            oe = !1,
            le = !1;
          if (m) {
            const pe = new WebKitCSSMatrix(
                ee.getTransformStyle({ rotate: m.rotate })
              ),
              ce = e.current[E].getBoundingClientRect(),
              be = ee.visualCorners(
                { width: m.boxSize.width * w, height: m.boxSize.height * w },
                pe,
                { x: ce.x + m.position.x * w, y: ce.y + m.position.y * w }
              );
            (se = ee.isPointInsideBox({ x: G, y: te }, be)),
              se &&
                y &&
                !h.includes(y.id) &&
                (oe = ee.rectangleInsideAnother(y.data.props, m));
          }
          if (
            ((i.current || (se && !oe)) &&
              d.forEach(
                ({
                  id: pe,
                  data: {
                    props: { position: ce, boxSize: be, rotate: Oe, scale: de },
                    locked: xe,
                    type: Pe,
                  },
                }) => {
                  xe || (le = xe),
                    (ne[pe] = Te.cloneDeep({
                      position: ce,
                      boxSize: be,
                      rotate: Oe,
                      scale: de,
                      type: Pe,
                    }));
                }
              ),
            y && (!se || (se && oe)))
          ) {
            const {
              position: pe,
              boxSize: ce,
              rotate: be,
              scale: Oe,
            } = y.data.props;
            (ne[y.id] = Te.cloneDeep({
              position: pe,
              boxSize: ce,
              rotate: be,
              scale: Oe,
              type: y.data.type,
            })),
              le || (le = y.data.locked),
              t.current && (t.current.pageIndex = b);
            const de = ee.getControlBoxSizeFromLayers(ne);
            de && u(de);
          } else m && ((le = !!d.find(({ data: { locked: pe } }) => pe)), u(m));
          a(ne),
            !le && !M
              ? (mc && p.setDragData(!0, Object.keys(ne)), X())
              : (t.current = null);
        },
      }
    );
  },
  om = (n, e, t, r) => {
    const i = { x: null, y: null, line: { horizontal: [], vertical: [] } };
    if (n && n) {
      const o = ee.boundingRect(n.boxSize, n.position, n.rotate),
        a = {
          top: o.y,
          left: o.x,
          right: o.x + o.width,
          bottom: o.y + o.height,
          centerX: o.centerX,
          centerY: o.centerY,
        };
      Object.entries(t).forEach(([l, u]) => {
        if (e.includes(l) || u.data.parent !== "ROOT") return;
        const d = ee.boundingRect(
            u.data.props.boxSize,
            u.data.props.position,
            u.data.props.rotate
          ),
          h = {
            top: d.y,
            left: d.x,
            right: d.x + d.width,
            bottom: d.y + d.height,
            centerX: d.centerX,
            centerY: d.centerY,
          },
          p = ["top", "bottom", "centerY"],
          g = ["left", "right", "centerX"];
        Object.keys(a).forEach((y) => {
          p.includes(y) &&
            p.forEach((m) => {
              sm(a[y], h[m], r) &&
                ((i.y === null || i.y < h[m] - a[y]) && (i.y = h[m] - a[y]),
                a[y] + i.y === h[m] &&
                  i.line.horizontal.push({
                    y: h[m],
                    x1: Math.min(a.left, h.left),
                    x2: Math.max(a.right, h.right),
                  }));
            }),
            g.includes(y) &&
              g.forEach((m) => {
                sm(a[y], h[m], r) &&
                  ((i.x === null || i.x < h[m] - a[y]) && (i.x = h[m] - a[y]),
                  a[y] + i.x === h[m] &&
                    i.line.vertical.push({
                      x: h[m],
                      y1: Math.min(a.top, h.top),
                      y2: Math.max(a.bottom, h.bottom),
                    }));
              });
        });
      });
    }
    return i;
  },
  aD = 4,
  sm = (n, e, t) => Math.abs(Math.round(n) - Math.round(e)) <= aD / t,
  lD = ({ frameRef: n, pageListRef: e, selectionBoxRef: t }) => {
    const [r, i] = S.useState(),
      [o, a] = ae.useLinkedRef({
        clientX: 0,
        clientY: 0,
        moveClientX: 0,
        moveClientY: 0,
        isMultipleSelect: !1,
      }),
      {
        actions: l,
        scale: u,
        isSelecting: d,
        pages: h,
      } = $e((R) => ({
        scale: R.scale,
        isSelecting: R.selectData.status,
        pages: R.pages,
      })),
      p = () =>
        h.map(({ layers: R }, O) => ({
          layers: [...R.ROOT.data.child, "ROOT"].reverse().reduce((I, M) => {
            var W, G;
            const {
              id: D,
              data: { props: N },
            } = R[M];
            if (!e.current[O]) return I;
            const Y = e.current[O].getBoundingClientRect(),
              X = new WebKitCSSMatrix(
                ee.getTransformStyle({ rotate: N.rotate })
              ),
              j = ee.visualCorners(
                { width: N.boxSize.width * u, height: N.boxSize.height * u },
                X,
                {
                  x:
                    Y.x +
                    (((W = n.current) == null ? void 0 : W.scrollLeft) || 0) +
                    N.position.x * u,
                  y:
                    Y.y +
                    (((G = n.current) == null ? void 0 : G.scrollTop) || 0) +
                    N.position.y * u,
                }
              );
            return I.push({ id: D, delta: [j.nw, j.ne, j.se, j.sw] }), I;
          }, []),
        })),
      g = S.useCallback(
        ({ clientX: R, clientY: O }, I = !1) => {
          if (t.current && n.current) {
            const M = n.current.getBoundingClientRect(),
              D = n.current.scrollTop || 0,
              N = n.current.scrollLeft || 0,
              Y = a(),
              X = Math.abs(R + N - Y.clientX),
              j = Math.abs(O + D - Y.clientY),
              W = R + N > Y.clientX ? Y.clientX : R + N,
              G = O + D > Y.clientY ? Y.clientY : O + D;
            (t.current.style.left = `${W - M.x}px`),
              (t.current.style.top = `${G - M.y}px`),
              (t.current.style.width = `${X}px`),
              (t.current.style.height = `${j}px`);
            const te = [
                { x: W, y: G },
                { x: W + X, y: G },
                { x: W + X, y: G + j },
                { x: W, y: G + j },
              ],
              ne = {};
            let se = null;
            if (
              (p().forEach(({ layers: oe }, le) => {
                var be;
                const pe = e.current[le].getBoundingClientRect();
                oe.forEach(({ id: Oe, delta: de }) => {
                  var xe, Pe;
                  ee.isIntersection(te, de) &&
                    (se === null || se === le) &&
                    Oe !== "ROOT" &&
                    ((I && se === null) || !I) &&
                    ((se = le),
                    (ne[Oe] = {
                      boxSize: {
                        width: h[se].layers[Oe].data.props.boxSize.width * u,
                        height: h[se].layers[Oe].data.props.boxSize.height * u,
                      },
                      position: {
                        x:
                          pe.x -
                          M.x +
                          (((xe = n.current) == null
                            ? void 0
                            : xe.scrollLeft) || 0) +
                          h[se].layers[Oe].data.props.position.x * u,
                        y:
                          pe.y -
                          M.y +
                          (((Pe = n.current) == null ? void 0 : Pe.scrollTop) ||
                            0) +
                          h[se].layers[Oe].data.props.position.y * u,
                      },
                      rotate: h[se].layers[Oe].data.props.rotate,
                    }));
                });
                const ce = oe.find((Oe) => Oe.id === "ROOT");
                I &&
                  ce &&
                  ee.isIntersection(te, ce.delta) &&
                  se === null &&
                  ((se = le),
                  (ne.ROOT = {
                    boxSize: {
                      width: h[se].layers.ROOT.data.props.boxSize.width * u,
                      height: h[se].layers.ROOT.data.props.boxSize.height * u,
                    },
                    position: {
                      x:
                        pe.x -
                        M.x +
                        h[se].layers.ROOT.data.props.position.x * u,
                      y:
                        pe.y -
                        M.y +
                        (((be = n.current) == null ? void 0 : be.scrollTop) ||
                          0) +
                        h[se].layers.ROOT.data.props.position.y * u,
                    },
                    rotate: h[se].layers.ROOT.data.props.rotate,
                  }));
              }),
              se !== null)
            )
              return { selectedPage: se, selectedLayers: ne };
          }
        },
        [p, a]
      ),
      y = S.useCallback(
        (R) => {
          l.setSelectData(!0);
          const { clientX: O, clientY: I } = ae.getPosition(R);
          (o.current.moveClientX = O), (o.current.moveClientY = I);
          const M = g({ clientX: O, clientY: I });
          i(M);
        },
        [g]
      ),
      m = S.useCallback(
        (R) => {
          const { clientX: O, clientY: I } = ae.getPosition(R),
            M = g(
              { clientX: O, clientY: I },
              O + n.current.scrollLeft === a().clientX &&
                I + n.current.scrollTop === a().clientY
            );
          M
            ? l.selectLayers(
                M.selectedPage,
                Object.keys(M.selectedLayers),
                a().isMultipleSelect ? "add" : "replace"
              )
            : (l.resetSelectLayer(), l.setSidebar()),
            b(),
            l.setSelectData(!1);
        },
        [g]
      ),
      w = S.useCallback(() => {
        window.addEventListener("mousemove", y),
          window.addEventListener("mouseup", m, { once: !0 });
      }, [y, m]),
      b = S.useCallback(() => {
        window.removeEventListener("mousemove", y),
          window.removeEventListener("mouseup", m);
      }, [y]),
      E = (R) => {
        const { clientX: O, clientY: I } = ae.getPosition(R);
        i(void 0),
          l.setSelectData(!0),
          (o.current.clientX = O + n.current.scrollLeft),
          (o.current.clientY = I + n.current.scrollTop),
          w();
      };
    return (
      S.useEffect(() => {
        var O;
        const R = () => {
          if (d) {
            const I = g({
              clientX: o.current.moveClientX || o.current.clientX,
              clientY: o.current.moveClientY || o.current.clientY,
            });
            I && i(I);
          }
        };
        return (
          (O = n.current) == null || O.addEventListener("scroll", R),
          () => {
            var I;
            (I = n.current) == null || I.removeEventListener("scroll", R);
          }
        );
      }, [d]),
      { tmpSelected: r, onSelectStart: E }
    );
  },
  Gv = async (n, { pageIndex: e, layerIds: t }) => {
    const r = [];
    t.forEach((i) => {
      r.push({ rootId: i, layers: pa(n.pages[e].layers, i) });
    }),
      await navigator.clipboard.writeText(JSON.stringify(r));
  },
  Qf = (n, { pageIndex: e, layerIds: t, actions: r }) => {
    const i = [];
    t.forEach((o) => {
      i.push({ rootId: o, layers: Te.cloneDeep(pa(n.pages[e].layers, o)) });
    }),
      r.addLayerTrees(
        i.map(
          (o) => (
            Object.entries(o.layers).forEach(([a]) => {
              (o.layers[a].props.position.x += 10),
                (o.layers[a].props.position.y += 10);
            }),
            o
          )
        )
      );
  },
  Kv = async ({ actions: n }) => {
    const e = await navigator.clipboard.readText();
    try {
      JSON.parse(e).forEach((r) => {
        Object.entries(r.layers).forEach(([i]) => {
          (r.layers[i].props.position.x += 10),
            (r.layers[i].props.position.y += 10);
        }),
          n.addLayerTree(r);
      });
    } catch (t) {
      console.error(t);
    }
  },
  cD = (n) => {
    const {
        actions: e,
        state: t,
        activePage: r,
        rootLayer: i,
        scale: o,
      } = $e((M) => ({
        rootLayer: M.pages[M.activePage] && M.pages[M.activePage].layers.ROOT,
        activePage: M.activePage,
        scale: M.scale,
      })),
      { selectedLayerIds: a } = Vt(),
      l = S.useCallback(async () => {
        await Kv({ actions: e }), e.hideContextMenu();
      }, [e]),
      u = S.useCallback(async () => {
        await Gv(t, { pageIndex: r, layerIds: a }), e.hideContextMenu();
      }, [e, t, r, a]),
      d = S.useCallback(() => {
        Qf(t, { pageIndex: r, layerIds: a, actions: e }), e.hideContextMenu();
      }, [t, r, a, e]),
      h = S.useCallback(() => {
        a.includes("ROOT") || e.deleteLayer(t.activePage, a);
      }, [a, t, e]),
      p =
        (i == null ? void 0 : i.data.child.findIndex((M) => a.includes(M))) ===
        0,
      g =
        (i == null
          ? void 0
          : i.data.child.findLastIndex((M) => a.includes(M))) ===
        ((i == null ? void 0 : i.data.child.length) || 0) - 1,
      y = S.useCallback(() => {
        g || e.bringForward(r, a);
      }, [e, r, g, a]),
      m = S.useCallback(() => {
        g || e.bringToFront(r, a);
      }, [e, r, g, a]),
      w = S.useCallback(() => {
        p || e.sendBackward(r, a);
      }, [e, r, p, a]),
      b = S.useCallback(() => {
        p || e.sendToBack(r, a);
      }, [e, r, p, a]),
      E = S.useCallback(() => {
        o >= 4
          ? e.setScale(5)
          : o >= 3
          ? e.setScale(4)
          : o >= 2
          ? e.setScale(3)
          : o >= 1.5
          ? e.setScale(2)
          : o >= 1.25
          ? e.setScale(1.5)
          : o >= 1
          ? e.setScale(1.25)
          : o >= 0.75
          ? e.setScale(1)
          : o >= 0.5
          ? e.setScale(0.75)
          : o >= 0.25
          ? e.setScale(0.5)
          : e.setScale(0.25);
      }, [e, o]),
      R = S.useCallback(() => {
        o <= 0.25
          ? e.setScale(0.1)
          : o <= 0.5
          ? e.setScale(0.25)
          : o <= 0.75
          ? e.setScale(0.5)
          : o <= 1
          ? e.setScale(0.75)
          : o <= 1.25
          ? e.setScale(1)
          : o <= 1.5
          ? e.setScale(1.25)
          : o <= 2
          ? e.setScale(1.5)
          : o <= 3
          ? e.setScale(2)
          : o <= 4
          ? e.setScale(3)
          : e.setScale(4);
      }, [e, o]),
      O = S.useCallback(() => {
        e.setScale(1);
      }, [e]),
      I = S.useCallback(
        async (M) => {
          const D = Ff(M),
            N = ae.modifiers(D, M),
            Y = a.length > 0;
          switch (N) {
            case ae.normalizeKeyName("Mod-a"):
              e.selectAllLayers(), M.preventDefault();
              break;
            case ae.normalizeKeyName("Mod-z"):
              e.history.undo(), M.preventDefault();
              break;
            case ae.normalizeKeyName("Mod-y"):
              e.history.redo(), M.preventDefault();
              break;
            case ae.normalizeKeyName("Mod-v"):
              await l(), M.preventDefault();
              break;
            case ae.normalizeKeyName("Mod-c"):
              Y && (await u()), M.preventDefault();
              break;
            case ae.normalizeKeyName("Mod-d"):
              Y && (await d()), M.preventDefault();
              break;
            case ae.normalizeKeyName("Mod-]"):
              Y && y(), M.preventDefault();
              break;
            case ae.normalizeKeyName("Mod-Alt-]"):
              Y && m(), M.preventDefault();
              break;
            case ae.normalizeKeyName("Mod-["):
              Y && w(), M.preventDefault();
              break;
            case ae.normalizeKeyName("Mod-Alt-["):
              Y && b(), M.preventDefault();
              break;
            case ae.normalizeKeyName("Delete"):
            case ae.normalizeKeyName("Backspace"):
              Y && h(), M.preventDefault();
              break;
            case ae.normalizeKeyName("ArrowLeft"):
              e.moveSelectedLayers("left", 1);
              break;
            case ae.normalizeKeyName("ArrowRight"):
              e.moveSelectedLayers("right", 1);
              break;
            case ae.normalizeKeyName("ArrowUp"):
              e.moveSelectedLayers("top", 1);
              break;
            case ae.normalizeKeyName("ArrowDown"):
              e.moveSelectedLayers("bottom", 1);
              break;
            case ae.normalizeKeyName("Mod-0"):
              O(), M.preventDefault();
              break;
            case ae.normalizeKeyName("Mod--"):
              R(), M.preventDefault();
              break;
            case ae.normalizeKeyName("Mod-="):
              E(), M.preventDefault();
              break;
          }
        },
        [a.length, e, l, u, d, y, m, w, b, h, O, R, E]
      );
    S.useEffect(() => {
      const M = (D) => {
        if (D.ctrlKey) {
          const N = Math.exp(-D.deltaY / 600),
            Y = Math.min(Math.max(o * N, 0.1), 5);
          e.setScale(Y), D.preventDefault(), D.stopPropagation();
        }
      };
      return (
        n == null || n.addEventListener("wheel", M, { passive: !1 }),
        () => {
          n == null || n.removeEventListener("wheel", M);
        }
      );
    }, [e, n, o]),
      S.useEffect(
        () => (
          n == null || n.addEventListener("keydown", I),
          () => {
            n == null || n.removeEventListener("keydown", I);
          }
        ),
        [n, I]
      );
  },
  uD = (n, e, t) => {
    const r = S.useRef({
        isMoving: !1,
        isZoom: !1,
        touchStart: [
          { clientX: 0, clientY: 0 },
          { clientX: 0, clientY: 0 },
        ],
        lastTouch: [
          { clientX: 0, clientY: 0 },
          { clientX: 0, clientY: 0 },
        ],
        start: { clientX: 0, clientY: 0 },
        last: { clientX: 0, clientY: 0 },
      }),
      [i, o] = S.useState({ scale: 1, x: 0, y: 0 }),
      {
        actions: a,
        scale: l,
        activePage: u,
        pageSize: d,
        isDragging: h,
        isRotating: p,
        isResizing: g,
        openImageEditor: y,
        openTextEditor: m,
        pageLength: w,
      } = $e((W, G) => ({
        scale: W.scale,
        activePage: W.activePage,
        pageSize: G.getPageSize(),
        isDragging: W.dragData.status,
        isRotating: W.rotateData.status,
        isResizing: W.resizeData.status,
        openImageEditor: !!W.imageEditor,
        openTextEditor: !!W.textEditor,
        pageLength: W.pages.length,
      })),
      b = S.useCallback(() => {
        (r.current.isZoom = !0), (r.current.isMoving = !1);
      }, []),
      E = S.useCallback(
        (W) => {
          if (n.current && r.current.isZoom && e.current) {
            const se = window.innerWidth - 32,
              oe = window.innerHeight - 70 - 72 - 16 * 2,
              { x: le, y: pe } = i,
              ce = d.width * l,
              be = d.height * l,
              Oe = (se - ce) / 2,
              de = (oe - be) / 2,
              xe = Oe === le ? 0 : le - Oe,
              Pe = de === pe ? 0 : pe - de;
            e.current[u].style.transform = ee.getTransformStyle({
              position: { x: le + xe * (W - 1), y: pe + Pe * (W - 1) },
              scale: W,
            });
          }
        },
        [u, n, e, d.height, d.width, i, l]
      ),
      R = S.useCallback(
        (W) => {
          if (n.current && r.current.isZoom && e.current) {
            r.current.isZoom = !1;
            let G = W;
            const { x: te, y: ne } = i,
              se = 70,
              oe = 72,
              le = 16,
              pe = window.innerWidth - le * 2,
              ce = window.innerHeight - se - oe - le * 2;
            let be = d.width * l * G;
            be < pe && ((G = pe / l / d.width), (be = pe));
            const Oe = d.width * l,
              de = d.height * l * G,
              xe = d.height * l,
              Pe = (pe - Oe) / 2,
              ye = (ce - xe) / 2,
              Z = (be - Oe) / 2 - (Pe === te ? 0 : te - Pe) * (G - 1),
              ue = (de - xe) / 2 - (ye === ne ? 0 : ne - ye) * (G - 1),
              K = Math.max(-(be - pe), Math.min(te - Z, 0)),
              Se = Math.max(-(de - ce / 2), Math.min(ne - ue, ce / 2));
            G > W &&
              (e.current[u].style.transform = ee.getTransformStyle({
                position: { x: K, y: Se },
                scale: 1,
              })),
              o({ scale: 1, x: K, y: Se }),
              a.setScale(Math.max(l * G));
          }
        },
        [n, e, i, d.width, d.height, l, a, u]
      ),
      O = S.useCallback(
        (W) => {
          const { touches: G } = W.nativeEvent;
          G.length === 2 &&
            ((r.current.touchStart = [G[0], G[1]]),
            (r.current.lastTouch = [G[0], G[1]]),
            b());
        },
        [b]
      ),
      I = S.useCallback(
        () =>
          Te.throttle((W) => {
            const { touches: G } = W.nativeEvent;
            if (G.length !== 2) return;
            const te = ee.distanceBetweenPoints(
                r.current.touchStart[0],
                r.current.touchStart[1]
              ),
              se = ee.distanceBetweenPoints(G[0], G[1]) / te;
            (r.current.lastTouch = [G[0], G[1]]), E(se);
          }, 16),
        [E]
      ),
      M = S.useCallback(
        (W) => {
          const { touches: G } = W.nativeEvent;
          if (r.current.isZoom) {
            const te = ee.distanceBetweenPoints(
                r.current.touchStart[0],
                r.current.touchStart[1]
              ),
              se =
                ee.distanceBetweenPoints(
                  r.current.lastTouch[0],
                  r.current.lastTouch[1]
                ) / te;
            (r.current.lastTouch = [G[0], G[1]]), R(se);
          }
        },
        [R]
      ),
      D = (W) => {
        const { clientX: G, clientY: te } = ae.getPosition(W);
        (r.current.isMoving = !0),
          (r.current.start = { clientX: G, clientY: te }),
          (r.current.last = { clientX: G, clientY: te });
      },
      N = (W) => {
        if (!r.current.isMoving) return;
        const G = 70,
          te = 72,
          ne = 16,
          se = window.innerWidth - ne * 2,
          oe = window.innerHeight - G - te - ne * 2;
        if (r.current.isZoom || !r.current.isMoving || se >= d.width * l)
          return;
        const { clientX: le, clientY: pe } = ae.getPosition(W.nativeEvent);
        r.current.last = { clientX: le, clientY: pe };
        const ce = d.width * l,
          be = d.height * l,
          Oe = Math.max(
            -(ce - se),
            Math.min(i.x + le - r.current.start.clientX, 0)
          ),
          de = Math.max(
            -(be - oe / 2),
            Math.min(i.y + pe - r.current.start.clientY, oe / 2)
          );
        e.current &&
          (e.current[u].style.transform = ee.getTransformStyle({
            position: { x: Oe, y: de },
            scale: i.scale,
          }));
      },
      Y = () => {
        if (!r.current.isMoving) return;
        const W = 70,
          G = 72,
          te = 16,
          ne = window.innerWidth - te * 2,
          se = window.innerHeight - W - G - te * 2;
        if (r.current.isZoom || !r.current.isMoving || ne >= d.width * l)
          return;
        const { clientX: oe, clientY: le } = r.current.last,
          pe = oe - r.current.start.clientX,
          ce = d.width * l,
          be = d.height * l,
          Oe = Math.max(-(ce - ne), Math.min(i.x + pe, 0)),
          de = Math.max(
            -(be - se / 2),
            Math.min(i.y + le - r.current.start.clientY, se / 2)
          );
        o({ scale: i.scale, x: Oe, y: de }), (r.current.isMoving = !1);
      },
      X = (W) => {
        if (
          !t.current ||
          r.current.isZoom ||
          !r.current.isMoving ||
          p ||
          g ||
          h ||
          y ||
          m
        )
          return;
        const { clientX: G, clientY: te } = ae.getPosition(W.nativeEvent);
        r.current.last = { clientX: G, clientY: te };
        const ne = 16,
          se = G - r.current.start.clientX;
        window.innerWidth - ne * 2 >= d.width * l &&
          (t.current.style.transform = ee.getTransformStyle({
            position: { x: -(window.innerWidth * u) + se, y: 0 },
          }));
      },
      j = () => {
        if (
          !t.current ||
          r.current.isZoom ||
          !r.current.isMoving ||
          p ||
          g ||
          h ||
          y ||
          m
        )
          return;
        const { clientX: W } = r.current.last,
          G = 16,
          te = W - r.current.start.clientX;
        window.innerWidth - G * 2 >= d.width * l &&
          (te <= -(window.innerWidth * 0.35) && u + 1 <= w - 1
            ? ((t.current.style.transform = ee.getTransformStyle({
                position: { x: -(window.innerWidth * (u + 1)), y: 0 },
              })),
              a.setActivePage(Math.min(u + 1, w - 1)))
            : te >= window.innerWidth * 0.35 && u - 1 >= 0
            ? ((t.current.style.transform = ee.getTransformStyle({
                position: { x: -(window.innerWidth * (u - 1)), y: 0 },
              })),
              a.setActivePage(Math.max(u - 1, 0)))
            : (t.current.style.transform = ee.getTransformStyle({
                position: { x: -(window.innerWidth * u), y: 0 },
              })));
      };
    return (
      S.useEffect(() => {
        (() => {
          if (n.current) {
            const G = d.width / d.height,
              te = window.innerWidth <= 900 ? 16 : 56,
              ne = n.current.clientWidth - te * 2,
              se = { width: ne, height: ne * G },
              oe = Math.min(1, se.width / d.width);
            if ((a.setScale(oe), mc)) {
              const le = (window.innerWidth - d.width * oe - 32) / 2,
                pe = 70,
                ce = 72,
                be = 16,
                Oe = (window.innerHeight - d.height * oe - pe - ce - be) / 2;
              o({ scale: 1, x: le, y: Oe });
            }
          }
        })();
      }, [a, n, d, o]),
      S.useEffect(() => {
        const W = (ne) => {
            ne.preventDefault(),
              b(),
              document.addEventListener("gesturechange", G),
              document.addEventListener("gestureend", te, { once: !0 });
          },
          G = Te.throttle((ne) => {
            E(ne.scale), ne.preventDefault();
          }, 16),
          te = (ne) => {
            R(ne.scale),
              ne.preventDefault(),
              document.removeEventListener("gesturechange", G),
              document.removeEventListener("gestureend", te);
          };
        return (
          document.addEventListener("gesturestart", W),
          () => {
            document.removeEventListener("gesturestart", W);
          }
        );
      }, [l, i, o, a, b, E, R]),
      {
        pageTransform: i,
        onZoomStart: O,
        onZoomMove: I,
        onZoomEnd: M,
        onMoveStart: D,
        onMove: N,
        onMoveEnd: Y,
        onMovePage: X,
        onMovePageEnd: j,
      }
    );
  };
var eh = function (e) {
    return U.jsxs(
      "svg",
      Re(
        {
          xmlns: "http://www.w3.org/2000/svg",
          viewBox: "0 0 256 256",
          width: "1em",
          height: "1em",
        },
        e,
        {
          children: [
            U.jsx("path", { fill: "none", d: "M0 0h256v256H0z" }),
            U.jsx("path", {
              fill: "none",
              stroke: "currentColor",
              strokeLinecap: "round",
              strokeLinejoin: "round",
              strokeWidth: 12,
              d: "M168 168h48V40H88v48",
            }),
            U.jsx("path", {
              fill: "none",
              stroke: "currentColor",
              strokeLinecap: "round",
              strokeLinejoin: "round",
              strokeWidth: 12,
              d: "M40 88h128v128H40z",
            }),
            U.jsx("path", {
              fill: "currentColor",
              d: "M138.14 152.43a4.46 4.46 0 0 1-4.45 4.46h-25.26v25.25a4.46 4.46 0 0 1-8.92 0v-25.25H74.26a4.46 4.46 0 0 1 0-8.92h25.25v-25.26a4.46 4.46 0 0 1 8.92 0V148h25.26a4.46 4.46 0 0 1 4.45 4.43Z",
            }),
          ],
        }
      )
    );
  },
  am = function (e) {
    return U.jsx(
      "svg",
      Re(
        {
          xmlns: "http://www.w3.org/2000/svg",
          width: "1em",
          height: "1em",
          viewBox: "0 0 24 24",
        },
        e,
        {
          children: U.jsx("path", {
            fill: "currentColor",
            d: "m19.474 12.838 1.697.835a1 1 0 0 1 0 1.795L13.32 19.33a3 3 0 0 1-2.649 0L2.82 15.468a1 1 0 0 1 0-1.795l1.697-.835 1.698.836-1.821.896 6.94 3.415a1.5 1.5 0 0 0 1.324 0l6.94-3.415-1.822-.896 1.7-.836ZM13.32 4.673l7.852 3.864a1 1 0 0 1 0 1.794l-7.852 3.864a3 3 0 0 1-2.649 0L2.82 10.33a1 1 0 0 1 0-1.794l7.851-3.864a3 3 0 0 1 2.65 0Zm-1.986 8.176a1.5 1.5 0 0 0 1.324 0l6.94-3.415-6.94-3.415a1.5 1.5 0 0 0-1.324 0l-6.94 3.415 6.94 3.415Z",
          }),
        }
      )
    );
  },
  dD = function (e) {
    return U.jsx(
      "svg",
      Re(
        {
          xmlns: "http://www.w3.org/2000/svg",
          viewBox: "0 0 256 256",
          fill: "currentColor",
          width: "1em",
          height: "1em",
        },
        e,
        {
          children: U.jsx("path", {
            d: "M224 216a8 8 0 0 1-8 8H40a8 8 0 0 1 0-16h176a8 8 0 0 1 8 8Zm-88-40V80a16 16 0 0 1 16-16h40a16 16 0 0 1 16 16v96a16 16 0 0 1-16 16h-40a16 16 0 0 1-16-16Zm16 0h40V80h-40Zm-104 0V40a16 16 0 0 1 16-16h40a16 16 0 0 1 16 16v136a16 16 0 0 1-16 16H64a16 16 0 0 1-16-16Zm16 0h40V40H64Z",
          }),
        }
      )
    );
  },
  fD = function (e) {
    return U.jsx(
      "svg",
      Re(
        {
          xmlns: "http://www.w3.org/2000/svg",
          viewBox: "0 0 256 256",
          fill: "currentColor",
          width: "1em",
          height: "1em",
        },
        e,
        {
          children: U.jsx("path", {
            d: "M208 136h-72v-16h48a16 16 0 0 0 16-16V64a16 16 0 0 0-16-16h-48V32a8 8 0 0 0-16 0v16H72a16 16 0 0 0-16 16v40a16 16 0 0 0 16 16h48v16H48a16 16 0 0 0-16 16v40a16 16 0 0 0 16 16h72v16a8 8 0 0 0 16 0v-16h72a16 16 0 0 0 16-16v-40a16 16 0 0 0-16-16ZM72 64h112v40H72Zm136 128H48v-40h160v40Z",
          }),
        }
      )
    );
  },
  hD = function (e) {
    return U.jsx(
      "svg",
      Re(
        {
          xmlns: "http://www.w3.org/2000/svg",
          viewBox: "0 0 256 256",
          fill: "currentColor",
          width: "1em",
          height: "1em",
        },
        e,
        {
          children: U.jsx("path", {
            d: "M224 120h-16V72a16 16 0 0 0-16-16h-40a16 16 0 0 0-16 16v48h-16V48a16 16 0 0 0-16-16H64a16 16 0 0 0-16 16v72H32a8 8 0 0 0 0 16h16v72a16 16 0 0 0 16 16h40a16 16 0 0 0 16-16v-72h16v48a16 16 0 0 0 16 16h40a16 16 0 0 0 16-16v-48h16a8 8 0 0 0 0-16Zm-120 88H64V48h40Zm88-24h-40V72h40Z",
          }),
        }
      )
    );
  },
  lm = function (e) {
    return U.jsx(
      "svg",
      Re(
        {
          xmlns: "http://www.w3.org/2000/svg",
          viewBox: "0 0 256 256",
          fill: "currentColor",
          width: "1em",
          height: "1em",
        },
        e,
        {
          children: U.jsx("path", {
            d: "M48 40v176a8 8 0 0 1-16 0V40a8 8 0 0 1 16 0Zm16 64V64a16 16 0 0 1 16-16h96a16 16 0 0 1 16 16v40a16 16 0 0 1-16 16H80a16 16 0 0 1-16-16Zm16 0h96V64H80Zm152 48v40a16 16 0 0 1-16 16H80a16 16 0 0 1-16-16v-40a16 16 0 0 1 16-16h136a16 16 0 0 1 16 16Zm-16 40v-40H80v40h136Z",
          }),
        }
      )
    );
  },
  pD = function (e) {
    return U.jsx(
      "svg",
      Re(
        {
          xmlns: "http://www.w3.org/2000/svg",
          viewBox: "0 0 256 256",
          fill: "currentColor",
          width: "1em",
          height: "1em",
        },
        e,
        {
          children: U.jsx("path", {
            d: "M224 40v176a8 8 0 0 1-16 0V40a8 8 0 0 1 16 0Zm-32 24v40a16 16 0 0 1-16 16H80a16 16 0 0 1-16-16V64a16 16 0 0 1 16-16h96a16 16 0 0 1 16 16Zm-16 0H80v40h96Zm16 88v40a16 16 0 0 1-16 16H40a16 16 0 0 1-16-16v-40a16 16 0 0 1 16-16h136a16 16 0 0 1 16 16Zm-16 0H40v40h136Z",
          }),
        }
      )
    );
  },
  gD = function (e) {
    return U.jsx(
      "svg",
      Re(
        {
          xmlns: "http://www.w3.org/2000/svg",
          viewBox: "0 0 256 256",
          fill: "currentColor",
          width: "1em",
          height: "1em",
        },
        e,
        {
          children: U.jsx("path", {
            d: "M224 40a8 8 0 0 1-8 8H40a8 8 0 0 1 0-16h176a8 8 0 0 1 8 8Zm-16 40v96a16 16 0 0 1-16 16h-40a16 16 0 0 1-16-16V80a16 16 0 0 1 16-16h40a16 16 0 0 1 16 16Zm-16 0h-40v96h40Zm-72 0v136a16 16 0 0 1-16 16H64a16 16 0 0 1-16-16V80a16 16 0 0 1 16-16h40a16 16 0 0 1 16 16Zm-16 0H64v136h40Z",
          }),
        }
      )
    );
  },
  Xv = function (e) {
    return U.jsx(
      "svg",
      Re(
        {
          xmlns: "http://www.w3.org/2000/svg",
          viewBox: "0 0 256 256",
          fill: "currentColor",
          width: "1em",
          height: "1em",
        },
        e,
        {
          children: U.jsx("path", {
            d: "M208 96a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16h-32a16 16 0 0 0-16 16v8H96v-8a16 16 0 0 0-16-16H48a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h8v64h-8a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h32a16 16 0 0 0 16-16v-8h64v8a16 16 0 0 0 16 16h32a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16h-8V96Zm-32-48h32v32h-32ZM48 48h32v15.9a.51.51 0 0 0 0 .2V80H48Zm32 160H48v-32h32v15.9a.51.51 0 0 0 0 .2V208Zm128 0h-32v-32h32Zm-24-48h-8a16 16 0 0 0-16 16v8H96v-8a16 16 0 0 0-16-16h-8V96h8a16 16 0 0 0 16-16v-8h64v8a16 16 0 0 0 16 16h8Z",
          }),
        }
      )
    );
  },
  mD = function (e) {
    return U.jsx(
      "svg",
      Re(
        {
          xmlns: "http://www.w3.org/2000/svg",
          viewBox: "0 0 256 256",
          fill: "currentColor",
          width: "1em",
          height: "1em",
        },
        e,
        {
          children: U.jsx("path", {
            d: "M201.54 54.46A104 104 0 0 0 54.46 201.54 104 104 0 0 0 201.54 54.46Zm-11.31 135.77a88 88 0 1 1 0-124.46 88.11 88.11 0 0 1 0 124.46ZM165.66 82.34a8 8 0 0 1 0 11.32l-32 32a8 8 0 0 1-11.32 0l-32-32a8 8 0 0 1 11.32-11.32L128 108.69l26.34-26.35a8 8 0 0 1 11.32 0Zm0 56a8 8 0 0 1 0 11.32l-32 32a8 8 0 0 1-11.32 0l-32-32a8 8 0 0 1 11.32-11.32L128 164.69l26.34-26.35a8 8 0 0 1 11.32 0Z",
          }),
        }
      )
    );
  },
  yD = function (e) {
    return U.jsx(
      "svg",
      Re(
        {
          xmlns: "http://www.w3.org/2000/svg",
          viewBox: "0 0 256 256",
          fill: "currentColor",
          width: "1em",
          height: "1em",
        },
        e,
        {
          children: U.jsx("path", {
            d: "M201.54 54.46A104 104 0 0 0 54.46 201.54 104 104 0 0 0 201.54 54.46Zm-11.31 135.77a88 88 0 1 1 0-124.46 88.11 88.11 0 0 1 0 124.46Zm-24.57-27.89a8 8 0 0 1-11.32 11.32L128 147.31l-26.34 26.35a8 8 0 0 1-11.32-11.32l32-32a8 8 0 0 1 11.32 0Zm0-56a8 8 0 0 1-11.32 11.32L128 91.31l-26.34 26.35a8 8 0 0 1-11.32-11.32l32-32a8 8 0 0 1 11.32 0Z",
          }),
        }
      )
    );
  },
  vD = function (e) {
    return U.jsx(
      "svg",
      Re(
        {
          xmlns: "http://www.w3.org/2000/svg",
          viewBox: "0 0 256 256",
          fill: "currentColor",
          width: "1em",
          height: "1em",
        },
        e,
        {
          children: U.jsx("path", {
            d: "M128 24a104 104 0 1 0 104 104A104.11 104.11 0 0 0 128 24Zm0 192a88 88 0 1 1 88-88 88.1 88.1 0 0 1-88 88Zm45.66-109.66a8 8 0 0 1 0 11.32l-40 40a8 8 0 0 1-11.32 0l-40-40a8 8 0 0 1 11.32-11.32L128 140.69l34.34-34.35a8 8 0 0 1 11.32 0Z",
          }),
        }
      )
    );
  },
  wD = function (e) {
    return U.jsx(
      "svg",
      Re(
        {
          xmlns: "http://www.w3.org/2000/svg",
          viewBox: "0 0 256 256",
          fill: "currentColor",
          width: "1em",
          height: "1em",
        },
        e,
        {
          children: U.jsx("path", {
            d: "M128 24a104 104 0 1 0 104 104A104.11 104.11 0 0 0 128 24Zm0 192a88 88 0 1 1 88-88 88.1 88.1 0 0 1-88 88Zm45.66-77.66a8 8 0 0 1-11.32 11.32L128 115.31l-34.34 34.35a8 8 0 0 1-11.32-11.32l40-40a8 8 0 0 1 11.32 0Z",
          }),
        }
      )
    );
  },
  bD = function (e) {
    return U.jsx(
      "svg",
      Re(
        {
          xmlns: "http://www.w3.org/2000/svg",
          viewBox: "0 0 256 256",
          fill: "currentColor",
          width: "1em",
          height: "1em",
        },
        e,
        {
          children: U.jsx("path", {
            d: "M200 32h-36.26a47.92 47.92 0 0 0-71.48 0H56a16 16 0 0 0-16 16v168a16 16 0 0 0 16 16h144a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16Zm-72 0a32 32 0 0 1 32 32H96a32 32 0 0 1 32-32Zm72 184H56V48h26.75A47.93 47.93 0 0 0 80 64v8a8 8 0 0 0 8 8h80a8 8 0 0 0 8-8v-8a47.93 47.93 0 0 0-2.75-16H200Z",
          }),
        }
      )
    );
  },
  xD = function (e) {
    return U.jsx(
      "svg",
      Re(
        {
          xmlns: "http://www.w3.org/2000/svg",
          viewBox: "0 0 256 256",
          fill: "currentColor",
          width: "1em",
          height: "1em",
        },
        e,
        {
          children: U.jsx("path", {
            d: "M216 32H88a8 8 0 0 0-8 8v40H40a8 8 0 0 0-8 8v128a8 8 0 0 0 8 8h128a8 8 0 0 0 8-8v-40h40a8 8 0 0 0 8-8V40a8 8 0 0 0-8-8Zm-56 176H48V96h112Zm48-48h-32V88a8 8 0 0 0-8-8H96V48h112Z",
          }),
        }
      )
    );
  },
  Js = function (e) {
    return U.jsx(
      "svg",
      Re(
        {
          xmlns: "http://www.w3.org/2000/svg",
          viewBox: "0 0 256 256",
          fill: "currentColor",
          width: "1em",
          height: "1em",
        },
        e,
        {
          children: U.jsx("path", {
            d: "M128 112a28 28 0 0 0-8 54.83V184a8 8 0 0 0 16 0v-17.17a28 28 0 0 0-8-54.83Zm0 40a12 12 0 1 1 12-12 12 12 0 0 1-12 12Zm80-72h-32V56a48 48 0 0 0-96 0v24H48a16 16 0 0 0-16 16v112a16 16 0 0 0 16 16h160a16 16 0 0 0 16-16V96a16 16 0 0 0-16-16ZM96 56a32 32 0 0 1 64 0v24H96Zm112 152H48V96h160v112Z",
          }),
        }
      )
    );
  },
  Dl = function (e) {
    return U.jsx(
      "svg",
      Re(
        {
          xmlns: "http://www.w3.org/2000/svg",
          viewBox: "0 0 256 256",
          fill: "currentColor",
          width: "1em",
          height: "1em",
        },
        e,
        {
          children: U.jsx("path", {
            d: "M160 80H48a16 16 0 0 0-16 16v112a16 16 0 0 0 16 16h112a16 16 0 0 0 16-16V96a16 16 0 0 0-16-16Zm0 128H48V96h112ZM136 40a8 8 0 0 1 8-8h16a8 8 0 0 1 0 16h-16a8 8 0 0 1-8-8Zm88 8v8a8 8 0 0 1-16 0v-8h-8a8 8 0 0 1 0-16h8a16 16 0 0 1 16 16Zm0 48v16a8 8 0 0 1-16 0V96a8 8 0 0 1 16 0Zm0 56v8a16 16 0 0 1-16 16h-8a8 8 0 0 1 0-16h8v-8a8 8 0 0 1 16 0ZM80 56v-8a16 16 0 0 1 16-16h8a8 8 0 0 1 0 16h-8v8a8 8 0 0 1-16 0Z",
          }),
        }
      )
    );
  },
  cm = function (e) {
    return U.jsx(
      "svg",
      Re(
        {
          xmlns: "http://www.w3.org/2000/svg",
          viewBox: "0 0 256 256",
          fill: "currentColor",
          width: "1em",
          height: "1em",
        },
        e,
        {
          children: U.jsx("path", {
            d: "M64 216a8 8 0 0 1-8 8h-8a16 16 0 0 1-16-16v-8a8 8 0 0 1 16 0v8h8a8 8 0 0 1 8 8Zm48-8H96a8 8 0 0 0 0 16h16a8 8 0 0 0 0-16Zm-72-40a8 8 0 0 0 8-8v-16a8 8 0 0 0-16 0v16a8 8 0 0 0 8 8Zm128 24a8 8 0 0 0-8 8v8h-8a8 8 0 0 0 0 16h8a16 16 0 0 0 16-16v-8a8 8 0 0 0-8-8Zm0-80a8 8 0 0 0 8-8v-8a16 16 0 0 0-16-16h-8a8 8 0 0 0 0 16h8v8a8 8 0 0 0 8 8ZM56 80h-8a16 16 0 0 0-16 16v8a8 8 0 0 0 16 0v-8h8a8 8 0 0 0 0-16Zm152-48H96a16 16 0 0 0-16 16v40a4.44 4.44 0 0 0 0 .55A8 8 0 0 0 88 96h24a8 8 0 0 0 0-16H96V48h112v112h-32v-16a8 8 0 0 0-16 0v24a8 8 0 0 0 8 8h40a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16Z",
          }),
        }
      )
    );
  },
  SD = function (e) {
    return U.jsx(
      "svg",
      Re(
        {
          xmlns: "http://www.w3.org/2000/svg",
          viewBox: "0 0 256 256",
          fill: "currentColor",
          width: "1em",
          height: "1em",
        },
        e,
        {
          children: U.jsx("path", {
            d: "M71.59 61.47a8 8 0 0 0-15.18 0l-40 120A8 8 0 0 0 24 192h80a8 8 0 0 0 7.59-10.53ZM35.1 176 64 89.3 92.9 176ZM208 76a52 52 0 1 0-52 52 52.06 52.06 0 0 0 52-52Zm-88 0a36 36 0 1 1 36 36 36 36 0 0 1-36-36Zm104 68h-88a8 8 0 0 0-8 8v56a8 8 0 0 0 8 8h88a8 8 0 0 0 8-8v-56a8 8 0 0 0-8-8Zm-8 56h-72v-40h72Z",
          }),
        }
      )
    );
  },
  th = function (e) {
    return U.jsx(
      "svg",
      Re(
        {
          xmlns: "http://www.w3.org/2000/svg",
          viewBox: "0 0 256 256",
          fill: "currentColor",
          width: "1em",
          height: "1em",
        },
        e,
        {
          children: U.jsx("path", {
            d: "M216 48h-40v-8a24 24 0 0 0-24-24h-48a24 24 0 0 0-24 24v8H40a8 8 0 0 0 0 16h8v144a16 16 0 0 0 16 16h128a16 16 0 0 0 16-16V64h8a8 8 0 0 0 0-16ZM96 40a8 8 0 0 1 8-8h48a8 8 0 0 1 8 8v8H96Zm96 168H64V64h128Zm-80-104v64a8 8 0 0 1-16 0v-64a8 8 0 0 1 16 0Zm48 0v64a8 8 0 0 1-16 0v-64a8 8 0 0 1 16 0Z",
          }),
        }
      )
    );
  },
  mo = function (e) {
    return U.jsx(
      "svg",
      Re(
        {
          xmlns: "http://www.w3.org/2000/svg",
          viewBox: "0 0 256 256",
          fill: "currentColor",
          width: "1em",
          height: "1em",
        },
        e,
        {
          children: U.jsx("path", {
            d: "M205.66 194.34a8 8 0 0 1-11.32 11.32L128 139.31l-66.34 66.35a8 8 0 0 1-11.32-11.32L116.69 128 50.34 61.66a8 8 0 0 1 11.32-11.32L128 116.69l66.34-66.35a8 8 0 0 1 11.32 11.32L139.31 128Z",
          }),
        }
      )
    );
  },
  Jv = function (e) {
    return U.jsx(
      "svg",
      Re(
        {
          xmlns: "http://www.w3.org/2000/svg",
          viewBox: "0 0 256 256",
          fill: "currentColor",
          width: "1em",
          height: "1em",
        },
        e,
        {
          children: U.jsx("path", {
            d: "m181.66 133.66-80 80a8 8 0 0 1-11.32-11.32L164.69 128 90.34 53.66a8 8 0 0 1 11.32-11.32l80 80a8 8 0 0 1 0 11.32Z",
          }),
        }
      )
    );
  };
const xt = ({
    name: n,
    icon: e,
    shortcut: t,
    disabled: r = !1,
    children: i,
    onClick: o,
  }) => {
    const [a, l] = S.useState(!1);
    return H("div", {
      css: {
        padding: "8px 16px 8px 8px",
        display: "flex",
        alignItems: "center",
        position: "relative",
        color: r ? "rgba(36,49,61,.4)" : "rgb(13, 18, 22)",
        cursor: r ? "not-allowed" : "pointer",
        ":hover": { background: r ? void 0 : "rgba(64,87,109,.07)" },
      },
      onClick: () => !r && o && o(),
      onMouseLeave: () => l(!1),
      onMouseOut: () => l(!1),
      onMouseOver: () => l(!0),
      children: [
        x("div", { css: { fontSize: 20 }, children: e }),
        x("div", {
          css: {
            marginLeft: 8,
            fontSize: 14,
            flexGrow: 1,
            whiteSpace: "nowrap",
          },
          children: n,
        }),
        x("div", {
          css: {
            width: 48,
            paddingLeft: 8,
            "@media (max-width: 900px)": { display: "none" },
          },
        }),
        (i || t) &&
          H("div", {
            css: {
              height: 24,
              lineHeight: "24px",
              fontSize: t ? 12 : 20,
              padding: t ? "0 8px" : 0,
              marginLeft: 8,
              background: t ? "rgba(64,87,109,.07)" : void 0,
              borderRadius: 4,
              whiteSpace: "nowrap",
              "@media (max-width: 900px)": { display: "none" },
            },
            children: [t, i && x(Jv, {})],
          }),
        a && i,
      ],
    });
  },
  um = ({ transform: n, children: e }) => {
    const t = S.useRef(null),
      [r, i] = S.useState({ x: -9999, y: -9999 });
    return (
      S.useEffect(() => {
        if (t.current && t.current.parentElement) {
          const o = { x: 0, y: 0 },
            a = t.current.parentElement,
            l = t.current.getBoundingClientRect();
          n.y + a.offsetTop + l.height > window.innerHeight
            ? (o.y =
                a.offsetTop -
                (n.y + a.offsetTop + l.height - window.innerHeight))
            : (o.y = a.offsetTop),
            n.x + a.offsetWidth + l.width > window.innerWidth
              ? (o.x = -l.width)
              : (o.x = a.offsetLeft + a.offsetWidth),
            i(o);
        }
      }, [n]),
      x("div", {
        ref: t,
        css: {
          position: "fixed",
          top: 0,
          left: 0,
          transform: ee.getTransformStyle({ position: r }),
          paddingLeft: 8,
          paddingRight: 8,
        },
        children: x("div", {
          css: {
            background: "white",
            paddingTop: 8,
            paddingBottom: 8,
            borderRadius: 4,
            zIndex: 30,
            boxShadow:
              "0 0 0 1px rgba(64,87,109,.07),0 2px 12px rgba(53,71,90,.2)",
          },
          children: e,
        }),
      })
    );
  },
  CD = (n, e) => {
    var be, Oe;
    const { selectedLayerIds: t, selectedLayers: r } = Vt(),
      i = ae.useForwardedRef(e),
      [o, a] = S.useState({ x: -9999, y: -9999 }),
      {
        state: l,
        openMenu: u,
        actions: d,
        pageIndex: h,
        pageSize: p,
        rootLayer: g,
      } = $e((de, xe) => ({
        openMenu: de.openMenu,
        pageIndex: de.activePage,
        pageSize: xe.getPageSize(),
        rootLayer:
          de.pages[de.activePage] && de.pages[de.activePage].layers.ROOT,
      })),
      y = r.find((de) => de.data.type === "Image"),
      m = r.find((de) => de.data.type === "Video"),
      w = async () => {
        await Gv(l, { pageIndex: h, layerIds: t }), d.hideContextMenu();
      },
      b = S.useCallback(async () => {
        await Kv({ actions: d }), d.hideContextMenu();
      }, [d]),
      E = () => {
        Qf(l, { pageIndex: h, layerIds: t, actions: d }), d.hideContextMenu();
      },
      R = S.useCallback(() => {
        t.includes("ROOT") || (d.deleteLayer(h, t), d.hideContextMenu());
      }, [d, h, t]),
      O = () => {
        d.lock(h, t), d.hideContextMenu();
      },
      I = () => {
        if (y) {
          const de = p.width / p.height,
            xe = y.data.props.image,
            Pe = xe.boxSize.width / xe.boxSize.height,
            ye = { ...Te.cloneDeep(xe), rotate: 0 };
          de > Pe
            ? ((ye.boxSize.width = p.width),
              (ye.boxSize.height = p.width / Pe),
              (ye.position.y = (ye.boxSize.height - p.height) / -2),
              (ye.position.x = 0))
            : ((ye.boxSize.height = p.height),
              (ye.boxSize.width = p.height * Pe),
              (ye.position.x = (ye.boxSize.width - p.width) / -2),
              (ye.position.y = 0)),
            d.setProp(h, "ROOT", { image: ye, video: null }),
            d.history.merge().deleteLayer(h, y.id);
        }
        d.hideContextMenu();
      },
      M = () => {
        if (g) {
          const xe = g.data.props.image;
          if (xe) {
            const Pe = p.width / p.height,
              ye = xe.boxSize.width / xe.boxSize.height,
              Z = { boxSize: { width: 0, height: 0 } };
            Pe < ye
              ? ((Z.boxSize.width = p.width * 0.8),
                (Z.boxSize.height = Z.boxSize.width / ye))
              : ((Z.boxSize.height = p.height * 0.8),
                (Z.boxSize.width = Z.boxSize.height * ye)),
              d.addImageLayer({ url: xe.url, thumb: xe.thumb }, Z.boxSize),
              d.history.merge().setProp(h, "ROOT", { image: null }),
              d.hideContextMenu();
          }
        }
      },
      D = () => {
        if (m) {
          const de = p.width / p.height,
            xe = m.data.props.video,
            Pe = xe.boxSize.width / xe.boxSize.height,
            ye = { ...Te.cloneDeep(xe), rotate: 0 };
          de > Pe
            ? ((ye.boxSize.width = p.width),
              (ye.boxSize.height = p.width / Pe),
              (ye.position.y = (ye.boxSize.height - p.height) / -2),
              (ye.position.x = 0))
            : ((ye.boxSize.height = p.height),
              (ye.boxSize.width = p.height * Pe),
              (ye.position.x = (ye.boxSize.width - p.width) / -2),
              (ye.position.y = 0)),
            console.log(ye, m),
            d.setProp(h, "ROOT", { video: ye, image: null }),
            d.history.merge().deleteLayer(h, m.id);
        }
        d.hideContextMenu();
      },
      N = () => {
        if (g) {
          const xe = g.data.props.video;
          if (xe) {
            const Pe = p.width / p.height,
              ye = xe.boxSize.width / xe.boxSize.height,
              Z = { boxSize: { width: 0, height: 0 } };
            Pe < ye
              ? ((Z.boxSize.width = p.width * 0.8),
                (Z.boxSize.height = Z.boxSize.width / ye))
              : ((Z.boxSize.height = p.height * 0.8),
                (Z.boxSize.width = Z.boxSize.height * ye)),
              d.addVideoLayer({ url: xe.url }, Z.boxSize),
              d.history.merge().setProp(h, "ROOT", { video: null }),
              d.hideContextMenu();
          }
        }
      },
      Y = () => {
        if (Mi(r[0])) {
          const xe = r[0].data.props.image;
          if (xe) {
            const Pe = p.width / p.height,
              ye = xe.boxSize.width / xe.boxSize.height,
              Z = { boxSize: { width: 0, height: 0 } };
            Pe < ye
              ? ((Z.boxSize.width = p.width * 0.8),
                (Z.boxSize.height = Z.boxSize.width / ye))
              : ((Z.boxSize.height = p.height * 0.8),
                (Z.boxSize.width = Z.boxSize.height * ye)),
              d.addImageLayer({ url: xe.url, thumb: xe.thumb }, Z.boxSize),
              d.history.merge().setProp(h, r[0].id, { image: null }),
              d.hideContextMenu();
          }
        }
      },
      X =
        (g == null
          ? void 0
          : g.data.child.findIndex((de) => t.includes(de))) === 0,
      j =
        (g == null
          ? void 0
          : g.data.child.findLastIndex((de) => t.includes(de))) ===
        ((g == null ? void 0 : g.data.child.length) || 0) - 1,
      W = () => {
        j || (d.bringForward(h, t), d.hideContextMenu());
      },
      G = () => {
        j || (d.bringToFront(h, t), d.hideContextMenu());
      },
      te = () => {
        X || (d.sendBackward(h, t), d.hideContextMenu());
      },
      ne = () => {
        X || (d.sendToBack(h, t), d.hideContextMenu());
      },
      se = () => {
        d.setSidebar("LAYER_MANAGEMENT"), d.hideContextMenu();
      },
      oe = (de) => {
        d.setAlign(de), d.hideContextMenu();
      },
      le = () => {
        t.length === 1 && d.ungroup(t[0]), d.hideContextMenu();
      },
      pe = () => {
        d.group(t), d.hideContextMenu();
      };
    if (
      (S.useEffect(() => {
        (() => {
          var Z;
          const Pe =
              (Z = i.current) == null ? void 0 : Z.getBoundingClientRect(),
            ye = { x: -9999, y: -9999 };
          u &&
            ((ye.x = 0),
            (ye.y = 0),
            Pe.width + u.clientX > window.innerWidth && (ye.x = -Pe.width),
            Pe.height + u.clientY > window.innerHeight &&
              (ye.y = window.innerHeight - Pe.height - u.clientY)),
            a(ye);
        })();
        const xe = () => {
          d.hideContextMenu();
        };
        return (
          window.addEventListener("resize", xe),
          () => {
            window.removeEventListener("resize", xe);
          }
        );
      }, [d, i, u]),
      !u)
    )
      return null;
    const ce = !!r.find((de) => Jo(de));
    return H("div", {
      ref: i,
      css: {
        position: "fixed",
        top: 0,
        left: 0,
        background: "white",
        paddingTop: 8,
        paddingBottom: 8,
        borderRadius: 4,
        zIndex: 30,
        boxShadow: "0 0 0 1px rgba(64,87,109,.07),0 2px 12px rgba(53,71,90,.2)",
        transform: ee.getTransformStyle({
          position: { x: u.clientX + o.x, y: u.clientY + o.y },
        }),
        "@media (max-width: 900px)": {
          bottom: 0,
          top: "auto",
          transform: "none",
          display: "flex",
          right: 0,
          padding: 0,
        },
      },
      children: [
        x("div", {
          css: {
            display: "none",
            "@media (max-width: 900px)": {
              flexShrink: 0,
              fontSize: 24,
              width: 48,
              height: 48,
              borderRadius: "50%",
              background: "#EBECF0",
              display: "flex",
              alignItems: "center",
              justifyContent: "center",
              cursor: "pointer",
              margin: 16,
            },
          },
          onClick: () => d.hideContextMenu(),
          children: x(mo, {}),
        }),
        H("div", {
          css: {
            "@media (max-width: 900px)": {
              overflowX: "auto",
              flexGrow: 1,
              padding: 16,
              display: "flex",
            },
          },
          children: [
            !t.includes("ROOT") &&
              x(xt, {
                icon: x(xD, {}),
                name: "Copy",
                shortcut: "Ctrl+C",
                onClick: w,
              }),
            !t.includes("ROOT") &&
              H(S.Fragment, {
                children: [
                  x(xt, {
                    icon: x(bD, {}),
                    name: "Paste",
                    shortcut: "Ctrl+V",
                    onClick: b,
                  }),
                  x(xt, {
                    icon: x(eh, {}),
                    name: "Duplicate",
                    shortcut: "Ctrl+D",
                    onClick: E,
                  }),
                  x(xt, {
                    icon: x(th, {}),
                    name: "Delete",
                    shortcut: "Delete",
                    onClick: R,
                  }),
                ],
              }),
            !t.includes("ROOT") &&
              H(S.Fragment, {
                children: [
                  x("div", {
                    css: {
                      marginTop: 8,
                      marginBottom: 8,
                      height: 1,
                      borderBottom: "1px solid rgba(57,76,96,.15)",
                      width: "100%",
                    },
                  }),
                  x(xt, {
                    icon: x(am, {}),
                    name: "Layer",
                    children: H(um, {
                      transform: { x: u.clientX + o.x, y: u.clientY + o.y },
                      children: [
                        x(xt, {
                          disabled: j,
                          icon: x(wD, {}),
                          name: "Bring Forward",
                          shortcut: "Ctrl+]",
                          onClick: W,
                        }),
                        x(xt, {
                          disabled: j,
                          icon: x(yD, {}),
                          name: "Bring to Front",
                          shortcut: "Ctrl+Alt+]",
                          onClick: G,
                        }),
                        x(xt, {
                          disabled: X,
                          icon: x(vD, {}),
                          name: "Send Backward",
                          shortcut: "Ctrl+[",
                          onClick: te,
                        }),
                        x(xt, {
                          disabled: X,
                          icon: x(mD, {}),
                          name: "Send to Back",
                          shortcut: "Ctrl+Alt+[",
                          onClick: ne,
                        }),
                        x(xt, {
                          icon: x(am, {}),
                          name: "Show Layers",
                          onClick: se,
                        }),
                      ],
                    }),
                  }),
                  x(xt, {
                    icon: x(lm, {}),
                    name: "Align",
                    children: H(um, {
                      transform: { x: u.clientX + o.x, y: u.clientY + o.y },
                      children: [
                        x(xt, {
                          icon: x(lm, {}),
                          name: "Left",
                          onClick: () => oe("left"),
                        }),
                        x(xt, {
                          icon: x(fD, {}),
                          name: "Center",
                          onClick: () => oe("center"),
                        }),
                        x(xt, {
                          icon: x(pD, {}),
                          name: "Right",
                          onClick: () => oe("right"),
                        }),
                        x(xt, {
                          icon: x(gD, {}),
                          name: "Top",
                          onClick: () => oe("top"),
                        }),
                        x(xt, {
                          icon: x(hD, {}),
                          name: "Middle",
                          onClick: () => oe("middle"),
                        }),
                        x(xt, {
                          icon: x(dD, {}),
                          name: "Bottom",
                          onClick: () => oe("bottom"),
                        }),
                      ],
                    }),
                  }),
                  x("div", {
                    css: {
                      marginTop: 8,
                      marginBottom: 8,
                      height: 1,
                      borderBottom: "1px solid rgba(57,76,96,.15)",
                      width: "100%",
                    },
                  }),
                ],
              }),
            t.length > 1 &&
              x(xt, { icon: x(Xv, {}), name: "Group", onClick: pe }),
            ce && x(xt, { icon: x(SD, {}), name: "Ungroup", onClick: le }),
            !t.includes("ROOT") &&
              x(xt, { icon: x(Js, {}), name: "Lock", onClick: O }),
            t.length === 1 &&
              Mi(r[0]) &&
              r[0].data.props.image &&
              x(xt, { icon: x(Dl, {}), name: "Detach Image", onClick: Y }),
            m &&
              t.length === 1 &&
              x(xt, {
                icon: x(cm, {}),
                name: "Set as Background Video",
                onClick: D,
              }),
            t.length === 1 &&
              t.includes("ROOT") &&
              ((be = g == null ? void 0 : g.data.props) == null
                ? void 0
                : be.video) &&
              x(xt, {
                icon: x(Dl, {}),
                name: "Set Background as Video Layer",
                onClick: N,
              }),
            y &&
              t.length === 1 &&
              x(xt, {
                icon: x(cm, {}),
                name: "Set as Background Image",
                onClick: I,
              }),
            t.length === 1 &&
              t.includes("ROOT") &&
              ((Oe = g == null ? void 0 : g.data.props) == null
                ? void 0
                : Oe.image) &&
              x(xt, {
                icon: x(Dl, {}),
                name: "Set Background as Image Layer",
                onClick: M,
              }),
          ],
        }),
      ],
    });
  },
  ED = S.forwardRef(CD),
  kD = ({ selectedLayers: n }, e) =>
    H(S.Fragment, {
      children: [
        x("div", {
          ref: e,
          css: {
            border: "1px solid #3d8eff",
            background: "rgba(61, 142, 255, 0.2)",
            position: "absolute",
          },
        }),
        x("div", {
          css: {
            position: "absolute",
            inset: 0,
            pointerEvents: "none",
            zIndex: 2,
          },
          children: Object.entries(n || {}).map(
            ([t, { boxSize: r, position: i, rotate: o }]) =>
              x(
                "div",
                {
                  css: {
                    position: "absolute",
                    border: "1px solid #3d8eff",
                    transform: ee.getTransformStyle({ position: i, rotate: o }),
                    width: r.width,
                    height: r.height,
                  },
                },
                t
              )
          ),
        }),
      ],
    }),
  OD = S.forwardRef(kD),
  Oc = () => {
    const { fontFamilyList: n } = $e((e) => {
      const t = [];
      return (
        e.pages.forEach((r) => {
          Object.entries(r.layers).forEach(([, i]) => {
            Qr(i) && t.push(...i.data.props.fonts);
          });
        }),
        { fontFamilyList: Te.uniqBy(t, "name") }
      );
    });
    return { usedFonts: n };
  },
  TD = (
    { boxSize: n, rotate: e, position: t, transparency: r, children: i },
    o
  ) =>
    x("div", {
      ref: o,
      css: {
        touchAction: "pan-x pan-y pinch-zoom",
        pointerEvents: "auto",
        position: "absolute",
      },
      style: {
        width: n.width,
        height: n.height,
        transform: ee.getTransformStyle({ position: t, rotate: e }),
        opacity: r,
      },
      children: i,
    }),
  MD = S.forwardRef(TD),
  RD = () => {
    const {
        id: n,
        comp: e,
        props: t,
        layers: r,
        actions: i,
        parent: o,
      } = go((p) => ({
        id: p.id,
        comp: p.data.comp,
        props: { ...p.data.props, layerId: p.id },
        layers: p.data.child,
        parent: p.data.parent,
      })),
      {
        isResize: a,
        isDragging: l,
        isRotate: u,
      } = $e((p) => ({
        isResize: p.resizeData.status,
        isDragging: p.dragData.status,
        isRotate: p.rotateData.status,
      })),
      d = S.useCallback(
        (p) => {
          a ||
            !["ROOT", null].includes(o) ||
            l ||
            u ||
            (p.stopPropagation(), i.hover());
        },
        [i, l, a, u, o]
      ),
      h = S.useCallback(() => {
        i.hover(null);
      }, [i]);
    return S.useMemo(() => {
      if (!e) return null;
      let p = null;
      if (
        (r &&
          r.length > 0 &&
          (p = x(S.Fragment, { children: r.map((y) => x(ew, { id: y }, y)) })),
        n === "ROOT")
      ) {
        const y = S.createElement(e, t, p);
        return x("div", {
          onMouseLeave: h,
          onMouseOut: h,
          onMouseOver: d,
          children: y,
        });
      }
      const g = S.createElement(e, t, p);
      return x(MD, {
        boxSize: t.boxSize,
        position: t.position,
        rotate: t.rotate,
        transparency: t.transparency,
        children: x("div", {
          onMouseLeave: h,
          onMouseOut: h,
          onMouseOver: d,
          children: g,
        }),
      });
    }, [e, r, n, t, h, d]);
  },
  Qv = S.memo(RD),
  ew = ({ id: n }) => x(m1, { id: n, children: x(Qv, {}) }),
  tw = () => x(ew, { id: "ROOT" }),
  DD = ({ pageIndex: n, width: e, height: t, scale: r, isActive: i }, o) =>
    x(y1, {
      pageIndex: n,
      children: x("div", {
        ref: o,
        css: {
          position: "absolute",
          left: 0,
          top: 0,
          width: e * r,
          height: t * r,
          zIndex: 0,
          margin: 0,
        },
        style: { visibility: i ? "visible" : "hidden", opacity: i ? 1 : 0 },
        children: x("div", {
          css: {
            width: e,
            height: t,
            transform: `scale(${r})`,
            transformOrigin: "0 0",
            userSelect: "none",
            background: "white",
            overflow: "hidden",
          },
          children: x("div", {
            css: {
              width: e * r,
              height: t * r,
              position: "relative",
              left: 0,
              top: 0,
            },
            children: x(tw, {}),
          }),
        }),
      }),
    }),
  nw = S.forwardRef(DD),
  ID = ({ onClose: n }) => {
    const {
        actions: e,
        pages: t,
        pageSize: r,
      } = $e((l, u) => ({ pages: l.pages, pageSize: u.getPageSize() })),
      o = (window.innerWidth / 2 - 24 * 1.5 - 3 * 2) / r.width,
      a = (l) => {
        e.setActivePage(l), n();
      };
    return H("div", {
      css: {
        top: 0,
        left: 0,
        width: "100vw",
        height: "100vh",
        position: "fixed",
        background: "#fff",
        zIndex: 2050,
      },
      children: [
        H("div", {
          css: {
            display: "flex",
            alignItems: "center",
            justifyContent: "center",
            flexShrink: 0,
            height: 48,
            borderBottom: "1px solid rgba(57,76,96,.15)",
            padding: "0 20px",
          },
          children: [
            x("p", {
              css: {
                lineHeight: "48px",
                fontWeight: 600,
                color: "#181C32",
                flexGrow: 1,
              },
              children: "Pages",
            }),
            x("div", {
              css: {
                fontSize: 20,
                flexShrink: 0,
                width: 32,
                height: 32,
                cursor: "pointer",
                display: "flex",
                alignItems: "center",
                justifyContent: "center",
              },
              onClick: () => n(),
              children: x(mo, {}),
            }),
          ],
        }),
        x("div", {
          css: {
            display: "grid",
            gridTemplateColumns: "repeat(2,minmax(0,1fr))",
            gridGap: 24,
            padding: 24,
          },
          children: t.map((l, u) =>
            H(
              "div",
              {
                css: { position: "relative" },
                children: [
                  x("div", {
                    css: {
                      position: "relative",
                      width: r.width * o + 6,
                      height: r.height * o + 6,
                      border: "3px solid #fff",
                      boxShadow:
                        "0 0 0 1px rgba(64,87,109,.07),0 2px 8px rgba(57,76,96,.15)",
                      borderRadius: 8,
                    },
                    children: x(nw, {
                      height: r.height,
                      isActive: !0,
                      pageIndex: u,
                      scale: o,
                      width: r.width,
                    }),
                  }),
                  x("p", {
                    css: {
                      fontSize: 14,
                      fontWeight: 700,
                      textAlign: "center",
                      lineHeight: 2,
                    },
                    children: u + 1,
                  }),
                  x("div", {
                    css: { position: "absolute", inset: 0 },
                    onClick: () => a(u),
                  }),
                ],
              },
              u
            )
          ),
        }),
      ],
    });
  };
var rw = function (e) {
    return U.jsx(
      "svg",
      Re(
        {
          xmlns: "http://www.w3.org/2000/svg",
          viewBox: "0 0 256 256",
          fill: "currentColor",
          width: "1em",
          height: "1em",
        },
        e,
        {
          children: U.jsx("path", {
            d: "m213.66 101.66-80 80a8 8 0 0 1-11.32 0l-80-80a8 8 0 0 1 11.32-11.32L128 164.69l74.34-74.35a8 8 0 0 1 11.32 11.32Z",
          }),
        }
      )
    );
  },
  AD = function (e) {
    return U.jsx(
      "svg",
      Re(
        {
          xmlns: "http://www.w3.org/2000/svg",
          viewBox: "0 0 256 256",
          fill: "currentColor",
          width: "1em",
          height: "1em",
        },
        e,
        {
          children: U.jsx("path", {
            d: "M213.66 165.66a8 8 0 0 1-11.32 0L128 91.31l-74.34 74.35a8 8 0 0 1-11.32-11.32l80-80a8 8 0 0 1 11.32 0l80 80a8 8 0 0 1 0 11.32Z",
          }),
        }
      )
    );
  },
  LD = function (e) {
    return U.jsx(
      "svg",
      Re(
        {
          xmlns: "http://www.w3.org/2000/svg",
          viewBox: "0 0 256 256",
          fill: "currentColor",
          width: "1em",
          height: "1em",
        },
        e,
        {
          children: U.jsx("path", {
            d: "M240 136v64a16 16 0 0 1-16 16H32a16 16 0 0 1-16-16v-64a16 16 0 0 1 16-16h40a8 8 0 0 1 0 16H32v64h192v-64h-40a8 8 0 0 1 0-16h40a16 16 0 0 1 16 16Zm-117.66-2.34a8 8 0 0 0 11.32 0l48-48a8 8 0 0 0-11.32-11.32L136 108.69V24a8 8 0 0 0-16 0v84.69L85.66 74.34a8 8 0 0 0-11.32 11.32ZM200 168a12 12 0 1 0-12 12 12 12 0 0 0 12-12Z",
          }),
        }
      )
    );
  },
  PD = function (e) {
    return U.jsx(
      "svg",
      Re(
        {
          xmlns: "http://www.w3.org/2000/svg",
          viewBox: "0 0 256 256",
          fill: "currentColor",
          width: "1em",
          height: "1em",
        },
        e,
        {
          children: U.jsx("path", {
            d: "m213.66 82.34-56-56A8 8 0 0 0 152 24H56a16 16 0 0 0-16 16v176a16 16 0 0 0 16 16h144a16 16 0 0 0 16-16V88a8 8 0 0 0-2.34-5.66ZM160 51.31 188.69 80H160ZM200 216H56V40h88v48a8 8 0 0 0 8 8h48v120Zm-40-64a8 8 0 0 1-8 8h-16v16a8 8 0 0 1-16 0v-16h-16a8 8 0 0 1 0-16h16v-16a8 8 0 0 1 16 0v16h16a8 8 0 0 1 8 8Z",
          }),
        }
      )
    );
  },
  ff = function (e) {
    return U.jsx(
      "svg",
      Re(
        {
          xmlns: "http://www.w3.org/2000/svg",
          viewBox: "0 0 256 256",
          fill: "currentColor",
          width: "1em",
          height: "1em",
        },
        e,
        {
          children: U.jsx("path", {
            d: "M208 80H96V56a32 32 0 0 1 32-32c15.37 0 29.2 11 32.16 25.59a8 8 0 0 0 15.68-3.18C171.32 24.15 151.2 8 128 8a48.05 48.05 0 0 0-48 48v24H48a16 16 0 0 0-16 16v112a16 16 0 0 0 16 16h160a16 16 0 0 0 16-16V96a16 16 0 0 0-16-16Zm0 128H48V96h160v112Zm-80-96a28 28 0 0 0-8 54.83V184a8 8 0 0 0 16 0v-17.17a28 28 0 0 0-8-54.83Zm0 40a12 12 0 1 1 12-12 12 12 0 0 1-12 12Z",
          }),
        }
      )
    );
  };
function _D(n, e) {
  if (n.match(/^[a-z]+:\/\//i)) return n;
  if (n.match(/^\/\//)) return window.location.protocol + n;
  if (n.match(/^[a-z]+:/i)) return n;
  const t = document.implementation.createHTMLDocument(),
    r = t.createElement("base"),
    i = t.createElement("a");
  return (
    t.head.appendChild(r),
    t.body.appendChild(i),
    e && (r.href = e),
    (i.href = n),
    i.href
  );
}
const ND = (() => {
  let n = 0;
  const e = () =>
    `0000${((Math.random() * 36 ** 4) << 0).toString(36)}`.slice(-4);
  return () => ((n += 1), `u${e()}${n}`);
})();
function Xr(n) {
  const e = [];
  for (let t = 0, r = n.length; t < r; t++) e.push(n[t]);
  return e;
}
function Ql(n, e) {
  const r = (n.ownerDocument.defaultView || window)
    .getComputedStyle(n)
    .getPropertyValue(e);
  return r ? parseFloat(r.replace("px", "")) : 0;
}
function zD(n) {
  const e = Ql(n, "border-left-width"),
    t = Ql(n, "border-right-width");
  return n.clientWidth + e + t;
}
function BD(n) {
  const e = Ql(n, "border-top-width"),
    t = Ql(n, "border-bottom-width");
  return n.clientHeight + e + t;
}
function iw(n, e = {}) {
  const t = e.width || zD(n),
    r = e.height || BD(n);
  return { width: t, height: r };
}
function FD() {
  let n, e;
  try {
    e = process;
  } catch {}
  const t = e && e.env ? e.env.devicePixelRatio : null;
  return (
    t && ((n = parseInt(t, 10)), Number.isNaN(n) && (n = 1)),
    n || window.devicePixelRatio || 1
  );
}
const Bn = 16384;
function WD(n) {
  (n.width > Bn || n.height > Bn) &&
    (n.width > Bn && n.height > Bn
      ? n.width > n.height
        ? ((n.height *= Bn / n.width), (n.width = Bn))
        : ((n.width *= Bn / n.height), (n.height = Bn))
      : n.width > Bn
      ? ((n.height *= Bn / n.width), (n.width = Bn))
      : ((n.width *= Bn / n.height), (n.height = Bn)));
}
function ec(n) {
  return new Promise((e, t) => {
    const r = new Image();
    (r.decode = () => e(r)),
      (r.onload = () => e(r)),
      (r.onerror = t),
      (r.crossOrigin = "anonymous"),
      (r.decoding = "async"),
      (r.src = n);
  });
}
async function VD(n) {
  return Promise.resolve()
    .then(() => new XMLSerializer().serializeToString(n))
    .then(encodeURIComponent)
    .then((e) => `data:image/svg+xml;charset=utf-8,${e}`);
}
async function HD(n, e, t) {
  const r = "http://www.w3.org/2000/svg",
    i = document.createElementNS(r, "svg"),
    o = document.createElementNS(r, "foreignObject");
  return (
    i.setAttribute("width", `${e}`),
    i.setAttribute("height", `${t}`),
    i.setAttribute("viewBox", `0 0 ${e} ${t}`),
    o.setAttribute("width", "100%"),
    o.setAttribute("height", "100%"),
    o.setAttribute("x", "0"),
    o.setAttribute("y", "0"),
    o.setAttribute("externalResourcesRequired", "true"),
    i.appendChild(o),
    o.appendChild(n),
    VD(i)
  );
}
const kn = (n, e) => {
  if (n instanceof e) return !0;
  const t = Object.getPrototypeOf(n);
  return t === null ? !1 : t.constructor.name === e.name || kn(t, e);
};
function $D(n) {
  const e = n.getPropertyValue("content");
  return `${n.cssText} content: '${e.replace(/'|"/g, "")}';`;
}
function jD(n) {
  return Xr(n)
    .map((e) => {
      const t = n.getPropertyValue(e),
        r = n.getPropertyPriority(e);
      return `${e}: ${t}${r ? " !important" : ""};`;
    })
    .join(" ");
}
function UD(n, e, t) {
  const r = `.${n}:${e}`,
    i = t.cssText ? $D(t) : jD(t);
  return document.createTextNode(`${r}{${i}}`);
}
function dm(n, e, t) {
  const r = window.getComputedStyle(n, t),
    i = r.getPropertyValue("content");
  if (i === "" || i === "none") return;
  const o = ND();
  try {
    e.className = `${e.className} ${o}`;
  } catch {
    return;
  }
  const a = document.createElement("style");
  a.appendChild(UD(o, t, r)), e.appendChild(a);
}
function ZD(n, e) {
  dm(n, e, ":before"), dm(n, e, ":after");
}
const fm = "application/font-woff",
  hm = "image/jpeg",
  YD = {
    woff: fm,
    woff2: fm,
    ttf: "application/font-truetype",
    eot: "application/vnd.ms-fontobject",
    png: "image/png",
    jpg: hm,
    jpeg: hm,
    gif: "image/gif",
    tiff: "image/tiff",
    svg: "image/svg+xml",
    webp: "image/webp",
  };
function qD(n) {
  const e = /\.([^./]*?)$/g.exec(n);
  return e ? e[1] : "";
}
function nh(n) {
  const e = qD(n).toLowerCase();
  return YD[e] || "";
}
function GD(n) {
  return n.split(/,/)[1];
}
function hf(n) {
  return n.search(/^(data:)/) !== -1;
}
function ow(n, e) {
  return `data:${e};base64,${n}`;
}
async function sw(n, e, t) {
  const r = await fetch(n, e);
  if (r.status === 404) throw new Error(`Resource "${r.url}" not found`);
  const i = await r.blob();
  return new Promise((o, a) => {
    const l = new FileReader();
    (l.onerror = a),
      (l.onloadend = () => {
        try {
          o(t({ res: r, result: l.result }));
        } catch (u) {
          a(u);
        }
      }),
      l.readAsDataURL(i);
  });
}
const yd = {};
function KD(n, e, t) {
  let r = n.replace(/\?.*/, "");
  return (
    t && (r = n),
    /ttf|otf|eot|woff2?/i.test(r) && (r = r.replace(/.*\//, "")),
    e ? `[${e}]${r}` : r
  );
}
async function rh(n, e, t) {
  const r = KD(n, e, t.includeQueryParams);
  if (yd[r] != null) return yd[r];
  t.cacheBust && (n += (/\?/.test(n) ? "&" : "?") + new Date().getTime());
  let i;
  try {
    const o = await sw(
      n,
      t.fetchRequestInit,
      ({ res: a, result: l }) => (
        e || (e = a.headers.get("Content-Type") || ""), GD(l)
      )
    );
    i = ow(o, e);
  } catch (o) {
    i = t.imagePlaceholder || "";
    let a = `Failed to fetch resource: ${n}`;
    o && (a = typeof o == "string" ? o : o.message), a && console.warn(a);
  }
  return (yd[r] = i), i;
}
async function XD(n) {
  const e = n.toDataURL();
  return e === "data:," ? n.cloneNode(!1) : ec(e);
}
async function JD(n, e) {
  if (n.currentSrc) {
    const o = document.createElement("canvas"),
      a = o.getContext("2d");
    (o.width = n.clientWidth),
      (o.height = n.clientHeight),
      a == null || a.drawImage(n, 0, 0, o.width, o.height);
    const l = o.toDataURL();
    return ec(l);
  }
  const t = n.poster,
    r = nh(t),
    i = await rh(t, r, e);
  return ec(i);
}
async function QD(n) {
  var e;
  try {
    if (
      !(
        (e = n == null ? void 0 : n.contentDocument) === null || e === void 0
      ) &&
      e.body
    )
      return await Tc(n.contentDocument.body, {}, !0);
  } catch {}
  return n.cloneNode(!1);
}
async function eI(n, e) {
  return kn(n, HTMLCanvasElement)
    ? XD(n)
    : kn(n, HTMLVideoElement)
    ? JD(n, e)
    : kn(n, HTMLIFrameElement)
    ? QD(n)
    : n.cloneNode(!1);
}
const tI = (n) => n.tagName != null && n.tagName.toUpperCase() === "SLOT";
async function nI(n, e, t) {
  var r, i;
  let o = [];
  return (
    tI(n) && n.assignedNodes
      ? (o = Xr(n.assignedNodes()))
      : kn(n, HTMLIFrameElement) &&
        !((r = n.contentDocument) === null || r === void 0) &&
        r.body
      ? (o = Xr(n.contentDocument.body.childNodes))
      : (o = Xr(
          ((i = n.shadowRoot) !== null && i !== void 0 ? i : n).childNodes
        )),
    o.length === 0 ||
      kn(n, HTMLVideoElement) ||
      (await o.reduce(
        (a, l) =>
          a
            .then(() => Tc(l, t))
            .then((u) => {
              u && e.appendChild(u);
            }),
        Promise.resolve()
      )),
    e
  );
}
function rI(n, e) {
  const t = e.style;
  if (!t) return;
  const r = window.getComputedStyle(n);
  r.cssText
    ? ((t.cssText = r.cssText), (t.transformOrigin = r.transformOrigin))
    : Xr(r).forEach((i) => {
        let o = r.getPropertyValue(i);
        i === "font-size" &&
          o.endsWith("px") &&
          (o = `${
            Math.floor(parseFloat(o.substring(0, o.length - 2))) - 0.1
          }px`),
          kn(n, HTMLIFrameElement) &&
            i === "display" &&
            o === "inline" &&
            (o = "block"),
          i === "d" &&
            e.getAttribute("d") &&
            (o = `path(${e.getAttribute("d")})`),
          t.setProperty(i, o, r.getPropertyPriority(i));
      });
}
function iI(n, e) {
  kn(n, HTMLTextAreaElement) && (e.innerHTML = n.value),
    kn(n, HTMLInputElement) && e.setAttribute("value", n.value);
}
function oI(n, e) {
  if (kn(n, HTMLSelectElement)) {
    const t = e,
      r = Array.from(t.children).find(
        (i) => n.value === i.getAttribute("value")
      );
    r && r.setAttribute("selected", "");
  }
}
function sI(n, e) {
  return kn(e, Element) && (rI(n, e), ZD(n, e), iI(n, e), oI(n, e)), e;
}
async function aI(n, e) {
  const t = n.querySelectorAll ? n.querySelectorAll("use") : [];
  if (t.length === 0) return n;
  const r = {};
  for (let o = 0; o < t.length; o++) {
    const l = t[o].getAttribute("xlink:href");
    if (l) {
      const u = n.querySelector(l),
        d = document.querySelector(l);
      !u && d && !r[l] && (r[l] = await Tc(d, e, !0));
    }
  }
  const i = Object.values(r);
  if (i.length) {
    const o = "http://www.w3.org/1999/xhtml",
      a = document.createElementNS(o, "svg");
    a.setAttribute("xmlns", o),
      (a.style.position = "absolute"),
      (a.style.width = "0"),
      (a.style.height = "0"),
      (a.style.overflow = "hidden"),
      (a.style.display = "none");
    const l = document.createElementNS(o, "defs");
    a.appendChild(l);
    for (let u = 0; u < i.length; u++) l.appendChild(i[u]);
    n.appendChild(a);
  }
  return n;
}
async function Tc(n, e, t) {
  return !t && e.filter && !e.filter(n)
    ? null
    : Promise.resolve(n)
        .then((r) => eI(r, e))
        .then((r) => nI(n, r, e))
        .then((r) => sI(n, r))
        .then((r) => aI(r, e));
}
const aw = /url\((['"]?)([^'"]+?)\1\)/g,
  lI = /url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,
  cI = /src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;
function uI(n) {
  const e = n.replace(/([.*+?^${}()|\[\]\/\\])/g, "\\$1");
  return new RegExp(`(url\\(['"]?)(${e})(['"]?\\))`, "g");
}
function dI(n) {
  const e = [];
  return n.replace(aw, (t, r, i) => (e.push(i), t)), e.filter((t) => !hf(t));
}
async function fI(n, e, t, r, i) {
  try {
    const o = t ? _D(e, t) : e,
      a = nh(e);
    let l;
    if (i) {
      const u = await i(o);
      l = ow(u, a);
    } else l = await rh(o, a, r);
    return n.replace(uI(e), `$1${l}$3`);
  } catch {}
  return n;
}
function hI(n, { preferredFontFormat: e }) {
  return e
    ? n.replace(cI, (t) => {
        for (;;) {
          const [r, , i] = lI.exec(t) || [];
          if (!i) return "";
          if (i === e) return `src: ${r};`;
        }
      })
    : n;
}
function lw(n) {
  return n.search(aw) !== -1;
}
async function cw(n, e, t) {
  if (!lw(n)) return n;
  const r = hI(n, t);
  return dI(r).reduce(
    (o, a) => o.then((l) => fI(l, a, e, t)),
    Promise.resolve(r)
  );
}
async function yl(n, e, t) {
  var r;
  const i =
    (r = e.style) === null || r === void 0 ? void 0 : r.getPropertyValue(n);
  if (i) {
    const o = await cw(i, null, t);
    return e.style.setProperty(n, o, e.style.getPropertyPriority(n)), !0;
  }
  return !1;
}
async function pI(n, e) {
  (await yl("background", n, e)) || (await yl("background-image", n, e)),
    (await yl("mask", n, e)) || (await yl("mask-image", n, e));
}
async function gI(n, e) {
  const t = kn(n, HTMLImageElement);
  if (!(t && !hf(n.src)) && !(kn(n, SVGImageElement) && !hf(n.href.baseVal)))
    return;
  const r = t ? n.src : n.href.baseVal,
    i = await rh(r, nh(r), e);
  await new Promise((o, a) => {
    (n.onload = o), (n.onerror = a);
    const l = n;
    l.decode && (l.decode = o),
      l.loading === "lazy" && (l.loading = "eager"),
      t ? ((n.srcset = ""), (n.src = i)) : (n.href.baseVal = i);
  });
}
async function mI(n, e) {
  const r = Xr(n.childNodes).map((i) => uw(i, e));
  await Promise.all(r).then(() => n);
}
async function uw(n, e) {
  kn(n, Element) && (await pI(n, e), await gI(n, e), await mI(n, e));
}
function yI(n, e) {
  const { style: t } = n;
  e.backgroundColor && (t.backgroundColor = e.backgroundColor),
    e.width && (t.width = `${e.width}px`),
    e.height && (t.height = `${e.height}px`);
  const r = e.style;
  return (
    r != null &&
      Object.keys(r).forEach((i) => {
        t[i] = r[i];
      }),
    n
  );
}
const pm = {};
async function gm(n) {
  let e = pm[n];
  if (e != null) return e;
  const r = await (await fetch(n)).text();
  return (e = { url: n, cssText: r }), (pm[n] = e), e;
}
async function mm(n, e) {
  let t = n.cssText;
  const r = /url\(["']?([^"')]+)["']?\)/g,
    o = (t.match(/url\([^)]+\)/g) || []).map(async (a) => {
      let l = a.replace(r, "$1");
      return (
        l.startsWith("https://") || (l = new URL(l, n.url).href),
        sw(
          l,
          e.fetchRequestInit,
          ({ result: u }) => ((t = t.replace(a, `url(${u})`)), [a, u])
        )
      );
    });
  return Promise.all(o).then(() => t);
}
function ym(n) {
  if (n == null) return [];
  const e = [],
    t = /(\/\*[\s\S]*?\*\/)/gi;
  let r = n.replace(t, "");
  const i = new RegExp(
    "((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})",
    "gi"
  );
  for (;;) {
    const u = i.exec(r);
    if (u === null) break;
    e.push(u[0]);
  }
  r = r.replace(i, "");
  const o = /@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,
    a =
      "((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",
    l = new RegExp(a, "gi");
  for (;;) {
    let u = o.exec(r);
    if (u === null) {
      if (((u = l.exec(r)), u === null)) break;
      o.lastIndex = l.lastIndex;
    } else l.lastIndex = o.lastIndex;
    e.push(u[0]);
  }
  return e;
}
async function vI(n, e) {
  const t = [],
    r = [];
  return (
    n.forEach((i) => {
      if ("cssRules" in i)
        try {
          Xr(i.cssRules || []).forEach((o, a) => {
            if (o.type === CSSRule.IMPORT_RULE) {
              let l = a + 1;
              const u = o.href,
                d = gm(u)
                  .then((h) => mm(h, e))
                  .then((h) =>
                    ym(h).forEach((p) => {
                      try {
                        i.insertRule(
                          p,
                          p.startsWith("@import") ? (l += 1) : i.cssRules.length
                        );
                      } catch (g) {
                        console.error("Error inserting rule from remote css", {
                          rule: p,
                          error: g,
                        });
                      }
                    })
                  )
                  .catch((h) => {
                    console.error("Error loading remote css", h.toString());
                  });
              r.push(d);
            }
          });
        } catch (o) {
          const a = n.find((l) => l.href == null) || document.styleSheets[0];
          i.href != null &&
            r.push(
              gm(i.href)
                .then((l) => mm(l, e))
                .then((l) =>
                  ym(l).forEach((u) => {
                    a.insertRule(u, i.cssRules.length);
                  })
                )
                .catch((l) => {
                  console.error("Error loading remote stylesheet", l);
                })
            ),
            console.error("Error inlining remote css file", o);
        }
    }),
    Promise.all(r).then(
      () => (
        n.forEach((i) => {
          if ("cssRules" in i)
            try {
              Xr(i.cssRules || []).forEach((o) => {
                t.push(o);
              });
            } catch (o) {
              console.error(`Error while reading CSS rules from ${i.href}`, o);
            }
        }),
        t
      )
    )
  );
}
function wI(n) {
  return n
    .filter((e) => e.type === CSSRule.FONT_FACE_RULE)
    .filter((e) => lw(e.style.getPropertyValue("src")));
}
async function bI(n, e) {
  if (n.ownerDocument == null)
    throw new Error("Provided element is not within a Document");
  const t = Xr(n.ownerDocument.styleSheets),
    r = await vI(t, e);
  return wI(r);
}
async function xI(n, e) {
  const t = await bI(n, e);
  return (
    await Promise.all(
      t.map((i) => {
        const o = i.parentStyleSheet ? i.parentStyleSheet.href : null;
        return cw(i.cssText, o, e);
      })
    )
  ).join(`
`);
}
async function SI(n, e) {
  const t =
    e.fontEmbedCSS != null
      ? e.fontEmbedCSS
      : e.skipFonts
      ? null
      : await xI(n, e);
  if (t) {
    const r = document.createElement("style"),
      i = document.createTextNode(t);
    r.appendChild(i),
      n.firstChild ? n.insertBefore(r, n.firstChild) : n.appendChild(r);
  }
}
async function CI(n, e = {}) {
  const { width: t, height: r } = iw(n, e),
    i = await Tc(n, e, !0);
  return await SI(i, e), await uw(i, e), yI(i, e), await HD(i, t, r);
}
async function EI(n, e = {}) {
  const { width: t, height: r } = iw(n, e),
    i = await CI(n, e),
    o = await ec(i),
    a = document.createElement("canvas"),
    l = a.getContext("2d"),
    u = e.pixelRatio || FD(),
    d = e.canvasWidth || t,
    h = e.canvasHeight || r;
  return (
    (a.width = d * u),
    (a.height = h * u),
    e.skipAutoScale || WD(a),
    (a.style.width = `${d}`),
    (a.style.height = `${h}`),
    e.backgroundColor &&
      ((l.fillStyle = e.backgroundColor), l.fillRect(0, 0, a.width, a.height)),
    l.drawImage(o, 0, 0, a.width, a.height),
    a
  );
}
async function kI(n, e = {}) {
  return (await EI(n, e)).toDataURL();
}
const vl = ({ direction: n, onResizeStart: e }) => {
    const t = S.useMemo(() => {
        const i = {};
        return (
          n.toLowerCase().includes("top") && (i.top = -16),
          n.toLowerCase().includes("left") && (i.left = -16),
          n.toLowerCase().includes("bottom") && (i.bottom = -16),
          n.toLowerCase().includes("right") && (i.right = -16),
          i
        );
      }, [n]),
      r = S.useCallback(
        (i) => {
          i.stopPropagation(), e(i.nativeEvent, n);
        },
        [e, n]
      );
    return x("div", {
      css: {
        height: 32,
        width: 32,
        position: "absolute",
        display: "flex",
        alignItems: "center",
        justifyContent: "center",
        pointerEvents: "auto",
        zIndex: 50,
        ...t,
      },
      onMouseDown: r,
      onTouchStart: r,
      children: x("div", {
        css: {
          borderRadius: "50%",
          cursor: "auto",
          width: 12,
          height: 12,
          background: "white",
          boxShadow:
            "0 0 4px 1px rgba(57,76,96,.15), 0 0 0 1px rgba(43,59,74,.3)",
        },
      }),
    });
  },
  OI = ({ getData: n, onDragStart: e }) => {
    const {
        imageEditor: t,
        actions: r,
        scale: i,
      } = $e((y) => ({ imageEditor: y.imageEditor, scale: y.scale })),
      o = S.useRef(),
      a = (t == null ? void 0 : t.image) ?? (t == null ? void 0 : t.video),
      l = () => {
        window.addEventListener("mousemove", h),
          window.addEventListener("touchmove", h),
          window.addEventListener("mouseup", p, { once: !0 }),
          window.addEventListener("mouseleave", p, { once: !0 }),
          window.addEventListener("touchend", p, { once: !0 });
      },
      u = () => {
        window.removeEventListener("mousemove", h),
          window.removeEventListener("touchmove", h),
          window.removeEventListener("mouseup", p),
          window.removeEventListener("mouseleave", p),
          window.removeEventListener("touchend", p);
      },
      d = ({ clientX: y, clientY: m }) => {
        const w = ee.distanceBetweenPoints(
            o.current,
            { clientX: y, clientY: m },
            i
          ),
          b = ee.horizontalAndVerticalChange(
            n(),
            ee.angleBetweenPoints(o.current, { clientX: y, clientY: m }),
            w
          );
        return { x: b.width, y: b.height };
      },
      h = Te.throttle((y) => {
        if (!t || !a || !o.current) return;
        y.stopPropagation();
        const { clientX: m, clientY: w } = ae.getPosition(y);
        (o.current.moveX = m), (o.current.moveY = w);
        const b = d({ clientX: m, clientY: w }),
          E = ee.boundingRect(
            t.boxSize,
            { x: a.position.x + b.x, y: a.position.y + b.y },
            0
          ),
          R = Math.min(Math.max(E.x, E.width - a.boxSize.width), 0),
          O = Math.min(Math.max(E.y, E.height - a.boxSize.height), 0);
        t &&
          r.updateImageEditor({
            image: t.image ? { position: { x: R, y: O } } : void 0,
            video: t.video ? { position: { x: R, y: O } } : void 0,
          });
      }, 16),
      p = () => {
        if (!t || !a || !o.current) return;
        const { moveX: y, moveY: m } = o.current,
          w = d({ clientX: y, clientY: m }),
          b = ee.boundingRect(
            t.boxSize,
            { x: a.position.x + w.x, y: a.position.y + w.y },
            0
          ),
          E = Math.min(Math.max(b.x, b.width - a.boxSize.width), 0),
          R = Math.min(Math.max(b.y, b.height - a.boxSize.height), 0);
        t &&
          r.updateImageEditor({
            image: t.image ? { position: { x: E, y: R } } : void 0,
            video: t.video ? { position: { x: E, y: R } } : void 0,
          }),
          u();
      };
    return {
      startDrag: (y) => {
        y.stopPropagation();
        const { clientX: m, clientY: w } = ae.getPosition(y.nativeEvent);
        (o.current = { clientX: m, clientY: w, moveX: m, moveY: w }),
          e && e(),
          l();
      },
    };
  },
  TI = ({
    getData: n,
    onResizeStart: e,
    onResize: t,
    onResizeEnd: r,
    lockAspect: i = !1,
  }) => {
    const { frameScale: o } = $e((m) => ({ frameScale: m.scale })),
      a = S.useRef({
        clientX: 0,
        clientY: 0,
        last: { clientX: 0, clientY: 0 },
        direction: "topRight",
        isResizing: !1,
        lockAspect: i,
      }),
      { getResized: l } = ee.useResize(n, o),
      u = (m, w) =>
        l(
          a.current.direction,
          a.current,
          { clientX: m, clientY: w },
          a.current.lockAspect
        ),
      d = Te.throttle((m) => {
        m.stopPropagation(), (a.current.e = m);
        const { clientX: w, clientY: b } = ae.getPosition(m);
        a.current.last = { clientX: w, clientY: b };
        const E = u(w, b);
        t(E, a.current.direction, a.current, { clientX: w, clientY: b });
      }, 16),
      h = (m) => {
        m.stopPropagation();
        const { clientX: w, clientY: b } = a.current.last,
          E = u(w, b);
        r && r(E), g();
      },
      p = () => {
        window.addEventListener("mousemove", d),
          window.addEventListener("touchmove", d),
          window.addEventListener("mouseup", h, { once: !0 }),
          window.addEventListener("mouseleave", h, { once: !0 }),
          window.addEventListener("touchend", h, { once: !0 });
      },
      g = () => {
        window.removeEventListener("mousemove", d),
          window.removeEventListener("touchmove", d),
          window.removeEventListener("mouseup", h),
          window.removeEventListener("mouseleave", h),
          window.removeEventListener("touchend", h);
      };
    return (
      S.useEffect(() => {
        const m = (w) => {
          (a.current.lockAspect = i || w.shiftKey),
            a.current.e && a.current.isResizing && d(a.current.e);
        };
        return (
          window.addEventListener("keydown", m),
          window.addEventListener("keyup", m),
          () => {
            window.removeEventListener("keydown", m),
              window.removeEventListener("keyup", m);
          }
        );
      }, [d, i]),
      {
        startResize: (m, w) => {
          const { clientX: b, clientY: E } = ae.getPosition(m);
          (a.current = {
            clientX: b,
            clientY: E,
            last: { clientX: b, clientY: E },
            direction: w,
            e: m,
            isResizing: !0,
            lockAspect: i,
          }),
            e(m, w),
            p();
        },
      }
    );
  },
  MI = () => {
    const n = S.useRef(null),
      e = S.useRef(null),
      [t, r, i] = ae.useLinkedRef(),
      [, o, a] = ae.useLinkedRef(),
      {
        imageEditor: l,
        actions: u,
        scale: d,
      } = $e((y) => {
        const m = y.imageEditor;
        return {
          imageEditor: m,
          scale: y.scale,
          originalLayer: y.pages[m.pageIndex].layers[m.layerId],
        };
      }),
      h = l.image ?? l.video,
      { startDrag: p } = OI({
        getData: o,
        onDragStart: () => {
          l && a(l.rotate);
        },
      });
    S.useEffect(() => {
      const y = (m) => {
        const w = e == null ? void 0 : e.current,
          b = n == null ? void 0 : n.current;
        !w ||
          w.contains(m.target) ||
          (l.layerId !== "ROOT" && b != null && b.contains(m.target)) ||
          u.closeImageEditor();
      };
      return (
        window.addEventListener("mousedown", y, { capture: !0 }),
        () => {
          window.removeEventListener("mousedown", y, { capture: !0 });
        }
      );
    }, [u, l.layerId]);
    const { startResize: g } = TI({
      lockAspect: !0,
      getData: r,
      onResizeStart: () => {
        h && i({ boxSize: h.boxSize, position: h.position, rotate: h.rotate });
      },
      onResize: ({ boxSize: y, position: m, rotate: w }, b) => {
        var E, R;
        if (l && t.current && h) {
          let O = Math.min(m.x, 0),
            I = Math.min(m.y, 0),
            M = y.width,
            D = y.height;
          const N = t.current.boxSize.width / t.current.boxSize.height,
            Y = t.current.position.x * -1 - t.current.position.y * -1 * N,
            X = t.current.position.y * -1 - (t.current.position.x * -1) / N,
            j = t.current.position.x / t.current.position.y;
          if (["topLeft"].includes(b)) {
            const W = l.boxSize.width / l.boxSize.height,
              G = m.y - I,
              te = m.x - O;
            (G > 0 || te > 0) &&
              (j > W
                ? ((O = -Y), (M += m.x - O), (D += +m.y))
                : ((I = -X), (M += m.x), (D += +m.y - I)));
          } else if (
            b === "bottomRight" &&
            (y.width < l.boxSize.width - h.position.x ||
              y.height < l.boxSize.height - h.position.y)
          ) {
            const W = Math.max(y.width, l.boxSize.width - h.position.x),
              G = Math.max(y.height, l.boxSize.height - h.position.y);
            W / G > N
              ? ((M = l.boxSize.width - h.position.x), (D = M / N))
              : W / G < N &&
                ((D = l.boxSize.height - h.position.y), (M = D * N));
          } else if (
            b === "topRight" &&
            (m.y > 0 || y.width < l.boxSize.width - t.current.position.x)
          ) {
            const W = l.boxSize.width - t.current.position.x,
              G = ((E = t.current) == null ? void 0 : E.boxSize.width) - W;
            (G / t.current.position.y) * -1 > N
              ? ((D = Math.max(
                  t.current.boxSize.height + t.current.position.y,
                  y.height
                )),
                (M = D * N))
              : ((M = Math.max(
                  l.boxSize.width - t.current.position.x,
                  y.width
                )),
                (D = M / N),
                (I = t.current.position.y + G / N));
          } else if (
            b === "bottomLeft" &&
            (m.x > 0 || y.height < l.boxSize.height - t.current.position.y)
          ) {
            const W = l.boxSize.height - t.current.position.y,
              G = ((R = t.current) == null ? void 0 : R.boxSize.height) - W;
            ((G / t.current.position.x) * -1 || 0) > N
              ? ((M = Math.max(
                  t.current.boxSize.width + t.current.position.x,
                  y.width
                )),
                (D = M / N))
              : ((D = Math.max(
                  l.boxSize.height - t.current.position.y,
                  y.height
                )),
                (M = D * N),
                (O = t.current.position.x + G * N));
          }
          u.updateImageEditor({
            image: l.image
              ? {
                  boxSize: { width: M, height: D },
                  position: { x: O, y: I },
                  rotate: w,
                }
              : void 0,
            video: l.video
              ? {
                  boxSize: { width: M, height: D },
                  position: { x: O, y: I },
                  rotate: w,
                }
              : void 0,
          });
        }
      },
    });
    return h
      ? x("div", {
          css: {
            position: "absolute",
            inset: 0,
            pointerEvents: "none",
            zIndex: 4,
          },
          children: x("div", {
            css: {
              width: l.boxSize.width * d,
              height: l.boxSize.height * d,
              left: 0,
              top: 0,
              position: "absolute",
              transform: ee.getTransformStyle({
                position: { x: l.position.x * d, y: l.position.y * d },
                rotate: l.rotate,
              }),
            },
            children: H("div", {
              ref: e,
              css: {
                width: h.boxSize.width * d,
                height: h.boxSize.height * d,
                left: 0,
                top: 0,
                position: "absolute",
                outline: "2px solid rgba(61, 142, 255,.5)",
                boxShadow:
                  "0 0 0 1px hsla(0,0%,100%,.07), inset 0 0 0 1px hsla(0,0%,100%,.07)",
                transform: ee.getTransformStyle({
                  position: { x: h.position.x * d, y: h.position.y * d },
                  rotate: h.rotate,
                }),
              },
              onMouseDown: p,
              onTouchStart: p,
              children: [
                x("div", {
                  css: {
                    position: "absolute",
                    inset: -12,
                    pointerEvents: "auto",
                    cursor: "move",
                  },
                }),
                x(vl, { direction: "topLeft", onResizeStart: g }),
                x(vl, { direction: "topRight", onResizeStart: g }),
                x(vl, { direction: "bottomRight", onResizeStart: g }),
                x(vl, { direction: "bottomLeft", onResizeStart: g }),
              ],
            }),
          }),
        })
      : null;
  },
  RI = () => {
    const n = S.useRef(null),
      {
        imageEditor: e,
        originalLayer: t,
        scale: r,
      } = $e((a) => {
        const l = a.imageEditor;
        return {
          imageEditor: l,
          scale: a.scale,
          originalLayer: l ? a.pages[l.pageIndex].layers[l.layerId] : null,
        };
      }),
      i = (e == null ? void 0 : e.image) ?? (e == null ? void 0 : e.video);
    if (!e || !t || !i) return null;
    const o = ee.positionOfObjectInsideAnother(e, i);
    return H("div", {
      css: { position: "absolute", inset: 0, pointerEvents: "none" },
      children: [
        x("div", {
          css: {
            width: i.boxSize.width * r,
            height: i.boxSize.height * r,
            left: 0,
            top: 0,
            position: "absolute",
            transform: ee.getTransformStyle({
              position: { x: o.x * r, y: o.y * r },
              rotate: o.rotate,
            }),
            opacity: 0.5,
          },
          children: H("div", {
            css: { width: "100%", height: "100%" },
            children: [
              e.image &&
                x("img", {
                  alt: i.url,
                  crossOrigin: "anonymous",
                  css: {
                    display: "block",
                    height: "100%",
                    width: "100%",
                    position: "absolute",
                    pointerEvents: "none",
                    objectFit: "fill",
                  },
                  src: i.url,
                }),
              e.video &&
                x("video", {
                  crossOrigin: "anonymous",
                  css: { objectFit: "fill", width: "100%", height: "100%" },
                  src: i.url,
                }),
            ],
          }),
        }),
        x("div", {
          ref: n,
          css: {
            position: "absolute",
            top: 0,
            left: 0,
            width: e.boxSize.width * r,
            height: e.boxSize.height * r,
            transform: ee.getTransformStyle({
              position: { x: e.position.x * r, y: e.position.y * r },
              rotate: e.rotate,
            }),
            overflow: "hidden",
            clipPath: Mi(t)
              ? `path("${ee.scalePath(
                  t.data.props.clipPath,
                  t.data.props.scale * r
                )}")`
              : void 0,
          },
          children: x("div", {
            css: {
              width: i.boxSize.width * r,
              height: i.boxSize.height * r,
              transform: ee.getTransformStyle({
                position: { x: i.position.x * r, y: i.position.y * r },
                rotate: i.rotate,
              }),
              opacity: 1,
              position: "absolute",
              left: 0,
              top: 0,
            },
            children: H("div", {
              css: { width: "100%", height: "100%" },
              children: [
                e.image &&
                  x("img", {
                    alt: i.url,
                    crossOrigin: "anonymous",
                    css: {
                      display: "block",
                      height: "100%",
                      width: "100%",
                      position: "absolute",
                      pointerEvents: "none",
                      objectFit: "fill",
                    },
                    src: i.url,
                  }),
                e.video &&
                  x("video", {
                    crossOrigin: "anonymous",
                    css: { objectFit: "fill", width: "100%", height: "100%" },
                    src: i.url,
                  }),
              ],
            }),
          }),
        }),
        x(MI, {}),
      ],
    });
  },
  DI = ({ editor: n }) => {
    const e = S.useRef(null),
      { actions: t } = $e(),
      r = ee.useEventCallback(() => {
        t.history.new();
        const i = jv({
          content: n.dom.innerHTML,
          ele: e.current,
          handleDOMEvents: {
            blur: () => {
              mc && t.closeTextEditor();
            },
          },
        });
        Qt({ from: i.state.doc.content.size, to: i.state.doc.content.size })(
          i.state,
          i.dispatch
        ),
          i.focus(),
          t.setOpeningEditor(i);
      });
    return (
      S.useEffect(() => {
        r();
      }, [r]),
      x("div", { ref: e })
    );
  },
  II = S.memo(DI),
  AI = () => {
    const { editorScale: n, layer: e } = $e((p) => {
      const g = p.textEditor,
        y = p.pages[g.pageIndex].layers[g.layerId];
      return { editorScale: p.scale, textEditor: g, layer: y };
    });
    if (!e) return null;
    const t = e.data.editor,
      {
        boxSize: r,
        position: i,
        scale: o,
        rotate: a,
        transparency: l,
        effect: u,
        colors: d,
        fontSizes: h,
      } = e.data.props;
    return x("div", {
      css: {
        touchAction: "pan-x pan-y pinch-zoom",
        pointerEvents: "auto",
        position: "absolute",
        width: r.width * n,
        height: r.height * n,
        transform: ee.getTransformStyle({
          position: { x: i.x * n, y: i.y * n },
          rotate: a,
        }),
        opacity: l,
        top: 0,
        left: 0,
      },
      children: x("div", {
        css: {
          width: r.width / o,
          height: r.height / o,
          transform: `scale(${o * n})`,
          transformOrigin: "0 0",
          p: {
            "&:before": {
              ...ee.getTextEffectStyle(
                (u == null ? void 0 : u.name) || "none",
                u == null ? void 0 : u.settings,
                d[0],
                h[0]
              ),
            },
          },
          ...ee.getTextEffectStyle(
            (u == null ? void 0 : u.name) || "none",
            u == null ? void 0 : u.settings,
            d[0],
            h[0]
          ),
        },
        onMouseDown: (p) => p.stopPropagation(),
        children: t && x(II, { editor: t }),
      }),
    });
  },
  Sr = 16,
  wl = ({
    isActive: n,
    top: e,
    left: t,
    bottom: r,
    right: i,
    direction: o,
    rotate: a,
    onResizeStart: l,
  }) => {
    const {
        config: { assetPath: u },
      } = S.useContext(ei),
      h = Math.round(
        ((a +
          { bottomLeft: 45, topLeft: 135, topRight: 225, bottomRight: 315 }[o] +
          90) %
          180) /
          10
      ),
      p = (g) => {
        l(g.nativeEvent, o);
      };
    return x("div", {
      css: {
        top: e,
        left: t,
        bottom: r,
        right: i,
        position: "absolute",
        width: 32,
        height: 32,
        display: "flex",
        justifyContent: "center",
        alignItems: "center",
      },
      children: x("div", {
        css: {
          width: Sr,
          height: Sr,
          pointerEvents: "auto",
          display: "flex",
          alignItems: "center",
          justifyContent: "center",
          ":hover": {
            cursor: `url('${u}/cursors/resize/${h}.png') 12 12, auto`,
          },
        },
        onMouseDown: (g) => {
          g.stopPropagation(), p(g);
        },
        onTouchStart: (g) => {
          g.stopPropagation(), p(g);
        },
        children: x("div", {
          css: {
            background: n ? "#3d8eff" : "white",
            width: 12,
            height: 12,
            position: "absolute",
            borderRadius: "50%",
            boxShadow:
              "0 0 4px 1px rgba(57,76,96,.15), 0 0 0 1px rgba(43,59,74,.3)",
            pointerEvents: "none",
            ":hover": { background: "#3d8eff" },
          },
        }),
      }),
    });
  },
  Cr = 16,
  bl = ({
    isActive: n,
    boxSize: e,
    width: t,
    height: r,
    top: i,
    left: o,
    right: a,
    bottom: l,
    direction: u,
    rotate: d,
    onResizeStart: h,
  }) => {
    const {
        config: { assetPath: p },
      } = S.useContext(ei),
      y = Math.round(
        ((d + { left: 90, top: 180, right: 270, bottom: 0 }[u] + 90) % 180) / 10
      ),
      m = (w) => {
        h(w.nativeEvent, u);
      };
    return x("div", {
      css: {
        width: t,
        height: r,
        top: i,
        left: o,
        right: a,
        bottom: l,
        position: "absolute",
        display: "flex",
        alignItems: "center",
        justifyContent: "center",
        pointerEvents: "auto",
        clipPath: ["top", "bottom"].includes(u)
          ? `inset(0 ${Cr / 2}px)`
          : `inset(${Cr / 2}px 0)`,
        ":hover": { cursor: `url('${p}/cursors/resize/${y}.png') 12 12, auto` },
      },
      onMouseDown: (w) => {
        w.stopPropagation(), m(w);
      },
      onTouchStart: (w) => {
        w.stopPropagation(), m(w);
      },
      children:
        ((e.width > 50 && ["top", "bottom"].includes(u)) ||
          (e.height > 50 && ["left", "right"].includes(u))) &&
        x("div", {
          css: {
            background: n ? "#3d8eff" : "white",
            width: ["top", "bottom"].includes(u) ? 18 : 6,
            height: ["top", "bottom"].includes(u) ? 6 : 18,
            borderRadius: 3,
            position: "absolute",
            boxShadow:
              "0 0 4px 1px rgba(57,76,96,.15), 0 0 0 1px rgba(43,59,74,.3)",
            ":hover": {
              background: "#3d8eff",
              boxShadow: "0 0 0 1px rgba(57,76,96,.15)",
            },
          },
        }),
    });
  };
var LI = function (e) {
  return U.jsx(
    "svg",
    Re(
      {
        xmlns: "http://www.w3.org/2000/svg",
        viewBox: "0 0 256 256",
        fill: "currentColor",
        width: "1em",
        height: "1em",
      },
      e,
      {
        children: U.jsx("path", {
          d: "M197.67 186.37a8 8 0 0 1 0 11.29C196.58 198.73 170.82 224 128 224c-37.39 0-64.53-22.4-80-39.85V208a8 8 0 0 1-16 0v-48a8 8 0 0 1 8-8h48a8 8 0 0 1 0 16H55.44C67.76 183.35 93 208 128 208c36 0 58.14-21.46 58.36-21.68a8 8 0 0 1 11.31.05ZM216 40a8 8 0 0 0-8 8v23.85C192.53 54.4 165.39 32 128 32c-42.82 0-68.58 25.27-69.66 26.34a8 8 0 0 0 11.3 11.34C69.86 69.46 92 48 128 48c35 0 60.24 24.65 72.56 40H168a8 8 0 0 0 0 16h48a8 8 0 0 0 8-8V48a8 8 0 0 0-8-8Z",
        }),
      }
    )
  );
};
const dw = ({ rotate: n, onRotateStart: e }) => {
    const { isRotating: t } = $e((a) => ({ isRotating: a.rotateData.status })),
      {
        config: { assetPath: r },
      } = S.useContext(ei),
      i = S.useCallback(
        (a) => {
          a.stopPropagation(), e(a.nativeEvent);
        },
        [e]
      ),
      o = Math.round(n / 10);
    return H("div", {
      css: {
        bottom: n < 230 && n > 130 ? "50%" : -48,
        position: "absolute",
        left: n < 230 && n > 130 ? "calc(100% + 48px)" : "50%",
        transform: n < 230 && n > 130 ? "translateY(50%)" : "translateX(-50%)",
        pointerEvents: "auto",
        display: t ? "none" : "block",
      },
      children: [
        x("div", {
          children: x("div", {
            css: {
              background: "white",
              boxShadow:
                "0 0 4px 1px rgba(57,76,96,.15), 0 0 0 1px rgba(43,59,74,.3)",
              width: 24,
              height: 24,
              borderRadius: "50%",
              display: "flex",
              alignItems: "center",
              justifyContent: "center",
              padding: 4,
              color: "#0d1216",
              ":hover": {
                cursor: `url('${r}/cursors/rotate/${
                  o === 36 ? 0 : o
                }.png') 12 12, auto;`,
              },
            },
            onMouseDown: i,
            onTouchStart: i,
            children: x(LI, {}),
          }),
        }),
        t &&
          H("div", {
            css: {
              position: "absolute",
              left: 60,
              top: 36,
              whiteSpace: "nowrap",
              background: "#1E1E2D",
              padding: "3px 8px",
              borderRadius: 4,
              textAlign: "center",
              color: "white",
              fontSize: 12,
              fontWeight: 700,
            },
            children: [Math.round(n), ""],
          }),
      ],
    });
  },
  PI = (
    {
      boxSize: n,
      position: e,
      rotate: t,
      disabled: r,
      locked: i,
      onResizeStart: o,
      onRouteStart: a,
    },
    l
  ) => {
    const u = ae.useForwardedRef(l),
      { pageIndex: d } = S.useContext(po),
      {
        imageEditor: h,
        isRotating: p,
        isDragging: g,
        frameScale: y,
        selectState: m,
        isGroup: w,
        resizeDirection: b,
        isPageLocked: E,
      } = $e((O) => ({
        isGroup: O.selectedLayers[d].length > 1,
        imageEditor: O.imageEditor,
        isDragging: O.dragData.status,
        isRotating: O.rotateData.status,
        resizeDirection: O.resizeData.direction,
        frameScale: O.scale,
        selectState: O.selectData.status,
        isPageLocked: O.pages[d].layers.ROOT.data.locked,
      })),
      R = (O, I) => {
        o && o(O, I);
      };
    return h
      ? null
      : x("div", {
          ref: u,
          css: { position: "absolute" },
          style: {
            transform: ee.getTransformStyle({
              position: { x: e.x * y, y: e.y * y },
              rotate: t,
            }),
            width: n.width * y,
            height: n.height * y,
          },
          children:
            !g &&
            !i &&
            !m &&
            !E &&
            H(S.Fragment, {
              children: [
                !r.corners &&
                  !p &&
                  H(S.Fragment, {
                    children: [
                      (!b || b === "topLeft") &&
                        x(wl, {
                          direction: "topLeft",
                          isActive: b === "topLeft",
                          left: -Sr,
                          rotate: t,
                          top: -Sr,
                          onResizeStart: R,
                        }),
                      (!b || b === "topRight") &&
                        x(wl, {
                          direction: "topRight",
                          isActive: b === "topRight",
                          right: -Sr,
                          rotate: t,
                          top: -Sr,
                          onResizeStart: R,
                        }),
                      (!b || b === "bottomLeft") &&
                        x(wl, {
                          bottom: -Sr,
                          direction: "bottomLeft",
                          isActive: b === "bottomLeft",
                          left: -Sr,
                          rotate: t,
                          onResizeStart: R,
                        }),
                      (!b || b === "bottomRight") &&
                        x(wl, {
                          bottom: -Sr,
                          direction: "bottomRight",
                          isActive: b === "bottomRight",
                          right: -Sr,
                          rotate: t,
                          onResizeStart: R,
                        }),
                    ],
                  }),
                !w &&
                  !p &&
                  H(S.Fragment, {
                    children: [
                      !r.vertical &&
                        H(S.Fragment, {
                          children: [
                            (!b || b === "top") &&
                              x(bl, {
                                boxSize: n,
                                direction: "top",
                                height: Cr,
                                isActive: b === "top",
                                rotate: t,
                                top: -(Cr / 2),
                                width: "100%",
                                onResizeStart: R,
                              }),
                            (!b || b === "bottom") &&
                              x(bl, {
                                bottom: -(Cr / 2),
                                boxSize: n,
                                direction: "bottom",
                                height: Cr,
                                isActive: b === "bottom",
                                rotate: t,
                                width: "100%",
                                onResizeStart: R,
                              }),
                          ],
                        }),
                      !r.horizontal &&
                        !p &&
                        H(S.Fragment, {
                          children: [
                            (!b || b === "left") &&
                              x(bl, {
                                boxSize: n,
                                direction: "left",
                                height: "100%",
                                isActive: b === "left",
                                left: -(Cr / 2),
                                rotate: t,
                                width: Cr,
                                onResizeStart: R,
                              }),
                            (!b || b === "right") &&
                              x(bl, {
                                boxSize: n,
                                direction: "right",
                                height: "100%",
                                isActive: b === "right",
                                right: -(Cr / 2),
                                rotate: t,
                                width: Cr,
                                onResizeStart: R,
                              }),
                          ],
                        }),
                    ],
                  }),
                !i && !r.rotate && !b && x(dw, { rotate: t, onRotateStart: a }),
              ],
            }),
        });
  },
  _I = S.forwardRef(PI),
  NI = () => {
    const { guideline: n, frameScale: e } = $e((t) => ({
      guideline: t.guideline,
      frameScale: t.scale,
    }));
    return !n.vertical.length && !n.horizontal.length
      ? null
      : H("div", {
          children: [
            n.horizontal.map((t, r) =>
              x(
                "div",
                {
                  css: {
                    position: "absolute",
                    top: t.y * e,
                    left: t.x1 * e,
                    width: (t.x2 - t.x1) * e,
                    borderTopWidth: 1,
                    borderStyle: "dashed",
                    borderColor: "#3d8eff",
                  },
                },
                r
              )
            ),
            n.vertical.map((t, r) =>
              x(
                "div",
                {
                  css: {
                    position: "absolute",
                    top: t.y1 * e,
                    left: t.x * e,
                    height: (t.y2 - t.y1) * e,
                    borderLeftWidth: 1,
                    borderStyle: "dashed",
                    borderColor: "#3d8eff",
                  },
                },
                r
              )
            ),
          ],
        });
  },
  vm = 16,
  wm = ({ isActive: n = !1, position: e, onChange: t }) => {
    const r = (i) => {
      t(i.nativeEvent, e);
    };
    return x("div", {
      css: {
        position: "absolute",
        width: 32,
        height: 32,
        display: "flex",
        justifyContent: "center",
        alignItems: "center",
      },
      children: x("div", {
        css: {
          width: vm,
          height: vm,
          pointerEvents: "auto",
          display: "flex",
          alignItems: "center",
          justifyContent: "center",
        },
        onMouseDown: (i) => {
          console.log("start"), i.stopPropagation(), r(i);
        },
        onTouchStart: (i) => {
          i.stopPropagation(), r(i);
        },
        children: x("div", {
          css: {
            background: n ? "#3d8eff" : "white",
            width: 12,
            height: 12,
            position: "absolute",
            borderRadius: "50%",
            boxShadow:
              "0 0 4px 1px rgba(57,76,96,.15), 0 0 0 1px rgba(43,59,74,.3)",
            pointerEvents: "none",
            ":hover": { background: "#3d8eff" },
          },
        }),
      }),
    });
  },
  zI = (
    {
      boxSize: n,
      disabled: e,
      position: t,
      rotate: r,
      locked: i,
      onChangeStart: o,
      onRouteStart: a,
    },
    l
  ) => {
    const u = ae.useForwardedRef(l),
      { pageIndex: d } = S.useContext(po),
      {
        imageEditor: h,
        isRotating: p,
        isDragging: g,
        frameScale: y,
        selectState: m,
        resizeDirection: w,
        isPageLocked: b,
        updateLineData: E,
      } = $e((O) => ({
        isGroup: O.selectedLayers[d].length > 1,
        imageEditor: O.imageEditor,
        isDragging: O.dragData.status,
        isRotating: O.rotateData.status,
        resizeDirection: O.resizeData.direction,
        frameScale: O.scale,
        selectState: O.selectData.status,
        isPageLocked: O.pages[d].layers.ROOT.data.locked,
        updateLineData: O.updateLineData,
      })),
      R = (O, I) => {
        o && o(O, I);
      };
    return h
      ? null
      : x("div", {
          ref: u,
          css: { position: "absolute" },
          style: {
            transform: ee.getTransformStyle({
              position: { x: t.x * y, y: t.y * y },
              rotate: r,
            }),
            width: n.width * y,
            height: n.height * y,
          },
          children:
            !g &&
            !i &&
            !m &&
            !b &&
            !p &&
            H(S.Fragment, {
              children: [
                !i &&
                  H(S.Fragment, {
                    children: [
                      (!E.status || E.linePosition === "start") &&
                        x("div", {
                          css: {
                            left: 0,
                            top: "50%",
                            display: "flex",
                            alignItems: "center",
                            justifyContent: "center",
                            position: "absolute",
                          },
                          children: x(wm, {
                            isActive: E.linePosition === "start",
                            position: "start",
                            onChange: R,
                          }),
                        }),
                      (!E.status || E.linePosition === "end") &&
                        x("div", {
                          css: {
                            left: "100%",
                            top: "50%",
                            display: "flex",
                            alignItems: "center",
                            justifyContent: "center",
                            position: "absolute",
                          },
                          children: x(wm, {
                            isActive: E.linePosition === "end",
                            position: "end",
                            onChange: R,
                          }),
                        }),
                    ],
                  }),
                !i &&
                  !e.rotate &&
                  !w &&
                  !E.status &&
                  x(dw, { rotate: r, onRotateStart: a }),
              ],
            }),
        });
  },
  BI = S.forwardRef(zI);
var fw = function (e) {
  return U.jsx(
    "svg",
    Re(
      {
        xmlns: "http://www.w3.org/2000/svg",
        viewBox: "0 0 256 256",
        fill: "currentColor",
        width: "1em",
        height: "1em",
      },
      e,
      {
        children: U.jsx("path", {
          d: "M144 128a16 16 0 1 1-16-16 16 16 0 0 1 16 16Zm-84-16a16 16 0 1 0 16 16 16 16 0 0 0-16-16Zm136 0a16 16 0 1 0 16 16 16 16 0 0 0-16-16Z",
        }),
      }
    )
  );
};
const FI = () => {
    const { pageIndex: n } = S.useContext(po),
      e = S.useRef(null),
      { selectedLayerIds: t, selectedLayers: r } = Vt(),
      {
        actions: i,
        state: o,
        isDragging: a,
        isResizing: l,
        isRotating: u,
        controlBox: d,
        pageSize: h,
        isOpenMenu: p,
        scale: g,
        isPageLocked: y,
        isUpdatingLine: m,
      } = $e((D, N) => ({
        isGroup: D.selectedLayers[D.activePage].length > 1,
        isDragging: D.dragData.status,
        isResizing: D.resizeData.status,
        isRotating: D.rotateData.status,
        isUpdatingLine: D.updateLineData.status,
        controlBox: D.controlBox,
        pageSize: N.getPageSize(),
        isPageLocked: D.pages[D.activePage].layers.ROOT.data.locked,
        isOpenMenu: !!D.openMenu,
        scale: D.scale,
      })),
      w = r.find((D) => D.data.locked),
      b = S.useMemo(
        () =>
          d
            ? ee.boundingRect(d.boxSize, d.position, d.rotate)
            : { x: 0, y: 80, width: h.width, height: h.height },
        [d, h.height, h.width]
      ),
      E = () => {
        Qf(o, { pageIndex: n, layerIds: t, actions: i });
      },
      R = () => {
        var D;
        if (p) i.hideContextMenu();
        else {
          const N =
            (D = e.current) == null ? void 0 : D.getBoundingClientRect();
          i.showContextMenu({ clientX: N.right - 42, clientY: N.bottom + 4 });
        }
      },
      O = () => {
        t.length === 1 && i.ungroup(t[0]);
      },
      I = () => {
        i.group(t);
      };
    if (a || l || u || m || (t.includes("ROOT") && !w && !y) || !d) return null;
    const M = !!r.find((D) => Jo(D));
    return x("div", {
      ref: e,
      css: {
        position: "absolute",
        left: (b.x + b.width / 2) * g,
        top: b.y * g - 60,
        transform: "translateX(-50%)",
      },
      children: x("div", {
        css: {
          height: 40,
          borderRadius: 4,
          padding: "0 4px",
          display: "inline-flex",
          alignItems: "center",
          background: "#fff",
          boxShadow:
            "0 0 0 1px rgba(64,87,109,.07),0 2px 12px rgba(53,71,90,.2)",
          overflow: "hidden",
          pointerEvents: "auto",
          color: "#0d1216",
        },
        onMouseDown: (D) => {
          D.stopPropagation();
        },
        children: H("div", {
          css: { alignItems: "center", display: "flex", whiteSpace: "nowrap" },
          children: [
            !y &&
              !w &&
              !t.includes("ROOT") &&
              H(S.Fragment, {
                children: [
                  t.length > 1 &&
                    x("div", {
                      css: {
                        lineHeight: "32px",
                        display: "flex",
                        justifyContent: "center",
                        alignItems: "center",
                        cursor: "pointer",
                        fontSize: 14,
                        padding: "0 8px",
                        fontWeight: 700,
                        ":hover": { backgroundColor: "rgba(64,87,109,.07)" },
                      },
                      onClick: I,
                      children: "Group",
                    }),
                  M &&
                    x("div", {
                      css: {
                        lineHeight: "32px",
                        display: "flex",
                        justifyContent: "center",
                        alignItems: "center",
                        cursor: "pointer",
                        fontSize: 14,
                        padding: "0 8px",
                        fontWeight: 700,
                        ":hover": { backgroundColor: "rgba(64,87,109,.07)" },
                      },
                      onClick: O,
                      children: "Ungroup",
                    }),
                  x("div", {
                    css: {
                      width: 32,
                      height: 32,
                      display: "flex",
                      justifyContent: "center",
                      alignItems: "center",
                      cursor: "pointer",
                      fontSize: 24,
                      ":hover": { backgroundColor: "rgba(64,87,109,.07)" },
                    },
                    onClick: E,
                    children: x(eh, {}),
                  }),
                  x("div", {
                    css: {
                      width: 32,
                      height: 32,
                      display: "flex",
                      justifyContent: "center",
                      alignItems: "center",
                      cursor: "pointer",
                      fontSize: 24,
                      ":hover": { backgroundColor: "rgba(64,87,109,.07)" },
                    },
                    onClick: () => i.deleteLayer(n, t),
                    children: x(th, {}),
                  }),
                  x("div", {
                    css: {
                      width: 32,
                      height: 32,
                      display: "flex",
                      justifyContent: "center",
                      alignItems: "center",
                      cursor: "pointer",
                      fontSize: 24,
                      ":hover": { backgroundColor: "rgba(64,87,109,.07)" },
                    },
                    onClick: R,
                    children: x(fw, {}),
                  }),
                ],
              }),
            (w || y) &&
              x("div", {
                css: {
                  width: 32,
                  height: 32,
                  display: "flex",
                  justifyContent: "center",
                  alignItems: "center",
                  cursor: "pointer",
                  fontSize: 24,
                  color: y ? "rgba(36,49,61,.4)" : void 0,
                  ":hover": {
                    backgroundColor: y ? void 0 : "rgba(64,87,109,.07)",
                  },
                },
                onClick: () => {
                  i.unlock(n, t);
                },
                children: x(Js, {}),
              }),
          ],
        }),
      }),
    });
  },
  WI = S.memo(FI);
var VI = function (e) {
  return U.jsx(
    "svg",
    Re(
      {
        viewBox: "0 0 64 56",
        fill: "currentColor",
        xmlns: "http://www.w3.org/2000/svg",
        width: "1em",
        height: "1em",
      },
      e,
      { children: U.jsx("path", { d: "m32 0 32 56H0L32 0" }) }
    )
  );
};
const HI = (
    { boxSize: n, position: e, rotate: t, type: r = "solid", layerType: i },
    o
  ) => {
    const { scale: a } = $e((l) => ({ scale: l.scale }));
    return H("div", {
      ref: o,
      css: {
        width: n.width * a,
        height: n.height * a,
        position: "absolute",
        transform: e
          ? ee.getTransformStyle({
              position: { x: e.x * a, y: e.y * a },
              rotate: t,
            })
          : void 0,
      },
      children: [
        r === "solid" &&
          i !== "Line" &&
          x("div", {
            css: {
              border: "2px solid #3d8eff",
              boxShadow:
                "0 0 0 1px hsla(0,0%,100%,.07), inset 0 0 0 1px hsla(0,0%,100%,.07)",
              position: "absolute",
              inset: -1,
            },
          }),
        r === "dashed" &&
          i !== "Line" &&
          x("div", {
            css: {
              inset: -1,
              position: "absolute",
              backgroundImage:
                "linear-gradient(90deg,#fff 60%,rgba(53,71,90,.2) 0),linear-gradient(180deg,#fff 60%,rgba(53,71,90,.2) 0),linear-gradient(90deg,#fff 60%,rgba(53,71,90,.2) 0),linear-gradient(180deg,#fff 60%,rgba(53,71,90,.2) 0),linear-gradient(90deg,rgba(57,76,96,.15),rgba(57,76,96,.15)),linear-gradient(180deg,rgba(57,76,96,.15),rgba(57,76,96,.15)),linear-gradient(90deg,rgba(57,76,96,.15),rgba(57,76,96,.15)),linear-gradient(180deg,rgba(57,76,96,.15),rgba(57,76,96,.15))",
              backgroundPosition:
                "top,100%,bottom,0,center 2px,calc(100% - 2px),center calc(100% - 2px),2px",
              backgroundRepeat:
                "repeat-x,repeat-y,repeat-x,repeat-y,no-repeat,no-repeat,no-repeat,no-repeat",
              backgroundSize:
                "6px 2px,2px 6px,6px 2px,2px 6px,calc(100% - 6px) 1px,1px calc(100% - 4px),calc(100% - 6px) 1px,1px calc(100% - 4px)",
            },
          }),
        i === "Video" &&
          x("div", {
            css: {
              position: "absolute",
              inset: 0,
              transform: ee.getTransformStyle({ rotate: -t }),
              display: n.width > 80 && n.height > 80 ? "flex" : "none",
              alignItems: "center",
              justifyContent: "center",
            },
            children: x("div", {
              css: {
                width: n.height <= 180 || n.width <= 180 ? 24 : 48,
                height: n.height <= 180 || n.width <= 180 ? 24 : 48,
                background: "rgba(17,23,29,.6)",
                borderRadius: "50%",
                color: "#fff",
                fontSize: n.height <= 180 || n.width <= 180 ? 8 : 16,
                transform: ee.getTransformStyle({ rotate: 90 }),
                display: "flex",
                alignItems: "center",
                justifyContent: "center",
              },
              children: x(VI, {}),
            }),
          }),
      ],
    });
  },
  vd = S.forwardRef(HI),
  $I = () => {
    const { selectedLayers: n } = Vt(),
      e = S.useMemo(
        () => !!n.find((t) => Qr(t) || Jo(t) || Mi(t) || Jl(t)),
        [JSON.stringify(n.map((t) => t.id))]
      );
    return S.useMemo(() => {
      const t = {
        vertical: n.length > 1,
        horizontal: n.length > 1,
        corners: !1,
        locked: !1,
        rotate: !1,
        scalable: !e,
      };
      return (
        n.forEach((r) => {
          r.data.locked &&
            ((t.locked = !0),
            (t.vertical = !0),
            (t.horizontal = !0),
            (t.corners = !0),
            (t.rotate = !0)),
            Qr(r) && (t.vertical = !0),
            (Mi(r) || Jf(r)) &&
              ((t.horizontal = !0), (t.vertical = !0), (t.scalable = !1)),
            Jo(r) && ((t.horizontal = !0), (t.vertical = !0));
        }),
        t
      );
    }, [e, n]);
  },
  jI = ({ pageIndex: n, width: e, height: t, transform: r }, i) => {
    var de, xe, Pe, ye;
    const o = S.useRef(null),
      a = S.useRef(null),
      [l] = ae.useLinkedRef(null),
      u = S.useRef({}),
      [d, h, p] = ae.useLinkedRef(),
      [g, y, m] = ae.useLinkedRef({}),
      { selectedLayerIds: w, selectedLayers: b } = Vt(),
      E = $I(),
      {
        actions: R,
        hoveredLayer: O,
        scale: I,
        activePage: M,
        controlBox: D,
        imageEditor: N,
        textEditor: Y,
        totalPages: X,
        isLocked: j,
      } = $e((Z) => {
        const ue = Z.hoveredLayer[n];
        return {
          activePage: Z.activePage,
          controlBox: Z.controlBox,
          scale: Z.scale,
          isLocked: Z.pages[n] && Z.pages[n].layers.ROOT.data.locked,
          hoveredLayer: ue ? Z.pages[n].layers[ue] : null,
          selectStatus: Z.selectData.status,
          imageEditor: Z.imageEditor,
          textEditor: Z.textEditor,
          totalPages: Z.pages.length,
        };
      }),
      W = (Z) => {
        if ((Z.preventDefault(), !(O && O.data.locked))) {
          if (D && o.current && O) {
            const ue = new WebKitCSSMatrix(
                ee.getTransformStyle({ rotate: D.rotate })
              ),
              K = o.current.getBoundingClientRect(),
              Se = ee.visualCorners(
                { width: D.boxSize.width * I, height: D.boxSize.height * I },
                ue,
                { x: K.x + D.position.x * I, y: K.y + D.position.y * I }
              );
            ee.isPointInsideBox({ x: Z.clientX, y: Z.clientY }, Se) ||
              R.selectLayers(n, O.id);
          } else O && R.selectLayers(n, O.id);
          R.showContextMenu(ae.getPosition(Z.nativeEvent));
        }
      };
    S.useEffect(() => {
      d.current &&
        p({
          boxSize: {
            width: d.current.boxSize.width * I,
            height: d.current.boxSize.height * I,
          },
          position: {
            x: d.current.position.x * I,
            y: d.current.position.y * I,
          },
          rotate: d.current.rotate,
          scale: d.current.scale,
        }),
        g.current &&
          Object.entries(g.current).forEach(([Z, ue]) => {
            ue.centerX && (g.current[Z].centerX = ue.centerX * I),
              ue.centerY && (g.current[Z].centerY = ue.centerY * I),
              (g.current[Z].position.x = ue.position.x * I),
              (g.current[Z].position.y = ue.position.y * I),
              (g.current[Z].boxSize.width = ue.boxSize.width * I),
              (g.current[Z].boxSize.height = ue.boxSize.height * I);
          });
    }, [d, g, I, p]);
    const G = (Z, ue) => {
        var K;
        if (
          E.scalable ||
          !["top", "left", "right", "bottom"].includes(Z) ||
          w.length > 1 ||
          !Qr(b[0])
        )
          return ue;
        {
          const { clientHeight: Se } = ee.getVirtualDomHeight(
            (K = b[0].data.editor) == null ? void 0 : K.dom,
            ue.boxSize.width,
            ue.scale || 1
          );
          return ae.mergeWithoutArray(ue, { boxSize: { height: Se } });
        }
      },
      te = (Z) => {
        const ue = y(),
          K = h(),
          Se = Z.boxSize.width / K.boxSize.width,
          we = {};
        return (
          b.forEach(({ id: Ke }) => {
            const re = ue[Ke],
              Ve = {
                width: re.boxSize.width * Se,
                height: re.boxSize.height * Se,
              };
            we[Ke] = {
              position: {
                x:
                  K.position.x -
                  (K.position.x - re.position.x) * Se +
                  (Z.position.x - K.position.x),
                y:
                  K.position.y -
                  (K.position.y - re.position.y) * Se +
                  (Z.position.y - K.position.y),
              },
              boxSize: Ve,
              scale: typeof re.scale < "u" ? re.scale * Se : void 0,
              rotate: re.rotate,
            };
          }),
          we
        );
      },
      ne = (Z, ue, K) =>
        w.length === 1
          ? {
              layers: { [w[0]]: K },
              lockAspect:
                (!ue &&
                  !["top", "left", "right", "bottom"].includes(Z) &&
                  (Fo(b[0]) || ml(b[0]))) ||
                (ue && (!Fo(b[0]) || !ml(b[0]))),
            }
          : { layers: te(K), lockAspect: !0 },
      se = (Z, ue, K) => {
        const Se = G(Z, K),
          we = ne(Z, ue, Se);
        R.setControlBox(Se),
          Object.entries(we.layers).forEach(([Ke, re]) => {
            const Ve = b.find((Ne) => Ne.id === Ke);
            if (Ve)
              if (Fo(Ve)) {
                const Ne = re.boxSize.width - Ve.data.props.boxSize.width,
                  pt = re.boxSize.height - Ve.data.props.boxSize.height,
                  _ = Ve.data.props;
                if (we.lockAspect) {
                  const L = re.boxSize.width / Ve.data.props.boxSize.width;
                  R.history
                    .merge()
                    .setProp(n, Ke, {
                      ...re,
                      image: {
                        boxSize: {
                          width: Ve.data.props.image.boxSize.width * L,
                          height: Ve.data.props.image.boxSize.height * L,
                        },
                        position: {
                          x: Ve.data.props.image.position.x * L,
                          y: Ve.data.props.image.position.y * L,
                        },
                        rotate: 0,
                      },
                    });
                } else {
                  const L = ee.getImageSize(_, _.image, Z, {
                    width: Ne,
                    height: pt,
                  });
                  R.history
                    .merge()
                    .setProp(n, Ke, {
                      ...L,
                      position: { x: re.position.x, y: re.position.y },
                    });
                }
              } else if (ml(Ve)) {
                const Ne = re.boxSize.width - Ve.data.props.boxSize.width,
                  pt = re.boxSize.height - Ve.data.props.boxSize.height,
                  _ = Ve.data.props;
                if (we.lockAspect) {
                  const L = re.boxSize.width / Ve.data.props.boxSize.width;
                  R.history
                    .merge()
                    .setProp(n, Ke, {
                      ...re,
                      video: {
                        boxSize: {
                          width: Ve.data.props.video.boxSize.width * L,
                          height: Ve.data.props.video.boxSize.height * L,
                        },
                        position: {
                          x: Ve.data.props.video.position.x * L,
                          y: Ve.data.props.video.position.y * L,
                        },
                        rotate: 0,
                      },
                    });
                } else {
                  const L = ee.getVideoSize(_, _.video, Z, {
                    width: Ne,
                    height: pt,
                  });
                  R.history
                    .merge()
                    .setProp(n, Ke, {
                      ...L,
                      position: { x: re.position.x, y: re.position.y },
                    });
                }
              } else R.history.merge().setProp(n, Ke, re);
          });
      },
      { startResizing: oe } = ee.useResizeLayer({
        options: { scalable: !E.scalable },
        frameScale: I,
        getLayerData: y,
        controlBox: D,
        getControlBoxData: h,
        lockAspect: (Z) => {
          const ue = b.length === 1 && Fo(b[0]),
            K = b.length === 1 && ml(b[0]);
          return (
            (Z.shiftKey && !ue && !K) ||
            w.length > 1 ||
            ((ue || K) &&
              !Z.shiftKey &&
              !["top", "left", "right", "bottom"].includes(Z.direction))
          );
        },
        onResizeStart: (Z, { direction: ue }) => {
          const { clientX: K, clientY: Se } = ae.getPosition(Z);
          R.setResizeData(!0, w, ue, D.rotate, D.boxSize, {
            clientX: K,
            clientY: Se,
          }),
            p(D);
          const we = {};
          b.forEach(
            ({
              id: Ke,
              data: {
                props: { boxSize: re, position: Ve, rotate: Ne, scale: pt },
                type: _,
              },
            }) => {
              we[Ke] = Te.cloneDeep({
                boxSize: re,
                position: Ve,
                rotate: Ne,
                scale: pt,
                type: _,
              });
            }
          ),
            m(we),
            R.history.new();
        },
        onResize: (Z, { direction: ue, useShift: K }, Se) => {
          const { clientX: we, clientY: Ke } = ae.getPosition(Z);
          R.setResizeData(!0, w, ue, Se.rotate, Se.boxSize, {
            clientX: we,
            clientY: Ke,
          }),
            se(ue, K, Se);
        },
        onResizeStop: (Z, { direction: ue, useShift: K }, Se) => {
          R.setResizeData(!1), se(ue, K, Se);
        },
      }),
      { startUpdating: le } = ee.useDragLine({
        getLayerData: y,
        frameScale: I,
        pageOffset: {
          x:
            ((de = o.current) == null
              ? void 0
              : de.getBoundingClientRect().x) || 0,
          y:
            ((xe = o.current) == null
              ? void 0
              : xe.getBoundingClientRect().y) || 0,
        },
        onDragStart: (Z, ue) => {
          const K = {};
          b.forEach(
            ({
              id: Se,
              data: {
                props: { boxSize: we, position: Ke, rotate: re, scale: Ve },
                type: Ne,
              },
            }) => {
              (K[Se] = Te.cloneDeep({
                boxSize: we,
                position: Ke,
                rotate: re,
                scale: Ve,
                type: Ne,
              })),
                R.setUpdateLineData(!0, Se, ue),
                R.setControlBox({
                  boxSize: we,
                  position: Ke,
                  rotate: re,
                  scale: Ve,
                });
            }
          ),
            m(K),
            R.history.new();
        },
        onDrag: (Z, ue, K) => {
          R.setProp(M, b[0].id, K), R.setControlBox(K);
        },
        onDragStop: (Z, ue, K) => {
          R.setProp(M, b[0].id, K), R.setControlBox(K), R.setUpdateLineData(!1);
        },
      });
    S.useEffect(() => {
      const Z = b
        .filter((ue) => ue.id !== "ROOT")
        .reduce((ue, K) => ((ue[K.id] = K.data.props), ue), {});
      R.setControlBox(ee.getControlBoxSizeFromLayers(Z));
    }, [JSON.stringify(w), I]);
    const pe = (Z, { controlBox: ue, layers: K }) => {
        R.setRotateData(!0, Z),
          R.setControlBox(ue),
          Object.entries(K).forEach(([Se, we]) => {
            R.history.merge().setProp(n, Se, we);
          });
      },
      ce = (Z, { controlBox: ue, layers: K }) => {
        R.setRotateData(!1),
          R.setControlBox(ue),
          Object.entries(K).forEach(([Se, we]) => {
            R.history.merge().setProp(n, Se, we);
          });
      },
      { startRotate: be } = ee.useRotateLayer({
        getLayerData: y,
        frameScale: I,
        pageOffset: {
          x:
            ((Pe = o.current) == null
              ? void 0
              : Pe.getBoundingClientRect().x) || 0,
          y:
            ((ye = o.current) == null
              ? void 0
              : ye.getBoundingClientRect().y) || 0,
        },
        getControlBoxData: h,
        setControlBoxData: p,
        onRotateStart: () => {
          const Z = {};
          b.forEach((ue) => {
            const { centerX: K, centerY: Se } = ee.boundingRect(
              ue.data.props.boxSize,
              ue.data.props.position,
              ue.data.props.rotate
            );
            Z[ue.id] = Te.cloneDeep({
              position: ue.data.props.position,
              boxSize: ue.data.props.boxSize,
              rotate: ue.data.props.rotate,
              scale: ue.data.props.scale,
              centerX: K,
              centerY: Se,
              type: ue.data.type,
            });
          }),
            p(D),
            m(Z),
            R.setRotateData(!0, ee.autoCorrectDegree(D.rotate)),
            R.history.new();
        },
        onRotate: pe,
        onRotateEnd: ce,
      }),
      Oe = async (Z) => {
        if (a.current)
          try {
            const ue = await kI(a.current),
              K = document.createElement("a");
            (K.download = `design-id-page-${Z + 1}.png`),
              (K.href = ue),
              K.click();
          } catch (ue) {
            window.alert("Cannot download: " + ue.message);
          }
      };
    return H(y1, {
      pageIndex: n,
      children: [
        H("div", {
          css: {
            fontWeight: "bold",
            marginTop: 24,
            height: 28,
            display: "flex",
            alignItems: "center",
            marginBottom: 4,
            width: e * I,
            whiteSpace: "nowrap",
            "@media (max-width: 900px)": { display: "none" },
          },
          children: [
            H("div", { css: { flexGrow: 1 }, children: ["Page ", n + 1] }),
            H("div", {
              css: {
                display: "flex",
                alignItems: "center",
                fontSize: 20,
                color: "#0d1216",
                height: 28,
                opacity: 0.7,
              },
              children: [
                x("div", {
                  css: {
                    marginLeft: 8,
                    width: 28,
                    height: 28,
                    display: "flex",
                    alignItems: "center",
                    justifyContent: "center",
                    borderRadius: 4,
                    cursor: n === 0 ? "not-allowed" : "pointer",
                    color: n === 0 ? "rgba(36,49,61,.4)" : "#0d1216",
                    ":hover": {
                      background: n === 0 ? void 0 : "rgba(64, 87, 109, 0.07)",
                    },
                  },
                  onClick: () => R.movePageUp(n),
                  children: x(AD, {}),
                }),
                x("div", {
                  css: {
                    marginLeft: 8,
                    width: 28,
                    height: 28,
                    display: "flex",
                    alignItems: "center",
                    justifyContent: "center",
                    borderRadius: 4,
                    cursor: n === X - 1 ? "not-allowed" : "pointer",
                    color: n === X - 1 ? "rgba(36,49,61,.4)" : "#0d1216",
                    ":hover": {
                      background:
                        n === X - 1 ? void 0 : "rgba(64, 87, 109, 0.07)",
                    },
                  },
                  onClick: () => R.movePageDown(n),
                  children: x(rw, {}),
                }),
                H("div", {
                  css: {
                    marginLeft: 8,
                    width: 28,
                    height: 28,
                    display: "flex",
                    alignItems: "center",
                    justifyContent: "center",
                    borderRadius: 4,
                    cursor: "pointer",
                    ":hover": { background: "rgba(64, 87, 109, 0.07)" },
                  },
                  onClick: () => {
                    j ? R.unlockPage(n) : R.lockPage(n);
                  },
                  children: [!j && x(ff, {}), j && x(Js, {})],
                }),
                x("div", {
                  css: {
                    marginLeft: 8,
                    width: 28,
                    height: 28,
                    display: "flex",
                    alignItems: "center",
                    justifyContent: "center",
                    borderRadius: 4,
                    cursor: "pointer",
                    ":hover": { background: "rgba(64, 87, 109, 0.07)" },
                  },
                  onClick: () => R.duplicatePage(n),
                  children: x(eh, {}),
                }),
                x("div", {
                  css: {
                    marginLeft: 8,
                    width: 28,
                    height: 28,
                    display: "flex",
                    alignItems: "center",
                    justifyContent: "center",
                    borderRadius: 4,
                    cursor: "pointer",
                    ":hover": { background: "rgba(64, 87, 109, 0.07)" },
                  },
                  onClick: () => Oe(n),
                  children: x(LD, {}),
                }),
                x("div", {
                  css: {
                    marginLeft: 8,
                    width: 28,
                    height: 28,
                    display: "flex",
                    alignItems: "center",
                    justifyContent: "center",
                    borderRadius: 4,
                    cursor: j || X <= 1 ? "not-allowed" : "pointer",
                    color: j || X <= 1 ? "rgba(36,49,61,.4)" : "#0d1216",
                    ":hover": {
                      background:
                        j || X <= 1 ? void 0 : "rgba(64, 87, 109, 0.07)",
                    },
                  },
                  onClick: () => !j && X > 1 && R.deletePage(n),
                  children: x(th, {}),
                }),
                x("div", {
                  css: {
                    marginLeft: 8,
                    width: 28,
                    height: 28,
                    display: "flex",
                    alignItems: "center",
                    justifyContent: "center",
                    borderRadius: 4,
                    cursor: "pointer",
                    ":hover": { background: "rgba(64, 87, 109, 0.07)" },
                  },
                  onClick: () => R.addPage(n),
                  children: x(PD, {}),
                }),
              ],
            }),
          ],
        }),
        H("div", {
          ref: i,
          css: {
            position: "relative",
            margin: 0,
            boxShadow: "0 2px 8px rgba(14,19,24,.07)",
            "@media (max-width: 900px)": { boxShadow: "none" },
          },
          style: {
            width: e * I * r.scale,
            height: t * I * r.scale,
            transform: ee.getTransformStyle({ position: r, scale: r.scale }),
          },
          children: [
            x("div", {
              ref: o,
              css: {
                userSelect: "none",
                background: "white",
                overflow: "hidden",
                transformOrigin: "0 0",
              },
              style: {
                width: e,
                height: t,
                transform: `scale(${I * r.scale})`,
              },
              onContextMenu: W,
              children: x("div", {
                ref: a,
                css: {
                  width: e,
                  height: t,
                  position: "relative",
                  left: 0,
                  top: 0,
                  zIndex: 1,
                  "@media (max-width: 900px)": { width: e * I, height: t * I },
                },
                children: x(tw, {}),
              }),
            }),
            H("div", {
              css: {
                position: "absolute",
                inset: 0,
                pointerEvents: "none",
                zIndex: 2,
              },
              children: [
                !N &&
                  n === M &&
                  D &&
                  b.length > 1 &&
                  x(vd, {
                    boxSize: D.boxSize,
                    position: D.position,
                    rotate: D.rotate,
                    type: "dashed",
                  }),
                !N &&
                  n === M &&
                  b.map((Z) =>
                    x(
                      vd,
                      {
                        ref: (ue) => ue && (u.current[Z.id] = ue),
                        boxSize: Z.data.props.boxSize,
                        layerType: Z.data.type,
                        position: Z.data.props.position,
                        rotate: Z.data.props.rotate,
                      },
                      Z.id
                    )
                  ),
                !N &&
                  O &&
                  !w.includes(O.id) &&
                  x(vd, {
                    ref: (Z) => Z && (u.current[O.id] = Z),
                    boxSize: O.data.props.boxSize,
                    position: O.data.props.position,
                    rotate: O.data.props.rotate,
                  }),
                !N &&
                  n === M &&
                  w.length > 0 &&
                  H(S.Fragment, {
                    children: [
                      D &&
                        !(w.length === 1 && b[0].data.type === "Line") &&
                        x(_I, {
                          ref: l,
                          boxSize: D.boxSize,
                          disabled: E,
                          locked: E.locked,
                          position: D.position,
                          rotate: D.rotate,
                          scale: D.scale,
                          onResizeStart: oe,
                          onRouteStart: be,
                        }),
                      D &&
                        w.length === 1 &&
                        b[0].data.type === "Line" &&
                        x(BI, {
                          boxSize: b[0].data.props.boxSize,
                          disabled: E,
                          locked: E.locked,
                          position: b[0].data.props.position,
                          rotate: b[0].data.props.rotate,
                          onChangeStart: le,
                          onRouteStart: be,
                        }),
                      x(WI, {}),
                    ],
                  }),
                n === M && x(NI, {}),
              ],
            }),
            N && N.pageIndex === n && x(RI, {}),
            Y && Y.pageIndex === n && x(AI, {}),
          ],
        }),
      ],
    });
  },
  UI = S.forwardRef(jI),
  ZI = ({ data: n }) => {
    var Pe, ye, Z, ue;
    const e = qv(),
      t = S.useRef(null),
      r = S.useRef(null),
      i = S.useRef([]),
      o = S.useRef(null),
      { usedFonts: a } = Oc(),
      {
        config: { assetPath: l },
      } = S.useContext(ei),
      [u, d] = S.useState(!1);
    cD(t.current);
    const {
        actions: h,
        scale: p,
        pages: g,
        hoveredPage: y,
        hoveredLayer: m,
        selectStatus: w,
        rotateData: b,
        resizeData: E,
        controlBox: R,
        activePage: O,
        dragData: I,
        imageEditor: M,
        pageSize: D,
      } = $e((K, Se) => {
        const we = parseInt(Object.keys(K.hoveredLayer)[0]),
          Ke = K.hoveredLayer[we];
        return {
          scale: K.scale,
          pages: K.pages,
          hoveredPage: we,
          hoveredLayer: Ke ? K.pages[we].layers[Ke] : null,
          selectStatus: K.selectData.status,
          rotateData: K.rotateData,
          resizeData: K.resizeData,
          controlBox: K.controlBox,
          activePage: K.activePage,
          dragData: K.dragData,
          imageEditor: K.imageEditor,
          pageSize: Se.getPageSize(),
        };
      }),
      {
        pageTransform: N,
        onZoomStart: Y,
        onZoomMove: X,
        onZoomEnd: j,
        onMoveStart: W,
        onMove: G,
        onMoveEnd: te,
        onMovePage: ne,
        onMovePageEnd: se,
      } = uD(t, i, r);
    S.useEffect(() => {
      h.setData(n);
    }, [n, h]),
      VO(
        o,
        () => {
          h.hideContextMenu();
        },
        "mousedown",
        { capture: !0 }
      );
    const oe = S.useRef(null),
      { selectedLayerIds: le } = Vt(),
      pe = () => {
        if (!I.status && !w) {
          const K = t.current;
          i.current[O] &&
            !ee.isElementInViewport(K, i.current[O]) &&
            i.current.some((Se, we) =>
              ee.isElementInViewport(K, Se)
                ? (h.selectLayers(we, "ROOT"), !0)
                : !1
            );
        }
      },
      { tmpSelected: ce, onSelectStart: be } = lD({
        frameRef: t,
        pageListRef: i,
        selectionBoxRef: oe,
      }),
      { onDragStart: Oe } = sD({ frameRef: t, pageListRef: i }),
      de = S.useCallback(
        (K) => {
          if (
            (ae.isMouseEvent(K) && K.button === 2) ||
            M ||
            (ae.isTouchEvent(K) && K.touches.length > 1)
          )
            return;
          const Se = i.current.find((Ne) => Ne.contains(K.target)),
            we = i.current.find((Ne) => K.target.contains(Ne)),
            { clientX: Ke, clientY: re } = ae.getPosition(K);
          if (!Se && !we) return;
          let Ve = !1;
          if (R) {
            const Ne = new WebKitCSSMatrix(
                ee.getTransformStyle({ rotate: R.rotate })
              ),
              pt = i.current[O].getBoundingClientRect(),
              _ = ee.visualCorners(
                { width: R.boxSize.width * p, height: R.boxSize.height * p },
                Ne,
                { x: pt.x + R.position.x * p, y: pt.y + R.position.y * p }
              );
            Ve = ee.isPointInsideBox({ x: Ke, y: re }, _);
          }
          m &&
            m.id !== "ROOT" &&
            !le.includes(m.id) &&
            (!Ve || (R && ee.rectangleInsideAnother(m.data.props, R))) &&
            h.selectLayers(y, m.id, e.current ? "add" : "replace"),
            (m && m.id !== "ROOT" && !m.data.locked) || Ve
              ? (Oe(K), K.stopPropagation())
              : ae.isMouseEvent(K)
              ? (be(K), K.stopPropagation())
              : ae.isTouchEvent(K) && W(K);
        },
        [m, R, le, I]
      ),
      xe = () => {
        if (b.status) {
          const K = Math.round((b.rotate || 0) / 10);
          return {
            cursor: `url('${l}/cursors/rotate/${
              K === 36 ? 0 : K
            }.png') 12 12, auto;`,
          };
        } else if (E.status) {
          const K = {
              bottomLeft: 45,
              left: 90,
              topLeft: 135,
              top: 180,
              topRight: 225,
              right: 270,
              bottomRight: 315,
              bottom: 0,
            },
            Se = (E.rotate || 0) + K[E.direction || "bottom"] + 90,
            we = Math.round((Se % 180) / 10);
          return { cursor: `url('${l}/cursors/resize/${we}.png') 12 12, auto` };
        } else if (I.status) return { cursor: "move" };
        return {};
      };
    return H(S.Fragment, {
      children: [
        H("div", {
          ref: t,
          css: {
            display: "flex",
            position: "relative",
            height: "100%",
            overflow: "scroll",
            ...xe(),
            "@media (max-width: 900px)": {
              overflow: "hidden",
              height: "calc(100% - 72px)",
            },
          },
          tabIndex: 0,
          onScroll: () => {
            pe();
          },
          onTouchEnd: j,
          onTouchMove: X,
          onTouchStart: Y,
          children: [
            x("div", {
              css: {
                position: "absolute",
                display: "flex",
                minWidth: "100%",
                minHeight: "100%",
              },
              onMouseDown: (K) => de(K.nativeEvent),
              onTouchStart: (K) => de(K.nativeEvent),
              children: H("div", {
                css: {
                  position: "relative",
                  display: "flex",
                  flexGrow: 1,
                  touchAction: "pinch-zoom",
                },
                children: [
                  H("div", {
                    ref: r,
                    css: {
                      display: "flex",
                      position: "relative",
                      flexDirection: "row",
                      justifyContent: "center",
                      margin: "auto",
                      "@media (max-width: 900px)": {
                        transition: "transform 250ms linear 0s",
                        margin: "initial",
                      },
                    },
                    style: {
                      transform: `translateX(-${
                        mc ? window.innerWidth * O : 0
                      }px)`,
                    },
                    children: [
                      H("div", {
                        css: {
                          marginLeft: 56,
                          "@media (max-width: 900px)": {
                            display: "flex",
                            marginLeft: 0,
                          },
                        },
                        onTouchEnd: () => {
                          te(), se();
                        },
                        onTouchMove: (K) => {
                          G(K), ne(K);
                        },
                        children: [
                          x(ee.GlobalStyle, { fonts: a, mode: "editor" }),
                          g.map((K, Se) =>
                            x(
                              "div",
                              {
                                css: {
                                  "@media (max-width: 900px)": {
                                    padding: "0 16px",
                                    width: window.innerWidth,
                                    height: window.innerHeight,
                                    overflow: "hidden",
                                  },
                                },
                                children: x(UI, {
                                  ref: (we) => we && (i.current[Se] = we),
                                  height: D.height,
                                  pageIndex: Se,
                                  transform: N,
                                  width: D.width,
                                }),
                              },
                              Se
                            )
                          ),
                          x("div", {
                            css: {
                              marginTop: 20,
                              marginBottom: 20,
                              background: "rgba(64,87,109,.07)",
                              color: "#0d1216",
                              width: D.width * p,
                              textAlign: "center",
                              paddingTop: 8,
                              paddingBottom: 8,
                              borderRadius: 8,
                              "@media (max-width: 900px)": { display: "none" },
                            },
                            onClick: () => {
                              h.addPage();
                            },
                            children: "Add Page",
                          }),
                        ],
                      }),
                      x("div", {
                        css: {
                          width: 56,
                          pointerEvents: "none",
                          "@media (max-width: 900px)": { width: 0 },
                        },
                      }),
                    ],
                  }),
                  x(ED, { ref: o }),
                  w &&
                    x(OD, {
                      ref: oe,
                      selectedLayers: ce == null ? void 0 : ce.selectedLayers,
                    }),
                ],
              }),
            }),
            x("div", {
              css: {
                display: "none",
                "@media (max-width: 900px)": {
                  pointerEvents: "auto",
                  display: "flex",
                  position: "absolute",
                  bottom: 24,
                  left: 24,
                  background: "#3d8eff",
                  width: 48,
                  height: 48,
                  alignItems: "center",
                  justifyContent: "center",
                  borderRadius: "50%",
                  color: "#fff",
                  fontSize: 24,
                },
              },
              onClick: () => {
                h.addPage();
              },
              children: x(Zs, {}),
            }),
            x("div", {
              css: {
                display: "none",
                "@media (max-width: 900px)": {
                  pointerEvents: "auto",
                  display: "flex",
                  position: "absolute",
                  bottom: 24,
                  right: 24,
                  background: "#fff",
                  width: 48,
                  height: 48,
                  alignItems: "center",
                  justifyContent: "center",
                  borderRadius: "50%",
                  fontSize: 24,
                  boxShadow:
                    "0 0 0 1px rgba(64,87,109,.07),0 2px 12px rgba(53,71,90,.2)",
                },
              },
              onClick: () => {
                d(!0);
              },
              children: x(x8, {}),
            }),
          ],
        }),
        E.status &&
          H("div", {
            css: {
              position: "fixed",
              top: `${
                (((Pe = E.cursor) == null ? void 0 : Pe.clientY) || 0) + 36
              }px`,
              left: `${
                (((ye = E.cursor) == null ? void 0 : ye.clientX) || 0) + 60
              }px`,
              whiteSpace: "nowrap",
              background: "#3a3a4c",
              padding: "3px 8px",
              borderRadius: 4,
              textAlign: "center",
              color: "white",
              fontSize: 12,
              fontWeight: 700,
            },
            children: [
              "w: ",
              Math.round(((Z = E.boxSize) == null ? void 0 : Z.width) || 0),
              " h:",
              " ",
              Math.round(((ue = E.boxSize) == null ? void 0 : ue.height) || 0),
            ],
          }),
        u && x(ID, { onClose: () => d(!1) }),
      ],
    });
  };
var ih = Symbol.for("immer-nothing"),
  zs = Symbol.for("immer-draftable"),
  Hn = Symbol.for("immer-state"),
  hw =
    process.env.NODE_ENV !== "production"
      ? [
          function (n) {
            return `The plugin for '${n}' has not been loaded into Immer. To enable the plugin, import and call \`enable${n}()\` when initializing your application.`;
          },
          function (n) {
            return `produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '${n}'`;
          },
          "This object has been frozen and should not be mutated",
          function (n) {
            return (
              "Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? " +
              n
            );
          },
          "An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.",
          "Immer forbids circular references",
          "The first or second argument to `produce` must be a function",
          "The third argument to `produce` must be a function or undefined",
          "First argument to `createDraft` must be a plain object, an array, or an immerable object",
          "First argument to `finishDraft` must be a draft returned by `createDraft`",
          function (n) {
            return `'current' expects a draft, got: ${n}`;
          },
          "Object.defineProperty() cannot be used on an Immer draft",
          "Object.setPrototypeOf() cannot be used on an Immer draft",
          "Immer only supports deleting array indices",
          "Immer only supports setting array indices and the 'length' property",
          function (n) {
            return `'original' expects a draft, got: ${n}`;
          },
        ]
      : [];
function zt(n, ...e) {
  if (process.env.NODE_ENV !== "production") {
    const t = hw[n],
      r = typeof t == "function" ? t.apply(null, e) : t;
    throw new Error(`[Immer] ${r}`);
  }
  throw new Error(
    `[Immer] minified error nr: ${n}. Full error at: https://bit.ly/3cXEKWf`
  );
}
var co = Object.getPrototypeOf;
function uo(n) {
  return !!n && !!n[Hn];
}
function Ri(n) {
  var e;
  return n
    ? pw(n) ||
        Array.isArray(n) ||
        !!n[zs] ||
        !!((e = n.constructor) != null && e[zs]) ||
        ga(n) ||
        ma(n)
    : !1;
}
var YI = Object.prototype.constructor.toString();
function pw(n) {
  if (!n || typeof n != "object") return !1;
  const e = co(n);
  if (e === null) return !0;
  const t = Object.hasOwnProperty.call(e, "constructor") && e.constructor;
  return t === Object
    ? !0
    : typeof t == "function" && Function.toString.call(t) === YI;
}
function Qo(n, e) {
  fo(n) === 0
    ? Object.entries(n).forEach(([t, r]) => {
        e(t, r, n);
      })
    : n.forEach((t, r) => e(r, t, n));
}
function fo(n) {
  const e = n[Hn];
  return e ? e.type_ : Array.isArray(n) ? 1 : ga(n) ? 2 : ma(n) ? 3 : 0;
}
function Qs(n, e) {
  return fo(n) === 2 ? n.has(e) : Object.prototype.hasOwnProperty.call(n, e);
}
function wd(n, e) {
  return fo(n) === 2 ? n.get(e) : n[e];
}
function gw(n, e, t) {
  const r = fo(n);
  r === 2 ? n.set(e, t) : r === 3 ? n.add(t) : (n[e] = t);
}
function qI(n, e) {
  return n === e ? n !== 0 || 1 / n === 1 / e : n !== n && e !== e;
}
function ga(n) {
  return n instanceof Map;
}
function ma(n) {
  return n instanceof Set;
}
function Ki(n) {
  return n.copy_ || n.base_;
}
function pf(n, e) {
  if (ga(n)) return new Map(n);
  if (ma(n)) return new Set(n);
  if (Array.isArray(n)) return Array.prototype.slice.call(n);
  if (!e && pw(n))
    return co(n) ? { ...n } : Object.assign(Object.create(null), n);
  const t = Object.getOwnPropertyDescriptors(n);
  delete t[Hn];
  let r = Reflect.ownKeys(t);
  for (let i = 0; i < r.length; i++) {
    const o = r[i],
      a = t[o];
    a.writable === !1 && ((a.writable = !0), (a.configurable = !0)),
      (a.get || a.set) &&
        (t[o] = {
          configurable: !0,
          writable: !0,
          enumerable: a.enumerable,
          value: n[o],
        });
  }
  return Object.create(co(n), t);
}
function oh(n, e = !1) {
  return (
    Mc(n) ||
      uo(n) ||
      !Ri(n) ||
      (fo(n) > 1 && (n.set = n.add = n.clear = n.delete = GI),
      Object.freeze(n),
      e && Qo(n, (t, r) => oh(r, !0))),
    n
  );
}
function GI() {
  zt(2);
}
function Mc(n) {
  return Object.isFrozen(n);
}
var gf = {};
function ho(n) {
  const e = gf[n];
  return e || zt(0, n), e;
}
function KI(n, e) {
  gf[n] || (gf[n] = e);
}
var ea;
function mw() {
  return ea;
}
function XI(n, e) {
  return {
    drafts_: [],
    parent_: n,
    immer_: e,
    canAutoFreeze_: !0,
    unfinalizedDrafts_: 0,
  };
}
function bm(n, e) {
  e &&
    (ho("Patches"),
    (n.patches_ = []),
    (n.inversePatches_ = []),
    (n.patchListener_ = e));
}
function mf(n) {
  yf(n), n.drafts_.forEach(JI), (n.drafts_ = null);
}
function yf(n) {
  n === ea && (ea = n.parent_);
}
function xm(n) {
  return (ea = XI(ea, n));
}
function JI(n) {
  const e = n[Hn];
  e.type_ === 0 || e.type_ === 1 ? e.revoke_() : (e.revoked_ = !0);
}
function Sm(n, e) {
  e.unfinalizedDrafts_ = e.drafts_.length;
  const t = e.drafts_[0];
  return (
    n !== void 0 && n !== t
      ? (t[Hn].modified_ && (mf(e), zt(4)),
        Ri(n) && ((n = tc(e, n)), e.parent_ || nc(e, n)),
        e.patches_ &&
          ho("Patches").generateReplacementPatches_(
            t[Hn].base_,
            n,
            e.patches_,
            e.inversePatches_
          ))
      : (n = tc(e, t, [])),
    mf(e),
    e.patches_ && e.patchListener_(e.patches_, e.inversePatches_),
    n !== ih ? n : void 0
  );
}
function tc(n, e, t) {
  if (Mc(e)) return e;
  const r = e[Hn];
  if (!r) return Qo(e, (i, o) => Cm(n, r, e, i, o, t)), e;
  if (r.scope_ !== n) return e;
  if (!r.modified_) return nc(n, r.base_, !0), r.base_;
  if (!r.finalized_) {
    (r.finalized_ = !0), r.scope_.unfinalizedDrafts_--;
    const i = r.copy_;
    let o = i,
      a = !1;
    r.type_ === 3 && ((o = new Set(i)), i.clear(), (a = !0)),
      Qo(o, (l, u) => Cm(n, r, i, l, u, t, a)),
      nc(n, i, !1),
      t &&
        n.patches_ &&
        ho("Patches").generatePatches_(r, t, n.patches_, n.inversePatches_);
  }
  return r.copy_;
}
function Cm(n, e, t, r, i, o, a) {
  if ((process.env.NODE_ENV !== "production" && i === t && zt(5), uo(i))) {
    const l =
        o && e && e.type_ !== 3 && !Qs(e.assigned_, r) ? o.concat(r) : void 0,
      u = tc(n, i, l);
    if ((gw(t, r, u), uo(u))) n.canAutoFreeze_ = !1;
    else return;
  } else a && t.add(i);
  if (Ri(i) && !Mc(i)) {
    if (!n.immer_.autoFreeze_ && n.unfinalizedDrafts_ < 1) return;
    tc(n, i), (!e || !e.scope_.parent_) && nc(n, i);
  }
}
function nc(n, e, t = !1) {
  !n.parent_ && n.immer_.autoFreeze_ && n.canAutoFreeze_ && oh(e, t);
}
function QI(n, e) {
  const t = Array.isArray(n),
    r = {
      type_: t ? 1 : 0,
      scope_: e ? e.scope_ : mw(),
      modified_: !1,
      finalized_: !1,
      assigned_: {},
      parent_: e,
      base_: n,
      draft_: null,
      copy_: null,
      revoke_: null,
      isManual_: !1,
    };
  let i = r,
    o = sh;
  t && ((i = [r]), (o = ta));
  const { revoke: a, proxy: l } = Proxy.revocable(i, o);
  return (r.draft_ = l), (r.revoke_ = a), l;
}
var sh = {
    get(n, e) {
      if (e === Hn) return n;
      const t = Ki(n);
      if (!Qs(t, e)) return eA(n, t, e);
      const r = t[e];
      return n.finalized_ || !Ri(r)
        ? r
        : r === bd(n.base_, e)
        ? (xd(n), (n.copy_[e] = wf(r, n)))
        : r;
    },
    has(n, e) {
      return e in Ki(n);
    },
    ownKeys(n) {
      return Reflect.ownKeys(Ki(n));
    },
    set(n, e, t) {
      const r = yw(Ki(n), e);
      if (r != null && r.set) return r.set.call(n.draft_, t), !0;
      if (!n.modified_) {
        const i = bd(Ki(n), e),
          o = i == null ? void 0 : i[Hn];
        if (o && o.base_ === t)
          return (n.copy_[e] = t), (n.assigned_[e] = !1), !0;
        if (qI(t, i) && (t !== void 0 || Qs(n.base_, e))) return !0;
        xd(n), vf(n);
      }
      return (
        (n.copy_[e] === t && (t !== void 0 || e in n.copy_)) ||
          (Number.isNaN(t) && Number.isNaN(n.copy_[e])) ||
          ((n.copy_[e] = t), (n.assigned_[e] = !0)),
        !0
      );
    },
    deleteProperty(n, e) {
      return (
        bd(n.base_, e) !== void 0 || e in n.base_
          ? ((n.assigned_[e] = !1), xd(n), vf(n))
          : delete n.assigned_[e],
        n.copy_ && delete n.copy_[e],
        !0
      );
    },
    getOwnPropertyDescriptor(n, e) {
      const t = Ki(n),
        r = Reflect.getOwnPropertyDescriptor(t, e);
      return (
        r && {
          writable: !0,
          configurable: n.type_ !== 1 || e !== "length",
          enumerable: r.enumerable,
          value: t[e],
        }
      );
    },
    defineProperty() {
      zt(11);
    },
    getPrototypeOf(n) {
      return co(n.base_);
    },
    setPrototypeOf() {
      zt(12);
    },
  },
  ta = {};
Qo(sh, (n, e) => {
  ta[n] = function () {
    return (arguments[0] = arguments[0][0]), e.apply(this, arguments);
  };
});
ta.deleteProperty = function (n, e) {
  return (
    process.env.NODE_ENV !== "production" && isNaN(parseInt(e)) && zt(13),
    ta.set.call(this, n, e, void 0)
  );
};
ta.set = function (n, e, t) {
  return (
    process.env.NODE_ENV !== "production" &&
      e !== "length" &&
      isNaN(parseInt(e)) &&
      zt(14),
    sh.set.call(this, n[0], e, t, n[0])
  );
};
function bd(n, e) {
  const t = n[Hn];
  return (t ? Ki(t) : n)[e];
}
function eA(n, e, t) {
  var i;
  const r = yw(e, t);
  return r
    ? "value" in r
      ? r.value
      : (i = r.get) == null
      ? void 0
      : i.call(n.draft_)
    : void 0;
}
function yw(n, e) {
  if (!(e in n)) return;
  let t = co(n);
  for (; t; ) {
    const r = Object.getOwnPropertyDescriptor(t, e);
    if (r) return r;
    t = co(t);
  }
}
function vf(n) {
  n.modified_ || ((n.modified_ = !0), n.parent_ && vf(n.parent_));
}
function xd(n) {
  n.copy_ || (n.copy_ = pf(n.base_, n.scope_.immer_.useStrictShallowCopy_));
}
var tA = class {
  constructor(n) {
    (this.autoFreeze_ = !0),
      (this.useStrictShallowCopy_ = !1),
      (this.produce = (e, t, r) => {
        if (typeof e == "function" && typeof t != "function") {
          const o = t;
          t = e;
          const a = this;
          return function (u = o, ...d) {
            return a.produce(u, (h) => t.call(this, h, ...d));
          };
        }
        typeof t != "function" && zt(6),
          r !== void 0 && typeof r != "function" && zt(7);
        let i;
        if (Ri(e)) {
          const o = xm(this),
            a = wf(e, void 0);
          let l = !0;
          try {
            (i = t(a)), (l = !1);
          } finally {
            l ? mf(o) : yf(o);
          }
          return bm(o, r), Sm(i, o);
        } else if (!e || typeof e != "object") {
          if (
            ((i = t(e)),
            i === void 0 && (i = e),
            i === ih && (i = void 0),
            this.autoFreeze_ && oh(i, !0),
            r)
          ) {
            const o = [],
              a = [];
            ho("Patches").generateReplacementPatches_(e, i, o, a), r(o, a);
          }
          return i;
        } else zt(1, e);
      }),
      (this.produceWithPatches = (e, t) => {
        if (typeof e == "function")
          return (a, ...l) => this.produceWithPatches(a, (u) => e(u, ...l));
        let r, i;
        return [
          this.produce(e, t, (a, l) => {
            (r = a), (i = l);
          }),
          r,
          i,
        ];
      }),
      typeof (n == null ? void 0 : n.autoFreeze) == "boolean" &&
        this.setAutoFreeze(n.autoFreeze),
      typeof (n == null ? void 0 : n.useStrictShallowCopy) == "boolean" &&
        this.setUseStrictShallowCopy(n.useStrictShallowCopy);
  }
  createDraft(n) {
    Ri(n) || zt(8), uo(n) && (n = nA(n));
    const e = xm(this),
      t = wf(n, void 0);
    return (t[Hn].isManual_ = !0), yf(e), t;
  }
  finishDraft(n, e) {
    const t = n && n[Hn];
    (!t || !t.isManual_) && zt(9);
    const { scope_: r } = t;
    return bm(r, e), Sm(void 0, r);
  }
  setAutoFreeze(n) {
    this.autoFreeze_ = n;
  }
  setUseStrictShallowCopy(n) {
    this.useStrictShallowCopy_ = n;
  }
  applyPatches(n, e) {
    let t;
    for (t = e.length - 1; t >= 0; t--) {
      const i = e[t];
      if (i.path.length === 0 && i.op === "replace") {
        n = i.value;
        break;
      }
    }
    t > -1 && (e = e.slice(t + 1));
    const r = ho("Patches").applyPatches_;
    return uo(n) ? r(n, e) : this.produce(n, (i) => r(i, e));
  }
};
function wf(n, e) {
  const t = ga(n)
    ? ho("MapSet").proxyMap_(n, e)
    : ma(n)
    ? ho("MapSet").proxySet_(n, e)
    : QI(n, e);
  return (e ? e.scope_ : mw()).drafts_.push(t), t;
}
function nA(n) {
  return uo(n) || zt(10, n), vw(n);
}
function vw(n) {
  if (!Ri(n) || Mc(n)) return n;
  const e = n[Hn];
  let t;
  if (e) {
    if (!e.modified_) return e.base_;
    (e.finalized_ = !0), (t = pf(n, e.scope_.immer_.useStrictShallowCopy_));
  } else t = pf(n, !0);
  return (
    Qo(t, (r, i) => {
      gw(t, r, vw(i));
    }),
    e && (e.finalized_ = !1),
    t
  );
}
function rA() {
  process.env.NODE_ENV !== "production" &&
    hw.push(
      'Sets cannot have "replace" patches.',
      function (g) {
        return "Unsupported patch operation: " + g;
      },
      function (g) {
        return "Cannot apply patch, path doesn't resolve: " + g;
      },
      "Patching reserved attributes like __proto__, prototype and constructor is not allowed"
    );
  const e = "replace",
    t = "add",
    r = "remove";
  function i(g, y, m, w) {
    switch (g.type_) {
      case 0:
      case 2:
        return a(g, y, m, w);
      case 1:
        return o(g, y, m, w);
      case 3:
        return l(g, y, m, w);
    }
  }
  function o(g, y, m, w) {
    let { base_: b, assigned_: E } = g,
      R = g.copy_;
    R.length < b.length && (([b, R] = [R, b]), ([m, w] = [w, m]));
    for (let O = 0; O < b.length; O++)
      if (E[O] && R[O] !== b[O]) {
        const I = y.concat([O]);
        m.push({ op: e, path: I, value: p(R[O]) }),
          w.push({ op: e, path: I, value: p(b[O]) });
      }
    for (let O = b.length; O < R.length; O++) {
      const I = y.concat([O]);
      m.push({ op: t, path: I, value: p(R[O]) });
    }
    for (let O = R.length - 1; b.length <= O; --O) {
      const I = y.concat([O]);
      w.push({ op: r, path: I });
    }
  }
  function a(g, y, m, w) {
    const { base_: b, copy_: E } = g;
    Qo(g.assigned_, (R, O) => {
      const I = wd(b, R),
        M = wd(E, R),
        D = O ? (Qs(b, R) ? e : t) : r;
      if (I === M && D === e) return;
      const N = y.concat(R);
      m.push(D === r ? { op: D, path: N } : { op: D, path: N, value: M }),
        w.push(
          D === t
            ? { op: r, path: N }
            : D === r
            ? { op: t, path: N, value: p(I) }
            : { op: e, path: N, value: p(I) }
        );
    });
  }
  function l(g, y, m, w) {
    let { base_: b, copy_: E } = g,
      R = 0;
    b.forEach((O) => {
      if (!E.has(O)) {
        const I = y.concat([R]);
        m.push({ op: r, path: I, value: O }),
          w.unshift({ op: t, path: I, value: O });
      }
      R++;
    }),
      (R = 0),
      E.forEach((O) => {
        if (!b.has(O)) {
          const I = y.concat([R]);
          m.push({ op: t, path: I, value: O }),
            w.unshift({ op: r, path: I, value: O });
        }
        R++;
      });
  }
  function u(g, y, m, w) {
    m.push({ op: e, path: [], value: y === ih ? void 0 : y }),
      w.push({ op: e, path: [], value: g });
  }
  function d(g, y) {
    return (
      y.forEach((m) => {
        const { path: w, op: b } = m;
        let E = g;
        for (let M = 0; M < w.length - 1; M++) {
          const D = fo(E);
          let N = w[M];
          typeof N != "string" && typeof N != "number" && (N = "" + N),
            (D === 0 || D === 1) &&
              (N === "__proto__" || N === "constructor") &&
              zt(16 + 3),
            typeof E == "function" && N === "prototype" && zt(16 + 3),
            (E = wd(E, N)),
            typeof E != "object" && zt(16 + 2, w.join("/"));
        }
        const R = fo(E),
          O = h(m.value),
          I = w[w.length - 1];
        switch (b) {
          case e:
            switch (R) {
              case 2:
                return E.set(I, O);
              case 3:
                zt(16);
              default:
                return (E[I] = O);
            }
          case t:
            switch (R) {
              case 1:
                return I === "-" ? E.push(O) : E.splice(I, 0, O);
              case 2:
                return E.set(I, O);
              case 3:
                return E.add(O);
              default:
                return (E[I] = O);
            }
          case r:
            switch (R) {
              case 1:
                return E.splice(I, 1);
              case 2:
                return E.delete(I);
              case 3:
                return E.delete(m.value);
              default:
                return delete E[I];
            }
          default:
            zt(16 + 1, b);
        }
      }),
      g
    );
  }
  function h(g) {
    if (!Ri(g)) return g;
    if (Array.isArray(g)) return g.map(h);
    if (ga(g))
      return new Map(Array.from(g.entries()).map(([m, w]) => [m, h(w)]));
    if (ma(g)) return new Set(Array.from(g).map(h));
    const y = Object.create(co(g));
    for (const m in g) y[m] = h(g[m]);
    return Qs(g, zs) && (y[zs] = g[zs]), y;
  }
  function p(g) {
    return uo(g) ? h(g) : g;
  }
  KI("Patches", {
    applyPatches_: d,
    generatePatches_: i,
    generateReplacementPatches_: u,
  });
}
var $n = new tA(),
  iA = $n.produce,
  oA = $n.produceWithPatches.bind($n);
$n.setAutoFreeze.bind($n);
$n.setUseStrictShallowCopy.bind($n);
var Em = $n.applyPatches.bind($n);
$n.createDraft.bind($n);
$n.finishDraft.bind($n);
function sA(n) {
  const e = `<body>${n}</body>`;
  return new window.DOMParser().parseFromString(e, "text/html").body;
}
function aA(n, e) {
  return so.fromSchema(e).parse(sA(n));
}
function lA(n, e) {
  return aA(n, e);
}
const cA = (n) => (e, t) => {
    const r = e.tr,
      { doc: i } = r,
      o = lA(n, e.schema);
    return t ? (r.replaceWith(0, i.content.size, o), t(r), !0) : !1;
  },
  uA = (n, e) => {
    const t = (r, { rootId: i, layers: o }, a = "ROOT") => {
      const l = (g, y) => ({
          id: ur(),
          data: zn({ ...g, parent: y, child: [] }),
        }),
        u = l(o[i], a),
        h = ((g, y) => {
          const m = [];
          return (
            o[g].child.forEach((w) => {
              const b = l(o[w], y);
              m.push([b.id, b]), u.data.child.push(b.id);
            }),
            m
          );
        })(i, u.id),
        p = Object.fromEntries([[u.id, u], ...h]);
      return (
        Object.entries(p).forEach(([g, y]) => {
          n.pages[n.activePage].layers[g] = y;
        }),
        n.pages[r].layers[a].data.child.push(u.id),
        u
      );
    };
    return {
      setProp(r, i, o, a) {
        const l = [];
        Te.isArray(i) ? l.push(...i) : l.push(i),
          l.forEach((u) => {
            n.pages[r].layers[u].data.props = ae.mergeWithoutArray(
              n.pages[r].layers[u].data.props,
              o,
              a
            );
          });
      },
      moveSelectedLayers: (r, i) => {
        (n.controlBox = void 0),
          n.selectedLayers[n.activePage].forEach((o) => {
            r === "right"
              ? (n.pages[n.activePage].layers[o].data.props.position.x += i)
              : r === "left"
              ? (n.pages[n.activePage].layers[o].data.props.position.x -= i)
              : r === "top"
              ? (n.pages[n.activePage].layers[o].data.props.position.y -= i)
              : r === "bottom" &&
                (n.pages[n.activePage].layers[o].data.props.position.y += i);
          });
      },
      changePageSize: (r) => {
        const i = r.width - e.getPageSize().width,
          o = r.height - e.getPageSize().height,
          a = r.width / r.height;
        n.pages.forEach((l) => {
          Object.entries(l.layers).forEach(([, u]) => {
            if (
              (!Ti(u) &&
                oD(u) &&
                ((u.data.props.position.x += i / 2),
                (u.data.props.position.y += o / 2)),
              Ti(u) && ((u.data.props.boxSize = r), u.data.props.image))
            ) {
              const d =
                u.data.props.image.boxSize.width /
                u.data.props.image.boxSize.height;
              d > a
                ? ((u.data.props.image.boxSize.height = r.height),
                  (u.data.props.image.boxSize.width = r.height * d))
                : ((u.data.props.image.boxSize.width = r.width),
                  (u.data.props.image.boxSize.height = r.width / d)),
                (u.data.props.image.position.y =
                  (r.height - u.data.props.image.boxSize.height) / 2),
                (u.data.props.image.position.x =
                  (r.width - u.data.props.image.boxSize.width) / 2);
            }
          });
        });
      },
      setScale: (r) => {
        n.scale = r;
      },
      setGuideline: ({ vertical: r, horizontal: i }) => {
        (n.guideline.vertical = r), (n.guideline.horizontal = i);
      },
      selectLayers(r, i, o = "replace") {
        const a = typeof i == "object" ? i : [i];
        if (
          ((n.textEditor = void 0),
          (n.imageEditor = void 0),
          r !== n.activePage && (n.selectedLayers = {}),
          o === "replace" ||
            (n.selectedLayers[r] && n.selectedLayers[r].includes("ROOT")) ||
            a.includes("ROOT"))
        ) {
          n.selectedLayers = { [r]: a };
          const l = n.hoveredLayer[r];
          l && a.includes(l) && (n.hoveredLayer = { [r]: null });
        } else
          n.selectedLayers[r] = Te.uniq([...(n.selectedLayers[r] || []), ...a]);
        n.activePage = r;
      },
      selectAllLayers: () => {
        (n.imageEditor = void 0),
          (n.textEditor = void 0),
          (n.selectedLayers = {
            [n.activePage]: Object.entries(n.pages[n.activePage].layers).reduce(
              (r, [i, o]) => (o.data.parent === "ROOT" && r.push(i), r),
              []
            ),
          });
      },
      resetSelectLayer: () => {
        (n.selectedLayers = {}),
          (n.hoveredLayer = {}),
          (n.textEditor = void 0),
          (n.imageEditor = void 0);
      },
      hoverLayer: (r, i) => {
        n.hoveredLayer = { [r]: i };
      },
      setAlign(r) {
        const i = (l, u) => {
            const d = ee.boundingRect(
              u.data.props.boxSize,
              u.data.props.position,
              u.data.props.rotate
            );
            return r === "left"
              ? l.position.x - (u.data.props.boxSize.width - d.width) / 2
              : r === "right"
              ? l.position.x +
                l.boxSize.width -
                d.width -
                (u.data.props.boxSize.width - d.width) / 2
              : l.position.x +
                (l.boxSize.width - u.data.props.boxSize.width) / 2;
          },
          o = (l, u) => {
            const d = ee.boundingRect(
              u.data.props.boxSize,
              u.data.props.position,
              u.data.props.rotate
            );
            return r === "top"
              ? l.position.y - (u.data.props.boxSize.height - d.height) / 2
              : r === "bottom"
              ? l.position.y +
                l.boxSize.height -
                d.height -
                (u.data.props.boxSize.height - d.height) / 2
              : l.position.y +
                (l.boxSize.height - u.data.props.boxSize.height) / 2;
          },
          a = n.selectedLayers[n.activePage].map(
            (l) => n.pages[n.activePage].layers[l]
          );
        if (a.length === 1)
          if (["left", "right", "center"].includes(r)) {
            const l = i(n.pages[n.activePage].layers.ROOT.data.props, a[0]);
            (n.pages[n.activePage].layers[a[0].id].data.props.position.x = l),
              n.controlBox && (n.controlBox.position.x = l);
          } else {
            const l = o(n.pages[n.activePage].layers.ROOT.data.props, a[0]);
            (n.pages[n.activePage].layers[a[0].id].data.props.position.y = l),
              n.controlBox && (n.controlBox.position.y = l);
          }
        else if (a.length > 1) {
          const l = a.reduce((h, p) => ((h[p.id] = p.data.props), h), {}),
            u = ee.getControlBoxSizeFromLayers(l),
            d = {};
          a.forEach((h) => {
            ["left", "right", "center"].includes(r)
              ? (n.pages[n.activePage].layers[h.id].data.props.position.x = i(
                  u,
                  h
                ))
              : (n.pages[n.activePage].layers[h.id].data.props.position.y = o(
                  u,
                  h
                )),
              (d[h.id] = n.pages[n.activePage].layers[h.id].data.props);
          }),
            (n.controlBox = ee.getControlBoxSizeFromLayers(d));
        }
      },
      setTextEditor: (r, i, o) => {
        n.pages[r].layers[i].data.editor = o;
      },
      setData: (r) => {
        (n.activePage = 0), (n.selectedLayers = {}), (n.hoveredLayer = {});
        const i = [],
          o = (a, l) => ({
            id: a.parent === null ? "ROOT" : ur(),
            data: zn({ ...a, parent: l, child: [] }),
          });
        r.forEach((a) => {
          const l = { layers: {} };
          l.layers.ROOT = o(a.layers.ROOT, null);
          const u = (p, g) => {
              const y = [];
              return (
                a.layers[p].child.forEach((m) => {
                  const w = o(a.layers[m], g);
                  y.push([w.id, w]),
                    (l.layers[w.id] = w),
                    l.layers[g].data.child.push(w.id),
                    a.layers[m].child.length > 0 && y.push(...u(m, w.id));
                }),
                y
              );
            },
            d = u("ROOT", "ROOT"),
            h = Object.fromEntries(d);
          Object.entries(h).forEach(([p, g]) => {
            l.layers[p] = g;
          }),
            i.push(l);
        }),
          (n.pages = i);
      },
      setPage: (r, i) => {
        const o = { layers: {} },
          a = (h, p) => ({
            id: h.parent === null ? "ROOT" : ur(),
            data: zn({ ...h, parent: p, child: [] }),
          });
        o.layers.ROOT = a(i.layers.ROOT, null);
        const l = (h, p) => {
            const g = [];
            return (
              i.layers[h].child.forEach((y) => {
                const m = a(i.layers[y], p);
                g.push([m.id, m]),
                  (o.layers[m.id] = m),
                  o.layers[p].data.child.push(m.id),
                  i.layers[y].child.length > 0 && g.push(...l(y, m.id));
              }),
              g
            );
          },
          u = l("ROOT", "ROOT"),
          d = Object.fromEntries(u);
        Object.entries(d).forEach(([h, p]) => {
          o.layers[h] = p;
        }),
          (n.selectedLayers = {}),
          (n.pages[r] = o);
      },
      setActivePage(r) {
        (n.selectedLayers = {}),
          (n.hoveredLayer = {}),
          (n.textEditor = void 0),
          (n.activePage = r);
      },
      deleteLayer: (r, i) => {
        const o = [];
        typeof i == "object" ? o.push(...i) : o.push(i),
          (n.selectedLayers[r] = n.selectedLayers[r].filter(
            (a) => !o.includes(a)
          )),
          o.forEach((a) => {
            const l = n.pages[r].layers[a].data.parent;
            delete n.pages[r].layers[a],
              l &&
                n.pages[r].layers[l] &&
                (n.pages[r].layers[l].data.child = n.pages[r].layers[
                  l
                ].data.child.filter((u) => u !== a));
          });
      },
      openTextEditor(r, i) {
        n.textEditor = { pageIndex: r, layerId: i, editor: null };
      },
      setOpeningEditor(r) {
        n.textEditor && (n.textEditor.editor = r);
      },
      closeTextEditor() {
        n.textEditor = void 0;
      },
      lockPage: (r) => {
        n.pages[r].layers.ROOT.data.locked = !0;
      },
      unlockPage: (r) => {
        n.pages[r].layers.ROOT.data.locked = !1;
      },
      deletePage: (r) => {
        (n.selectedLayers = {}), (n.hoveredLayer = {}), n.pages.splice(r, 1);
      },
      duplicatePage(r) {
        (n.textEditor = void 0), (n.imageEditor = void 0);
        const i = { layers: {} };
        Object.entries(Te.cloneDeep(pa(n.pages[r].layers, "ROOT"))).forEach(
          ([o, a]) => {
            i.layers[o] = { id: o, data: zn(a) };
          }
        ),
          n.pages.splice(r, 0, i),
          (n.activePage = r + 1),
          (n.selectedLayers = { [r + 1]: ["ROOT"] });
      },
      addPage: (r) => {
        const i = { layers: {} };
        (i.layers.ROOT = {
          id: "ROOT",
          data: zn({
            type: { resolvedName: "RootLayer" },
            props: {
              boxSize: e.getPageSize(),
              position: { x: 0, y: 0 },
              rotate: 0,
              color: "#fff",
              image: null,
            },
            locked: !1,
            parent: null,
            child: [],
          }),
        }),
          typeof r < "u"
            ? (n.pages.splice(r + 1, 0, i), (n.activePage = r + 1))
            : (n.pages.push(i), (n.activePage = n.activePage + 1));
      },
      movePageUp: (r) => {
        const i = Te.cloneDeep(n.pages[r]);
        n.pages.splice(r, 1),
          n.pages.splice(r - 1, 0, i),
          (n.activePage = r - 1);
      },
      movePageDown: (r) => {
        const i = Te.cloneDeep(n.pages[r]);
        n.pages.splice(r, 1),
          n.pages.splice(r + 1, 0, i),
          (n.activePage = r + 1);
      },
      lock: (r, i) => {
        const o = [];
        typeof i == "object" ? o.push(...i) : o.push(i),
          o.forEach((a) => {
            n.pages[r].layers[a].data.locked = !0;
          });
      },
      unlock: (r, i) => {
        const o = [];
        typeof i == "object" ? o.push(...i) : o.push(i),
          o.forEach((a) => {
            n.pages[r].layers[a].data.locked = !1;
          });
      },
      ungroup(r) {
        const i = n.activePage,
          o = n.pages[n.activePage].layers,
          a = o[r],
          l = o[r].data.child,
          u = o[r].data.parent,
          d = o[u],
          h = l.reduce(
            (g, y) => (
              (g[y] = ee.positionOfObjectInsideAnother(
                a.data.props,
                o[y].data.props
              )),
              g
            ),
            {}
          ),
          p = d.data.child.indexOf(r);
        return (
          l.forEach((g) => {
            const y = n.pages[i].layers[g];
            (y.data.parent = "ROOT"),
              (y.data.props.position.x = h[g].x),
              (y.data.props.position.y = h[g].y),
              (y.data.props.rotate = h[g].rotate),
              (y.data.props.boxSize.width =
                y.data.props.boxSize.width * a.data.props.scale),
              (y.data.props.boxSize.height =
                y.data.props.boxSize.height * a.data.props.scale),
              Qr(y) || Mi(y)
                ? (y.data.props.scale = y.data.props.scale * a.data.props.scale)
                : Fo(y) &&
                  ((y.data.props.image.boxSize.width =
                    y.data.props.image.boxSize.width * a.data.props.scale),
                  (y.data.props.image.boxSize.height =
                    y.data.props.image.boxSize.height * a.data.props.scale),
                  (y.data.props.image.position.x =
                    y.data.props.image.position.x * a.data.props.scale),
                  (y.data.props.image.position.y =
                    y.data.props.image.position.y * a.data.props.scale));
          }),
          n.pages[i].layers[u].data.child.splice(p, 1),
          n.pages[i].layers[u].data.child.splice(p, 0, ...l),
          delete n.pages[i].layers[r],
          (n.selectedLayers = { [i]: l }),
          l
        );
      },
      group(r) {
        const i = [],
          o = n.activePage,
          a = n.pages[n.activePage].layers;
        r.forEach((b) => {
          Jo(a[b]) ? i.push(...this.ungroup(b)) : i.push(b);
        });
        const {
            left: l,
            right: u,
            top: d,
            bottom: h,
          } = i.reduce(
            (b, E) => {
              const R = a[E].data.props,
                O = ee.boundingRect(R.boxSize, R.position, R.rotate);
              return (
                (b.left === null || b.left > O.x) && (b.left = O.x),
                (b.right === null || b.right < O.x + O.width) &&
                  (b.right = O.x + O.width),
                (b.top === null || b.top > O.y) && (b.top = O.y),
                (b.bottom === null || b.bottom < O.y + O.height) &&
                  (b.bottom = O.y + O.height),
                b
              );
            },
            { left: null, right: null, top: null, bottom: null }
          ),
          p = {
            type: { resolvedName: "GroupLayer" },
            props: {
              position: { x: l, y: d },
              boxSize: { width: u - l, height: h - d },
              scale: 1,
              rotate: 0,
            },
            locked: !1,
            hidden: !1,
            parent: "ROOT",
            child: i,
          },
          g = ur(),
          y = zn(p),
          m = a.ROOT.data.child;
        (n.pages[o].layers[g] = { id: g, data: y }),
          i.sort((b, E) => m.indexOf(b) - m.indexOf(E));
        const w = n.pages[o].layers.ROOT.data.child.findLastIndex((b) =>
          i.includes(b)
        );
        return (
          i.forEach((b) => {
            const E = n.pages[o].layers.ROOT.data.child.findIndex(
              (O) => O === b
            );
            n.pages[o].layers.ROOT.data.child.splice(E, 1),
              (n.pages[o].layers[b].data.parent = g);
            const R = n.pages[o].layers[b].data.props;
            (n.pages[o].layers[b].data.props.position.x = R.position.x - l),
              (n.pages[o].layers[b].data.props.position.y = R.position.y - d);
          }),
          n.pages[o].layers.ROOT.data.child.splice(w - r.length + 1, 0, g),
          (n.selectedLayers = { [o]: [g] }),
          g
        );
      },
      bringToFront: (r, i) => {
        const o = [];
        typeof i == "object" ? o.push(...i) : o.push(i);
        const a = n.pages[r].layers.ROOT.data.child;
        o.sort((l, u) => a.indexOf(l) - a.indexOf(u)),
          o.forEach((l) => {
            const u = a.findIndex((d) => d === l);
            a.splice(u, 1), a.splice(a.length, 0, l);
          });
      },
      bringForward: (r, i) => {
        const o = [];
        typeof i == "object" ? o.push(...i) : o.push(i);
        const a = n.pages[r].layers.ROOT.data.child,
          l = a.findLastIndex((u) => o.includes(u));
        o.sort((u, d) => a.indexOf(u) - a.indexOf(d)),
          o.forEach((u) => {
            const d = a.findIndex((h) => h === u);
            a.splice(d, 1), a.splice(l + 1, 0, u);
          });
      },
      sendToBack: (r, i) => {
        const o = [];
        typeof i == "object" ? o.push(...i) : o.push(i);
        const a = n.pages[r].layers.ROOT.data.child;
        o.sort((l, u) => a.indexOf(u) - a.indexOf(l)),
          o.forEach((l) => {
            const u = a.findIndex((d) => d === l);
            a.splice(u, 1), a.splice(0, 0, l);
          });
      },
      sendBackward: (r, i) => {
        const o = [];
        typeof i == "object" ? o.push(...i) : o.push(i);
        const a = n.pages[r].layers.ROOT.data.child,
          l = a.findIndex((u) => o.includes(u));
        o.sort((u, d) => a.indexOf(d) - a.indexOf(u)),
          o.forEach((u) => {
            const d = a.findIndex((h) => h === u);
            a.splice(d, 1), a.splice(l - 1, 0, u);
          });
      },
      moveLayerPosition: (r, i, o) => {
        const a = n.pages[r].layers.ROOT.data.child,
          l = a.findIndex((u) => u === i);
        l !== -1 && (a.splice(l, 1), a.splice(o, 0, i));
      },
      setFontList(r) {
        n.fontList = r;
      },
      appendFontList(r) {
        n.fontList.push(...r);
      },
      addLayer(r, i = "ROOT") {
        const o = ur(),
          a = zn({ ...r, locked: !1, parent: i, child: [] });
        (n.pages[n.activePage].layers[o] = {
          id: o,
          data: ae.mergeWithoutArray(a, {
            props: {
              position: ee.getPositionWhenLayerCenter(
                e.getPageSize(),
                a.props.boxSize
              ),
            },
          }),
        }),
          n.pages[n.activePage].layers[i].data.child.push(o),
          this.selectLayers(n.activePage, o);
      },
      addShapeLayer(r, i = "ROOT") {
        const o = ur(),
          a = zn({ ...r, locked: !1, parent: i, child: [] }),
          l = e.getPageSize().width / e.getPageSize().height,
          u = a.props.boxSize.width / a.props.boxSize.height;
        let d = 1,
          h = a.props.boxSize.width,
          p = a.props.boxSize.height;
        const g = 0.3;
        u > l
          ? ((h = e.getPageSize().width * g),
            (p = h / u),
            (d = h / a.props.boxSize.width))
          : ((p = e.getPageSize().height * g),
            (h = p * u),
            (d = p / a.props.boxSize.height)),
          (n.pages[n.activePage].layers[o] = {
            id: o,
            data: ae.mergeWithoutArray(Te.cloneDeep(a), {
              props: {
                boxSize: { width: h, height: p },
                position: ee.getPositionWhenLayerCenter(
                  e.getPageSize(),
                  a.props.boxSize
                ),
                scale: d,
              },
            }),
          }),
          n.pages[n.activePage].layers[i].data.child.push(o),
          this.selectLayers(n.activePage, o);
      },
      addLineLayer(r, i = "ROOT") {
        const o = ur(),
          a = e.getPageSize().width / 2,
          l = zn(
            ae.mergeWithoutArray(
              {
                props: {
                  boxSize: { width: a, height: 4 },
                  position: { x: 0, y: 0 },
                  style: "solid",
                  color: "rgb(0, 0, 0)",
                  scale: 1,
                  rotate: 0,
                },
                type: { resolvedName: "LineLayer" },
                locked: !1,
                parent: i,
                child: [],
              },
              r
            )
          );
        (n.pages[n.activePage].layers[o] = {
          id: o,
          data: ae.mergeWithoutArray(Te.cloneDeep(l), {
            props: {
              position: ee.getPositionWhenLayerCenter(
                e.getPageSize(),
                l.props.boxSize
              ),
            },
          }),
        }),
          n.pages[n.activePage].layers[i].data.child.push(o),
          this.selectLayers(n.activePage, o);
      },
      addImageLayer({ thumb: r, url: i }, o, a = "ROOT") {
        const l = ur(),
          u = e.getPageSize(),
          d = u.width / u.height,
          h = o.width / o.height,
          p = d < h ? u.width * 0.8 : u.height * h * 0.8,
          g = p / h,
          y = zn({
            type: { resolvedName: "ImageLayer" },
            props: {
              image: {
                url: i,
                thumb: r,
                boxSize: { width: p, height: g },
                position: { x: 0, y: 0 },
                rotate: 0,
              },
              position: { x: 0, y: 0 },
              boxSize: { width: p, height: g },
              rotate: 0,
            },
            locked: !1,
            parent: a,
            child: [],
          });
        (n.pages[n.activePage].layers[l] = {
          id: l,
          data: ae.mergeWithoutArray(y, {
            props: {
              position: ee.getPositionWhenLayerCenter(
                e.getPageSize(),
                y.props.boxSize
              ),
            },
          }),
        }),
          n.pages[n.activePage].layers[a].data.child.push(l),
          this.selectLayers(n.activePage, l);
      },
      addSvgLayer(r, i, o, a = "ROOT") {
        const l = ur(),
          u = e.getPageSize(),
          d = u.width / u.height,
          h = i.width / i.height,
          p = d < h ? u.width * 0.5 : u.height * h * 0.5,
          g = p / h,
          y = [],
          m = o.querySelectorAll(
            "path, circle, ellipse,line, rect, polygon,polyline, text"
          );
        for (let b = 0; b < m.length; b++) {
          const E = m[b].getAttribute("style");
          let R = m[b].getAttribute("stroke") || "none",
            O = m[b].getAttribute("fill") || "#000000";
          const I = {};
          E &&
            E.split(";")
              .filter((D) => !!D)
              .forEach((D) => {
                const [N, Y] = D.split(":");
                I[N.trim()] = Y.trim();
              }),
            I.stroke && (R = I.stroke),
            I.fill && (O = I.fill),
            R &&
            !["none", "currentcolor"].includes(R.toLowerCase()) &&
            !/url\((.*?)\)/.test(R) &&
            !y.includes(new ae.Color(R).toRgbString())
              ? y.push(new ae.Color(R).toRgbString())
              : O &&
                !["none", "currentcolor"].includes(O.toLowerCase()) &&
                !/url\((.*?)\)/.test(O) &&
                !y.includes(new ae.Color(O).toRgbString()) &&
                y.push(new ae.Color(O).toRgbString());
        }
        const w = zn({
          type: { resolvedName: "SvgLayer" },
          props: {
            image: r,
            position: { x: 0, y: 0 },
            boxSize: { width: p, height: g },
            colors: y,
            rotate: 0,
          },
          locked: !1,
          parent: a,
          child: [],
        });
        (n.pages[n.activePage].layers[l] = {
          id: l,
          data: ae.mergeWithoutArray(w, {
            props: {
              position: ee.getPositionWhenLayerCenter(
                e.getPageSize(),
                w.props.boxSize
              ),
            },
          }),
        }),
          n.pages[n.activePage].layers[a].data.child.push(l),
          this.selectLayers(n.activePage, l);
      },
      addFrameLayer(r, i, o = "ROOT") {
        const a = ur(),
          l = e.getPageSize(),
          u = l.width / l.height,
          d = r.width / r.height,
          h = u > d ? (l.height * 0.5) / r.height : (l.width * 0.5) / r.width,
          p = zn({
            type: { resolvedName: "FrameLayer" },
            props: {
              clipPath: i,
              position: { x: 0, y: 0 },
              boxSize: { width: r.width * h, height: r.height * h },
              rotate: 0,
              scale: h,
            },
            locked: !1,
            parent: o,
            child: [],
          });
        (n.pages[n.activePage].layers[a] = {
          id: a,
          data: ae.mergeWithoutArray(p, {
            props: {
              position: ee.getPositionWhenLayerCenter(
                e.getPageSize(),
                p.props.boxSize
              ),
            },
          }),
        }),
          n.pages[n.activePage].layers[o].data.child.push(a),
          this.selectLayers(n.activePage, a);
      },
      addVideoLayer({ url: r }, i, o = "ROOT") {
        const a = ur(),
          l = e.getPageSize(),
          u = l.width / l.height,
          d = i.width / i.height,
          h = u < d ? l.width * 0.8 : l.height * d * 0.8,
          p = h / d,
          g = zn({
            type: { resolvedName: "VideoLayer" },
            props: {
              video: {
                url: r,
                boxSize: { width: h, height: p },
                position: { x: 0, y: 0 },
                rotate: 0,
              },
              position: { x: 0, y: 0 },
              boxSize: { width: h, height: p },
              rotate: 0,
            },
            locked: !1,
            parent: o,
            child: [],
          });
        (n.pages[n.activePage].layers[a] = {
          id: a,
          data: ae.mergeWithoutArray(g, {
            props: {
              position: ee.getPositionWhenLayerCenter(
                e.getPageSize(),
                g.props.boxSize
              ),
            },
          }),
        }),
          n.pages[n.activePage].layers[o].data.child.push(a),
          this.selectLayers(n.activePage, a);
      },
      addLayerTree({ layers: r, rootId: i }) {
        const o = t(n.activePage, { layers: r, rootId: i });
        this.selectLayers(n.activePage, o.id);
      },
      addLayerTrees(r) {
        const i = [],
          o = r.map((a) => {
            const l = t(n.activePage, a);
            return i.push(l.id), l;
          });
        return this.selectLayers(n.activePage, i), o;
      },
      showContextMenu: ({ clientX: r, clientY: i }) => {
        n.openMenu = { clientX: r, clientY: i };
      },
      hideContextMenu: () => {
        n.openMenu = null;
      },
      setSelectData: (r) => {
        n.selectData.status = r;
      },
      setResizeData: (r, i, o, a, l, u) => {
        n.resizeData = {
          status: r,
          layerIds: i,
          direction: o,
          rotate: a,
          boxSize: l,
          cursor: u,
        };
      },
      setRotateData: (r, i) => {
        n.rotateData = { status: r, rotate: i };
      },
      setDragData: (r, i) => {
        n.dragData = { status: r, layerIds: i };
      },
      setUpdateLineData: (r, i, o) => {
        n.updateLineData = { status: r, layerId: i, linePosition: o };
      },
      setControlBox: (r) => {
        n.controlBox = r;
      },
      setSidebar: (r) => {
        n.sidebar = r || null;
      },
      openImageEditor(
        r,
        i,
        { boxSize: o, position: a, rotate: l, image: u, video: d }
      ) {
        n.imageEditor = Te.cloneDeep({
          pageIndex: r,
          layerId: i,
          boxSize: o,
          position: a,
          rotate: l,
          image: u,
          video: d,
        });
      },
      updateImageEditor(r) {
        n.imageEditor &&
          (n.imageEditor = ae.mergeWithoutArray(n.imageEditor, r));
      },
      closeImageEditor() {
        const r = n.imageEditor;
        if (r) {
          const i = n.pages[r.pageIndex].layers[r.layerId];
          n.pages[r.pageIndex].layers[r.layerId].data.props =
            ae.mergeWithoutArray(
              n.pages[r.pageIndex].layers[r.layerId].data.props,
              {
                boxSize: r.boxSize,
                position: r.position,
                rotate: r.rotate,
                image: r.image
                  ? {
                      boxSize: {
                        width:
                          r.image.boxSize.width / (i.data.props.scale || 1),
                        height:
                          r.image.boxSize.height / (i.data.props.scale || 1),
                      },
                      position: {
                        x: r.image.position.x / (i.data.props.scale || 1),
                        y: r.image.position.y / (i.data.props.scale || 1),
                      },
                      rotate: r.image.rotate,
                    }
                  : void 0,
                video: r.video
                  ? {
                      boxSize: {
                        width:
                          r.video.boxSize.width / (i.data.props.scale || 1),
                        height:
                          r.video.boxSize.height / (i.data.props.scale || 1),
                      },
                      position: {
                        x: r.video.position.x / (i.data.props.scale || 1),
                        y: r.video.position.y / (i.data.props.scale || 1),
                      },
                      rotate: r.video.rotate,
                    }
                  : void 0,
              }
            );
        }
        n.imageEditor = void 0;
      },
    };
  },
  dA = (n) => n.map((e) => ({ layers: pa(e.layers, "ROOT") })),
  fA = (n) => ({
    getPageSize() {
      return (
        (n.pages[0] && n.pages[0].layers.ROOT.data.props.boxSize) || {
          width: 0,
          height: 0,
        }
      );
    },
    serialize() {
      return dA(n.pages);
    },
    getLayers(e) {
      return n.pages[e] && n.pages[e].layers;
    },
    getLayer(e, t) {
      const r = n.pages[e] && n.pages[e].layers;
      if (r) return r[t];
    },
  }),
  mt = {
    UNDO: "HISTORY_UNDO",
    REDO: "HISTORY_REDO",
    THROTTLE: "HISTORY_THROTTLE",
    IGNORE: "HISTORY_IGNORE",
    MERGE: "HISTORY_MERGE",
    CLEAR: "HISTORY_CLEAR",
    NEW: "HISTORY_NEW",
    BACK: "HISTORY_BACK",
  };
class hA {
  constructor() {
    (this.timeline = []), (this.pointer = -1);
  }
  add(e, t) {
    (this.pointer = this.pointer + 1),
      (this.timeline.length = this.pointer),
      (this.timeline[this.pointer] = {
        patches: e,
        inversePatches: t,
        timestamp: Date.now(),
      });
  }
  throttleAdd(e, t, r = 500) {
    if (this.timeline.length && this.pointer >= 0) {
      const {
        patches: i,
        inversePatches: o,
        timestamp: a,
      } = this.timeline[this.pointer];
      if (new Date().getTime() - a < r) {
        this.timeline[this.pointer] = {
          timestamp: a,
          patches: [...i, ...e],
          inversePatches: [...t, ...o],
        };
        return;
      }
    }
    this.add(e, t);
  }
  back() {
    this.canUndo() &&
      (this.timeline.splice(this.pointer, 1),
      (this.pointer = this.pointer - 1));
  }
  merge(e, t) {
    if (!(e.length === 0 && t.length === 0)) {
      if (this.timeline.length && this.pointer >= 0) {
        const {
          patches: r,
          inversePatches: i,
          timestamp: o,
        } = this.timeline[this.pointer];
        this.timeline[this.pointer] = {
          timestamp: o,
          patches: [...r, ...e],
          inversePatches: [...t, ...i],
        };
        return;
      }
      this.add(e, t);
    }
  }
  clear() {
    (this.timeline = []), (this.pointer = -1);
  }
  canUndo() {
    return this.pointer >= 0;
  }
  canRedo() {
    return this.pointer < this.timeline.length - 1;
  }
  undo(e) {
    if (!this.canUndo()) return;
    const { inversePatches: t } = this.timeline[this.pointer];
    this.pointer = this.pointer - 1;
    const r = t.filter((i) => i.path[0] !== "textEditor");
    return Em(e, r);
  }
  redo(e) {
    if (!this.canRedo()) return;
    this.pointer = this.pointer + 1;
    const { patches: t } = this.timeline[this.pointer],
      r = t.filter((i) => i.path[0] !== "textEditor");
    return Em(e, r);
  }
}
rA();
const xl = [
    "hoverLayer",
    "selectLayers",
    "setControlBox",
    "setScale",
    "setEditing",
    "selectAllLayers",
    "resetSelectLayer",
    "hoverLayer",
    "setTextEditor",
    "setData",
    "showContextMenu",
    "hideContextMenu",
    "setResizeData",
    "setRotateData",
    "setDragData",
    "setSelectData",
    "setSidebar",
    "imageEditor",
  ],
  pA = [
    "setProp",
    "ungroup",
    "group",
    "setHidden",
    "lock",
    "unlock",
    "lockPage",
    "unlockPage",
    "deletePage",
    "duplicatePage",
    "addPage",
    "movePageUp",
    "movePageDown",
    "bringForward",
    "sendBackward",
    "bringToFront",
    "sendToBack",
    "addLayer",
    "addImageLayer",
    "addFrameLayer",
    "addLayerTree",
    "deleteLayer",
  ],
  gA = () => {
    const n = S.useMemo(() => new hA(), []),
      e = S.useRef(),
      t = S.useCallback(() => e.current, []),
      r = uA,
      i = S.useMemo(() => {
        const h = fA;
        return Object.keys(h()).reduce(
          (p, g) => ({
            ...p,
            [g]: (...y) => {
              const m = h(t())[g];
              return m(...y);
            },
          }),
          {}
        );
      }, [t]),
      o = S.useMemo(
        () => ({
          ...i,
          history: {
            canUndo() {
              return n.canUndo();
            },
            canRedo() {
              return n.canRedo();
            },
          },
        }),
        [i, n]
      ),
      [a] = S.useMemo(
        () => [
          (h, p) => {
            let g;
            const [y, m, w] = oA(h, (b) => {
              switch (p.type) {
                case mt.NEW:
                  break;
                case mt.BACK:
                  n.back();
                  break;
                case mt.UNDO:
                  return n.undo(b);
                case mt.REDO:
                  return n.redo(b);
                case mt.CLEAR:
                  return n.clear(), { ...b };
                case mt.IGNORE:
                case mt.MERGE:
                case mt.THROTTLE:
                  const [E, ...R] = p.payload;
                  r(b, o)[E](...R);
                  break;
                default:
                  r(b, o)[p.type](...p.payload);
              }
            });
            return (
              (g = y),
              [mt.UNDO, mt.REDO].includes(p.type) &&
                (g = iA(g, (b) => {
                  b.pages.forEach((E) => {
                    Object.entries(E.layers).forEach(([, R]) => {
                      const O = R;
                      if (Qr(O)) {
                        const I = O.data.editor;
                        I && cA(O.data.props.text)(I.state, I.dispatch);
                      }
                    });
                  }),
                    (b.textEditor = void 0),
                    (b.selectedLayers = {}),
                    (b.hoveredLayer = {}),
                    (b.controlBox = void 0);
                })),
              [...xl, mt.UNDO, mt.REDO, mt.CLEAR, mt.IGNORE, mt.NEW].includes(
                p.type
              ) ||
                (p.type === mt.THROTTLE
                  ? n.throttleAdd(m, w, p.config && p.config.rate)
                  : pA.includes(p.type)
                  ? n.add(m, w)
                  : n.merge(m, w)),
              mt.NEW === p.type && n.add(m, w),
              mt.MERGE === p.type && n.merge(m, w),
              mt.THROTTLE === p.type && n.throttleAdd(m, w),
              g
            );
          },
        ],
        [n, r, o]
      ),
      [l, u] = S.useReducer(a, {
        selectedLayers: {},
        hoveredLayer: {},
        openMenu: null,
        scale: 1,
        activePage: 0,
        pages: [],
        fontList: [],
        guideline: { vertical: [], horizontal: [] },
        sidebar: null,
        resizeData: { status: !1 },
        dragData: { status: !1 },
        rotateData: { status: !1 },
        updateLineData: { status: !1 },
        selectData: { status: !1 },
      }),
      d = S.useMemo(() => {
        const h = Object.keys(r(null));
        return {
          ...h.reduce(
            (y, m) => ((y[m] = (...w) => u({ type: m, payload: w })), y),
            {}
          ),
          history: {
            new() {
              u({ type: mt.NEW });
            },
            undo() {
              return u({ type: mt.UNDO });
            },
            redo() {
              return u({ type: mt.REDO });
            },
            clear: () => u({ type: mt.CLEAR }),
            back: () => u({ type: mt.BACK }),
            ignore: () =>
              h
                .filter((y) => !xl.includes(y))
                .reduce(
                  (y, m) => (
                    (y[m] = (...w) =>
                      u({ type: mt.IGNORE, payload: [m, ...w] })),
                    y
                  ),
                  {}
                ),
            throttle: (y) =>
              h
                .filter((m) => !xl.includes(m))
                .reduce(
                  (m, w) => (
                    (m[w] = (...b) =>
                      u({
                        type: mt.THROTTLE,
                        payload: [w, ...b],
                        config: { rate: y },
                      })),
                    m
                  ),
                  {}
                ),
            merge: () =>
              h
                .filter((y) => !xl.includes(y))
                .reduce(
                  (y, m) => (
                    (y[m] = (...w) =>
                      u({ type: mt.MERGE, payload: [m, ...w] })),
                    y
                  ),
                  {}
                ),
          },
        };
      }, [r]);
    return (
      (e.current = l),
      S.useMemo(() => ({ getState: t, actions: d, query: o }), [d, t, o])
    );
  },
  mA = ({ getFonts: n, config: e, children: t }) => {
    const { getState: r, actions: i, query: o } = gA();
    return x(ei.Provider, {
      value: { config: e, getState: r, actions: i, query: o, getFonts: n },
      children: t,
    });
  };
var yA = function (e) {
  return U.jsx(
    "svg",
    Re(
      {
        xmlns: "http://www.w3.org/2000/svg",
        viewBox: "0 0 256 256",
        fill: "currentColor",
        width: "1em",
        height: "1em",
      },
      e,
      {
        children: U.jsx("path", {
          d: "M165.66 202.34a8 8 0 0 1-11.32 11.32l-80-80a8 8 0 0 1 0-11.32l80-80a8 8 0 0 1 11.32 11.32L91.31 128Z",
        }),
      }
    )
  );
};
let km;
const vA = () => {
  const { pages: n, pageSize: e } = $e((u, d) => ({
      pages: u.pages,
      pageSize: d.getPageSize(),
    })),
    [t, r] = S.useState(0),
    [i, o] = S.useState({ width: 0, height: 0, scale: 1 }),
    { usedFonts: a } = Oc(),
    l = S.useCallback(
      (u) => {
        r((d) => {
          const h = (d + u) % n.length;
          return h >= 0 ? h : n.length + h;
        });
      },
      [r, n.length]
    );
  return (
    S.useEffect(
      () => (
        (km = setTimeout(() => {
          l(1);
        }, 5e3)),
        () => {
          clearTimeout(km);
        }
      ),
      [l, t]
    ),
    S.useEffect(() => {
      const u = () => {
        const { clientWidth: d, clientHeight: h } = window.document.body,
          p = d / h,
          g = e.width / e.height;
        if (p > g) {
          const y = h * g;
          o({ width: y, height: h, scale: y / e.width });
        } else {
          const y = d,
            m = y / g;
          o({ width: y, height: m, scale: y / e.width });
        }
      };
      return (
        u(),
        window.addEventListener("resize", u),
        () => {
          window.removeEventListener("resize", u);
        }
      );
    }, [e]),
    i.width === 0
      ? null
      : H("div", {
          css: {
            position: "relative",
            width: "100%",
            height: "100%",
            display: "flex",
            alignItems: "center",
            justifyContent: "center",
          },
          children: [
            x(ee.GlobalStyle, { fonts: a }),
            x("div", {
              css: {
                position: "absolute",
                top: "50%",
                transform: "translate(0, -50%)",
                left: "16px",
                zIndex: 1050,
              },
              children: x("div", {
                css: {
                  border: "1px solid #fff",
                  background: "rgba(255,255,255,0.3)",
                  width: 60,
                  height: 60,
                  display: "flex",
                  alignItems: "center",
                  justifyContent: "center",
                  fontSize: 32,
                  color: "#fff",
                  borderRadius: "50%",
                  cursor: "pointer",
                },
                onClick: () => l(-1),
                children: x(yA, {}),
              }),
            }),
            x("div", {
              css: {
                position: "absolute",
                top: "50%",
                transform: "translate(0, -50%)",
                right: "16px",
                zIndex: 1050,
              },
              children: x("div", {
                css: {
                  border: "1px solid #fff",
                  background: "rgba(255,255,255,0.3)",
                  width: 60,
                  height: 60,
                  display: "flex",
                  alignItems: "center",
                  justifyContent: "center",
                  fontSize: 32,
                  color: "#fff",
                  borderRadius: "50%",
                  cursor: "pointer",
                },
                onClick: () => l(1),
                children: x(Jv, {}),
              }),
            }),
            x("div", {
              css: { width: i.width, height: i.height },
              children: x("div", {
                css: { position: "relative" },
                children: n.map((u, d) =>
                  x(
                    "div",
                    {
                      children: x(nw, {
                        height: e.height,
                        isActive: t === d,
                        pageIndex: d,
                        scale: i.scale,
                        width: e.width,
                      }),
                    },
                    d
                  )
                ),
              }),
            }),
          ],
        })
  );
};
var wA = function (e) {
  return U.jsxs(
    "svg",
    Re(
      {
        xmlns: "http://www.w3.org/2000/svg",
        viewBox: "0 0 15 15",
        width: "1em",
        height: "1em",
      },
      e,
      {
        children: [
          U.jsx("path", { d: "M0 0h3v3H0zM0 6h3v3H0zM0 12h3v3H0z" }),
          U.jsx("path", { opacity: 0.75, d: "M3 9h3v3H3zM3 3h3v3H3z" }),
          U.jsx("path", {
            opacity: 0.5,
            d: "M6 0h3v3H6zM6 6h3v3H6zM6 12h3v3H6z",
          }),
          U.jsx("path", { opacity: 0.35, d: "M9 3h3v3H9zM9 9h3v3H9z" }),
          U.jsx("path", {
            opacity: 0.15,
            d: "M12 12h3v3h-3zM12 6h3v3h-3zM12 0h3v3h-3z",
          }),
        ],
      }
    )
  );
};
const bA = (
    {
      open: n,
      children: e,
      anchorEl: t,
      placement: r = "bottom-end",
      onClose: i,
      offsets: o,
    },
    a
  ) => {
    const l = ae.useForwardedRef(a),
      u = S.useRef(null),
      [d, h] = S.useState({ x: -9999, y: -9999 }),
      [p, g] = S.useState({ x: -9999, y: -9999 });
    S.useEffect(() => {
      const m = Te.throttle(() => {
        if (t) {
          const w = t.getBoundingClientRect(),
            [b] = r.split("-"),
            E = { x: w.x, y: w.y };
          b === "right" && (E.x += w.width),
            b === "bottom" && (E.y += w.height),
            b === "top" && (E.y -= w.height),
            b === "left" && (E.x -= w.width),
            h(E);
        }
      }, 16);
      return (
        m(),
        window.addEventListener("resize", m),
        () => {
          window.removeEventListener("resize", m);
        }
      );
    }, [t, n, r]),
      S.useEffect(() => {
        const m = (w) => {
          const b = l.current;
          let E = !0;
          if (b)
            for (let R = 0; R < b.children.length; R++)
              b.children[R].contains(w.target) && (E = !1);
          E && i();
        };
        return (
          window.addEventListener("mousedown", m, { capture: !0 }),
          () => {
            window.removeEventListener("mousedown", m, { capture: !0 });
          }
        );
      }, [l, i]),
      S.useEffect(() => {
        const m = () => {
            var R;
            const [b, E] = r.split("-");
            if (t) {
              const O =
                  (R = u.current) == null ? void 0 : R.getBoundingClientRect(),
                I = t.getBoundingClientRect(),
                M = { x: 0, y: 0 };
              b === "top"
                ? ((M.y = -O.height + I.height),
                  E === "end" && (M.x = -O.width + I.width))
                : b === "bottom" && E === "end" && (M.x = -O.width + I.width),
                g(M);
            } else g({ x: 0, y: 0 });
          },
          w = new MutationObserver(m);
        return (
          u.current &&
            w.observe(u.current, {
              subtree: !0,
              childList: !0,
              attributes: !0,
            }),
          () => {
            w.disconnect();
          }
        );
      }, [r, t]);
    const y = S.useMemo(() => {
      if (o && o[r]) {
        const m = o[r];
        return { x: d.x + m.x, y: d.y + m.y };
      } else return d;
    }, [o, r, d]);
    return x("div", {
      ref: l,
      css: { position: "fixed", top: 0, left: 0, zIndex: 1040 },
      children: x("div", {
        ref: u,
        css: {
          position: "absolute",
          top: y.y,
          left: y.x,
          transform: `translate(${p.x}px, ${p.y}px)`,
          boxShadow:
            "0 0 0 1px rgba(64,87,109,.07),0 2px 12px rgba(53,71,90,.2)",
          borderRadius: 4,
        },
        children: x("div", { css: { background: "#fff" }, children: e }),
      }),
    });
  },
  xA = S.forwardRef(bA),
  SA = ({ open: n, children: e, element: t, ...r }, i) => {
    const [o] = S.useState(window.document.createElement("div"));
    S.useEffect(
      () => (
        !t && window.document.body.appendChild(o),
        () => {
          !t && window.document.body.removeChild(o);
        }
      ),
      [t, o, n]
    );
    const a = x(xA, { ref: i, open: n, ...r, children: e });
    return n ? Yr.createPortal(a, t || o) : null;
  },
  rr = S.forwardRef(SA),
  Di = ({
    label: n,
    min: e = 0,
    max: t = 100,
    step: r = 1,
    defaultValue: i,
    value: o,
    hideLabel: a,
    hideInput: l,
    onChange: u,
  }) => {
    const d = S.useRef(null),
      h = S.useRef(null),
      p = S.useRef(null),
      g = S.useRef({ startPoint: 0, startValue: 0 }),
      [y, m] = S.useState(0),
      [w, b] = S.useState(i || o || 0),
      [E, R] = S.useState(!1);
    S.useEffect(() => {
      o !== void 0 && (b(o), h.current && (h.current.value = `${o}`));
    }, [o]),
      S.useEffect(() => {
        if (e < 0) {
          const te = t - e,
            se = (-e / te) * 100;
          m(se);
        }
      }, [e, t]);
    const O = (te) => {
        var se;
        const ne =
          (se = d.current) == null ? void 0 : se.getBoundingClientRect();
        return te - ne.x;
      },
      I = (te) => {
        var oe;
        b(te);
        const ne = (r + "").split("."),
          se = parseFloat(
            (Math.round(te / r) * r).toFixed(
              ((oe = ne[1]) == null ? void 0 : oe.length) || 0
            )
          );
        h.current && (h.current.value = se + ""), u && u(se);
      },
      M = (te) => {
        var oe;
        const se =
          ((oe = d.current) == null ? void 0 : oe.getBoundingClientRect())
            .width /
          (t - e);
        return te / se;
      },
      D = Te.throttle((te) => {
        const { clientX: ne } = ae.getPosition(te),
          se = ne - g.current.startPoint,
          oe = Math.max(e, Math.min(t, g.current.startValue + M(se)));
        I(oe);
      }, 16),
      N = (te) => {
        const { clientX: ne } = ae.getPosition(te),
          se = ne - g.current.startPoint;
        if (se) {
          const oe = Math.max(e, Math.min(t, g.current.startValue + M(se)));
          I(oe);
        }
        X();
      },
      Y = () => {
        R(!0),
          window.addEventListener("touchmove", D),
          window.addEventListener("mousemove", D),
          window.addEventListener("mouseup", N, { once: !0 }),
          window.addEventListener("mouseleave", N, { once: !0 }),
          window.addEventListener("touchend", N, { once: !0 });
      },
      X = () => {
        R(!1),
          window.removeEventListener("touchmove", D),
          window.removeEventListener("mousemove", D),
          window.removeEventListener("mouseup", N),
          window.removeEventListener("mouseleave", N),
          window.removeEventListener("touchend", N);
      },
      j = (te) => {
        const { clientX: ne } = ae.getPosition(te.nativeEvent),
          se = O(ne),
          oe = M(se);
        (g.current.startPoint = ne),
          (g.current.startValue = e + oe),
          I(e + oe),
          Y();
      },
      W = () => {
        if (h.current) {
          const te = Math.max(e, Math.min(t, parseInt(h.current.value, 10)));
          h.current.blur(), I(te);
        }
      };
    return H("div", {
      css: {
        display: "grid",
        gridColumnGap: 16,
        gridRowGap: 8,
        gridTemplateColumns: "1fr auto",
        alignItems: "center",
      },
      children: [
        !a &&
          x("div", {
            css: {
              fontSize: 14,
              textTransform: "capitalize",
              whiteSpace: "nowrap",
            },
            children: n,
          }),
        !l &&
          x("div", {
            css: {
              background: "#fff",
              border: "1px solid rgba(43,59,74,.3)",
              width: 40,
              height: 24,
              borderRadius: 4,
              overflow: "hidden",
            },
            children: x("input", {
              ref: h,
              css: {
                width: "100%",
                height: "100%",
                padding: 2,
                textAlign: "center",
              },
              defaultValue: w,
              onBlur: W,
              onKeyDown: (te) => {
                te.key.toLowerCase() === "enter" && W();
              },
            }),
          }),
        H("div", {
          css: {
            height: 16,
            position: "relative",
            width: "100%",
            gridRow: l && a ? 1 : "2/auto",
            gridColumn: "1/-1",
          },
          onMouseDown: j,
          onTouchStart: j,
          children: [
            x("div", {
              ref: d,
              css: {
                width: "100%",
                position: "absolute",
                left: 0,
                top: "50%",
                transform: "translateY(-50%)",
                height: 2,
                borderRadius: 2,
                cursor: "pointer",
                backgroundColor: "#bbbbbb",
              },
            }),
            y > 0 &&
              H("div", {
                css: {
                  position: "absolute",
                  top: "50%",
                  width: "100%",
                  transform: "translateY(-50%)",
                  display: "inline-flex",
                },
                children: [
                  x("div", {
                    css: {
                      width: `calc(${y}% - 2px)`,
                      maxWidth: "calc(100% - 4px)",
                    },
                  }),
                  x("div", {
                    css: {
                      width: 4,
                      height: 4,
                      transform: "translateY(-6px)",
                      borderRadius: "50%",
                      background: "#bbbbbb",
                    },
                  }),
                ],
              }),
            x("div", {
              ref: p,
              css: { position: "absolute", top: "50%" },
              style: {
                width: `${((Math.abs(w) - (e > 0 ? e : 0)) / (t - e)) * 100}%`,
                marginLeft: `${Math.min(y, y + (w / (t - e)) * 100)}%`,
                transform: `scaleX(${w >= 0 ? 1 : -1})`,
              },
              children: x("div", {
                css: {
                  backgroundColor: "#3d8eff",
                  width: "100%",
                  height: 2,
                  transform: "translateY(-50%)",
                  position: "absolute",
                  borderRadius: 2,
                },
                children: H("div", {
                  css: {
                    width: 16,
                    height: 16,
                    transform: "translate(-50%, -50%)",
                    background: "#fff",
                    left: "100%",
                    position: "absolute",
                  },
                  onMouseDown: j,
                  onTouchStart: j,
                  children: [
                    x("div", {
                      css: {
                        position: "absolute",
                        borderRadius: "50%",
                        width: 16,
                        height: 16,
                        transform: E ? " scale(1.125)" : void 0,
                        border: E ? "1px solid #3d8eff" : "1px solid #5E6278",
                      },
                    }),
                    x("div", {
                      css: {
                        position: "absolute",
                        borderRadius: "50%",
                        width: 16,
                        height: 16,
                        boxShadow: E
                          ? "0 0 0 8px #3d8eff"
                          : "0 0 4px 1px #bbbbbb",
                        opacity: E ? 0.5 : 1,
                      },
                    }),
                  ],
                }),
              }),
            }),
          ],
        }),
      ],
    });
  },
  CA = ({ children: n, isActive: e, disabled: t, onClick: r, ...i }, o) =>
    x("div", {
      ref: o,
      css: {
        position: "relative",
        display: "flex",
        alignItems: "center",
        justifyContent: "center",
        borderRadius: 4,
        height: 32,
        padding: "0 4px",
        cursor: t ? "not-allowed" : "pointer",
        backgroundColor: e ? "rgba(57,76,96,.15)" : "#fff",
        color: t ? "rgba(36,49,61,.4)" : void 0,
        whiteSpace: "nowrap",
        ":hover": { backgroundColor: t ? void 0 : "rgba(64,87,109,.07)" },
      },
      onClick: (a) => !t && r && r(a),
      ...i,
      children: n,
    }),
  kt = S.forwardRef(CA);
function EA() {
  for (var n = arguments.length, e = new Array(n), t = 0; t < n; t++)
    e[t] = arguments[t];
  return S.useMemo(
    () => (r) => {
      e.forEach((i) => i(r));
    },
    e
  );
}
const Rc =
  typeof window < "u" &&
  typeof window.document < "u" &&
  typeof window.document.createElement < "u";
function ns(n) {
  const e = Object.prototype.toString.call(n);
  return e === "[object Window]" || e === "[object global]";
}
function ah(n) {
  return "nodeType" in n;
}
function yn(n) {
  var e, t;
  return n
    ? ns(n)
      ? n
      : ah(n) &&
        (e = (t = n.ownerDocument) == null ? void 0 : t.defaultView) != null
      ? e
      : window
    : window;
}
function lh(n) {
  const { Document: e } = yn(n);
  return n instanceof e;
}
function ya(n) {
  return ns(n) ? !1 : n instanceof yn(n).HTMLElement;
}
function kA(n) {
  return n instanceof yn(n).SVGElement;
}
function rs(n) {
  return n
    ? ns(n)
      ? n.document
      : ah(n)
      ? lh(n)
        ? n
        : ya(n)
        ? n.ownerDocument
        : document
      : document
    : document;
}
const ir = Rc ? S.useLayoutEffect : S.useEffect;
function Dc(n) {
  const e = S.useRef(n);
  return (
    ir(() => {
      e.current = n;
    }),
    S.useCallback(function () {
      for (var t = arguments.length, r = new Array(t), i = 0; i < t; i++)
        r[i] = arguments[i];
      return e.current == null ? void 0 : e.current(...r);
    }, [])
  );
}
function OA() {
  const n = S.useRef(null),
    e = S.useCallback((r, i) => {
      n.current = setInterval(r, i);
    }, []),
    t = S.useCallback(() => {
      n.current !== null && (clearInterval(n.current), (n.current = null));
    }, []);
  return [e, t];
}
function na(n, e) {
  e === void 0 && (e = [n]);
  const t = S.useRef(n);
  return (
    ir(() => {
      t.current !== n && (t.current = n);
    }, e),
    t
  );
}
function va(n, e) {
  const t = S.useRef();
  return S.useMemo(() => {
    const r = n(t.current);
    return (t.current = r), r;
  }, [...e]);
}
function rc(n) {
  const e = Dc(n),
    t = S.useRef(null),
    r = S.useCallback((i) => {
      i !== t.current && (e == null || e(i, t.current)), (t.current = i);
    }, []);
  return [t, r];
}
function ic(n) {
  const e = S.useRef();
  return (
    S.useEffect(() => {
      e.current = n;
    }, [n]),
    e.current
  );
}
let Sd = {};
function wa(n, e) {
  return S.useMemo(() => {
    if (e) return e;
    const t = Sd[n] == null ? 0 : Sd[n] + 1;
    return (Sd[n] = t), n + "-" + t;
  }, [n, e]);
}
function ww(n) {
  return function (e) {
    for (
      var t = arguments.length, r = new Array(t > 1 ? t - 1 : 0), i = 1;
      i < t;
      i++
    )
      r[i - 1] = arguments[i];
    return r.reduce(
      (o, a) => {
        const l = Object.entries(a);
        for (const [u, d] of l) {
          const h = o[u];
          h != null && (o[u] = h + n * d);
        }
        return o;
      },
      { ...e }
    );
  };
}
const Uo = ww(1),
  oc = ww(-1);
function TA(n) {
  return "clientX" in n && "clientY" in n;
}
function Ic(n) {
  if (!n) return !1;
  const { KeyboardEvent: e } = yn(n.target);
  return e && n instanceof e;
}
function MA(n) {
  if (!n) return !1;
  const { TouchEvent: e } = yn(n.target);
  return e && n instanceof e;
}
function sc(n) {
  if (MA(n)) {
    if (n.touches && n.touches.length) {
      const { clientX: e, clientY: t } = n.touches[0];
      return { x: e, y: t };
    } else if (n.changedTouches && n.changedTouches.length) {
      const { clientX: e, clientY: t } = n.changedTouches[0];
      return { x: e, y: t };
    }
  }
  return TA(n) ? { x: n.clientX, y: n.clientY } : null;
}
const Ii = Object.freeze({
    Translate: {
      toString(n) {
        if (!n) return;
        const { x: e, y: t } = n;
        return (
          "translate3d(" +
          (e ? Math.round(e) : 0) +
          "px, " +
          (t ? Math.round(t) : 0) +
          "px, 0)"
        );
      },
    },
    Scale: {
      toString(n) {
        if (!n) return;
        const { scaleX: e, scaleY: t } = n;
        return "scaleX(" + e + ") scaleY(" + t + ")";
      },
    },
    Transform: {
      toString(n) {
        if (n)
          return [Ii.Translate.toString(n), Ii.Scale.toString(n)].join(" ");
      },
    },
    Transition: {
      toString(n) {
        let { property: e, duration: t, easing: r } = n;
        return e + " " + t + "ms " + r;
      },
    },
  }),
  Om =
    "a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";
function RA(n) {
  return n.matches(Om) ? n : n.querySelector(Om);
}
const DA = { display: "none" };
function IA(n) {
  let { id: e, value: t } = n;
  return S.createElement("div", { id: e, style: DA }, t);
}
const AA = {
  position: "fixed",
  width: 1,
  height: 1,
  margin: -1,
  border: 0,
  padding: 0,
  overflow: "hidden",
  clip: "rect(0 0 0 0)",
  clipPath: "inset(100%)",
  whiteSpace: "nowrap",
};
function LA(n) {
  let { id: e, announcement: t } = n;
  return S.createElement(
    "div",
    {
      id: e,
      style: AA,
      role: "status",
      "aria-live": "assertive",
      "aria-atomic": !0,
    },
    t
  );
}
function PA() {
  const [n, e] = S.useState("");
  return {
    announce: S.useCallback((r) => {
      r != null && e(r);
    }, []),
    announcement: n,
  };
}
const bw = S.createContext(null);
function _A(n) {
  const e = S.useContext(bw);
  S.useEffect(() => {
    if (!e)
      throw new Error(
        "useDndMonitor must be used within a children of <DndContext>"
      );
    return e(n);
  }, [n, e]);
}
function NA() {
  const [n] = S.useState(() => new Set()),
    e = S.useCallback((r) => (n.add(r), () => n.delete(r)), [n]);
  return [
    S.useCallback(
      (r) => {
        let { type: i, event: o } = r;
        n.forEach((a) => {
          var l;
          return (l = a[i]) == null ? void 0 : l.call(a, o);
        });
      },
      [n]
    ),
    e,
  ];
}
const zA = {
    draggable: `
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `,
  },
  BA = {
    onDragStart(n) {
      let { active: e } = n;
      return "Picked up draggable item " + e.id + ".";
    },
    onDragOver(n) {
      let { active: e, over: t } = n;
      return t
        ? "Draggable item " +
            e.id +
            " was moved over droppable area " +
            t.id +
            "."
        : "Draggable item " + e.id + " is no longer over a droppable area.";
    },
    onDragEnd(n) {
      let { active: e, over: t } = n;
      return t
        ? "Draggable item " + e.id + " was dropped over droppable area " + t.id
        : "Draggable item " + e.id + " was dropped.";
    },
    onDragCancel(n) {
      let { active: e } = n;
      return "Dragging was cancelled. Draggable item " + e.id + " was dropped.";
    },
  };
function FA(n) {
  let {
    announcements: e = BA,
    container: t,
    hiddenTextDescribedById: r,
    screenReaderInstructions: i = zA,
  } = n;
  const { announce: o, announcement: a } = PA(),
    l = wa("DndLiveRegion"),
    [u, d] = S.useState(!1);
  if (
    (S.useEffect(() => {
      d(!0);
    }, []),
    _A(
      S.useMemo(
        () => ({
          onDragStart(p) {
            let { active: g } = p;
            o(e.onDragStart({ active: g }));
          },
          onDragMove(p) {
            let { active: g, over: y } = p;
            e.onDragMove && o(e.onDragMove({ active: g, over: y }));
          },
          onDragOver(p) {
            let { active: g, over: y } = p;
            o(e.onDragOver({ active: g, over: y }));
          },
          onDragEnd(p) {
            let { active: g, over: y } = p;
            o(e.onDragEnd({ active: g, over: y }));
          },
          onDragCancel(p) {
            let { active: g, over: y } = p;
            o(e.onDragCancel({ active: g, over: y }));
          },
        }),
        [o, e]
      )
    ),
    !u)
  )
    return null;
  const h = S.createElement(
    S.Fragment,
    null,
    S.createElement(IA, { id: r, value: i.draggable }),
    S.createElement(LA, { id: l, announcement: a })
  );
  return t ? Yr.createPortal(h, t) : h;
}
var Nt;
(function (n) {
  (n.DragStart = "dragStart"),
    (n.DragMove = "dragMove"),
    (n.DragEnd = "dragEnd"),
    (n.DragCancel = "dragCancel"),
    (n.DragOver = "dragOver"),
    (n.RegisterDroppable = "registerDroppable"),
    (n.SetDroppableDisabled = "setDroppableDisabled"),
    (n.UnregisterDroppable = "unregisterDroppable");
})(Nt || (Nt = {}));
function ac() {}
function Cd(n, e) {
  return S.useMemo(() => ({ sensor: n, options: e ?? {} }), [n, e]);
}
function WA() {
  for (var n = arguments.length, e = new Array(n), t = 0; t < n; t++)
    e[t] = arguments[t];
  return S.useMemo(() => [...e].filter((r) => r != null), [...e]);
}
const mr = Object.freeze({ x: 0, y: 0 });
function VA(n, e) {
  const t = sc(n);
  if (!t) return "0 0";
  const r = {
    x: ((t.x - e.left) / e.width) * 100,
    y: ((t.y - e.top) / e.height) * 100,
  };
  return r.x + "% " + r.y + "%";
}
function HA(n, e) {
  let {
      data: { value: t },
    } = n,
    {
      data: { value: r },
    } = e;
  return r - t;
}
function $A(n, e) {
  if (!n || n.length === 0) return null;
  const [t] = n;
  return e ? t[e] : t;
}
function jA(n, e) {
  const t = Math.max(e.top, n.top),
    r = Math.max(e.left, n.left),
    i = Math.min(e.left + e.width, n.left + n.width),
    o = Math.min(e.top + e.height, n.top + n.height),
    a = i - r,
    l = o - t;
  if (r < i && t < o) {
    const u = e.width * e.height,
      d = n.width * n.height,
      h = a * l,
      p = h / (u + d - h);
    return Number(p.toFixed(4));
  }
  return 0;
}
const UA = (n) => {
  let { collisionRect: e, droppableRects: t, droppableContainers: r } = n;
  const i = [];
  for (const o of r) {
    const { id: a } = o,
      l = t.get(a);
    if (l) {
      const u = jA(l, e);
      u > 0 && i.push({ id: a, data: { droppableContainer: o, value: u } });
    }
  }
  return i.sort(HA);
};
function ZA(n, e, t) {
  return {
    ...n,
    scaleX: e && t ? e.width / t.width : 1,
    scaleY: e && t ? e.height / t.height : 1,
  };
}
function xw(n, e) {
  return n && e ? { x: n.left - e.left, y: n.top - e.top } : mr;
}
function YA(n) {
  return function (t) {
    for (
      var r = arguments.length, i = new Array(r > 1 ? r - 1 : 0), o = 1;
      o < r;
      o++
    )
      i[o - 1] = arguments[o];
    return i.reduce(
      (a, l) => ({
        ...a,
        top: a.top + n * l.y,
        bottom: a.bottom + n * l.y,
        left: a.left + n * l.x,
        right: a.right + n * l.x,
      }),
      { ...t }
    );
  };
}
const qA = YA(1);
function Sw(n) {
  if (n.startsWith("matrix3d(")) {
    const e = n.slice(9, -1).split(/, /);
    return { x: +e[12], y: +e[13], scaleX: +e[0], scaleY: +e[5] };
  } else if (n.startsWith("matrix(")) {
    const e = n.slice(7, -1).split(/, /);
    return { x: +e[4], y: +e[5], scaleX: +e[0], scaleY: +e[3] };
  }
  return null;
}
function GA(n, e, t) {
  const r = Sw(e);
  if (!r) return n;
  const { scaleX: i, scaleY: o, x: a, y: l } = r,
    u = n.left - a - (1 - i) * parseFloat(t),
    d = n.top - l - (1 - o) * parseFloat(t.slice(t.indexOf(" ") + 1)),
    h = i ? n.width / i : n.width,
    p = o ? n.height / o : n.height;
  return { width: h, height: p, top: d, right: u + h, bottom: d + p, left: u };
}
const KA = { ignoreTransform: !1 };
function is(n, e) {
  e === void 0 && (e = KA);
  let t = n.getBoundingClientRect();
  if (e.ignoreTransform) {
    const { transform: d, transformOrigin: h } = yn(n).getComputedStyle(n);
    d && (t = GA(t, d, h));
  }
  const { top: r, left: i, width: o, height: a, bottom: l, right: u } = t;
  return { top: r, left: i, width: o, height: a, bottom: l, right: u };
}
function Tm(n) {
  return is(n, { ignoreTransform: !0 });
}
function XA(n) {
  const e = n.innerWidth,
    t = n.innerHeight;
  return { top: 0, left: 0, right: e, bottom: t, width: e, height: t };
}
function JA(n, e) {
  return (
    e === void 0 && (e = yn(n).getComputedStyle(n)), e.position === "fixed"
  );
}
function QA(n, e) {
  e === void 0 && (e = yn(n).getComputedStyle(n));
  const t = /(auto|scroll|overlay)/;
  return ["overflow", "overflowX", "overflowY"].some((i) => {
    const o = e[i];
    return typeof o == "string" ? t.test(o) : !1;
  });
}
function ch(n, e) {
  const t = [];
  function r(i) {
    if ((e != null && t.length >= e) || !i) return t;
    if (lh(i) && i.scrollingElement != null && !t.includes(i.scrollingElement))
      return t.push(i.scrollingElement), t;
    if (!ya(i) || kA(i) || t.includes(i)) return t;
    const o = yn(n).getComputedStyle(i);
    return i !== n && QA(i, o) && t.push(i), JA(i, o) ? t : r(i.parentNode);
  }
  return n ? r(n) : t;
}
function Cw(n) {
  const [e] = ch(n, 1);
  return e ?? null;
}
function Ed(n) {
  return !Rc || !n
    ? null
    : ns(n)
    ? n
    : ah(n)
    ? lh(n) || n === rs(n).scrollingElement
      ? window
      : ya(n)
      ? n
      : null
    : null;
}
function Ew(n) {
  return ns(n) ? n.scrollX : n.scrollLeft;
}
function kw(n) {
  return ns(n) ? n.scrollY : n.scrollTop;
}
function bf(n) {
  return { x: Ew(n), y: kw(n) };
}
var Ft;
(function (n) {
  (n[(n.Forward = 1)] = "Forward"), (n[(n.Backward = -1)] = "Backward");
})(Ft || (Ft = {}));
function Ow(n) {
  return !Rc || !n ? !1 : n === document.scrollingElement;
}
function Tw(n) {
  const e = { x: 0, y: 0 },
    t = Ow(n)
      ? { height: window.innerHeight, width: window.innerWidth }
      : { height: n.clientHeight, width: n.clientWidth },
    r = { x: n.scrollWidth - t.width, y: n.scrollHeight - t.height },
    i = n.scrollTop <= e.y,
    o = n.scrollLeft <= e.x,
    a = n.scrollTop >= r.y,
    l = n.scrollLeft >= r.x;
  return {
    isTop: i,
    isLeft: o,
    isBottom: a,
    isRight: l,
    maxScroll: r,
    minScroll: e,
  };
}
const e5 = { x: 0.2, y: 0.2 };
function t5(n, e, t, r, i) {
  let { top: o, left: a, right: l, bottom: u } = t;
  r === void 0 && (r = 10), i === void 0 && (i = e5);
  const { isTop: d, isBottom: h, isLeft: p, isRight: g } = Tw(n),
    y = { x: 0, y: 0 },
    m = { x: 0, y: 0 },
    w = { height: e.height * i.y, width: e.width * i.x };
  return (
    !d && o <= e.top + w.height
      ? ((y.y = Ft.Backward),
        (m.y = r * Math.abs((e.top + w.height - o) / w.height)))
      : !h &&
        u >= e.bottom - w.height &&
        ((y.y = Ft.Forward),
        (m.y = r * Math.abs((e.bottom - w.height - u) / w.height))),
    !g && l >= e.right - w.width
      ? ((y.x = Ft.Forward),
        (m.x = r * Math.abs((e.right - w.width - l) / w.width)))
      : !p &&
        a <= e.left + w.width &&
        ((y.x = Ft.Backward),
        (m.x = r * Math.abs((e.left + w.width - a) / w.width))),
    { direction: y, speed: m }
  );
}
function n5(n) {
  if (n === document.scrollingElement) {
    const { innerWidth: o, innerHeight: a } = window;
    return { top: 0, left: 0, right: o, bottom: a, width: o, height: a };
  }
  const { top: e, left: t, right: r, bottom: i } = n.getBoundingClientRect();
  return {
    top: e,
    left: t,
    right: r,
    bottom: i,
    width: n.clientWidth,
    height: n.clientHeight,
  };
}
function Mw(n) {
  return n.reduce((e, t) => Uo(e, bf(t)), mr);
}
function r5(n) {
  return n.reduce((e, t) => e + Ew(t), 0);
}
function i5(n) {
  return n.reduce((e, t) => e + kw(t), 0);
}
function Rw(n, e) {
  if ((e === void 0 && (e = is), !n)) return;
  const { top: t, left: r, bottom: i, right: o } = e(n);
  Cw(n) &&
    (i <= 0 || o <= 0 || t >= window.innerHeight || r >= window.innerWidth) &&
    n.scrollIntoView({ block: "center", inline: "center" });
}
const o5 = [
  ["x", ["left", "right"], r5],
  ["y", ["top", "bottom"], i5],
];
class uh {
  constructor(e, t) {
    (this.rect = void 0),
      (this.width = void 0),
      (this.height = void 0),
      (this.top = void 0),
      (this.bottom = void 0),
      (this.right = void 0),
      (this.left = void 0);
    const r = ch(t),
      i = Mw(r);
    (this.rect = { ...e }), (this.width = e.width), (this.height = e.height);
    for (const [o, a, l] of o5)
      for (const u of a)
        Object.defineProperty(this, u, {
          get: () => {
            const d = l(r),
              h = i[o] - d;
            return this.rect[u] + h;
          },
          enumerable: !0,
        });
    Object.defineProperty(this, "rect", { enumerable: !1 });
  }
}
class Bs {
  constructor(e) {
    (this.target = void 0),
      (this.listeners = []),
      (this.removeAll = () => {
        this.listeners.forEach((t) => {
          var r;
          return (r = this.target) == null
            ? void 0
            : r.removeEventListener(...t);
        });
      }),
      (this.target = e);
  }
  add(e, t, r) {
    var i;
    (i = this.target) == null || i.addEventListener(e, t, r),
      this.listeners.push([e, t, r]);
  }
}
function s5(n) {
  const { EventTarget: e } = yn(n);
  return n instanceof e ? n : rs(n);
}
function kd(n, e) {
  const t = Math.abs(n.x),
    r = Math.abs(n.y);
  return typeof e == "number"
    ? Math.sqrt(t ** 2 + r ** 2) > e
    : "x" in e && "y" in e
    ? t > e.x && r > e.y
    : "x" in e
    ? t > e.x
    : "y" in e
    ? r > e.y
    : !1;
}
var er;
(function (n) {
  (n.Click = "click"),
    (n.DragStart = "dragstart"),
    (n.Keydown = "keydown"),
    (n.ContextMenu = "contextmenu"),
    (n.Resize = "resize"),
    (n.SelectionChange = "selectionchange"),
    (n.VisibilityChange = "visibilitychange");
})(er || (er = {}));
function Mm(n) {
  n.preventDefault();
}
function a5(n) {
  n.stopPropagation();
}
var ft;
(function (n) {
  (n.Space = "Space"),
    (n.Down = "ArrowDown"),
    (n.Right = "ArrowRight"),
    (n.Left = "ArrowLeft"),
    (n.Up = "ArrowUp"),
    (n.Esc = "Escape"),
    (n.Enter = "Enter");
})(ft || (ft = {}));
const Dw = {
    start: [ft.Space, ft.Enter],
    cancel: [ft.Esc],
    end: [ft.Space, ft.Enter],
  },
  l5 = (n, e) => {
    let { currentCoordinates: t } = e;
    switch (n.code) {
      case ft.Right:
        return { ...t, x: t.x + 25 };
      case ft.Left:
        return { ...t, x: t.x - 25 };
      case ft.Down:
        return { ...t, y: t.y + 25 };
      case ft.Up:
        return { ...t, y: t.y - 25 };
    }
  };
class dh {
  constructor(e) {
    (this.props = void 0),
      (this.autoScrollEnabled = !1),
      (this.referenceCoordinates = void 0),
      (this.listeners = void 0),
      (this.windowListeners = void 0),
      (this.props = e);
    const {
      event: { target: t },
    } = e;
    (this.props = e),
      (this.listeners = new Bs(rs(t))),
      (this.windowListeners = new Bs(yn(t))),
      (this.handleKeyDown = this.handleKeyDown.bind(this)),
      (this.handleCancel = this.handleCancel.bind(this)),
      this.attach();
  }
  attach() {
    this.handleStart(),
      this.windowListeners.add(er.Resize, this.handleCancel),
      this.windowListeners.add(er.VisibilityChange, this.handleCancel),
      setTimeout(() => this.listeners.add(er.Keydown, this.handleKeyDown));
  }
  handleStart() {
    const { activeNode: e, onStart: t } = this.props,
      r = e.node.current;
    r && Rw(r), t(mr);
  }
  handleKeyDown(e) {
    if (Ic(e)) {
      const { active: t, context: r, options: i } = this.props,
        {
          keyboardCodes: o = Dw,
          coordinateGetter: a = l5,
          scrollBehavior: l = "smooth",
        } = i,
        { code: u } = e;
      if (o.end.includes(u)) {
        this.handleEnd(e);
        return;
      }
      if (o.cancel.includes(u)) {
        this.handleCancel(e);
        return;
      }
      const { collisionRect: d } = r.current,
        h = d ? { x: d.left, y: d.top } : mr;
      this.referenceCoordinates || (this.referenceCoordinates = h);
      const p = a(e, { active: t, context: r.current, currentCoordinates: h });
      if (p) {
        const g = oc(p, h),
          y = { x: 0, y: 0 },
          { scrollableAncestors: m } = r.current;
        for (const w of m) {
          const b = e.code,
            {
              isTop: E,
              isRight: R,
              isLeft: O,
              isBottom: I,
              maxScroll: M,
              minScroll: D,
            } = Tw(w),
            N = n5(w),
            Y = {
              x: Math.min(
                b === ft.Right ? N.right - N.width / 2 : N.right,
                Math.max(b === ft.Right ? N.left : N.left + N.width / 2, p.x)
              ),
              y: Math.min(
                b === ft.Down ? N.bottom - N.height / 2 : N.bottom,
                Math.max(b === ft.Down ? N.top : N.top + N.height / 2, p.y)
              ),
            },
            X = (b === ft.Right && !R) || (b === ft.Left && !O),
            j = (b === ft.Down && !I) || (b === ft.Up && !E);
          if (X && Y.x !== p.x) {
            const W = w.scrollLeft + g.x,
              G = (b === ft.Right && W <= M.x) || (b === ft.Left && W >= D.x);
            if (G && !g.y) {
              w.scrollTo({ left: W, behavior: l });
              return;
            }
            G
              ? (y.x = w.scrollLeft - W)
              : (y.x =
                  b === ft.Right ? w.scrollLeft - M.x : w.scrollLeft - D.x),
              y.x && w.scrollBy({ left: -y.x, behavior: l });
            break;
          } else if (j && Y.y !== p.y) {
            const W = w.scrollTop + g.y,
              G = (b === ft.Down && W <= M.y) || (b === ft.Up && W >= D.y);
            if (G && !g.x) {
              w.scrollTo({ top: W, behavior: l });
              return;
            }
            G
              ? (y.y = w.scrollTop - W)
              : (y.y = b === ft.Down ? w.scrollTop - M.y : w.scrollTop - D.y),
              y.y && w.scrollBy({ top: -y.y, behavior: l });
            break;
          }
        }
        this.handleMove(e, Uo(oc(p, this.referenceCoordinates), y));
      }
    }
  }
  handleMove(e, t) {
    const { onMove: r } = this.props;
    e.preventDefault(), r(t);
  }
  handleEnd(e) {
    const { onEnd: t } = this.props;
    e.preventDefault(), this.detach(), t();
  }
  handleCancel(e) {
    const { onCancel: t } = this.props;
    e.preventDefault(), this.detach(), t();
  }
  detach() {
    this.listeners.removeAll(), this.windowListeners.removeAll();
  }
}
dh.activators = [
  {
    eventName: "onKeyDown",
    handler: (n, e, t) => {
      let { keyboardCodes: r = Dw, onActivation: i } = e,
        { active: o } = t;
      const { code: a } = n.nativeEvent;
      if (r.start.includes(a)) {
        const l = o.activatorNode.current;
        return l && n.target !== l
          ? !1
          : (n.preventDefault(), i == null || i({ event: n.nativeEvent }), !0);
      }
      return !1;
    },
  },
];
function Rm(n) {
  return !!(n && "distance" in n);
}
function Dm(n) {
  return !!(n && "delay" in n);
}
class fh {
  constructor(e, t, r) {
    var i;
    r === void 0 && (r = s5(e.event.target)),
      (this.props = void 0),
      (this.events = void 0),
      (this.autoScrollEnabled = !0),
      (this.document = void 0),
      (this.activated = !1),
      (this.initialCoordinates = void 0),
      (this.timeoutId = null),
      (this.listeners = void 0),
      (this.documentListeners = void 0),
      (this.windowListeners = void 0),
      (this.props = e),
      (this.events = t);
    const { event: o } = e,
      { target: a } = o;
    (this.props = e),
      (this.events = t),
      (this.document = rs(a)),
      (this.documentListeners = new Bs(this.document)),
      (this.listeners = new Bs(r)),
      (this.windowListeners = new Bs(yn(a))),
      (this.initialCoordinates = (i = sc(o)) != null ? i : mr),
      (this.handleStart = this.handleStart.bind(this)),
      (this.handleMove = this.handleMove.bind(this)),
      (this.handleEnd = this.handleEnd.bind(this)),
      (this.handleCancel = this.handleCancel.bind(this)),
      (this.handleKeydown = this.handleKeydown.bind(this)),
      (this.removeTextSelection = this.removeTextSelection.bind(this)),
      this.attach();
  }
  attach() {
    const {
      events: e,
      props: {
        options: { activationConstraint: t },
      },
    } = this;
    if (
      (this.listeners.add(e.move.name, this.handleMove, { passive: !1 }),
      this.listeners.add(e.end.name, this.handleEnd),
      this.windowListeners.add(er.Resize, this.handleCancel),
      this.windowListeners.add(er.DragStart, Mm),
      this.windowListeners.add(er.VisibilityChange, this.handleCancel),
      this.windowListeners.add(er.ContextMenu, Mm),
      this.documentListeners.add(er.Keydown, this.handleKeydown),
      t)
    ) {
      if (Rm(t)) return;
      if (Dm(t)) {
        this.timeoutId = setTimeout(this.handleStart, t.delay);
        return;
      }
    }
    this.handleStart();
  }
  detach() {
    this.listeners.removeAll(),
      this.windowListeners.removeAll(),
      setTimeout(this.documentListeners.removeAll, 50),
      this.timeoutId !== null &&
        (clearTimeout(this.timeoutId), (this.timeoutId = null));
  }
  handleStart() {
    const { initialCoordinates: e } = this,
      { onStart: t } = this.props;
    e &&
      ((this.activated = !0),
      this.documentListeners.add(er.Click, a5, { capture: !0 }),
      this.removeTextSelection(),
      this.documentListeners.add(er.SelectionChange, this.removeTextSelection),
      t(e));
  }
  handleMove(e) {
    var t;
    const { activated: r, initialCoordinates: i, props: o } = this,
      {
        onMove: a,
        options: { activationConstraint: l },
      } = o;
    if (!i) return;
    const u = (t = sc(e)) != null ? t : mr,
      d = oc(i, u);
    if (!r && l) {
      if (Dm(l)) return kd(d, l.tolerance) ? this.handleCancel() : void 0;
      if (Rm(l))
        return l.tolerance != null && kd(d, l.tolerance)
          ? this.handleCancel()
          : kd(d, l.distance)
          ? this.handleStart()
          : void 0;
    }
    e.cancelable && e.preventDefault(), a(u);
  }
  handleEnd() {
    const { onEnd: e } = this.props;
    this.detach(), e();
  }
  handleCancel() {
    const { onCancel: e } = this.props;
    this.detach(), e();
  }
  handleKeydown(e) {
    e.code === ft.Esc && this.handleCancel();
  }
  removeTextSelection() {
    var e;
    (e = this.document.getSelection()) == null || e.removeAllRanges();
  }
}
const c5 = { move: { name: "pointermove" }, end: { name: "pointerup" } };
class Iw extends fh {
  constructor(e) {
    const { event: t } = e,
      r = rs(t.target);
    super(e, c5, r);
  }
}
Iw.activators = [
  {
    eventName: "onPointerDown",
    handler: (n, e) => {
      let { nativeEvent: t } = n,
        { onActivation: r } = e;
      return !t.isPrimary || t.button !== 0
        ? !1
        : (r == null || r({ event: t }), !0);
    },
  },
];
const u5 = { move: { name: "mousemove" }, end: { name: "mouseup" } };
var xf;
(function (n) {
  n[(n.RightClick = 2)] = "RightClick";
})(xf || (xf = {}));
class Aw extends fh {
  constructor(e) {
    super(e, u5, rs(e.event.target));
  }
}
Aw.activators = [
  {
    eventName: "onMouseDown",
    handler: (n, e) => {
      let { nativeEvent: t } = n,
        { onActivation: r } = e;
      return t.button === xf.RightClick
        ? !1
        : (r == null || r({ event: t }), !0);
    },
  },
];
const Od = { move: { name: "touchmove" }, end: { name: "touchend" } };
class Lw extends fh {
  constructor(e) {
    super(e, Od);
  }
  static setup() {
    return (
      window.addEventListener(Od.move.name, e, { capture: !1, passive: !1 }),
      function () {
        window.removeEventListener(Od.move.name, e);
      }
    );
    function e() {}
  }
}
Lw.activators = [
  {
    eventName: "onTouchStart",
    handler: (n, e) => {
      let { nativeEvent: t } = n,
        { onActivation: r } = e;
      const { touches: i } = t;
      return i.length > 1 ? !1 : (r == null || r({ event: t }), !0);
    },
  },
];
var Fs;
(function (n) {
  (n[(n.Pointer = 0)] = "Pointer"),
    (n[(n.DraggableRect = 1)] = "DraggableRect");
})(Fs || (Fs = {}));
var lc;
(function (n) {
  (n[(n.TreeOrder = 0)] = "TreeOrder"),
    (n[(n.ReversedTreeOrder = 1)] = "ReversedTreeOrder");
})(lc || (lc = {}));
function d5(n) {
  let {
    acceleration: e,
    activator: t = Fs.Pointer,
    canScroll: r,
    draggingRect: i,
    enabled: o,
    interval: a = 5,
    order: l = lc.TreeOrder,
    pointerCoordinates: u,
    scrollableAncestors: d,
    scrollableAncestorRects: h,
    delta: p,
    threshold: g,
  } = n;
  const y = h5({ delta: p, disabled: !o }),
    [m, w] = OA(),
    b = S.useRef({ x: 0, y: 0 }),
    E = S.useRef({ x: 0, y: 0 }),
    R = S.useMemo(() => {
      switch (t) {
        case Fs.Pointer:
          return u ? { top: u.y, bottom: u.y, left: u.x, right: u.x } : null;
        case Fs.DraggableRect:
          return i;
      }
    }, [t, i, u]),
    O = S.useRef(null),
    I = S.useCallback(() => {
      const D = O.current;
      if (!D) return;
      const N = b.current.x * E.current.x,
        Y = b.current.y * E.current.y;
      D.scrollBy(N, Y);
    }, []),
    M = S.useMemo(() => (l === lc.TreeOrder ? [...d].reverse() : d), [l, d]);
  S.useEffect(() => {
    if (!o || !d.length || !R) {
      w();
      return;
    }
    for (const D of M) {
      if ((r == null ? void 0 : r(D)) === !1) continue;
      const N = d.indexOf(D),
        Y = h[N];
      if (!Y) continue;
      const { direction: X, speed: j } = t5(D, Y, R, e, g);
      for (const W of ["x", "y"]) y[W][X[W]] || ((j[W] = 0), (X[W] = 0));
      if (j.x > 0 || j.y > 0) {
        w(), (O.current = D), m(I, a), (b.current = j), (E.current = X);
        return;
      }
    }
    (b.current = { x: 0, y: 0 }), (E.current = { x: 0, y: 0 }), w();
  }, [
    e,
    I,
    r,
    w,
    o,
    a,
    JSON.stringify(R),
    JSON.stringify(y),
    m,
    d,
    M,
    h,
    JSON.stringify(g),
  ]);
}
const f5 = {
  x: { [Ft.Backward]: !1, [Ft.Forward]: !1 },
  y: { [Ft.Backward]: !1, [Ft.Forward]: !1 },
};
function h5(n) {
  let { delta: e, disabled: t } = n;
  const r = ic(e);
  return va(
    (i) => {
      if (t || !r || !i) return f5;
      const o = { x: Math.sign(e.x - r.x), y: Math.sign(e.y - r.y) };
      return {
        x: {
          [Ft.Backward]: i.x[Ft.Backward] || o.x === -1,
          [Ft.Forward]: i.x[Ft.Forward] || o.x === 1,
        },
        y: {
          [Ft.Backward]: i.y[Ft.Backward] || o.y === -1,
          [Ft.Forward]: i.y[Ft.Forward] || o.y === 1,
        },
      };
    },
    [t, e, r]
  );
}
function p5(n, e) {
  const t = e !== null ? n.get(e) : void 0,
    r = t ? t.node.current : null;
  return va(
    (i) => {
      var o;
      return e === null ? null : (o = r ?? i) != null ? o : null;
    },
    [r, e]
  );
}
function g5(n, e) {
  return S.useMemo(
    () =>
      n.reduce((t, r) => {
        const { sensor: i } = r,
          o = i.activators.map((a) => ({
            eventName: a.eventName,
            handler: e(a.handler, r),
          }));
        return [...t, ...o];
      }, []),
    [n, e]
  );
}
var ra;
(function (n) {
  (n[(n.Always = 0)] = "Always"),
    (n[(n.BeforeDragging = 1)] = "BeforeDragging"),
    (n[(n.WhileDragging = 2)] = "WhileDragging");
})(ra || (ra = {}));
var Sf;
(function (n) {
  n.Optimized = "optimized";
})(Sf || (Sf = {}));
const Im = new Map();
function m5(n, e) {
  let { dragging: t, dependencies: r, config: i } = e;
  const [o, a] = S.useState(null),
    { frequency: l, measure: u, strategy: d } = i,
    h = S.useRef(n),
    p = b(),
    g = na(p),
    y = S.useCallback(
      function (E) {
        E === void 0 && (E = []),
          !g.current &&
            a((R) =>
              R === null ? E : R.concat(E.filter((O) => !R.includes(O)))
            );
      },
      [g]
    ),
    m = S.useRef(null),
    w = va(
      (E) => {
        if (p && !t) return Im;
        if (!E || E === Im || h.current !== n || o != null) {
          const R = new Map();
          for (let O of n) {
            if (!O) continue;
            if (o && o.length > 0 && !o.includes(O.id) && O.rect.current) {
              R.set(O.id, O.rect.current);
              continue;
            }
            const I = O.node.current,
              M = I ? new uh(u(I), I) : null;
            (O.rect.current = M), M && R.set(O.id, M);
          }
          return R;
        }
        return E;
      },
      [n, o, t, p, u]
    );
  return (
    S.useEffect(() => {
      h.current = n;
    }, [n]),
    S.useEffect(() => {
      p || y();
    }, [t, p]),
    S.useEffect(() => {
      o && o.length > 0 && a(null);
    }, [JSON.stringify(o)]),
    S.useEffect(() => {
      p ||
        typeof l != "number" ||
        m.current !== null ||
        (m.current = setTimeout(() => {
          y(), (m.current = null);
        }, l));
    }, [l, p, y, ...r]),
    {
      droppableRects: w,
      measureDroppableContainers: y,
      measuringScheduled: o != null,
    }
  );
  function b() {
    switch (d) {
      case ra.Always:
        return !1;
      case ra.BeforeDragging:
        return t;
      default:
        return !t;
    }
  }
}
function hh(n, e) {
  return va(
    (t) => (n ? t || (typeof e == "function" ? e(n) : n) : null),
    [e, n]
  );
}
function y5(n, e) {
  return hh(n, e);
}
function v5(n) {
  let { callback: e, disabled: t } = n;
  const r = Dc(e),
    i = S.useMemo(() => {
      if (t || typeof window > "u" || typeof window.MutationObserver > "u")
        return;
      const { MutationObserver: o } = window;
      return new o(r);
    }, [r, t]);
  return S.useEffect(() => () => i == null ? void 0 : i.disconnect(), [i]), i;
}
function Ac(n) {
  let { callback: e, disabled: t } = n;
  const r = Dc(e),
    i = S.useMemo(() => {
      if (t || typeof window > "u" || typeof window.ResizeObserver > "u")
        return;
      const { ResizeObserver: o } = window;
      return new o(r);
    }, [t]);
  return S.useEffect(() => () => i == null ? void 0 : i.disconnect(), [i]), i;
}
function w5(n) {
  return new uh(is(n), n);
}
function Am(n, e, t) {
  e === void 0 && (e = w5);
  const [r, i] = S.useReducer(l, null),
    o = v5({
      callback(u) {
        if (n)
          for (const d of u) {
            const { type: h, target: p } = d;
            if (
              h === "childList" &&
              p instanceof HTMLElement &&
              p.contains(n)
            ) {
              i();
              break;
            }
          }
      },
    }),
    a = Ac({ callback: i });
  return (
    ir(() => {
      i(),
        n
          ? (a == null || a.observe(n),
            o == null ||
              o.observe(document.body, { childList: !0, subtree: !0 }))
          : (a == null || a.disconnect(), o == null || o.disconnect());
    }, [n]),
    r
  );
  function l(u) {
    if (!n) return null;
    if (n.isConnected === !1) {
      var d;
      return (d = u ?? t) != null ? d : null;
    }
    const h = e(n);
    return JSON.stringify(u) === JSON.stringify(h) ? u : h;
  }
}
function b5(n) {
  const e = hh(n);
  return xw(n, e);
}
const Lm = [];
function x5(n) {
  const e = S.useRef(n),
    t = va(
      (r) =>
        n
          ? r &&
            r !== Lm &&
            n &&
            e.current &&
            n.parentNode === e.current.parentNode
            ? r
            : ch(n)
          : Lm,
      [n]
    );
  return (
    S.useEffect(() => {
      e.current = n;
    }, [n]),
    t
  );
}
function S5(n) {
  const [e, t] = S.useState(null),
    r = S.useRef(n),
    i = S.useCallback((o) => {
      const a = Ed(o.target);
      a && t((l) => (l ? (l.set(a, bf(a)), new Map(l)) : null));
    }, []);
  return (
    S.useEffect(() => {
      const o = r.current;
      if (n !== o) {
        a(o);
        const l = n
          .map((u) => {
            const d = Ed(u);
            return d
              ? (d.addEventListener("scroll", i, { passive: !0 }), [d, bf(d)])
              : null;
          })
          .filter((u) => u != null);
        t(l.length ? new Map(l) : null), (r.current = n);
      }
      return () => {
        a(n), a(o);
      };
      function a(l) {
        l.forEach((u) => {
          const d = Ed(u);
          d == null || d.removeEventListener("scroll", i);
        });
      }
    }, [i, n]),
    S.useMemo(
      () =>
        n.length
          ? e
            ? Array.from(e.values()).reduce((o, a) => Uo(o, a), mr)
            : Mw(n)
          : mr,
      [n, e]
    )
  );
}
function Pm(n, e) {
  e === void 0 && (e = []);
  const t = S.useRef(null);
  return (
    S.useEffect(() => {
      t.current = null;
    }, e),
    S.useEffect(() => {
      const r = n !== mr;
      r && !t.current && (t.current = n), !r && t.current && (t.current = null);
    }, [n]),
    t.current ? oc(n, t.current) : mr
  );
}
function C5(n) {
  S.useEffect(
    () => {
      if (!Rc) return;
      const e = n.map((t) => {
        let { sensor: r } = t;
        return r.setup == null ? void 0 : r.setup();
      });
      return () => {
        for (const t of e) t == null || t();
      };
    },
    n.map((e) => {
      let { sensor: t } = e;
      return t;
    })
  );
}
function E5(n, e) {
  return S.useMemo(
    () =>
      n.reduce((t, r) => {
        let { eventName: i, handler: o } = r;
        return (
          (t[i] = (a) => {
            o(a, e);
          }),
          t
        );
      }, {}),
    [n, e]
  );
}
function Pw(n) {
  return S.useMemo(() => (n ? XA(n) : null), [n]);
}
const Td = [];
function k5(n, e) {
  e === void 0 && (e = is);
  const [t] = n,
    r = Pw(t ? yn(t) : null),
    [i, o] = S.useReducer(l, Td),
    a = Ac({ callback: o });
  return (
    n.length > 0 && i === Td && o(),
    ir(() => {
      n.length
        ? n.forEach((u) => (a == null ? void 0 : a.observe(u)))
        : (a == null || a.disconnect(), o());
    }, [n]),
    i
  );
  function l() {
    return n.length ? n.map((u) => (Ow(u) ? r : new uh(e(u), u))) : Td;
  }
}
function _w(n) {
  if (!n) return null;
  if (n.children.length > 1) return n;
  const e = n.children[0];
  return ya(e) ? e : n;
}
function O5(n) {
  let { measure: e } = n;
  const [t, r] = S.useState(null),
    i = S.useCallback(
      (d) => {
        for (const { target: h } of d)
          if (ya(h)) {
            r((p) => {
              const g = e(h);
              return p ? { ...p, width: g.width, height: g.height } : g;
            });
            break;
          }
      },
      [e]
    ),
    o = Ac({ callback: i }),
    a = S.useCallback(
      (d) => {
        const h = _w(d);
        o == null || o.disconnect(),
          h && (o == null || o.observe(h)),
          r(h ? e(h) : null);
      },
      [e, o]
    ),
    [l, u] = rc(a);
  return S.useMemo(() => ({ nodeRef: l, rect: t, setRef: u }), [t, l, u]);
}
const T5 = [
    { sensor: Iw, options: {} },
    { sensor: dh, options: {} },
  ],
  M5 = { current: {} },
  Il = {
    draggable: { measure: Tm },
    droppable: {
      measure: Tm,
      strategy: ra.WhileDragging,
      frequency: Sf.Optimized,
    },
    dragOverlay: { measure: is },
  };
class Ws extends Map {
  get(e) {
    var t;
    return e != null && (t = super.get(e)) != null ? t : void 0;
  }
  toArray() {
    return Array.from(this.values());
  }
  getEnabled() {
    return this.toArray().filter((e) => {
      let { disabled: t } = e;
      return !t;
    });
  }
  getNodeFor(e) {
    var t, r;
    return (t = (r = this.get(e)) == null ? void 0 : r.node.current) != null
      ? t
      : void 0;
  }
}
const R5 = {
    activatorEvent: null,
    active: null,
    activeNode: null,
    activeNodeRect: null,
    collisions: null,
    containerNodeRect: null,
    draggableNodes: new Map(),
    droppableRects: new Map(),
    droppableContainers: new Ws(),
    over: null,
    dragOverlay: { nodeRef: { current: null }, rect: null, setRef: ac },
    scrollableAncestors: [],
    scrollableAncestorRects: [],
    measuringConfiguration: Il,
    measureDroppableContainers: ac,
    windowRect: null,
    measuringScheduled: !1,
  },
  Nw = {
    activatorEvent: null,
    activators: [],
    active: null,
    activeNodeRect: null,
    ariaDescribedById: { draggable: "" },
    dispatch: ac,
    draggableNodes: new Map(),
    over: null,
    measureDroppableContainers: ac,
  },
  ba = S.createContext(Nw),
  zw = S.createContext(R5);
function D5() {
  return {
    draggable: {
      active: null,
      initialCoordinates: { x: 0, y: 0 },
      nodes: new Map(),
      translate: { x: 0, y: 0 },
    },
    droppable: { containers: new Ws() },
  };
}
function I5(n, e) {
  switch (e.type) {
    case Nt.DragStart:
      return {
        ...n,
        draggable: {
          ...n.draggable,
          initialCoordinates: e.initialCoordinates,
          active: e.active,
        },
      };
    case Nt.DragMove:
      return n.draggable.active
        ? {
            ...n,
            draggable: {
              ...n.draggable,
              translate: {
                x: e.coordinates.x - n.draggable.initialCoordinates.x,
                y: e.coordinates.y - n.draggable.initialCoordinates.y,
              },
            },
          }
        : n;
    case Nt.DragEnd:
    case Nt.DragCancel:
      return {
        ...n,
        draggable: {
          ...n.draggable,
          active: null,
          initialCoordinates: { x: 0, y: 0 },
          translate: { x: 0, y: 0 },
        },
      };
    case Nt.RegisterDroppable: {
      const { element: t } = e,
        { id: r } = t,
        i = new Ws(n.droppable.containers);
      return (
        i.set(r, t), { ...n, droppable: { ...n.droppable, containers: i } }
      );
    }
    case Nt.SetDroppableDisabled: {
      const { id: t, key: r, disabled: i } = e,
        o = n.droppable.containers.get(t);
      if (!o || r !== o.key) return n;
      const a = new Ws(n.droppable.containers);
      return (
        a.set(t, { ...o, disabled: i }),
        { ...n, droppable: { ...n.droppable, containers: a } }
      );
    }
    case Nt.UnregisterDroppable: {
      const { id: t, key: r } = e,
        i = n.droppable.containers.get(t);
      if (!i || r !== i.key) return n;
      const o = new Ws(n.droppable.containers);
      return (
        o.delete(t), { ...n, droppable: { ...n.droppable, containers: o } }
      );
    }
    default:
      return n;
  }
}
function A5(n) {
  let { disabled: e } = n;
  const { active: t, activatorEvent: r, draggableNodes: i } = S.useContext(ba),
    o = ic(r),
    a = ic(t == null ? void 0 : t.id);
  return (
    S.useEffect(() => {
      if (!e && !r && o && a != null) {
        if (!Ic(o) || document.activeElement === o.target) return;
        const l = i.get(a);
        if (!l) return;
        const { activatorNode: u, node: d } = l;
        if (!u.current && !d.current) return;
        requestAnimationFrame(() => {
          for (const h of [u.current, d.current]) {
            if (!h) continue;
            const p = RA(h);
            if (p) {
              p.focus();
              break;
            }
          }
        });
      }
    }, [r, e, i, a, o]),
    null
  );
}
function Bw(n, e) {
  let { transform: t, ...r } = e;
  return n != null && n.length
    ? n.reduce((i, o) => o({ transform: i, ...r }), t)
    : t;
}
function L5(n) {
  return S.useMemo(
    () => ({
      draggable: { ...Il.draggable, ...(n == null ? void 0 : n.draggable) },
      droppable: { ...Il.droppable, ...(n == null ? void 0 : n.droppable) },
      dragOverlay: {
        ...Il.dragOverlay,
        ...(n == null ? void 0 : n.dragOverlay),
      },
    }),
    [
      n == null ? void 0 : n.draggable,
      n == null ? void 0 : n.droppable,
      n == null ? void 0 : n.dragOverlay,
    ]
  );
}
function P5(n) {
  let { activeNode: e, measure: t, initialRect: r, config: i = !0 } = n;
  const o = S.useRef(!1),
    { x: a, y: l } = typeof i == "boolean" ? { x: i, y: i } : i;
  ir(() => {
    if ((!a && !l) || !e) {
      o.current = !1;
      return;
    }
    if (o.current || !r) return;
    const d = e == null ? void 0 : e.node.current;
    if (!d || d.isConnected === !1) return;
    const h = t(d),
      p = xw(h, r);
    if (
      (a || (p.x = 0),
      l || (p.y = 0),
      (o.current = !0),
      Math.abs(p.x) > 0 || Math.abs(p.y) > 0)
    ) {
      const g = Cw(d);
      g && g.scrollBy({ top: p.y, left: p.x });
    }
  }, [e, a, l, r, t]);
}
const Lc = S.createContext({ ...mr, scaleX: 1, scaleY: 1 });
var yi;
(function (n) {
  (n[(n.Uninitialized = 0)] = "Uninitialized"),
    (n[(n.Initializing = 1)] = "Initializing"),
    (n[(n.Initialized = 2)] = "Initialized");
})(yi || (yi = {}));
const _5 = S.memo(function (e) {
    var t, r, i, o;
    let {
      id: a,
      accessibility: l,
      autoScroll: u = !0,
      children: d,
      sensors: h = T5,
      collisionDetection: p = UA,
      measuring: g,
      modifiers: y,
      ...m
    } = e;
    const w = S.useReducer(I5, void 0, D5),
      [b, E] = w,
      [R, O] = NA(),
      [I, M] = S.useState(yi.Uninitialized),
      D = I === yi.Initialized,
      {
        draggable: { active: N, nodes: Y, translate: X },
        droppable: { containers: j },
      } = b,
      W = N ? Y.get(N) : null,
      G = S.useRef({ initial: null, translated: null }),
      te = S.useMemo(() => {
        var Dt;
        return N != null
          ? {
              id: N,
              data: (Dt = W == null ? void 0 : W.data) != null ? Dt : M5,
              rect: G,
            }
          : null;
      }, [N, W]),
      ne = S.useRef(null),
      [se, oe] = S.useState(null),
      [le, pe] = S.useState(null),
      ce = na(m, Object.values(m)),
      be = wa("DndDescribedBy", a),
      Oe = S.useMemo(() => j.getEnabled(), [j]),
      de = L5(g),
      {
        droppableRects: xe,
        measureDroppableContainers: Pe,
        measuringScheduled: ye,
      } = m5(Oe, {
        dragging: D,
        dependencies: [X.x, X.y],
        config: de.droppable,
      }),
      Z = p5(Y, N),
      ue = S.useMemo(() => (le ? sc(le) : null), [le]),
      K = zc(),
      Se = y5(Z, de.draggable.measure);
    P5({
      activeNode: N ? Y.get(N) : null,
      config: K.layoutShiftCompensation,
      initialRect: Se,
      measure: de.draggable.measure,
    });
    const we = Am(Z, de.draggable.measure, Se),
      Ke = Am(Z ? Z.parentElement : null),
      re = S.useRef({
        activatorEvent: null,
        active: null,
        activeNode: Z,
        collisionRect: null,
        collisions: null,
        droppableRects: xe,
        draggableNodes: Y,
        draggingNode: null,
        draggingNodeRect: null,
        droppableContainers: j,
        over: null,
        scrollableAncestors: [],
        scrollAdjustedTranslate: null,
      }),
      Ve = j.getNodeFor((t = re.current.over) == null ? void 0 : t.id),
      Ne = O5({ measure: de.dragOverlay.measure }),
      pt = (r = Ne.nodeRef.current) != null ? r : Z,
      _ = D ? ((i = Ne.rect) != null ? i : we) : null,
      L = !!(Ne.nodeRef.current && Ne.rect),
      B = b5(L ? null : we),
      $ = Pw(pt ? yn(pt) : null),
      fe = x5(D ? Ve ?? Z : null),
      ge = k5(fe),
      Le = Bw(y, {
        transform: { x: X.x - B.x, y: X.y - B.y, scaleX: 1, scaleY: 1 },
        activatorEvent: le,
        active: te,
        activeNodeRect: we,
        containerNodeRect: Ke,
        draggingNodeRect: _,
        over: re.current.over,
        overlayNodeRect: Ne.rect,
        scrollableAncestors: fe,
        scrollableAncestorRects: ge,
        windowRect: $,
      }),
      Qe = ue ? Uo(ue, X) : null,
      Ct = S5(fe),
      Ae = Pm(Ct),
      Ze = Pm(Ct, [we]),
      ve = Uo(Le, Ae),
      Ie = _ ? qA(_, Le) : null,
      rt =
        te && Ie
          ? p({
              active: te,
              collisionRect: Ie,
              droppableRects: xe,
              droppableContainers: Oe,
              pointerCoordinates: Qe,
            })
          : null,
      wt = $A(rt, "id"),
      [ze, De] = S.useState(null),
      qt = L ? Le : Uo(Le, Ze),
      Ar = ZA(qt, (o = ze == null ? void 0 : ze.rect) != null ? o : null, we),
      Lr = S.useCallback(
        (Dt, Gt) => {
          let { sensor: cn, options: yr } = Gt;
          if (ne.current == null) return;
          const vn = Y.get(ne.current);
          if (!vn) return;
          const Mn = Dt.nativeEvent,
            Rn = new cn({
              active: ne.current,
              activeNode: vn,
              event: Mn,
              options: yr,
              context: re,
              onStart(Dn) {
                const Ni = ne.current;
                if (Ni == null) return;
                const Pr = Y.get(Ni);
                if (!Pr) return;
                const { onDragStart: vo } = ce.current,
                  ni = { active: { id: Ni, data: Pr.data, rect: G } };
                Yr.unstable_batchedUpdates(() => {
                  vo == null || vo(ni),
                    M(yi.Initializing),
                    E({
                      type: Nt.DragStart,
                      initialCoordinates: Dn,
                      active: Ni,
                    }),
                    R({ type: "onDragStart", event: ni });
                });
              },
              onMove(Dn) {
                E({ type: Nt.DragMove, coordinates: Dn });
              },
              onEnd: ti(Nt.DragEnd),
              onCancel: ti(Nt.DragCancel),
            });
          Yr.unstable_batchedUpdates(() => {
            oe(Rn), pe(Dt.nativeEvent);
          });
          function ti(Dn) {
            return async function () {
              const {
                active: Pr,
                collisions: vo,
                over: ni,
                scrollAdjustedTranslate: xa,
              } = re.current;
              let zi = null;
              if (Pr && xa) {
                const { cancelDrop: Bi } = ce.current;
                (zi = {
                  activatorEvent: Mn,
                  active: Pr,
                  collisions: vo,
                  delta: xa,
                  over: ni,
                }),
                  Dn === Nt.DragEnd &&
                    typeof Bi == "function" &&
                    (await Promise.resolve(Bi(zi))) &&
                    (Dn = Nt.DragCancel);
              }
              (ne.current = null),
                Yr.unstable_batchedUpdates(() => {
                  E({ type: Dn }),
                    M(yi.Uninitialized),
                    De(null),
                    oe(null),
                    pe(null);
                  const Bi = Dn === Nt.DragEnd ? "onDragEnd" : "onDragCancel";
                  if (zi) {
                    const as = ce.current[Bi];
                    as == null || as(zi), R({ type: Bi, event: zi });
                  }
                });
            };
          }
        },
        [Y]
      ),
      ss = S.useCallback(
        (Dt, Gt) => (cn, yr) => {
          const vn = cn.nativeEvent,
            Mn = Y.get(yr);
          if (ne.current !== null || !Mn || vn.dndKit || vn.defaultPrevented)
            return;
          const Rn = { active: Mn };
          Dt(cn, Gt.options, Rn) === !0 &&
            ((vn.dndKit = { capturedBy: Gt.sensor }),
            (ne.current = yr),
            Lr(cn, Gt));
        },
        [Y, Lr]
      ),
      yo = g5(h, ss);
    C5(h),
      ir(() => {
        we && I === yi.Initializing && M(yi.Initialized);
      }, [we, I]),
      S.useEffect(() => {
        const { onDragMove: Dt } = ce.current,
          {
            active: Gt,
            activatorEvent: cn,
            collisions: yr,
            over: vn,
          } = re.current;
        if (!Gt || !cn) return;
        const Mn = {
          active: Gt,
          activatorEvent: cn,
          collisions: yr,
          delta: { x: ve.x, y: ve.y },
          over: vn,
        };
        Yr.unstable_batchedUpdates(() => {
          Dt == null || Dt(Mn), R({ type: "onDragMove", event: Mn });
        });
      }, [ve.x, ve.y]),
      S.useEffect(() => {
        const {
          active: Dt,
          activatorEvent: Gt,
          collisions: cn,
          droppableContainers: yr,
          scrollAdjustedTranslate: vn,
        } = re.current;
        if (!Dt || ne.current == null || !Gt || !vn) return;
        const { onDragOver: Mn } = ce.current,
          Rn = yr.get(wt),
          ti =
            Rn && Rn.rect.current
              ? {
                  id: Rn.id,
                  rect: Rn.rect.current,
                  data: Rn.data,
                  disabled: Rn.disabled,
                }
              : null,
          Dn = {
            active: Dt,
            activatorEvent: Gt,
            collisions: cn,
            delta: { x: vn.x, y: vn.y },
            over: ti,
          };
        Yr.unstable_batchedUpdates(() => {
          De(ti), Mn == null || Mn(Dn), R({ type: "onDragOver", event: Dn });
        });
      }, [wt]),
      ir(() => {
        (re.current = {
          activatorEvent: le,
          active: te,
          activeNode: Z,
          collisionRect: Ie,
          collisions: rt,
          droppableRects: xe,
          draggableNodes: Y,
          draggingNode: pt,
          draggingNodeRect: _,
          droppableContainers: j,
          over: ze,
          scrollableAncestors: fe,
          scrollAdjustedTranslate: ve,
        }),
          (G.current = { initial: _, translated: Ie });
      }, [te, Z, rt, Ie, Y, pt, _, xe, j, ze, fe, ve]),
      d5({
        ...K,
        delta: X,
        draggingRect: Ie,
        pointerCoordinates: Qe,
        scrollableAncestors: fe,
        scrollableAncestorRects: ge,
      });
    const _c = S.useMemo(
        () => ({
          active: te,
          activeNode: Z,
          activeNodeRect: we,
          activatorEvent: le,
          collisions: rt,
          containerNodeRect: Ke,
          dragOverlay: Ne,
          draggableNodes: Y,
          droppableContainers: j,
          droppableRects: xe,
          over: ze,
          measureDroppableContainers: Pe,
          scrollableAncestors: fe,
          scrollableAncestorRects: ge,
          measuringConfiguration: de,
          measuringScheduled: ye,
          windowRect: $,
        }),
        [te, Z, we, le, rt, Ke, Ne, Y, j, xe, ze, Pe, fe, ge, de, ye, $]
      ),
      Nc = S.useMemo(
        () => ({
          activatorEvent: le,
          activators: yo,
          active: te,
          activeNodeRect: we,
          ariaDescribedById: { draggable: be },
          dispatch: E,
          draggableNodes: Y,
          over: ze,
          measureDroppableContainers: Pe,
        }),
        [le, yo, te, we, E, be, Y, ze, Pe]
      );
    return S.createElement(
      bw.Provider,
      { value: O },
      S.createElement(
        ba.Provider,
        { value: Nc },
        S.createElement(
          zw.Provider,
          { value: _c },
          S.createElement(Lc.Provider, { value: Ar }, d)
        ),
        S.createElement(A5, {
          disabled: (l == null ? void 0 : l.restoreFocus) === !1,
        })
      ),
      S.createElement(FA, { ...l, hiddenTextDescribedById: be })
    );
    function zc() {
      const Dt = (se == null ? void 0 : se.autoScrollEnabled) === !1,
        Gt = typeof u == "object" ? u.enabled === !1 : u === !1,
        cn = D && !Dt && !Gt;
      return typeof u == "object" ? { ...u, enabled: cn } : { enabled: cn };
    }
  }),
  N5 = S.createContext(null),
  _m = "button",
  z5 = "Droppable";
function B5(n) {
  let { id: e, data: t, disabled: r = !1, attributes: i } = n;
  const o = wa(z5),
    {
      activators: a,
      activatorEvent: l,
      active: u,
      activeNodeRect: d,
      ariaDescribedById: h,
      draggableNodes: p,
      over: g,
    } = S.useContext(ba),
    {
      role: y = _m,
      roleDescription: m = "draggable",
      tabIndex: w = 0,
    } = i ?? {},
    b = (u == null ? void 0 : u.id) === e,
    E = S.useContext(b ? Lc : N5),
    [R, O] = rc(),
    [I, M] = rc(),
    D = E5(a, e),
    N = na(t);
  ir(
    () => (
      p.set(e, { id: e, key: o, node: R, activatorNode: I, data: N }),
      () => {
        const X = p.get(e);
        X && X.key === o && p.delete(e);
      }
    ),
    [p, e]
  );
  const Y = S.useMemo(
    () => ({
      role: y,
      tabIndex: w,
      "aria-disabled": r,
      "aria-pressed": b && y === _m ? !0 : void 0,
      "aria-roledescription": m,
      "aria-describedby": h.draggable,
    }),
    [r, y, w, b, m, h.draggable]
  );
  return {
    active: u,
    activatorEvent: l,
    activeNodeRect: d,
    attributes: Y,
    isDragging: b,
    listeners: r ? void 0 : D,
    node: R,
    over: g,
    setNodeRef: O,
    setActivatorNodeRef: M,
    transform: E,
  };
}
function Fw() {
  return S.useContext(zw);
}
const F5 = "Droppable",
  W5 = { timeout: 25 };
function V5(n) {
  let { data: e, disabled: t = !1, id: r, resizeObserverConfig: i } = n;
  const o = wa(F5),
    {
      active: a,
      dispatch: l,
      over: u,
      measureDroppableContainers: d,
    } = S.useContext(ba),
    h = S.useRef({ disabled: t }),
    p = S.useRef(!1),
    g = S.useRef(null),
    y = S.useRef(null),
    { disabled: m, updateMeasurementsFor: w, timeout: b } = { ...W5, ...i },
    E = na(w ?? r),
    R = S.useCallback(() => {
      if (!p.current) {
        p.current = !0;
        return;
      }
      y.current != null && clearTimeout(y.current),
        (y.current = setTimeout(() => {
          d(Array.isArray(E.current) ? E.current : [E.current]),
            (y.current = null);
        }, b));
    }, [b]),
    O = Ac({ callback: R, disabled: m || !a }),
    I = S.useCallback(
      (Y, X) => {
        O && (X && (O.unobserve(X), (p.current = !1)), Y && O.observe(Y));
      },
      [O]
    ),
    [M, D] = rc(I),
    N = na(e);
  return (
    S.useEffect(() => {
      !O ||
        !M.current ||
        (O.disconnect(), (p.current = !1), O.observe(M.current));
    }, [M, O]),
    ir(
      () => (
        l({
          type: Nt.RegisterDroppable,
          element: { id: r, key: o, disabled: t, node: M, rect: g, data: N },
        }),
        () => l({ type: Nt.UnregisterDroppable, key: o, id: r })
      ),
      [r]
    ),
    S.useEffect(() => {
      t !== h.current.disabled &&
        (l({ type: Nt.SetDroppableDisabled, id: r, key: o, disabled: t }),
        (h.current.disabled = t));
    }, [r, o, t, l]),
    {
      active: a,
      rect: g,
      isOver: (u == null ? void 0 : u.id) === r,
      node: M,
      over: u,
      setNodeRef: D,
    }
  );
}
function H5(n) {
  let { animation: e, children: t } = n;
  const [r, i] = S.useState(null),
    [o, a] = S.useState(null),
    l = ic(t);
  return (
    !t && !r && l && i(l),
    ir(() => {
      if (!o) return;
      const u = r == null ? void 0 : r.key,
        d = r == null ? void 0 : r.props.id;
      if (u == null || d == null) {
        i(null);
        return;
      }
      Promise.resolve(e(d, o)).then(() => {
        i(null);
      });
    }, [e, r, o]),
    S.createElement(
      S.Fragment,
      null,
      t,
      r ? S.cloneElement(r, { ref: a }) : null
    )
  );
}
const $5 = { x: 0, y: 0, scaleX: 1, scaleY: 1 };
function j5(n) {
  let { children: e } = n;
  return S.createElement(
    ba.Provider,
    { value: Nw },
    S.createElement(Lc.Provider, { value: $5 }, e)
  );
}
const U5 = { position: "fixed", touchAction: "none" },
  Z5 = (n) => (Ic(n) ? "transform 250ms ease" : void 0),
  Y5 = S.forwardRef((n, e) => {
    let {
      as: t,
      activatorEvent: r,
      adjustScale: i,
      children: o,
      className: a,
      rect: l,
      style: u,
      transform: d,
      transition: h = Z5,
    } = n;
    if (!l) return null;
    const p = i ? d : { ...d, scaleX: 1, scaleY: 1 },
      g = {
        ...U5,
        width: l.width,
        height: l.height,
        top: l.top,
        left: l.left,
        transform: Ii.Transform.toString(p),
        transformOrigin: i && r ? VA(r, l) : void 0,
        transition: typeof h == "function" ? h(r) : h,
        ...u,
      };
    return S.createElement(t, { className: a, style: g, ref: e }, o);
  }),
  q5 = (n) => (e) => {
    let { active: t, dragOverlay: r } = e;
    const i = {},
      { styles: o, className: a } = n;
    if (o != null && o.active)
      for (const [l, u] of Object.entries(o.active))
        u !== void 0 &&
          ((i[l] = t.node.style.getPropertyValue(l)),
          t.node.style.setProperty(l, u));
    if (o != null && o.dragOverlay)
      for (const [l, u] of Object.entries(o.dragOverlay))
        u !== void 0 && r.node.style.setProperty(l, u);
    return (
      a != null && a.active && t.node.classList.add(a.active),
      a != null && a.dragOverlay && r.node.classList.add(a.dragOverlay),
      function () {
        for (const [u, d] of Object.entries(i)) t.node.style.setProperty(u, d);
        a != null && a.active && t.node.classList.remove(a.active);
      }
    );
  },
  G5 = (n) => {
    let {
      transform: { initial: e, final: t },
    } = n;
    return [
      { transform: Ii.Transform.toString(e) },
      { transform: Ii.Transform.toString(t) },
    ];
  },
  K5 = {
    duration: 250,
    easing: "ease",
    keyframes: G5,
    sideEffects: q5({ styles: { active: { opacity: "0" } } }),
  };
function X5(n) {
  let {
    config: e,
    draggableNodes: t,
    droppableContainers: r,
    measuringConfiguration: i,
  } = n;
  return Dc((o, a) => {
    if (e === null) return;
    const l = t.get(o);
    if (!l) return;
    const u = l.node.current;
    if (!u) return;
    const d = _w(a);
    if (!d) return;
    const { transform: h } = yn(a).getComputedStyle(a),
      p = Sw(h);
    if (!p) return;
    const g = typeof e == "function" ? e : J5(e);
    return (
      Rw(u, i.draggable.measure),
      g({
        active: { id: o, data: l.data, node: u, rect: i.draggable.measure(u) },
        draggableNodes: t,
        dragOverlay: { node: a, rect: i.dragOverlay.measure(d) },
        droppableContainers: r,
        measuringConfiguration: i,
        transform: p,
      })
    );
  });
}
function J5(n) {
  const {
    duration: e,
    easing: t,
    sideEffects: r,
    keyframes: i,
  } = { ...K5, ...n };
  return (o) => {
    let { active: a, dragOverlay: l, transform: u, ...d } = o;
    if (!e) return;
    const h = { x: l.rect.left - a.rect.left, y: l.rect.top - a.rect.top },
      p = {
        scaleX: u.scaleX !== 1 ? (a.rect.width * u.scaleX) / l.rect.width : 1,
        scaleY: u.scaleY !== 1 ? (a.rect.height * u.scaleY) / l.rect.height : 1,
      },
      g = { x: u.x - h.x, y: u.y - h.y, ...p },
      y = i({
        ...d,
        active: a,
        dragOverlay: l,
        transform: { initial: u, final: g },
      }),
      [m] = y,
      w = y[y.length - 1];
    if (JSON.stringify(m) === JSON.stringify(w)) return;
    const b = r == null ? void 0 : r({ active: a, dragOverlay: l, ...d }),
      E = l.node.animate(y, { duration: e, easing: t, fill: "forwards" });
    return new Promise((R) => {
      E.onfinish = () => {
        b == null || b(), R();
      };
    });
  };
}
let Nm = 0;
function Q5(n) {
  return S.useMemo(() => {
    if (n != null) return Nm++, Nm;
  }, [n]);
}
const e3 = S.memo((n) => {
    let {
      adjustScale: e = !1,
      children: t,
      dropAnimation: r,
      style: i,
      transition: o,
      modifiers: a,
      wrapperElement: l = "div",
      className: u,
      zIndex: d = 999,
    } = n;
    const {
        activatorEvent: h,
        active: p,
        activeNodeRect: g,
        containerNodeRect: y,
        draggableNodes: m,
        droppableContainers: w,
        dragOverlay: b,
        over: E,
        measuringConfiguration: R,
        scrollableAncestors: O,
        scrollableAncestorRects: I,
        windowRect: M,
      } = Fw(),
      D = S.useContext(Lc),
      N = Q5(p == null ? void 0 : p.id),
      Y = Bw(a, {
        activatorEvent: h,
        active: p,
        activeNodeRect: g,
        containerNodeRect: y,
        draggingNodeRect: b.rect,
        over: E,
        overlayNodeRect: b.rect,
        scrollableAncestors: O,
        scrollableAncestorRects: I,
        transform: D,
        windowRect: M,
      }),
      X = hh(g),
      j = X5({
        config: r,
        draggableNodes: m,
        droppableContainers: w,
        measuringConfiguration: R,
      }),
      W = X ? b.setRef : void 0;
    return S.createElement(
      j5,
      null,
      S.createElement(
        H5,
        { animation: j },
        p && N
          ? S.createElement(
              Y5,
              {
                key: N,
                id: p.id,
                ref: W,
                as: l,
                activatorEvent: h,
                adjustScale: e,
                className: u,
                transition: o,
                rect: X,
                style: { zIndex: d, ...i },
                transform: Y,
              },
              t
            )
          : null
      )
    );
  }),
  t3 = (n) => {
    let { transform: e } = n;
    return { ...e, x: 0 };
  };
function Ww(n, e, t) {
  const r = n.slice();
  return r.splice(t < 0 ? r.length + t : t, 0, r.splice(e, 1)[0]), r;
}
function n3(n, e) {
  return n.reduce((t, r, i) => {
    const o = e.get(r);
    return o && (t[i] = o), t;
  }, Array(n.length));
}
function Sl(n) {
  return n !== null && n >= 0;
}
function r3(n, e) {
  if (n === e) return !0;
  if (n.length !== e.length) return !1;
  for (let t = 0; t < n.length; t++) if (n[t] !== e[t]) return !1;
  return !0;
}
function i3(n) {
  return typeof n == "boolean" ? { draggable: n, droppable: n } : n;
}
const ph = (n) => {
    let { rects: e, activeIndex: t, overIndex: r, index: i } = n;
    const o = Ww(e, r, t),
      a = e[i],
      l = o[i];
    return !l || !a
      ? null
      : {
          x: l.left - a.left,
          y: l.top - a.top,
          scaleX: l.width / a.width,
          scaleY: l.height / a.height,
        };
  },
  Vw = "Sortable",
  Hw = S.createContext({
    activeIndex: -1,
    containerId: Vw,
    disableTransforms: !1,
    items: [],
    overIndex: -1,
    useDragOverlay: !1,
    sortedRects: [],
    strategy: ph,
    disabled: { draggable: !1, droppable: !1 },
  });
function o3(n) {
  let { children: e, id: t, items: r, strategy: i = ph, disabled: o = !1 } = n;
  const {
      active: a,
      dragOverlay: l,
      droppableRects: u,
      over: d,
      measureDroppableContainers: h,
    } = Fw(),
    p = wa(Vw, t),
    g = l.rect !== null,
    y = S.useMemo(
      () => r.map((D) => (typeof D == "object" && "id" in D ? D.id : D)),
      [r]
    ),
    m = a != null,
    w = a ? y.indexOf(a.id) : -1,
    b = d ? y.indexOf(d.id) : -1,
    E = S.useRef(y),
    R = !r3(y, E.current),
    O = (b !== -1 && w === -1) || R,
    I = i3(o);
  ir(() => {
    R && m && h(y);
  }, [R, y, m, h]),
    S.useEffect(() => {
      E.current = y;
    }, [y]);
  const M = S.useMemo(
    () => ({
      activeIndex: w,
      containerId: p,
      disabled: I,
      disableTransforms: O,
      items: y,
      overIndex: b,
      useDragOverlay: g,
      sortedRects: n3(y, u),
      strategy: i,
    }),
    [w, p, I.draggable, I.droppable, O, y, b, u, g, i]
  );
  return S.createElement(Hw.Provider, { value: M }, e);
}
const s3 = (n) => {
    let { id: e, items: t, activeIndex: r, overIndex: i } = n;
    return Ww(t, r, i).indexOf(e);
  },
  a3 = (n) => {
    let {
      containerId: e,
      isSorting: t,
      wasDragging: r,
      index: i,
      items: o,
      newIndex: a,
      previousItems: l,
      previousContainerId: u,
      transition: d,
    } = n;
    return !d || !r || (l !== o && i === a) ? !1 : t ? !0 : a !== i && e === u;
  },
  l3 = { duration: 200, easing: "ease" },
  $w = "transform",
  c3 = Ii.Transition.toString({ property: $w, duration: 0, easing: "linear" }),
  u3 = { roleDescription: "sortable" };
function d3(n) {
  let { disabled: e, index: t, node: r, rect: i } = n;
  const [o, a] = S.useState(null),
    l = S.useRef(t);
  return (
    ir(() => {
      if (!e && t !== l.current && r.current) {
        const u = i.current;
        if (u) {
          const d = is(r.current, { ignoreTransform: !0 }),
            h = {
              x: u.left - d.left,
              y: u.top - d.top,
              scaleX: u.width / d.width,
              scaleY: u.height / d.height,
            };
          (h.x || h.y) && a(h);
        }
      }
      t !== l.current && (l.current = t);
    }, [e, t, r, i]),
    S.useEffect(() => {
      o && a(null);
    }, [o]),
    o
  );
}
function f3(n) {
  let {
    animateLayoutChanges: e = a3,
    attributes: t,
    disabled: r,
    data: i,
    getNewIndex: o = s3,
    id: a,
    strategy: l,
    resizeObserverConfig: u,
    transition: d = l3,
  } = n;
  const {
      items: h,
      containerId: p,
      activeIndex: g,
      disabled: y,
      disableTransforms: m,
      sortedRects: w,
      overIndex: b,
      useDragOverlay: E,
      strategy: R,
    } = S.useContext(Hw),
    O = h3(r, y),
    I = h.indexOf(a),
    M = S.useMemo(
      () => ({ sortable: { containerId: p, index: I, items: h }, ...i }),
      [p, i, I, h]
    ),
    D = S.useMemo(() => h.slice(h.indexOf(a)), [h, a]),
    {
      rect: N,
      node: Y,
      isOver: X,
      setNodeRef: j,
    } = V5({
      id: a,
      data: M,
      disabled: O.droppable,
      resizeObserverConfig: { updateMeasurementsFor: D, ...u },
    }),
    {
      active: W,
      activatorEvent: G,
      activeNodeRect: te,
      attributes: ne,
      setNodeRef: se,
      listeners: oe,
      isDragging: le,
      over: pe,
      setActivatorNodeRef: ce,
      transform: be,
    } = B5({
      id: a,
      data: M,
      attributes: { ...u3, ...t },
      disabled: O.draggable,
    }),
    Oe = EA(j, se),
    de = !!W,
    xe = de && !m && Sl(g) && Sl(b),
    Pe = !E && le,
    ye = Pe && xe ? be : null,
    ue = xe
      ? ye ??
        (l ?? R)({
          rects: w,
          activeNodeRect: te,
          activeIndex: g,
          overIndex: b,
          index: I,
        })
      : null,
    K =
      Sl(g) && Sl(b) ? o({ id: a, items: h, activeIndex: g, overIndex: b }) : I,
    Se = W == null ? void 0 : W.id,
    we = S.useRef({ activeId: Se, items: h, newIndex: K, containerId: p }),
    Ke = h !== we.current.items,
    re = e({
      active: W,
      containerId: p,
      isDragging: le,
      isSorting: de,
      id: a,
      index: I,
      items: h,
      newIndex: we.current.newIndex,
      previousItems: we.current.items,
      previousContainerId: we.current.containerId,
      transition: d,
      wasDragging: we.current.activeId != null,
    }),
    Ve = d3({ disabled: !re, index: I, node: Y, rect: N });
  return (
    S.useEffect(() => {
      de && we.current.newIndex !== K && (we.current.newIndex = K),
        p !== we.current.containerId && (we.current.containerId = p),
        h !== we.current.items && (we.current.items = h);
    }, [de, K, p, h]),
    S.useEffect(() => {
      if (Se === we.current.activeId) return;
      if (Se && !we.current.activeId) {
        we.current.activeId = Se;
        return;
      }
      const pt = setTimeout(() => {
        we.current.activeId = Se;
      }, 50);
      return () => clearTimeout(pt);
    }, [Se]),
    {
      active: W,
      activeIndex: g,
      attributes: ne,
      data: M,
      rect: N,
      index: I,
      newIndex: K,
      items: h,
      isOver: X,
      isSorting: de,
      isDragging: le,
      listeners: oe,
      node: Y,
      overIndex: b,
      over: pe,
      setNodeRef: Oe,
      setActivatorNodeRef: ce,
      setDroppableNodeRef: j,
      setDraggableNodeRef: se,
      transform: Ve ?? ue,
      transition: Ne(),
    }
  );
  function Ne() {
    if (Ve || (Ke && we.current.newIndex === I)) return c3;
    if (!((Pe && !Ic(G)) || !d) && (de || re))
      return Ii.Transition.toString({ ...d, property: $w });
  }
}
function h3(n, e) {
  var t, r;
  return typeof n == "boolean"
    ? { draggable: n, droppable: !1 }
    : {
        draggable:
          (t = n == null ? void 0 : n.draggable) != null ? t : e.draggable,
        droppable:
          (r = n == null ? void 0 : n.droppable) != null ? r : e.droppable,
      };
}
ft.Down, ft.Right, ft.Up, ft.Left;
const Md = 231,
  Rd = 36,
  jw = ({ layer: n, hiddenChild: e }) => {
    const t = S.useMemo(() => {
        const i = { width: Md, height: Rd, scale: 1 },
          o = i.width / i.height,
          a = n.data.props,
          l = ee.boundingRect(a.boxSize, a.position, a.rotate),
          u = l.width / l.height;
        return (
          o > u
            ? ((i.height = Rd),
              (i.width = i.height * u),
              (i.scale = i.height / l.height))
            : ((i.width = Md),
              (i.height = i.width / u),
              (i.scale = i.width / l.width)),
          i
        );
      }, [n]),
      r = S.useMemo(() => {
        const i = n.data.props;
        if (i.rotate === 0)
          return { x: -i.position.x * t.scale, y: -i.position.y * t.scale };
        {
          const o = ee.boundingRect(i.boxSize, i.position, i.rotate);
          return { x: -o.x * t.scale, y: -o.y * t.scale };
        }
      }, [n, t]);
    return x("div", {
      css: {
        width: Md,
        height: Rd,
        display: "flex",
        alignItems: "center",
        justifyContent: "center",
      },
      children: x("div", {
        css: { width: t.width, height: t.height },
        children: x("div", {
          css: { transform: ee.getTransformStyle({ position: r }) },
          children: x("div", {
            css: { transformOrigin: "0px 0px", transform: `scale(${t.scale})` },
            children: e
              ? S.createElement(n.data.comp, n.data.props, null)
              : x(m1, { id: n.id, children: x(Qv, {}) }),
          }),
        }),
      }),
    });
  };
var p3 = function (e) {
  return U.jsx(
    "svg",
    Re(
      {
        xmlns: "http://www.w3.org/2000/svg",
        viewBox: "0 0 256 256",
        fill: "currentColor",
        width: "1em",
        height: "1em",
      },
      e,
      {
        children: U.jsx("path", {
          d: "M108 60a16 16 0 1 1-16-16 16 16 0 0 1 16 16Zm56 16a16 16 0 1 0-16-16 16 16 0 0 0 16 16Zm-72 36a16 16 0 1 0 16 16 16 16 0 0 0-16-16Zm72 0a16 16 0 1 0 16 16 16 16 0 0 0-16-16Zm-72 68a16 16 0 1 0 16 16 16 16 0 0 0-16-16Zm72 0a16 16 0 1 0 16 16 16 16 0 0 0-16-16Z",
        }),
      }
    )
  );
};
const g3 = (
    { layer: n, onOpenOption: e, listeners: t, extraCSS: r, ...i },
    o
  ) => {
    const { selectedLayerIds: a } = Vt();
    return H("div", {
      ref: o,
      css: {
        background: "#F6F6F6",
        borderRadius: 8,
        padding: 8,
        cursor: "pointer",
        position: "relative",
        borderWidth: 2,
        borderStyle: "solid",
        borderColor: a.includes(n.id) ? "#3d8eff" : "transparent",
        ...(r ?? {}),
      },
      ...i,
      children: [
        H("div", {
          css: { display: "flex", alignItems: "center" },
          children: [
            x("div", {
              css: {
                fontSize: 24,
                width: 40,
                height: 40,
                display: "flex",
                justifyContent: "center",
                alignItems: "center",
                flexShrink: 0,
              },
              ...t,
              children: x(p3, {}),
            }),
            x("div", {
              css: { minWidth: 0, flexGrow: 1 },
              children: x(jw, { layer: n }),
            }),
            Jo(n) &&
              x("div", {
                css: { flexShrink: 0, fontSize: 24 },
                children: x(Xv, {}),
              }),
          ],
        }),
        x("div", {
          css: {
            position: "absolute",
            right: 4,
            top: 4,
            background: "#5E6278",
            borderRadius: 8,
            color: "#fff",
            padding: "0 6px",
          },
          onClick: e,
          children: x(fw, {}),
        }),
      ],
    });
  },
  Uw = S.forwardRef(g3),
  m3 = ({ open: n, children: e }, t) => {
    const [r, i] = S.useState(window.document.getElementById("settings")),
      o = x("div", {
        ref: t,
        css: {
          borderRight: "1px solid rgba(57,76,96,.15)",
          background: "#fff",
          width: "100%",
          height: "100%",
          position: "absolute",
          overflowY: "auto",
          pointerEvents: "auto",
          "@media (max-width: 900px)": {
            width: "100%",
            position: "fixed",
            bottom: 0,
            left: 0,
            top: 0,
            background: "#fff",
          },
        },
        children: e,
      });
    return (
      S.useEffect(() => {
        i(window.document.getElementById("settings"));
      }, []),
      r && n ? Yr.createPortal(o, r) : null
    );
  },
  Pc = S.forwardRef(m3),
  y3 = (n) => {
    const { transition: e, transform: t, isDragging: r } = n || {},
      i = n
        ? {
            transform: Ii.Transform.toString(t || null),
            transition: e,
            zIndex: r ? 1 : "auto",
            opacity: r ? 0.2 : 1,
            touchAction: "none",
          }
        : { boxShadow: "0px 4px 12px rgb(0 0 0 / 10%)" },
      o = n ? { opacity: n.isDragging ? 0 : 1 } : void 0;
    return { css: i, contentCss: o };
  },
  v3 = ({ layer: n, onOpenOption: e }) => {
    const t = f3({ id: n.id }),
      { css: r } = y3(t);
    return x(Uw, {
      ref: t.setNodeRef,
      extraCSS: r,
      layer: n,
      listeners: t.listeners,
      onOpenOption: e,
      ...t.attributes,
    });
  },
  w3 = ({ ...n }, e) => {
    const t = S.useRef({ isMultipleSelect: !1 }),
      { selectedLayerIds: r } = Vt(),
      [i, o] = S.useState(null),
      {
        layers: a,
        actions: l,
        activePage: u,
      } = $e((w) => ({
        layers: w.pages[w.activePage] && w.pages[w.activePage].layers,
        activePage: w.activePage,
      })),
      d = S.useMemo(() => {
        if (a) return my(a.ROOT.data.child.map((w) => a[w]));
      }, [a]),
      h = S.useMemo(() => {
        if (a) return a.ROOT;
      }, [a]),
      p = WA(Cd(Aw), Cd(Lw), Cd(dh)),
      g = ({ active: w, over: b }) => {
        if ((o(null), !!b && w.id !== b.id)) {
          const E = d.length - d.findIndex((R) => R.id === b.id) - 1;
          l.moveLayerPosition(u, w.id, E);
        }
      },
      y = (w) => {
        l.showContextMenu(ae.getPosition(w.nativeEvent));
      };
    S.useEffect(() => {
      const w = (b) => {
        t.current.isMultipleSelect = b.shiftKey;
      };
      return (
        window.addEventListener("keydown", w),
        window.addEventListener("keyup", w),
        () => {
          window.removeEventListener("keydown", w),
            window.removeEventListener("keyup", w);
        }
      );
    }, []);
    const m = S.useMemo(() => (d || []).find((w) => w.id === i), [d, i]);
    return x(Pc, {
      ...n,
      children: x(po.Provider, {
        value: { pageIndex: u },
        children: H("div", {
          css: {
            width: "100%",
            height: "100%",
            display: "flex",
            flexDirection: "column",
            overflowY: "auto",
          },
          children: [
            H("div", {
              css: {
                display: "flex",
                alignItems: "center",
                justifyContent: "center",
                flexShrink: 0,
                height: 48,
                borderBottom: "1px solid rgba(57,76,96,.15)",
                padding: "0 20px",
              },
              children: [
                x("p", {
                  css: {
                    lineHeight: "48px",
                    fontWeight: 600,
                    color: "#181C32",
                    flexGrow: 1,
                  },
                  children: "Layers",
                }),
                x("div", {
                  css: {
                    fontSize: 20,
                    flexShrink: 0,
                    width: 32,
                    height: 32,
                    cursor: "pointer",
                    display: "flex",
                    alignItems: "center",
                    justifyContent: "center",
                  },
                  onClick: () => {
                    l.setSidebar();
                  },
                  children: x(mo, {}),
                }),
              ],
            }),
            x(_5, {
              modifiers: [t3],
              sensors: p,
              onDragCancel: () => o(null),
              onDragEnd: g,
              onDragStart: ({ active: w }) => {
                w && o(w.id);
              },
              children: x("div", {
                ref: e,
                css: { flexGrow: 1, overflowY: "auto" },
                children: H("div", {
                  css: {
                    display: "grid",
                    gridTemplateColumns: "minmax(0,1fr)",
                    gridRowGap: 8,
                    padding: 16,
                  },
                  children: [
                    H(o3, {
                      items: (d || []).map((w) => w.id),
                      strategy: ph,
                      children: [
                        Yr.createPortal(
                          x(e3, { children: m ? x(Uw, { layer: m }) : null }),
                          document.body
                        ),
                        (d || []).map((w) =>
                          x(
                            v3,
                            {
                              layer: w,
                              onMouseDown: () => {
                                l.selectLayers(
                                  u,
                                  w.id,
                                  t.current.isMultipleSelect ? "add" : "replace"
                                );
                              },
                              onOpenOption: y,
                            },
                            w.id
                          )
                        ),
                      ],
                    }),
                    h &&
                      x("div", {
                        css: {
                          background: "#F6F6F6",
                          borderRadius: 8,
                          padding: 8,
                          cursor: "pointer",
                          position: "relative",
                          borderWidth: 2,
                          borderStyle: "solid",
                          borderColor: r.includes(h.id)
                            ? "#3d8eff"
                            : "transparent",
                        },
                        onMouseDown: () => {
                          l.selectLayers(
                            u,
                            h.id,
                            t.current.isMultipleSelect ? "add" : "replace"
                          );
                        },
                        children: H("div", {
                          css: { display: "flex", alignItems: "center" },
                          children: [
                            x("div", {
                              css: {
                                width: 40,
                                height: 40,
                                display: "flex",
                                justifyContent: "center",
                                alignItems: "center",
                                flexShrink: 0,
                              },
                            }),
                            x("div", {
                              css: { minWidth: 0, flexGrow: 1 },
                              children: x(jw, { hiddenChild: !0, layer: h }),
                            }),
                            x("div", {
                              css: { flexShrink: 0, fontSize: 24 },
                              children: x(Dl, {}),
                            }),
                          ],
                        }),
                      }),
                  ],
                }),
              }),
            }),
          ],
        }),
      }),
    });
  },
  b3 = S.forwardRef(w3),
  x3 = () => {
    const n = S.useRef(null),
      e = S.useRef(null),
      t = S.useRef(null),
      r = S.useRef(null),
      [i, o] = S.useState(!1),
      [a, l] = S.useState(!1),
      [u, d] = S.useState(!1),
      { selectedLayers: h, selectedLayerIds: p } = Vt(),
      {
        actions: g,
        activePage: y,
        sidebar: m,
        pageSize: w,
        isPageLocked: b,
      } = $e((j, W) => ({
        activePage: j.activePage,
        sidebar: j.sidebar,
        pageSize: W.getPageSize(),
        isPageLocked:
          j.pages[j.activePage] &&
          j.pages[j.activePage].layers.ROOT.data.locked,
      })),
      [E, R] = S.useState(w);
    S.useEffect(() => {
      R(w);
    }, [w]);
    const { transparency: O } = S.useMemo(
        () =>
          Object.entries(h).reduce(
            (j, [, W]) => {
              var G;
              return (
                Ti(W)
                  ? (j.transparency = Math.max(
                      j.transparency,
                      typeof ((G = W.data.props.image) == null
                        ? void 0
                        : G.transparency) < "u"
                        ? W.data.props.image.transparency
                        : 1
                    ))
                  : (j.transparency = Math.max(
                      j.transparency,
                      typeof W.data.props.transparency < "u"
                        ? W.data.props.transparency
                        : 1
                    )),
                j
              );
            },
            { transparency: 0 }
          ),
        [h]
      ),
      I = !!h.find((j) => j.data.locked),
      M = () => {
        I ? g.unlock(y, p) : g.lock(y, p);
      },
      D = (j) => {
        p.forEach((W) => {
          W === "ROOT"
            ? g.history
                .throttle(2e3)
                .setProp(y, W, { image: { transparency: j / 100 } })
            : g.history.throttle(2e3).setProp(y, W, { transparency: j / 100 });
        });
      };
    S.useEffect(() => {
      o(!1);
    }, [JSON.stringify(p)]);
    const N = (j, W) => {
        const G = E.width / E.height,
          te = parseInt(j, 10);
        W === "width" &&
          (u && (r.current.value = String(Math.round((te / G) * 10) / 10)),
          R({ ...E, width: te })),
          W === "height" &&
            (u && (t.current.value = String(Math.round(te * G * 10) / 10)),
            R({ ...E, height: te }));
      },
      Y = S.useMemo(() => E.width < 100 || E.height < 100, [E]),
      X = () => {
        Y || (g.changePageSize(E), l(!1));
      };
    return H(S.Fragment, {
      children: [
        H("div", {
          css: {
            display: "grid",
            alignItems: "center",
            gridAutoFlow: "column",
            gridGap: 8,
          },
          children: [
            x(kt, {
              onClick: () => g.setSidebar("LAYER_MANAGEMENT"),
              children: x("span", {
                css: { padding: "0 4px" },
                children: "Position",
              }),
            }),
            p.length > 0 &&
              !I &&
              !b &&
              (!Ti(h[0]) || (Ti(h[0]) && h[0].data.props.image)) &&
              H(S.Fragment, {
                children: [
                  x("div", {
                    css: {
                      height: 24,
                      width: "1px",
                      background: "rgba(57,76,96,.15)",
                    },
                  }),
                  x(kt, {
                    ref: n,
                    css: { fontSize: 20 },
                    onClick: () => o(!0),
                    children: x(wA, {}),
                  }),
                  x(rr, {
                    anchorEl: n.current,
                    offsets: { "bottom-end": { x: 0, y: 8 } },
                    open: i,
                    placement: "bottom-end",
                    onClose: () => o(!1),
                    children: x("div", {
                      css: { padding: 16 },
                      children: x(Di, {
                        defaultValue: O * 100,
                        label: "Transparency",
                        onChange: D,
                      }),
                    }),
                  }),
                ],
              }),
            !b &&
              H(S.Fragment, {
                children: [
                  x("div", {
                    css: {
                      height: 24,
                      width: "1px",
                      background: "rgba(57,76,96,.15)",
                    },
                  }),
                  x(kt, {
                    ref: e,
                    onClick: () => l(!0),
                    children: x("span", {
                      css: { padding: "0 4px" },
                      children: "Resize",
                    }),
                  }),
                ],
              }),
            x(rr, {
              anchorEl: e.current,
              offsets: { "bottom-end": { x: 0, y: 8 } },
              open: a,
              placement: "bottom-end",
              onClose: () => l(!1),
              children: H("div", {
                css: { padding: 16, width: 240 },
                children: [
                  H("div", {
                    css: { display: "flex", gap: 8, alignItems: "flex-end" },
                    children: [
                      H("div", {
                        children: [
                          x("div", {
                            css: { fontSize: 12, fontWeight: 600 },
                            children: "Width",
                          }),
                          x("div", {
                            css: {
                              border: "1px solid rgba(43,59,74,.3)",
                              height: 40,
                              padding: "0 12px",
                              width: 80,
                              borderRadius: 4,
                            },
                            children: x("input", {
                              ref: t,
                              css: {
                                width: "100%",
                                minWidth: 8,
                                height: "100%",
                              },
                              defaultValue: E.width,
                              onChange: (j) => N(j.target.value, "width"),
                            }),
                          }),
                        ],
                      }),
                      H("div", {
                        children: [
                          x("div", {
                            css: { fontSize: 12, fontWeight: 600 },
                            children: "Height",
                          }),
                          x("div", {
                            css: {
                              border: "1px solid rgba(43,59,74,.3)",
                              height: 40,
                              padding: "0 12px",
                              width: 80,
                              borderRadius: 4,
                            },
                            children: x("input", {
                              ref: r,
                              css: {
                                width: "100%",
                                minWidth: 8,
                                height: "100%",
                              },
                              defaultValue: E.height,
                              onChange: (j) => N(j.target.value, "height"),
                            }),
                          }),
                        ],
                      }),
                      x("div", {
                        css: {
                          fontSize: 20,
                          cursor: "pointer",
                          margin: "10px 0",
                        },
                        onClick: () => d(!u),
                        children: u ? x(Js, {}) : x(ff, {}),
                      }),
                    ],
                  }),
                  Y &&
                    x("div", {
                      css: { color: "#db1436" },
                      children:
                        "Dimensions must be at least 100px and no more than 8000px.",
                    }),
                  x("div", {
                    css: { marginTop: 12 },
                    children: x("div", {
                      css: {
                        background: Y ? "#8383A2" : "#3a3a4c",
                        padding: "8px 14px",
                        lineHeight: 1,
                        color: "#FFF",
                        borderRadius: 4,
                        cursor: Y ? "not-allowed" : "pointer",
                        fontSize: 16,
                        textAlign: "center",
                        fontWeight: 700,
                      },
                      onClick: X,
                      children: "Resize",
                    }),
                  }),
                ],
              }),
            }),
            p.length > 0 &&
              H(kt, {
                css: { fontSize: 20 },
                isActive: I,
                onClick: M,
                children: [I && x(Js, {}), !I && x(ff, {})],
              }),
          ],
        }),
        m === "LAYER_MANAGEMENT" && x(b3, { open: !0 }),
      ],
    });
  },
  Dd = [
    ["#000000", "#545454", "#737373", "#a6a6a6", "#d9d9d9", "#ffffff"],
    ["#ff3131", "#FF5757", "#FF66C4", "#CB6CE6", "#8C52FF", "#5E17EB"],
    ["#0097B2", "#0CC0DF", "#5CE1E6", "#38B6FF", "#5271FF", "#004AAD"],
    ["#00BF62", "#7ED957", "#C1FF72", "#FFDE59", "#FFBD59", "#FF914D"],
  ],
  zm = ({ color: n, event: e, onChange: t, children: r }) => {
    const i = S.useRef(null),
      [o, a] = S.useState(!1);
    return H(S.Fragment, {
      children: [
        x("div", {
          ref: i,
          css: { cursor: "pointer" },
          onClick: () => e === "click" && a(!0),
          onDoubleClick: () => e === "doubleClick" && a(!0),
          children: r,
        }),
        x(rr, {
          anchorEl: i.current,
          offsets: { bottom: { y: 8, x: 0 } },
          open: o,
          placement: "bottom",
          onClose: () => a(!1),
          children: x("div", {
            css: { padding: 16, width: 280 },
            children: x(Gr.ColorPicker, {
              color: new ae.Color(n).toHex(),
              onChange: t,
            }),
          }),
        }),
      ],
    });
  },
  S3 = [
    "leftToRight",
    "topToBottom",
    "topLeftToBottomRight",
    "circleCenter",
    "circleTopLeft",
  ],
  Id = ({
    selectedColor: n,
    gradient: e,
    event: t,
    children: r,
    onChangeGradient: i,
    onChangeColor: o,
  }) => {
    const a = S.useRef(null),
      l = S.useRef(null),
      u = S.useRef([]),
      [d, h] = S.useState(!1),
      [p, g] = S.useState(null),
      [y, m] = S.useState(e ? "gradient" : "solid"),
      [w, b] = S.useState(),
      [E, R] = S.useState(n),
      O = S.useMemo(() => {
        if (e != null && e.colors.length) return e == null ? void 0 : e.colors;
        {
          const j = new ae.Color(n),
            W = j.toHsl();
          return (
            W.l < 50
              ? (W.l = Math.min(100, W.l + 30))
              : (W.l = Math.max(0, W.l - 30)),
            [j.toRgbString(), new ae.Color(W).toRgbString()]
          );
        }
      }, [e, n]);
    S.useEffect(() => {
      d &&
        b({
          colors: O,
          style: (e == null ? void 0 : e.style) || "leftToRight",
        });
    }, [d]),
      S.useEffect(() => {
        w && y === "gradient" && i(w);
      }, [w, y, i]);
    const I = (j) => {
        R(j), o(j);
      },
      M = (j) => {
        b({ colors: O, style: j });
      },
      D = (j) => {
        if (p) {
          const W = [...O];
          (W[p.index] = new ae.Color(j).toRgbString()),
            b({
              colors: W,
              style: (w == null ? void 0 : w.style) || "leftToRight",
            });
        }
      },
      N = () => {
        const j = O[O.length - 1];
        b({
          colors: [...O, j],
          style: (e == null ? void 0 : e.style) || "leftToRight",
        }),
          g({ index: O.length, color: j });
      },
      Y = () => {
        b({
          colors: (w == null ? void 0 : w.colors) || [],
          style: (w == null ? void 0 : w.style) || "leftToRight",
        });
      },
      X = (j) => {
        w && b({ colors: w.colors.filter((W, G) => G !== j), style: w.style });
      };
    return H(S.Fragment, {
      children: [
        x("div", {
          ref: l,
          css: { cursor: "pointer" },
          onClick: () => t === "click" && h(!0),
          onDoubleClick: () => t === "doubleClick" && h(!0),
          children: r,
        }),
        x(rr, {
          ref: a,
          anchorEl: l.current,
          offsets: { bottom: { y: 8, x: 0 } },
          open: d,
          placement: "bottom",
          onClose: () => {
            h(!1), g(null);
          },
          children: H("div", {
            css: { padding: "0 16px 16px 16px", width: 280 },
            children: [
              H("div", {
                css: {
                  display: "flex",
                  justifyContent: "center",
                  marginBottom: 12,
                  borderBottom: "1px solid rgba(217, 219, 228, 0.6)",
                },
                children: [
                  x("div", {
                    css: {
                      display: "inline-block",
                      cursor: "pointer",
                      padding: 8,
                      flexGrow: 1,
                      textAlign: "center",
                      overflow: "hidden",
                      flexShrink: 0,
                      fontWeight: 700,
                      whiteSpace: "nowrap",
                      color: y === "solid" ? "#3d8eff" : "rgba(13,18,22,.7)",
                    },
                    onClick: () => {
                      m("solid"), o(E);
                    },
                    children: "Solid Color",
                  }),
                  x("div", {
                    css: {
                      display: "inline-block",
                      cursor: "pointer",
                      padding: 8,
                      flexGrow: 1,
                      textAlign: "center",
                      overflow: "hidden",
                      flexShrink: 0,
                      fontWeight: 700,
                      whiteSpace: "nowrap",
                      color: y === "gradient" ? "#3d8eff" : "rgba(13,18,22,.7)",
                    },
                    onClick: () => {
                      m("gradient"), Y();
                    },
                    children: "Gradient",
                  }),
                ],
              }),
              y === "solid" &&
                x("div", {
                  css: {},
                  children: x(Gr.ColorPicker, {
                    color: new ae.Color(E).toHex(),
                    onChange: I,
                  }),
                }),
              y === "gradient" &&
                H("div", {
                  css: { display: "grid", rowGap: 12 },
                  children: [
                    H("div", {
                      children: [
                        x("div", {
                          css: { fontWeight: 700, lineHeight: 2.2 },
                          children: "Gradient colors",
                        }),
                        H("div", {
                          css: {
                            display: "grid",
                            gridTemplateColumns:
                              " repeat(auto-fill, minmax(40px, 1fr))",
                            gridGap: 8,
                          },
                          children: [
                            w == null
                              ? void 0
                              : w.colors.map((j, W) =>
                                  H(
                                    "div",
                                    {
                                      css: { position: "relative" },
                                      children: [
                                        x(Gr.ColorIcon, {
                                          ref: (G) => (u.current[W] = G),
                                          color: j,
                                          selected: null,
                                          onClick: () =>
                                            g({ index: W, color: j }),
                                        }),
                                        x("div", {
                                          css: {
                                            position: "absolute",
                                            top: -8,
                                            right: -8,
                                            fontSize: 12,
                                            padding: 4,
                                            borderRadius: "50%",
                                            opacity: 0,
                                            transition:
                                              "opacity .15s ease-in-out",
                                            background: "rgba(17,23,29,.6)",
                                            color: "#fff",
                                            display:
                                              (w == null
                                                ? void 0
                                                : w.colors.length) > 2
                                                ? "block"
                                                : "none",
                                            cursor: "pointer",
                                            ":hover": { opacity: 1 },
                                          },
                                          onClick: () =>
                                            (w == null
                                              ? void 0
                                              : w.colors.length) > 2 && X(W),
                                          children: x(mo, {}),
                                        }),
                                      ],
                                    },
                                    W
                                  )
                                ),
                            x(rr, {
                              anchorEl: p && u.current[p.index],
                              element: a.current,
                              offsets: { bottom: { y: 8, x: 0 } },
                              open: !!p,
                              placement: "bottom",
                              onClose: () => g(null),
                              children: x("div", {
                                css: { padding: 16, width: 280 },
                                children: x(Gr.ColorPicker, {
                                  color: new ae.Color(
                                    (p == null ? void 0 : p.color) || "#f25022"
                                  ).toHex(),
                                  enableAlpha: !0,
                                  onChange: D,
                                }),
                              }),
                            }),
                            x("div", {
                              css: {
                                paddingBottom: "100%",
                                position: "relative",
                                width: "100%",
                                cursor: "pointer",
                              },
                              onClick: N,
                              children: x("div", {
                                css: {
                                  background: "rgba(64,87,109,.07)",
                                  fontSize: 24,
                                  display: "flex",
                                  alignItems: "center",
                                  justifyContent: "center",
                                  position: "absolute",
                                  inset: 0,
                                  borderRadius: 4,
                                  transition:
                                    "background-color .1s linear,border-color .1s linear,color .1s linear",
                                  ":hover": {
                                    background: "rgba(57,76,96,.15)",
                                  },
                                },
                                children: x(Zs, {}),
                              }),
                            }),
                          ],
                        }),
                      ],
                    }),
                    H("div", {
                      children: [
                        x("div", {
                          css: { fontWeight: 700, lineHeight: 2.2 },
                          children: "Style",
                        }),
                        x("div", {
                          css: {
                            display: "grid",
                            columnGap: 8,
                            gridAutoFlow: "column",
                          },
                          children: S3.map((j) =>
                            x(
                              "div",
                              {
                                css: {
                                  width: "100%",
                                  height: 40,
                                  borderRadius: 4,
                                  overflow: "hidden",
                                },
                                onClick: () => M(j),
                                children: x("div", {
                                  css: {
                                    backgroundColor: "#fff",
                                    backgroundPosition: "0 0, 6px 6px",
                                    backgroundSize: "12px 12px",
                                    width: "100%",
                                    height: "100%",
                                    position: "relative",
                                    backgroundImage:
                                      "linear-gradient(-45deg,rgba(57,76,96,.15) 25%,transparent 25%,transparent 75%,rgba(57,76,96,.15) 75%),linear-gradient(-45deg,rgba(57,76,96,.15) 25%,transparent 25%,transparent 75%,rgba(57,76,96,.15) 75%)",
                                  },
                                  children: x("div", {
                                    css: {
                                      background: ee.getGradientBackground(
                                        O,
                                        j
                                      ),
                                      position: "absolute",
                                      inset: 0,
                                    },
                                  }),
                                }),
                              },
                              j
                            )
                          ),
                        }),
                      ],
                    }),
                  ],
                }),
            ],
          }),
        }),
      ],
    });
  },
  C3 = (
    {
      selected: n,
      gradient: e,
      useGradient: t,
      onSelect: r,
      onChangeGradient: i,
      ...o
    },
    a
  ) => {
    const [l, u] = S.useState(null),
      [d, h] = S.useState(null),
      [p] = S.useState(n),
      { actions: g, state: y } = $e(),
      m = S.useMemo(
        () =>
          y.pages.reduce(
            (D, N) => (
              Object.entries(N.layers).forEach(([, Y]) => {
                (Ti(Y) && Y.data.props.color) || (Jl(Y) && Y.data.props.color)
                  ? D.push(Y.data.props.color)
                  : Qr(Y)
                  ? D.push(...Y.data.props.colors)
                  : Jf(Y)
                  ? D.push(...Y.data.props.colors)
                  : Yv(Y) && D.push(Y.data.props.color);
              }),
              Te.uniq(D)
            ),
            []
          ),
        []
      ),
      w = S.useMemo(() => {
        const D = y.pages.reduce(
          (N, Y) => (
            Object.entries(Y.layers).forEach(([, X]) => {
              ((Ti(X) && X.data.props.gradientBackground) ||
                (Jl(X) && X.data.props.gradientBackground)) &&
                N.push(X.data.props.gradientBackground);
            }),
            N
          ),
          []
        );
        return Te.uniqWith(D, Te.isEqual);
      }, []),
      b = S.useMemo(() => {
        if (l) {
          const D = m.findIndex(
            (N) => p && N === new ae.Color(p).toRgbString()
          );
          return Te.uniq([...m.slice(0, D), l, ...m.slice(D, m.length)]);
        } else return m;
      }, [m, l, p]),
      E = S.useMemo(() => {
        if (d) {
          const D = w.findIndex((N) => Te.isEqual(N, e));
          return Te.uniqWith(
            [...w.slice(0, D), d, ...w.slice(D, w.length)],
            Te.isEqual
          );
        } else return w;
      }, [w, d, e]),
      R = (D) => {
        Te.isEqual(D, l) || (u(null), h(null)),
          r(new ae.Color(D).toRgbString());
      },
      O = (D) => {
        Te.isEqual(D, d) || (u(null), h(null)), i && i(D);
      },
      I = (D) => {
        u(D), h(null), r(D);
      },
      M = (D) => {
        u(null), h(D), i && i(D);
      };
    return H(Pc, {
      ref: a,
      ...o,
      children: [
        H("div", {
          css: {
            display: "flex",
            alignItems: "center",
            justifyContent: "center",
            flexShrink: 0,
            height: 48,
            borderBottom: "1px solid rgba(57,76,96,.15)",
            padding: "0 20px",
          },
          children: [
            x("p", {
              css: {
                lineHeight: "48px",
                fontWeight: 600,
                color: "#181C32",
                flexGrow: 1,
              },
              children: "Colors",
            }),
            x("div", {
              css: {
                fontSize: 20,
                flexShrink: 0,
                width: 32,
                height: 32,
                cursor: "pointer",
                display: "flex",
                alignItems: "center",
                justifyContent: "center",
              },
              onClick: () => {
                g.setSidebar();
              },
              children: x(mo, {}),
            }),
          ],
        }),
        H("div", {
          css: { padding: "0 20px", display: "grid", rowGap: 24 },
          children: [
            H("div", {
              children: [
                x("div", {
                  css: { padding: "8px 0", fontWeight: 700 },
                  children: "Document colors",
                }),
                H("div", {
                  css: {
                    display: "grid",
                    gridGap: 12,
                    gridTemplateColumns: `repeat(${Dd[0].length},minmax(0,1fr))`,
                  },
                  children: [
                    t &&
                      i &&
                      x(Id, {
                        event: "click",
                        gradient: d || e,
                        selectedColor: new ae.Color(
                          l || n || "#f25022"
                        ).toHex(),
                        onChangeColor: (D) => {
                          I(new ae.Color(D).toRgbString());
                        },
                        onChangeGradient: M,
                        children: x("div", {
                          css: {
                            paddingBottom: "100%",
                            position: "relative",
                            width: "100%",
                          },
                          children: x("div", {
                            css: {
                              borderRadius: 4,
                              overflow: "hidden",
                              background:
                                "conic-gradient(red, yellow, lime, aqua, blue, magenta, red)",
                              width: "100%",
                              height: "100%",
                              position: "absolute",
                              display: "flex",
                              alignItems: "center",
                              justifyContent: "center",
                            },
                            children: x("div", {
                              css: {
                                fontSize: 16,
                                width: 24,
                                height: 24,
                                background: "#fff",
                                borderRadius: "50%",
                                display: "flex",
                                alignItems: "center",
                                justifyContent: "center",
                              },
                              children: x(Zs, {}),
                            }),
                          }),
                        }),
                      }),
                    !t &&
                      x(zm, {
                        color: p || "#f25022",
                        event: "click",
                        onChange: R,
                        children: x("div", {
                          css: {
                            paddingBottom: "100%",
                            position: "relative",
                            width: "100%",
                          },
                          children: x("div", {
                            css: {
                              borderRadius: 4,
                              overflow: "hidden",
                              background:
                                "conic-gradient(red, yellow, lime, aqua, blue, magenta, red)",
                              width: "100%",
                              height: "100%",
                              position: "absolute",
                              display: "flex",
                              alignItems: "center",
                              justifyContent: "center",
                            },
                            children: x("div", {
                              css: {
                                fontSize: 16,
                                width: 24,
                                height: 24,
                                background: "#fff",
                                borderRadius: "50%",
                                display: "flex",
                                alignItems: "center",
                                justifyContent: "center",
                              },
                              children: x(Zs, {}),
                            }),
                          }),
                        }),
                      }),
                    b.map((D, N) => {
                      const Y = x(Gr.ColorIcon, {
                        color: D,
                        selected: n,
                        onClick: () => n !== D && R(D),
                      });
                      return t && i
                        ? x(
                            Id,
                            {
                              event: "doubleClick",
                              gradient: d || e,
                              selectedColor: new ae.Color(
                                l || n || "#f25022"
                              ).toHex(),
                              onChangeColor: (X) => {
                                const j = ae.hex2rgbString(X);
                                I(j);
                              },
                              onChangeGradient: M,
                              children: Y,
                            },
                            N
                          )
                        : x(
                            zm,
                            {
                              color: p || "#f25022",
                              event: "doubleClick",
                              onChange: R,
                              children: Y,
                            },
                            N
                          );
                    }),
                    t &&
                      i &&
                      E.map((D, N) =>
                        x(
                          Id,
                          {
                            event: "doubleClick",
                            gradient: d || e,
                            selectedColor: new ae.Color(
                              l || n || "#f25022"
                            ).toHex(),
                            onChangeColor: (Y) => {
                              const X = ae.hex2rgbString(Y);
                              I(X);
                            },
                            onChangeGradient: M,
                            children: x(Gr.ColorIcon, {
                              color: ee.getGradientBackground(
                                D.colors,
                                D.style
                              ),
                              selected:
                                (e &&
                                  ee.getGradientBackground(
                                    e.colors,
                                    e.style
                                  )) ||
                                null,
                              onClick: () => O(D),
                            }),
                          },
                          N
                        )
                      ),
                  ],
                }),
              ],
            }),
            H("div", {
              css: { borderTop: "1px solid rgba(217, 219, 228, 0.6)" },
              children: [
                x("div", {
                  css: { padding: "8px 0", fontWeight: 700 },
                  children: "Default Colors",
                }),
                x("div", {
                  css: {
                    display: "grid",
                    gridGap: 12,
                    gridTemplateColumns: `repeat(${Dd[0].length},minmax(0,1fr))`,
                  },
                  children: Dd.map((D) =>
                    D.map((N, Y) =>
                      x(
                        Gr.ColorIcon,
                        { color: N, selected: n, onClick: () => R(N) },
                        Y
                      )
                    )
                  ),
                }),
              ],
            }),
          ],
        }),
      ],
    });
  },
  gh = S.forwardRef(C3),
  ia = ({
    colors: n,
    gradient: e,
    useGradient: t,
    children: r,
    onChange: i,
    onChangeGradient: o,
  }) => {
    const { actions: a, sidebar: l } = $e((d) => ({ sidebar: d.sidebar })),
      u = S.useMemo(
        () =>
          (n.length === 0 ||
            (n.length === 1 && new ae.Color(n[0]).white() === 100)) &&
          !e
            ? "conic-gradient(red, yellow, lime, aqua, blue, magenta, red)"
            : e
            ? ee.getGradientBackground(e.colors, e.style)
            : n.map((d) => `linear-gradient(to right, ${d}, ${d})`).join(", "),
        [n, e]
      );
    return H(S.Fragment, {
      children: [
        H(kt, {
          onClick: () => a.setSidebar("CHOOSING_COLOR"),
          children: [
            !r &&
              x("div", {
                css: {
                  width: 24,
                  height: 24,
                  boxShadow: "inset 0 0 0 1px rgba(57,76,96,.15)",
                  borderRadius: 2,
                  position: "relative",
                  overflow: "hidden",
                },
                children: x("div", {
                  css: {
                    backgroundColor: "#fff",
                    backgroundPosition: "0 0, 6px 6px",
                    backgroundSize: "12px 12px",
                    inset: 0,
                    position: "absolute",
                    backgroundImage:
                      "linear-gradient(-45deg,rgba(57,76,96,.15) 25%,transparent 25%,transparent 75%,rgba(57,76,96,.15) 75%),linear-gradient(-45deg,rgba(57,76,96,.15) 25%,transparent 25%,transparent 75%,rgba(57,76,96,.15) 75%)",
                  },
                  children: x("div", {
                    css: { position: "absolute", inset: 0, background: u },
                  }),
                }),
              }),
            r,
          ],
        }),
        l === "CHOOSING_COLOR" &&
          x(gh, {
            gradient: e,
            open: !0,
            selected: n.length === 1 ? n[0] : null,
            useGradient: t,
            onChangeGradient: o,
            onSelect: i,
          }),
      ],
    });
  },
  E3 = ({ layers: n }) => {
    const { actions: e, activePage: t } = $e((l) => ({
        activePage: l.activePage,
        sidebar: l.sidebar,
      })),
      r = S.useMemo(
        () => n.map((l) => l.data.props.color).filter((l) => !!l),
        [n]
      ),
      i = S.useMemo(
        () => n.map((l) => l.data.props.gradientBackground).filter((l) => !!l),
        [n]
      ),
      o = (l) => {
        const u = n.map((d) => d.id);
        e.history
          .throttle(2e3)
          .setProp(t, u, { color: l, gradientBackground: null });
      },
      a = (l) => {
        const u = n.map((d) => d.id);
        e.history
          .throttle(2e3)
          .setProp(t, u, { gradientBackground: l, color: null });
      };
    return x(ia, {
      colors: r,
      gradient: i.length > 0 ? i[0] : null,
      useGradient: !0,
      onChange: o,
      onChangeGradient: a,
    });
  };
var Zw = function (e) {
    return U.jsx(
      "svg",
      Re(
        {
          xmlns: "http://www.w3.org/2000/svg",
          viewBox: "0 0 256 256",
          fill: "currentColor",
          width: "1em",
          height: "1em",
        },
        e,
        {
          children: U.jsx("path", {
            d: "M208 28H48a20 20 0 0 0-20 20v160a20 20 0 0 0 20 20h160a20 20 0 0 0 20-20V48a20 20 0 0 0-20-20Zm-4 176H52V52h152Z",
          }),
        }
      )
    );
  },
  Yw = function (e) {
    return U.jsxs(
      "svg",
      Re(
        {
          xmlns: "http://www.w3.org/2000/svg",
          viewBox: "0 0 24 24",
          width: "1em",
          height: "1em",
        },
        e,
        {
          children: [
            U.jsx("rect", {
              width: 20,
              height: 2,
              x: 2,
              y: 4,
              fill: "currentColor",
              rx: 0.75,
            }),
            U.jsx("rect", {
              width: 20,
              height: 3.5,
              x: 2,
              y: 8.5,
              fill: "currentColor",
              rx: 1,
            }),
            U.jsx("rect", {
              width: 20,
              height: 6,
              x: 2,
              y: 14.5,
              fill: "currentColor",
              rx: 1,
            }),
          ],
        }
      )
    );
  },
  qw = function (e) {
    return U.jsx(
      "svg",
      Re(
        {
          width: "1em",
          height: "1em",
          viewBox: "0 0 24 24",
          fill: "none",
          xmlns: "http://www.w3.org/2000/svg",
        },
        e,
        {
          children: U.jsx("line", {
            x2: 24,
            y1: "50%",
            y2: "50%",
            stroke: "currentColor",
            strokeDasharray: "2 2",
            strokeWidth: 2,
          }),
        }
      )
    );
  },
  Gw = function (e) {
    return U.jsx(
      "svg",
      Re(
        {
          width: "1em",
          height: "1em",
          viewBox: "0 0 24 24",
          fill: "none",
          xmlns: "http://www.w3.org/2000/svg",
        },
        e,
        {
          children: U.jsx("line", {
            x2: 24,
            y1: "50%",
            y2: "50%",
            stroke: "currentColor",
            strokeDasharray: "11 2",
            strokeWidth: 2,
          }),
        }
      )
    );
  },
  Kw = function (e) {
    return U.jsx(
      "svg",
      Re(
        {
          width: "1em",
          height: "1em",
          viewBox: "0 0 24 24",
          fill: "none",
          xmlns: "http://www.w3.org/2000/svg",
        },
        e,
        {
          children: U.jsx("line", {
            x2: 24,
            y1: "50%",
            y2: "50%",
            stroke: "currentColor",
            strokeDasharray: "6 2",
            strokeWidth: 2,
          }),
        }
      )
    );
  },
  Xw = function (e) {
    return U.jsx(
      "svg",
      Re(
        {
          width: "1em",
          height: "1em",
          viewBox: "0 0 24 24",
          fill: "none",
          xmlns: "http://www.w3.org/2000/svg",
        },
        e,
        {
          children: U.jsx("line", {
            x2: 24,
            y1: "50%",
            y2: "50%",
            stroke: "currentColor",
            strokeWidth: 2,
          }),
        }
      )
    );
  },
  oa = function (e) {
    return U.jsx(
      "svg",
      Re(
        {
          xmlns: "http://www.w3.org/2000/svg",
          viewBox: "0 0 256 256",
          fill: "currentColor",
          width: "1em",
          height: "1em",
        },
        e,
        {
          children: U.jsx("path", {
            d: "m229.66 77.66-128 128a8 8 0 0 1-11.32 0l-56-56a8 8 0 0 1 11.32-11.32L96 188.69 218.34 66.34a8 8 0 0 1 11.32 11.32Z",
          }),
        }
      )
    );
  };
const Bm = {
    none: H("svg", {
      height: "24",
      width: "24",
      xmlns: "http://www.w3.org/2000/svg",
      children: [
        x("path", {
          clipRule: "evenodd",
          d: "M5 12v-.75h16a.75.75 0 0 1 0 1.5H5V12z",
          fill: "currentColor",
          fillRule: "evenodd",
        }),
        x("path", { d: "M5 9.5v5L3 12l2-2.5z", fill: "currentColor" }),
      ],
    }),
    bar: H("svg", {
      height: "24",
      width: "24",
      xmlns: "http://www.w3.org/2000/svg",
      children: [
        x("path", {
          clipRule: "evenodd",
          d: "M3.25 12a.75.75 0 0 1 .75-.75h16.5a.75.75 0 0 1 0 1.5H4a.75.75 0 0 1-.75-.75z",
          fill: "currentColor",
          fillRule: "evenodd",
        }),
        x("path", {
          clipRule: "evenodd",
          d: "M3.75 8a.75.75 0 0 1 .75.75v6.5a.75.75 0 0 1-1.5 0v-6.5A.75.75 0 0 1 3.75 8z",
          fill: "currentColor",
          fillRule: "evenodd",
        }),
      ],
    }),
    arrow: x("svg", {
      height: "24",
      width: "24",
      xmlns: "http://www.w3.org/2000/svg",
      children: x("path", {
        clipRule: "evenodd",
        d: "M2.97 12.53a.75.75 0 0 1 0-1.06l4.773-4.773a.75.75 0 0 1 1.06 1.06L5.311 11.25H20.5a.75.75 0 0 1 0 1.5H5.31l3.493 3.493a.75.75 0 1 1-1.06 1.06L2.97 12.53z",
        fill: "currentColor",
        fillRule: "evenodd",
      }),
    }),
    triangle: H("svg", {
      height: "24",
      width: "24",
      xmlns: "http://www.w3.org/2000/svg",
      children: [
        x("path", {
          clipRule: "evenodd",
          d: "M9.75 12a.75.75 0 0 1 .75-.75h10a.75.75 0 0 1 0 1.5h-10a.75.75 0 0 1-.75-.75z",
          fill: "currentColor",
          fillRule: "evenodd",
        }),
        x("path", {
          d: "M2.624 11.584a.5.5 0 0 0 0 .832l7.599 5.066a.5.5 0 0 0 .777-.416V6.934a.5.5 0 0 0-.777-.416l-7.599 5.066z",
          fill: "currentColor",
        }),
      ],
    }),
    outlineCircle: H("svg", {
      height: "24",
      width: "24",
      xmlns: "http://www.w3.org/2000/svg",
      children: [
        x("path", {
          clipRule: "evenodd",
          d: "M9.75 12a.75.75 0 0 1 .75-.75h10a.75.75 0 0 1 0 1.5h-10a.75.75 0 0 1-.75-.75z",
          fill: "currentColor",
          fillRule: "evenodd",
        }),
        x("path", {
          clipRule: "evenodd",
          d: "M4.5 12a2.5 2.5 0 1 0 5 0 2.5 2.5 0 0 0-5 0zM7 8a4 4 0 1 0 0 8 4 4 0 0 0 0-8z",
          fill: "currentColor",
          fillRule: "evenodd",
        }),
      ],
    }),
    circle: H("svg", {
      height: "24",
      width: "24",
      xmlns: "http://www.w3.org/2000/svg",
      children: [
        x("path", {
          clipRule: "evenodd",
          d: "M9.75 12a.75.75 0 0 1 .75-.75h10a.75.75 0 0 1 0 1.5h-10a.75.75 0 0 1-.75-.75z",
          fill: "currentColor",
          fillRule: "evenodd",
        }),
        x("path", {
          d: "M3 12a4 4 0 1 1 8 0 4 4 0 0 1-8 0z",
          fill: "currentColor",
        }),
      ],
    }),
    outlineSquare: H("svg", {
      height: "24",
      width: "24",
      xmlns: "http://www.w3.org/2000/svg",
      children: [
        x("path", {
          clipRule: "evenodd",
          d: "M9.75 12a.75.75 0 0 1 .75-.75h10a.75.75 0 0 1 0 1.5h-10a.75.75 0 0 1-.75-.75z",
          fill: "currentColor",
          fillRule: "evenodd",
        }),
        x("path", {
          clipRule: "evenodd",
          d: "M4.5 9.5v5h5v-5h-5zM3.5 8a.5.5 0 0 0-.5.5v7a.5.5 0 0 0 .5.5h7a.5.5 0 0 0 .5-.5v-7a.5.5 0 0 0-.5-.5h-7z",
          fill: "currentColor",
          fillRule: "evenodd",
        }),
      ],
    }),
    square: H("svg", {
      height: "24",
      width: "24",
      xmlns: "http://www.w3.org/2000/svg",
      children: [
        x("path", {
          clipRule: "evenodd",
          d: "M9.75 12a.75.75 0 0 1 .75-.75h10a.75.75 0 0 1 0 1.5h-10a.75.75 0 0 1-.75-.75z",
          fill: "currentColor",
          fillRule: "evenodd",
        }),
        x("path", {
          d: "M3 8.5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-.5.5h-7a.5.5 0 0 1-.5-.5v-7z",
          fill: "currentColor",
        }),
      ],
    }),
    outlineDiamond: H("svg", {
      height: "24",
      width: "24",
      xmlns: "http://www.w3.org/2000/svg",
      children: [
        x("path", {
          clipRule: "evenodd",
          d: "M11.25 12a.75.75 0 0 1 .75-.75h8.5a.75.75 0 0 1 0 1.5H12a.75.75 0 0 1-.75-.75z",
          fill: "currentColor",
          fillRule: "evenodd",
        }),
        x("path", {
          clipRule: "evenodd",
          d: "M8 8.931 4.931 12 8 15.069 11.069 12 8 8.931zm.324-1.797a.459.459 0 0 0-.648 0l-4.542 4.542a.458.458 0 0 0 0 .648l4.542 4.542c.179.179.47.179.648 0l4.542-4.542a.458.458 0 0 0 0-.648L8.324 7.134z",
          fill: "currentColor",
          fillRule: "evenodd",
        }),
      ],
    }),
    diamond: H("svg", {
      height: "24",
      width: "24",
      xmlns: "http://www.w3.org/2000/svg",
      children: [
        x("path", {
          clipRule: "evenodd",
          d: "M11.25 12a.75.75 0 0 1 .75-.75h8.5a.75.75 0 0 1 0 1.5H12a.75.75 0 0 1-.75-.75z",
          fill: "currentColor",
          fillRule: "evenodd",
        }),
        x("path", {
          d: "M7.676 7.134a.458.458 0 0 1 .648 0l4.542 4.542a.458.458 0 0 1 0 .648l-4.542 4.542a.458.458 0 0 1-.648 0l-4.542-4.542a.459.459 0 0 1 0-.648l4.542-4.542z",
          fill: "currentColor",
        }),
      ],
    }),
  },
  k3 = [
    "none",
    "bar",
    "arrow",
    "triangle",
    "outlineCircle",
    "circle",
    "outlineSquare",
    "square",
    "outlineDiamond",
    "diamond",
  ],
  Fm = ({ position: n = "start", value: e = "none", onChange: t }) => {
    const r = S.useRef(null),
      [i, o] = S.useState(!1);
    return H(p1, {
      children: [
        x(kt, {
          ref: r,
          onClick: () => o(!0),
          children: x("div", {
            css: { transform: n === "start" ? void 0 : "scaleX(-1)" },
            children: Bm[e],
          }),
        }),
        x(rr, {
          anchorEl: r.current,
          open: i,
          placement: "bottom",
          onClose: () => o(!1),
          children: x("div", {
            css: { maxHeight: "50vh", overflowY: "auto" },
            children: k3.map((a) =>
              H(
                "div",
                {
                  css: {
                    height: 40,
                    minWidth: 120,
                    padding: "0 8px",
                    display: "flex",
                    alignItems: "center",
                    cursor: "pointer",
                    ":hover": { backgroundColor: "rgba(64,87,109,.07)" },
                  },
                  onClick: () => t(a),
                  children: [
                    x("div", {
                      css: {
                        flexShrink: 0,
                        transform: n === "start" ? void 0 : "scaleX(-1)",
                      },
                      children: Bm[a],
                    }),
                    x("div", {
                      css: {
                        fontSize: 24,
                        flexGrow: 1,
                        display: "flex",
                        justifyContent: "end",
                      },
                      children: a === e && x(oa, {}),
                    }),
                  ],
                },
                a
              )
            ),
          }),
        }),
      ],
    });
  },
  O3 = [
    { type: "solid", icon: x(Xw, {}) },
    { type: "longDashes", icon: x(Gw, {}) },
    { type: "shortDashes", icon: x(Kw, {}) },
    { type: "dots", icon: x(qw, {}) },
  ],
  T3 = ({ layers: n }) => {
    const e = S.useRef(null),
      { actions: t, activePage: r } = $e((b) => ({ activePage: b.activePage })),
      [i, o] = S.useState(!1),
      a = S.useMemo(() => n.map((b) => b.data.props.color), [n]),
      l = S.useMemo(() => n.map((b) => b.data.props.arrowStart), [n]),
      u = S.useMemo(() => n.map((b) => b.data.props.arrowEnd), [n]),
      d = S.useMemo(() => n.map((b) => b.data.props.style), [n]),
      h = S.useMemo(() => n.map((b) => b.data.props.boxSize.height), [n]),
      p = (b) => {
        n.forEach((E) => {
          t.history.throttle(2e3).setProp(r, E.id, { color: b });
        });
      },
      g = (b) => {
        n.forEach((E) => {
          t.history.throttle(2e3).setProp(r, E.id, { boxSize: { height: b } });
        });
      },
      y = (b) => {
        n.forEach((E) => {
          t.history.throttle(2e3).setProp(r, E.id, { style: b });
        });
      },
      m = (b) => {
        n.forEach((E) => {
          t.history.throttle(2e3).setProp(r, E.id, { arrowStart: b });
        });
      },
      w = (b) => {
        n.forEach((E) => {
          t.history.throttle(2e3).setProp(r, E.id, { arrowEnd: b });
        });
      };
    return H("div", {
      css: {
        display: "grid",
        alignItems: "center",
        gridAutoFlow: "column",
        gridGap: 8,
      },
      children: [
        x(ia, {
          colors: a,
          onChange: p,
          children: x("div", {
            css: {
              width: 24,
              height: 24,
              borderRadius: 2,
              position: "relative",
              fontSize: 24,
              overflow: "hidden",
              color: a[0],
            },
            children: x(Zw, {}),
          }),
        }),
        x(kt, {
          ref: e,
          css: { fontSize: 20 },
          onClick: () => o(!0),
          children: x(Yw, {}),
        }),
        x(rr, {
          anchorEl: e.current,
          offsets: { "bottom-end": { x: 0, y: 8 } },
          open: i,
          placement: "bottom",
          onClose: () => o(!1),
          children: H("div", {
            css: { padding: 16, display: "grid", gap: 12 },
            children: [
              x("div", {
                children: x("div", {
                  css: {
                    display: "grid",
                    gridAutoFlow: "column",
                    alignItems: "center",
                    gap: 8,
                  },
                  children: O3.map((b) =>
                    x(
                      "div",
                      {
                        css: {
                          fontSize: 24,
                          borderRadius: 4,
                          boxShadow:
                            b.type === d[0]
                              ? "inset 0 0 0 2px #3d8eff"
                              : "inset 0 0 0 1px rgba(43,59,74,.3)",
                          padding: 8,
                          cursor: "pointer",
                          ":hover": {
                            boxShadow:
                              b.type !== d[0]
                                ? "inset 0 0 0 1px rgba(28,39,48,.5)"
                                : void 0,
                          },
                        },
                        onClick: () => y(b.type),
                        children: b.icon,
                      },
                      b.type
                    )
                  ),
                }),
              }),
              x(Di, {
                label: "Line Weight",
                min: 1,
                value: h[0] || 1,
                onChange: g,
              }),
            ],
          }),
        }),
        x(Fm, { value: l[0], onChange: m }),
        x(Fm, { position: "end", value: u[0], onChange: w }),
        x("div", {
          css: { height: 24, width: "1px", background: "rgba(57,76,96,.15)" },
        }),
      ],
    });
  },
  M3 = ({ layer: n }) => {
    const { actions: e, activePage: t } = $e((l) => ({
        activePage: l.activePage,
        sidebar: l.sidebar,
      })),
      r = S.useMemo(() => n.data.props.color, [n]),
      i = S.useMemo(() => n.data.props.gradientBackground, [n]);
    return x(ia, {
      colors: r ? [r] : [],
      gradient: i,
      useGradient: !0,
      onChange: (l) => {
        e.history
          .throttle(2e3)
          .setProp(t, n.id, { color: l, gradientBackground: null });
      },
      onChangeGradient: (l) => {
        e.history
          .throttle(2e3)
          .setProp(t, n.id, { gradientBackground: l, color: null });
      },
    });
  };
var R3 = function (e) {
  return U.jsxs(
    "svg",
    Re(
      {
        width: "1em",
        height: "1em",
        viewBox: "0 0 24 24",
        fill: "none",
        stroke: "currentColor",
        strokeWidth: 2,
        strokeLinecap: "round",
        strokeLinejoin: "round",
        xmlns: "http://www.w3.org/2000/svg",
      },
      e,
      {
        children: [
          U.jsx("circle", { cx: 12, cy: 12, r: 10 }),
          U.jsx("path", { strokeLinecap: "square", d: "m5 5 14 14" }),
        ],
      }
    )
  );
};
const D3 = [
    { type: "none", icon: x(R3, {}) },
    { type: "solid", icon: x(Xw, {}) },
    { type: "longDashes", icon: x(Gw, {}) },
    { type: "shortDashes", icon: x(Kw, {}) },
    { type: "dots", icon: x(qw, {}) },
  ],
  I3 = ({ layers: n }) => {
    const e = S.useRef(null),
      { actions: t, activePage: r } = $e((b) => ({ activePage: b.activePage })),
      [i, o] = S.useState(!1),
      a = n.reduce(
        (b, E) => (
          b < E.data.props.roundedCorners && (b = E.data.props.roundedCorners),
          b
        ),
        0
      ),
      l = (b) => {
        const E = n.map((R) => R.id);
        t.history.throttle(2e3).setProp(r, E, { roundedCorners: b });
      },
      u = S.useMemo(
        () =>
          n
            .filter(
              (b) => b.data.props.color && !b.data.props.gradientBackground
            )
            .map((b) => b.data.props.color),
        [n]
      ),
      d = S.useMemo(
        () => n.map((b) => b.data.props.gradientBackground).filter((b) => !!b),
        [n]
      ),
      h = S.useMemo(() => {
        const b = n.map((E) => E.data.props.border).filter((E) => !!E);
        return b[0]
          ? b[0]
          : { style: "none", weight: 0, color: "rgb(0, 0, 0)" };
      }, [n]),
      p = (b) => {
        n.forEach((E) => {
          t.history
            .throttle(2e3)
            .setProp(r, E.id, { color: b, gradientBackground: null });
        });
      },
      g = (b) => {
        n.forEach((E) => {
          t.history.throttle(2e3).setProp(r, E.id, { gradientBackground: b });
        });
      },
      y = (b) => {
        n.forEach((E) => {
          var R, O;
          t.history
            .throttle(2e3)
            .setProp(r, E.id, {
              border: {
                style: b,
                weight:
                  b === "none"
                    ? 0
                    : ((R = E.data.props.border) == null ? void 0 : R.weight) ||
                      4,
                color:
                  ((O = E.data.props.border) == null ? void 0 : O.color) ||
                  "rgb(0, 0, 0)",
              },
            });
        });
      },
      m = (b) => {
        const E = n.map((R) => R.id);
        t.history
          .throttle(2e3)
          .setProp(r, E, {
            border: {
              style: (b === 0 ? "none" : h.style) || "solid",
              weight: b,
              color: h.color,
            },
          });
      },
      w = (b) => {
        const E = n
          .filter((R) => {
            var O;
            return (
              ((O = R.data.props.border) == null ? void 0 : O.style) !== "none"
            );
          })
          .map((R) => R.id);
        t.history.throttle(2e3).setProp(r, E, { border: { color: b } });
      };
    return H("div", {
      css: {
        display: "grid",
        alignItems: "center",
        gridAutoFlow: "column",
        gridGap: 8,
      },
      children: [
        x(ia, {
          colors: u,
          gradient: d.length > 0 ? d[0] : null,
          useGradient: !0,
          onChange: p,
          onChangeGradient: g,
        }),
        h &&
          h.style !== "none" &&
          x(ia, {
            colors: [h.color],
            onChange: w,
            children: x("div", {
              css: {
                width: 24,
                height: 24,
                borderRadius: 2,
                position: "relative",
                fontSize: 24,
                overflow: "hidden",
                color: h.color,
              },
              children: x(Zw, {}),
            }),
          }),
        x(kt, {
          ref: e,
          css: { fontSize: 20 },
          onClick: () => o(!0),
          children: x(Yw, {}),
        }),
        x(rr, {
          anchorEl: e.current,
          offsets: { "bottom-end": { x: 0, y: 8 } },
          open: i,
          placement: "bottom",
          onClose: () => o(!1),
          children: H("div", {
            css: { padding: 16, display: "grid", gap: 12 },
            children: [
              x("div", {
                children: x("div", {
                  css: {
                    display: "grid",
                    gridAutoFlow: "column",
                    alignItems: "center",
                    gap: 8,
                  },
                  children: D3.map((b) =>
                    x(
                      "div",
                      {
                        css: {
                          fontSize: 24,
                          borderRadius: 4,
                          boxShadow:
                            b.type === (h == null ? void 0 : h.style)
                              ? "inset 0 0 0 2px #3d8eff"
                              : "inset 0 0 0 1px rgba(43,59,74,.3)",
                          padding: 8,
                          cursor: "pointer",
                          ":hover": {
                            boxShadow:
                              b.type !== (h == null ? void 0 : h.style)
                                ? "inset 0 0 0 1px rgba(28,39,48,.5)"
                                : void 0,
                          },
                        },
                        onClick: () => y(b.type),
                        children: b.icon,
                      },
                      b.type
                    )
                  ),
                }),
              }),
              x(Di, {
                label: "Border Weight",
                value: (h == null ? void 0 : h.weight) || 0,
                onChange: m,
              }),
              x(Di, { label: "Corner Rounding", value: a, onChange: l }),
            ],
          }),
        }),
      ],
    });
  },
  A3 = ({ layer: n }) => {
    const {
        actions: e,
        activePage: t,
        sidebar: r,
      } = $e((u) => ({ activePage: u.activePage, sidebar: u.sidebar })),
      [i, o] = S.useState(null),
      a = S.useMemo(() => n.data.props.colors, [n]),
      l = (u) => {
        i !== null &&
          e.history
            .throttle(2e3)
            .setProp(t, n.id, {
              colors: [...a.slice(0, i), u, ...a.slice(i + 1, a.length)],
            });
      };
    return H("div", {
      css: {
        display: "grid",
        alignItems: "center",
        gridAutoFlow: "column",
        gridGap: 8,
      },
      children: [
        x("div", {
          css: {
            display: "grid",
            alignItems: "center",
            gridAutoFlow: "column",
          },
          children: a.map((u, d) =>
            H(
              S.Fragment,
              {
                children: [
                  x(kt, {
                    isActive: d === i,
                    onClick: () => {
                      o(d), e.setSidebar("CHOOSING_COLOR");
                    },
                    children: x("div", {
                      css: {
                        width: 24,
                        height: 24,
                        background:
                          u ??
                          "conic-gradient(red, yellow, lime, aqua, blue, magenta, red)",
                        boxShadow: "inset 0 0 0 1px rgba(57,76,96,.15)",
                        borderRadius: 2,
                      },
                    }),
                  }),
                  r === "CHOOSING_COLOR" &&
                    x(gh, { open: !0, selected: u, onSelect: l }),
                ],
              },
              d
            )
          ),
        }),
        x("div", {
          css: { height: 24, width: "1px", background: "rgba(57,76,96,.15)" },
        }),
      ],
    });
  };
var L3 = function (e) {
    return U.jsx(
      "svg",
      Re(
        {
          xmlns: "http://www.w3.org/2000/svg",
          viewBox: "0 0 256 256",
          fill: "currentColor",
          width: "1em",
          height: "1em",
        },
        e,
        {
          children: U.jsx("path", {
            d: "M177.08 114.46A48 48 0 0 0 140 36H72a12 12 0 0 0-12 12v152a12 12 0 0 0 12 12h80a52 52 0 0 0 25.08-97.54ZM84 60h56a24 24 0 0 1 0 48H84Zm68 128H84v-56h68a28 28 0 0 1 0 56Z",
          }),
        }
      )
    );
  },
  P3 = function (e) {
    return U.jsx(
      "svg",
      Re(
        {
          width: "1em",
          height: "1em",
          viewBox: "0 0 24 24",
          fill: "currentColor",
          xmlns: "http://www.w3.org/2000/svg",
        },
        e,
        {
          children: U.jsx("path", {
            d: "M21 12c0 .4-.3.8-.7.8h-9.7c-.4 0-.7-.3-.7-.8 0-.4.3-.8.7-.8h9.7c.4 0 .7.4.7.8zM10.6 6.8h9.7c.4 0 .7-.4.7-.8s-.3-.8-.7-.8h-9.7c-.4 0-.7.3-.7.8 0 .4.4.8.7.8zM20.3 17.2h-9.7c-.4 0-.7.3-.7.8s.3.8.7.8h9.7c.4 0 .7-.3.7-.8s-.3-.8-.7-.8zM8.4 17.2c.3.2.3.6 0 .9l-3 2.5c-.3.2-.8.2-1.1 0l-3-2.5c-.3-.2-.3-.6 0-.9.3-.2.8-.2 1.1 0l1.7 1.4V5.3L2.4 6.8c-.3.2-.8.2-1.1 0-.3-.3-.3-.7 0-.9l3-2.5c.3-.2.8-.2 1.1 0l3 2.5c.3.2.3.6 0 .9-.3.2-.8.2-1.1 0L5.6 5.3v13.3l1.7-1.4c.3-.2.8-.2 1.1 0z",
          }),
        }
      )
    );
  },
  _3 = function (e) {
    return U.jsx(
      "svg",
      Re(
        {
          xmlns: "http://www.w3.org/2000/svg",
          viewBox: "0 0 256 256",
          fill: "currentColor",
          width: "1em",
          height: "1em",
        },
        e,
        {
          children: U.jsx("path", {
            d: "M223.51 48h-191A16.51 16.51 0 0 0 16 64.49v127A16.51 16.51 0 0 0 32.49 208h191A16.51 16.51 0 0 0 240 191.51v-127A16.51 16.51 0 0 0 223.51 48Zm.49 143.51a.49.49 0 0 1-.49.49h-191a.49.49 0 0 1-.49-.49v-127a.49.49 0 0 1 .49-.49h191a.49.49 0 0 1 .49.49ZM208 128a8 8 0 0 1-8 8H56a8 8 0 0 1 0-16h144a8 8 0 0 1 8 8Zm0-32a8 8 0 0 1-8 8H56a8 8 0 0 1 0-16h144a8 8 0 0 1 8 8ZM72 160a8 8 0 0 1-8 8h-8a8 8 0 0 1 0-16h8a8 8 0 0 1 8 8Zm96 0a8 8 0 0 1-8 8H96a8 8 0 0 1 0-16h64a8 8 0 0 1 8 8Zm40 0a8 8 0 0 1-8 8h-8a8 8 0 0 1 0-16h8a8 8 0 0 1 8 8Z",
          }),
        }
      )
    );
  },
  N3 = function (e) {
    return U.jsx(
      "svg",
      Re(
        {
          xmlns: "http://www.w3.org/2000/svg",
          viewBox: "0 0 256 256",
          fill: "currentColor",
          width: "1em",
          height: "1em",
        },
        e,
        {
          children: U.jsx("path", {
            d: "M80 64a8 8 0 0 1 8-8h128a8 8 0 0 1 0 16H88a8 8 0 0 1-8-8Zm136 56H88a8 8 0 0 0 0 16h128a8 8 0 0 0 0-16Zm0 64H88a8 8 0 0 0 0 16h128a8 8 0 0 0 0-16ZM44 52a12 12 0 1 0 12 12 12 12 0 0 0-12-12Zm0 64a12 12 0 1 0 12 12 12 12 0 0 0-12-12Zm0 64a12 12 0 1 0 12 12 12 12 0 0 0-12-12Z",
          }),
        }
      )
    );
  },
  z3 = function (e) {
    return U.jsx(
      "svg",
      Re(
        {
          xmlns: "http://www.w3.org/2000/svg",
          viewBox: "0 0 256 256",
          fill: "currentColor",
          width: "1em",
          height: "1em",
        },
        e,
        {
          children: U.jsx("path", {
            d: "M224 128a8 8 0 0 1-8 8H104a8 8 0 0 1 0-16h112a8 8 0 0 1 8 8ZM104 72h112a8 8 0 0 0 0-16H104a8 8 0 0 0 0 16Zm112 112H104a8 8 0 0 0 0 16h112a8 8 0 0 0 0-16ZM43.58 55.16 48 52.94V104a8 8 0 0 0 16 0V40a8 8 0 0 0-11.58-7.16l-16 8a8 8 0 0 0 7.16 14.32Zm36.19 101.56a23.73 23.73 0 0 0-9.6-15.95 24.86 24.86 0 0 0-34.11 4.7 23.63 23.63 0 0 0-3.57 6.46 8 8 0 1 0 15 5.47 7.84 7.84 0 0 1 1.18-2.13 8.76 8.76 0 0 1 12-1.59 7.91 7.91 0 0 1 3.26 5.32 7.64 7.64 0 0 1-1.57 5.78 1 1 0 0 0-.08.11l-28.69 38.32A8 8 0 0 0 40 216h32a8 8 0 0 0 0-16H56l19.08-25.53a23.47 23.47 0 0 0 4.69-17.75Z",
          }),
        }
      )
    );
  },
  B3 = function (e) {
    return U.jsx(
      "svg",
      Re(
        {
          xmlns: "http://www.w3.org/2000/svg",
          viewBox: "0 0 256 256",
          fill: "currentColor",
          width: "1em",
          height: "1em",
        },
        e,
        {
          children: U.jsx("path", {
            d: "M224 128a8 8 0 0 1-8 8H40a8 8 0 0 1 0-16h176a8 8 0 0 1 8 8Z",
          }),
        }
      )
    );
  },
  F3 = function (e) {
    return U.jsx(
      "svg",
      Re(
        {
          xmlns: "http://www.w3.org/2000/svg",
          viewBox: "0 0 256 256",
          fill: "currentColor",
          width: "1em",
          height: "1em",
        },
        e,
        {
          children: U.jsx("path", {
            d: "M87.24 52.59a8 8 0 0 0-14.48 0l-64 136a8 8 0 1 0 14.48 6.81L39.9 160h80.2l16.66 35.4a8 8 0 1 0 14.48-6.81ZM47.43 144 80 74.79 112.57 144ZM200 96c-12.76 0-22.73 3.47-29.63 10.32a8 8 0 0 0 11.26 11.36c3.8-3.77 10-5.68 18.37-5.68 13.23 0 24 9 24 20v3.22a42.76 42.76 0 0 0-24-7.22c-22.06 0-40 16.15-40 36s17.94 36 40 36a42.73 42.73 0 0 0 24-7.25 8 8 0 0 0 16-.75v-60c0-19.85-17.94-36-40-36Zm0 88c-13.23 0-24-9-24-20s10.77-20 24-20 24 9 24 20-10.77 20-24 20Z",
          }),
        }
      )
    );
  },
  W3 = function (e) {
    return U.jsx(
      "svg",
      Re(
        {
          xmlns: "http://www.w3.org/2000/svg",
          viewBox: "0 0 256 256",
          fill: "currentColor",
          width: "1em",
          height: "1em",
        },
        e,
        {
          children: U.jsx("path", {
            d: "M32 64a8 8 0 0 1 8-8h176a8 8 0 0 1 0 16H40a8 8 0 0 1-8-8Zm32 32a8 8 0 0 0 0 16h128a8 8 0 0 0 0-16Zm152 40H40a8 8 0 0 0 0 16h176a8 8 0 0 0 0-16Zm-24 40H64a8 8 0 0 0 0 16h128a8 8 0 0 0 0-16Z",
          }),
        }
      )
    );
  },
  V3 = function (e) {
    return U.jsx(
      "svg",
      Re(
        {
          xmlns: "http://www.w3.org/2000/svg",
          viewBox: "0 0 256 256",
          fill: "currentColor",
          width: "1em",
          height: "1em",
        },
        e,
        {
          children: U.jsx("path", {
            d: "M32 64a8 8 0 0 1 8-8h176a8 8 0 0 1 0 16H40a8 8 0 0 1-8-8Zm184 32H40a8 8 0 0 0 0 16h176a8 8 0 0 0 0-16Zm0 40H40a8 8 0 0 0 0 16h176a8 8 0 0 0 0-16Zm0 40H40a8 8 0 0 0 0 16h176a8 8 0 0 0 0-16Z",
          }),
        }
      )
    );
  },
  H3 = function (e) {
    return U.jsx(
      "svg",
      Re(
        {
          xmlns: "http://www.w3.org/2000/svg",
          viewBox: "0 0 256 256",
          fill: "currentColor",
          width: "1em",
          height: "1em",
        },
        e,
        {
          children: U.jsx("path", {
            d: "M32 64a8 8 0 0 1 8-8h176a8 8 0 0 1 0 16H40a8 8 0 0 1-8-8Zm8 48h128a8 8 0 0 0 0-16H40a8 8 0 0 0 0 16Zm176 24H40a8 8 0 0 0 0 16h176a8 8 0 0 0 0-16Zm-48 40H40a8 8 0 0 0 0 16h128a8 8 0 0 0 0-16Z",
          }),
        }
      )
    );
  },
  $3 = function (e) {
    return U.jsx(
      "svg",
      Re(
        {
          xmlns: "http://www.w3.org/2000/svg",
          viewBox: "0 0 256 256",
          fill: "currentColor",
          width: "1em",
          height: "1em",
        },
        e,
        {
          children: U.jsx("path", {
            d: "M32 64a8 8 0 0 1 8-8h176a8 8 0 0 1 0 16H40a8 8 0 0 1-8-8Zm184 32H88a8 8 0 0 0 0 16h128a8 8 0 0 0 0-16Zm0 40H40a8 8 0 0 0 0 16h176a8 8 0 0 0 0-16Zm0 40H88a8 8 0 0 0 0 16h128a8 8 0 0 0 0-16Z",
          }),
        }
      )
    );
  },
  j3 = function (e) {
    return U.jsx(
      "svg",
      Re(
        {
          xmlns: "http://www.w3.org/2000/svg",
          viewBox: "0 0 256 256",
          fill: "currentColor",
          width: "1em",
          height: "1em",
        },
        e,
        {
          children: U.jsx("path", {
            d: "M60.59 175.24a8 8 0 0 0 10.65-3.83L87.9 136h80.2l16.66 35.41a8 8 0 1 0 14.48-6.82l-64-136a8 8 0 0 0-14.48 0l-64 136a8 8 0 0 0 3.83 10.65ZM128 50.79 160.57 120H95.43ZM224 216a8 8 0 0 1-8 8H40a8 8 0 0 1 0-16h176a8 8 0 0 1 8 8Z",
          }),
        }
      )
    );
  },
  U3 = function (e) {
    return U.jsx(
      "svg",
      Re(
        {
          xmlns: "http://www.w3.org/2000/svg",
          viewBox: "0 0 256 256",
          fill: "currentColor",
          width: "1em",
          height: "1em",
        },
        e,
        {
          children: U.jsx("path", {
            d: "M200 56a8 8 0 0 1-8 8h-34.23L115.1 192H144a8 8 0 0 1 0 16H64a8 8 0 0 1 0-16h34.23L140.9 64H112a8 8 0 0 1 0-16h80a8 8 0 0 1 8 8Z",
          }),
        }
      )
    );
  },
  Z3 = function (e) {
    return U.jsx(
      "svg",
      Re(
        {
          xmlns: "http://www.w3.org/2000/svg",
          viewBox: "0 0 256 256",
          fill: "currentColor",
          width: "1em",
          height: "1em",
        },
        e,
        {
          children: U.jsx("path", {
            d: "M200 224a8 8 0 0 1-8 8H64a8 8 0 0 1 0-16h128a8 8 0 0 1 8 8Zm-72-24a64.07 64.07 0 0 0 64-64V56a8 8 0 0 0-16 0v80a48 48 0 0 1-96 0V56a8 8 0 0 0-16 0v80a64.07 64.07 0 0 0 64 64Z",
          }),
        }
      )
    );
  };
const ks = (n) => (e, t) => {
    const r = e.tr,
      { doc: i } = r,
      o = Math.max(0, Math.min(i.content.size, n)),
      a = We.create(i, o);
    return r.setSelection(a), t ? (t(r), !0) : !1;
  },
  Ad = (n) => (e, t) => {
    const r = e.tr.setSelection(e.selection),
      { selection: i, doc: o } = r;
    if (!i || !o) return !1;
    const { from: a, to: l } = i,
      u = [],
      d = ["paragraph"];
    return (
      o.nodesBetween(a, l, (h, p) => {
        const g = h.type;
        return (
          d.includes(g.name) && u.push({ node: h, pos: p, nodeType: g }), !0
        );
      }),
      u.length
        ? (u.forEach((h) => {
            const { node: p, pos: g, nodeType: y } = h;
            let { attrs: m } = p;
            (m = { ...m, indent: n, listType: "" }),
              r.setNodeMarkup(g, y, m, p.marks);
          }),
          t ? (t(r), !0) : !1)
        : !1
    );
  },
  Cl = (n) => (e, t) => {
    const r = e.tr.setSelection(e.selection),
      { selection: i, doc: o } = r;
    if (!i || !o) return !1;
    const { from: a, to: l } = i,
      u = [],
      d = ["paragraph"];
    return (
      o.nodesBetween(a, l, (h, p) => {
        const g = h.type;
        return (
          d.includes(g.name) && u.push({ node: h, pos: p, nodeType: g }), !0
        );
      }),
      u.length
        ? (u.forEach((h) => {
            const { node: p, pos: g, nodeType: y } = h;
            let { attrs: m } = p;
            (m = { ...m, fontFamily: n }), r.setNodeMarkup(g, y, m, p.marks);
          }),
          t ? (t(r), !0) : !1)
        : !1
    );
  },
  fi = (n) => (e, t) => {
    const r = e.tr.setSelection(e.selection),
      { selection: i, doc: o } = r;
    if (!i || !o) return !1;
    const { from: a, to: l } = i,
      u = [],
      d = ["paragraph"];
    return (
      o.nodesBetween(a, l, (h, p) => {
        const g = h.type;
        return (
          d.includes(g.name) && u.push({ node: h, pos: p, nodeType: g }), !0
        );
      }),
      u.length
        ? (u.forEach((h) => {
            const { node: p, pos: g, nodeType: y } = h;
            let { attrs: m } = p;
            (m = { ...m, fontSize: `${n}px` }),
              r.setNodeMarkup(g, y, m, p.marks);
          }),
          t ? (t(r), !0) : !1)
        : !1
    );
  },
  Ld = (n) => (e, t) => {
    const r = e.tr.setSelection(e.selection),
      { selection: i, doc: o } = r;
    if (!i || !o) return !1;
    const { from: a, to: l } = i,
      u = [],
      d = ["paragraph"];
    return (
      o.nodesBetween(a, l, (h, p) => {
        const g = h.type;
        return (
          d.includes(g.name) && u.push({ node: h, pos: p, nodeType: g }), !0
        );
      }),
      u.length
        ? (u.forEach((h) => {
            const { node: p, pos: g, nodeType: y } = h;
            let { attrs: m } = p;
            (m = { ...m, letterSpacing: n }), r.setNodeMarkup(g, y, m, p.marks);
          }),
          t ? (t(r), !0) : !1)
        : !1
    );
  },
  Pd = (n) => (e, t) => {
    const r = e.tr.setSelection(e.selection),
      { selection: i, doc: o } = r;
    if (!i || !o) return !1;
    const { from: a, to: l } = i,
      u = [],
      d = ["paragraph"];
    return (
      o.nodesBetween(a, l, (h, p) => {
        const g = h.type;
        return (
          d.includes(g.name) && u.push({ node: h, pos: p, nodeType: g }), !0
        );
      }),
      u.length
        ? (u.forEach((h) => {
            const { node: p, pos: g, nodeType: y } = h;
            let { attrs: m } = p;
            (m = { ...m, lineHeight: n }), r.setNodeMarkup(g, y, m, p.marks);
          }),
          t ? (t(r), !0) : !1)
        : !1
    );
  },
  _d = (n) => (e, t) => {
    const r = e.tr.setSelection(e.selection),
      { selection: i, doc: o } = r;
    if (!i || !o) return !1;
    const { from: a, to: l } = i,
      u = [],
      d = new Set(["list_item", "paragraph"]);
    return (
      o.nodesBetween(a, l, (h, p) => {
        const g = h.type;
        return d.has(g.name) && u.push({ node: h, pos: p, nodeType: g }), !0;
      }),
      u.length
        ? (u.forEach((h) => {
            const { node: p, pos: g, nodeType: y } = h;
            let { attrs: m } = p;
            (m = { ...m, indent: n, listType: "ordered" }),
              r.setNodeMarkup(g, y, m, p.marks);
          }),
          t ? (t(r), !0) : !1)
        : !1
    );
  },
  Nd = (n) => (e, t) => {
    const r = e.tr.setSelection(e.selection),
      { selection: i, doc: o } = r;
    if (!i || !o) return !1;
    const { from: a, to: l } = i,
      u = [],
      d = ["paragraph"];
    return (
      o.nodesBetween(a, l, (h, p) => {
        const g = h.type;
        return (
          (h.attrs.align || null) !== n &&
            d.includes(g.name) &&
            u.push({ node: h, pos: p, nodeType: g }),
          !0
        );
      }),
      u.length
        ? (u.forEach((h) => {
            const { node: p, pos: g, nodeType: y } = h;
            let { attrs: m } = p;
            n ? (m = { ...m, textAlign: n }) : (m = { ...m, textAlign: null }),
              r.setNodeMarkup(g, y, m, p.marks);
          }),
          t ? (t(r), !0) : !1)
        : !1
    );
  },
  zd = (n) => (e, t) => {
    const r = e.tr.setSelection(e.selection),
      { selection: i, doc: o } = r;
    if (!i || !o) return !1;
    const { from: a, to: l } = i,
      u = [],
      d = new Set(["list_item", "paragraph"]);
    return (
      o.nodesBetween(a, l, (h, p) => {
        const g = h.type;
        return d.has(g.name) && u.push({ node: h, pos: p, nodeType: g }), !0;
      }),
      u.length
        ? (u.forEach((h) => {
            const { node: p, pos: g, nodeType: y } = h;
            let { attrs: m } = p;
            (m = { ...m, textTransform: n ?? null }),
              r.setNodeMarkup(g, y, m, p.marks);
          }),
          t ? (t(r), !0) : !1)
        : !1
    );
  },
  Wm = (n) => (e, t, r) => (ha("color", { color: n })(e, t, r), !0),
  Vm = (n) => (e, t) => {
    const r = e.tr.setSelection(e.selection),
      { $from: i, $to: o } = r.selection,
      a = i.blockRange(o);
    return a && t
      ? (e.doc.nodesBetween(a.start, a.end, (l, u) => {
          if (l.isBlock) {
            const d = l.type,
              h = { ...l.attrs, color: n };
            r.setNodeMarkup(u, d, h, l.marks);
          }
        }),
        t(r),
        !0)
      : !1;
  },
  Hm = (...n) => Xf("underline")(...n),
  Y3 = (...n) => kc("underline")(...n),
  q3 = (...n) => ha("underline")(...n);
function G3(n, e) {
  return e.nodes[n] ? "node" : e.marks[n] ? "mark" : null;
}
function K3(n, e) {
  if (typeof n == "string") {
    if (!e.nodes[n]) throw Error(`There is no node type named '${n}'!`);
    return e.nodes[n];
  }
  return n;
}
const $m = (n, e, t = {}) => {
  const { from: r, to: i, empty: o } = n.selection,
    a = e ? K3(e, n.schema) : null,
    l = [];
  n.doc.nodesBetween(r, i, (p, g) => {
    if (p.isText) return;
    const y = Math.max(r, g),
      m = Math.min(i, g + p.nodeSize);
    l.push({ node: p, from: y, to: m });
  });
  const u = i - r,
    d = l
      .filter((p) => (a ? a.name === p.node.type.name : !0))
      .filter((p) => Gl(p.node.attrs, t));
  return o ? !!d.length : d.reduce((p, g) => p + g.to - g.from, 0) >= u;
};
function dt(n, e, t = {}) {
  if (!e) return $m(n, null, t) || uf(n, null, t);
  const r = G3(e, n.schema);
  return r === "node" ? $m(n, e, t) : r === "mark" ? uf(n, e, t) : !1;
}
const X3 = (n) => {
    var r;
    const e = (r = n.doc.type.createAndFill()) == null ? void 0 : r.toJSON(),
      t = n.doc.toJSON();
    return JSON.stringify(e) === JSON.stringify(t);
  },
  jm = (n) =>
    n.marks.reduce(
      (e, t) => (
        Object.entries(t.attrs).forEach(([r, i]) => {
          e[r] || (e[r] = []), i && e[r].push(i);
        }),
        e
      ),
      {}
    ),
  Is = (n) => {
    let e = n.marks.reduce(
      (t, r) => (
        Object.entries(r.attrs).forEach(([i, o]) => {
          t[i] || (t[i] = []), o && t[i].push(o);
        }),
        t
      ),
      {}
    );
    return (
      n.content.forEach((t) => {
        e = Te.mergeWith(e, Is(t), (r, i) => {
          if (Te.isArray(r)) return r.concat(i);
        });
      }),
      e
    );
  },
  J3 = (n) =>
    Object.entries(n.attrs).reduce((e, [t, r]) => (r && (e[t] = [r]), e), {}),
  hi = (n) => {
    const e = Object.entries(n.attrs).reduce(
      (t, [r, i]) => ((t[r] = [i]), t),
      {}
    );
    return (
      n.content.forEach((t) => {
        Object.entries(t.attrs).forEach(([r, i]) => {
          e[r] || (e[r] = []), i && e[r].push(i);
        });
      }),
      e
    );
  },
  Os = (n) => Te.uniq((n == null ? void 0 : n.fontFamily) || []),
  qi = (n) =>
    Te.uniq((n == null ? void 0 : n.fontSize) || []).map((e) => parseFloat(e)),
  Bd = (n) =>
    Te.uniq((n == null ? void 0 : n.lineHeight) || []).map((e) =>
      parseFloat(e)
    ),
  Fd = (n) =>
    Te.uniq((n == null ? void 0 : n.letterSpacing) || []).map((e) =>
      parseFloat(e)
    ),
  Gi = (n, e) => {
    const t = Te.mergeWith(n, e, (r, i) => {
      if (Te.isArray(r)) return r.concat(i);
    });
    return Te.uniq((t == null ? void 0 : t.color) || []).map((r) =>
      new ae.Color(r).toRgbString()
    );
  };
var Q3 = function (e) {
    return U.jsx(
      "svg",
      Re(
        {
          xmlns: "http://www.w3.org/2000/svg",
          viewBox: "0 0 256 256",
          fill: "currentColor",
          width: "1em",
          height: "1em",
        },
        e,
        {
          children: U.jsx("path", {
            d: "m229.66 218.34-50.07-50.06a88.11 88.11 0 1 0-11.31 11.31l50.06 50.07a8 8 0 0 0 11.32-11.32ZM40 112a72 72 0 1 1 72 72 72.08 72.08 0 0 1-72-72Z",
          }),
        }
      )
    );
  },
  cc = function () {
    return (
      (cc =
        Object.assign ||
        function (e) {
          for (var t, r = 1, i = arguments.length; r < i; r++) {
            t = arguments[r];
            for (var o in t)
              Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]);
          }
          return e;
        }),
      cc.apply(this, arguments)
    );
  };
function eL() {
  var n = S.useRef(!1),
    e = S.useCallback(function () {
      return n.current;
    }, []);
  return (
    S.useEffect(function () {
      return (
        (n.current = !0),
        function () {
          n.current = !1;
        }
      );
    }, []),
    e
  );
}
function tL(n, e, t) {
  e === void 0 && (e = []), t === void 0 && (t = { loading: !1 });
  var r = S.useRef(0),
    i = eL(),
    o = S.useState(t),
    a = o[0],
    l = o[1],
    u = S.useCallback(function () {
      for (var d = [], h = 0; h < arguments.length; h++) d[h] = arguments[h];
      var p = ++r.current;
      return (
        a.loading ||
          l(function (g) {
            return cc(cc({}, g), { loading: !0 });
          }),
        n.apply(void 0, d).then(
          function (g) {
            return i() && p === r.current && l({ value: g, loading: !1 }), g;
          },
          function (g) {
            return i() && p === r.current && l({ error: g, loading: !1 }), g;
          }
        )
      );
    }, e);
  return [a, u];
}
function nL(n, e) {
  e === void 0 && (e = []);
  var t = tL(n, e, { loading: !0 }),
    r = t[0],
    i = t[1];
  return (
    S.useEffect(
      function () {
        i();
      },
      [i]
    ),
    r
  );
}
var rL = {
    name: "@emotion/react",
    version: "11.11.1",
    main: "dist/emotion-react.cjs.js",
    module: "dist/emotion-react.esm.js",
    browser: {
      "./dist/emotion-react.esm.js": "./dist/emotion-react.browser.esm.js",
    },
    exports: {
      ".": {
        module: {
          worker: "./dist/emotion-react.worker.esm.js",
          browser: "./dist/emotion-react.browser.esm.js",
          default: "./dist/emotion-react.esm.js",
        },
        import: "./dist/emotion-react.cjs.mjs",
        default: "./dist/emotion-react.cjs.js",
      },
      "./jsx-runtime": {
        module: {
          worker: "./jsx-runtime/dist/emotion-react-jsx-runtime.worker.esm.js",
          browser:
            "./jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js",
          default: "./jsx-runtime/dist/emotion-react-jsx-runtime.esm.js",
        },
        import: "./jsx-runtime/dist/emotion-react-jsx-runtime.cjs.mjs",
        default: "./jsx-runtime/dist/emotion-react-jsx-runtime.cjs.js",
      },
      "./_isolated-hnrs": {
        module: {
          worker:
            "./_isolated-hnrs/dist/emotion-react-_isolated-hnrs.worker.esm.js",
          browser:
            "./_isolated-hnrs/dist/emotion-react-_isolated-hnrs.browser.esm.js",
          default: "./_isolated-hnrs/dist/emotion-react-_isolated-hnrs.esm.js",
        },
        import: "./_isolated-hnrs/dist/emotion-react-_isolated-hnrs.cjs.mjs",
        default: "./_isolated-hnrs/dist/emotion-react-_isolated-hnrs.cjs.js",
      },
      "./jsx-dev-runtime": {
        module: {
          worker:
            "./jsx-dev-runtime/dist/emotion-react-jsx-dev-runtime.worker.esm.js",
          browser:
            "./jsx-dev-runtime/dist/emotion-react-jsx-dev-runtime.browser.esm.js",
          default:
            "./jsx-dev-runtime/dist/emotion-react-jsx-dev-runtime.esm.js",
        },
        import: "./jsx-dev-runtime/dist/emotion-react-jsx-dev-runtime.cjs.mjs",
        default: "./jsx-dev-runtime/dist/emotion-react-jsx-dev-runtime.cjs.js",
      },
      "./package.json": "./package.json",
      "./types/css-prop": "./types/css-prop.d.ts",
      "./macro": {
        types: { import: "./macro.d.mts", default: "./macro.d.ts" },
        default: "./macro.js",
      },
    },
    types: "types/index.d.ts",
    files: [
      "src",
      "dist",
      "jsx-runtime",
      "jsx-dev-runtime",
      "_isolated-hnrs",
      "types/*.d.ts",
      "macro.*",
    ],
    sideEffects: !1,
    author: "Emotion Contributors",
    license: "MIT",
    scripts: { "test:typescript": "dtslint types" },
    dependencies: {
      "@babel/runtime": "^7.18.3",
      "@emotion/babel-plugin": "^11.11.0",
      "@emotion/cache": "^11.11.0",
      "@emotion/serialize": "^1.1.2",
      "@emotion/use-insertion-effect-with-fallbacks": "^1.0.1",
      "@emotion/utils": "^1.2.1",
      "@emotion/weak-memoize": "^0.3.1",
      "hoist-non-react-statics": "^3.3.1",
    },
    peerDependencies: { react: ">=16.8.0" },
    peerDependenciesMeta: { "@types/react": { optional: !0 } },
    devDependencies: {
      "@definitelytyped/dtslint": "0.0.112",
      "@emotion/css": "11.11.0",
      "@emotion/css-prettifier": "1.1.3",
      "@emotion/server": "11.11.0",
      "@emotion/styled": "11.11.0",
      "html-tag-names": "^1.1.2",
      react: "16.14.0",
      "svg-tag-names": "^1.1.1",
      typescript: "^4.5.5",
    },
    repository:
      "https://github.com/emotion-js/emotion/tree/main/packages/react",
    publishConfig: { access: "public" },
    "umd:main": "dist/emotion-react.umd.min.js",
    preconstruct: {
      entrypoints: [
        "./index.js",
        "./jsx-runtime.js",
        "./jsx-dev-runtime.js",
        "./_isolated-hnrs.js",
      ],
      umdName: "emotionReact",
      exports: {
        envConditions: ["browser", "worker"],
        extra: {
          "./types/css-prop": "./types/css-prop.d.ts",
          "./macro": {
            types: { import: "./macro.d.mts", default: "./macro.d.ts" },
            default: "./macro.js",
          },
        },
      },
    },
  },
  Um = !1,
  Jw = If(function (n, e) {
    process.env.NODE_ENV !== "production" &&
      !Um &&
      (n.className || n.css) &&
      (console.error(
        "It looks like you're using the css prop on Global, did you mean to use the styles prop instead?"
      ),
      (Um = !0));
    var t = n.styles,
      r = Us([t], void 0, rn.useContext(pc)),
      i = rn.useRef();
    return (
      Jg(
        function () {
          var o = e.key + "-global",
            a = new e.sheet.constructor({
              key: o,
              nonce: e.sheet.nonce,
              container: e.sheet.container,
              speedy: e.sheet.isSpeedy,
            }),
            l = !1,
            u = document.querySelector(
              'style[data-emotion="' + o + " " + r.name + '"]'
            );
          return (
            e.sheet.tags.length && (a.before = e.sheet.tags[0]),
            u !== null &&
              ((l = !0), u.setAttribute("data-emotion", o), a.hydrate([u])),
            (i.current = [a, l]),
            function () {
              a.flush();
            }
          );
        },
        [e]
      ),
      Jg(
        function () {
          var o = i.current,
            a = o[0],
            l = o[1];
          if (l) {
            o[1] = !1;
            return;
          }
          if ((r.next !== void 0 && Mf(e, r.next, !0), a.tags.length)) {
            var u = a.tags[a.tags.length - 1].nextElementSibling;
            (a.before = u), a.flush();
          }
          e.insert("", r, a, !1);
        },
        [e, r.name]
      ),
      null
    );
  });
process.env.NODE_ENV !== "production" && (Jw.displayName = "EmotionGlobal");
function iL() {
  for (var n = arguments.length, e = new Array(n), t = 0; t < n; t++)
    e[t] = arguments[t];
  return Us(e);
}
var oL = function n(e) {
  for (var t = e.length, r = 0, i = ""; r < t; r++) {
    var o = e[r];
    if (o != null) {
      var a = void 0;
      switch (typeof o) {
        case "boolean":
          break;
        case "object": {
          if (Array.isArray(o)) a = n(o);
          else {
            process.env.NODE_ENV !== "production" &&
              o.styles !== void 0 &&
              o.name !== void 0 &&
              console.error(
                "You have passed styles created with `css` from `@emotion/react` package to the `cx`.\n`cx` is meant to compose class names (strings) so you should convert those styles to a class name by passing them to the `css` received from <ClassNames/> component."
              ),
              (a = "");
            for (var l in o) o[l] && l && (a && (a += " "), (a += l));
          }
          break;
        }
        default:
          a = o;
      }
      a && (i && (i += " "), (i += a));
    }
  }
  return i;
};
function sL(n, e, t) {
  var r = [],
    i = o1(n, r, t);
  return r.length < 2 ? t : i + e(r);
}
var aL = function (e) {
    var t = e.cache,
      r = e.serializedArr;
    return (
      u1(function () {
        for (var i = 0; i < r.length; i++) Mf(t, r[i], !1);
      }),
      null
    );
  },
  lL = If(function (n, e) {
    var t = !1,
      r = [],
      i = function () {
        if (t && process.env.NODE_ENV !== "production")
          throw new Error("css can only be used during render");
        for (var d = arguments.length, h = new Array(d), p = 0; p < d; p++)
          h[p] = arguments[p];
        var g = Us(h, e.registered);
        return r.push(g), Tf(e, g, !1), e.key + "-" + g.name;
      },
      o = function () {
        if (t && process.env.NODE_ENV !== "production")
          throw new Error("cx can only be used during render");
        for (var d = arguments.length, h = new Array(d), p = 0; p < d; p++)
          h[p] = arguments[p];
        return sL(e.registered, i, oL(h));
      },
      a = { css: i, cx: o, theme: rn.useContext(pc) },
      l = n.children(a);
    return (
      (t = !0),
      rn.createElement(
        rn.Fragment,
        null,
        rn.createElement(aL, { cache: e, serializedArr: r }),
        l
      )
    );
  });
process.env.NODE_ENV !== "production" && (lL.displayName = "EmotionClassNames");
if (process.env.NODE_ENV !== "production") {
  var Zm = !0,
    cL = typeof jest < "u" || typeof vi < "u";
  if (Zm && !cL) {
    var Ym = typeof globalThis < "u" ? globalThis : Zm ? window : global,
      qm = "__EMOTION_REACT_" + rL.version.split(".")[0] + "__";
    Ym[qm] &&
      console.warn(
        "You are loading @emotion/react when it is already loaded. Running multiple instances may cause problems. This can happen if multiple versions are used, or if multiple builds of the same version are used."
      ),
      (Ym[qm] = !0);
  }
}
const uL = () => {
    const { fontList: n } = $e((t) => ({ fontList: t.fontList })),
      e = S.useMemo(() => {
        const t = [];
        return (
          n.forEach((r) => {
            const i = r.fonts.find((o) => !o.style);
            i &&
              t.push(`
                @font-face {
                  font-family: '${r.name}';
                  src: url(${i.urls.join(",")}) format('woff2');
                  font-display: block;
                }
                `);
          }),
          t.join(`
`)
        );
      }, [n]);
    return x(Jw, {
      styles: iL`
        ${e}
      `,
    });
  },
  dL = S.memo(uL),
  fL = ({ selected: n, onChangeFontFamily: e, ...t }, r) => {
    const i = S.useRef(!1),
      o = S.useRef(null),
      a = S.useRef(null),
      { getFonts: l } = S.useContext(ei),
      { usedFonts: u } = Oc(),
      { actions: d, fontList: h } = $e((E) => ({ fontList: E.fontList })),
      [p, g] = S.useState(!1),
      [y, m] = S.useState(""),
      w = S.useCallback(
        async (E = 0) => {
          (i.current = !0), g(!0);
          const R = await l({ limit: "30", offset: E + "", q: y });
          E ? d.appendFontList(R) : d.setFontList(R),
            g(!1),
            R.length > 0 && (i.current = !1);
        },
        [l, d, g, y]
      );
    return (
      nL(async () => {
        await w();
      }, [w]),
      S.useEffect(() => {
        const E = async (O) => {
            const I = O.target;
            I.scrollHeight - I.scrollTop - 80 <= I.clientHeight &&
              !i.current &&
              (await w(h.length));
          },
          R = a.current;
        return (
          R == null || R.addEventListener("scroll", E),
          () => {
            R == null || R.removeEventListener("scroll", E);
          }
        );
      }, [w, h]),
      H(Pc, {
        ref: r,
        ...t,
        children: [
          x(dL, {}),
          H("div", {
            css: {
              width: "100%",
              height: "100%",
              display: "flex",
              flexDirection: "column",
              overflowY: "auto",
            },
            children: [
              H("div", {
                css: {
                  display: "flex",
                  alignItems: "center",
                  justifyContent: "center",
                  flexShrink: 0,
                  height: 48,
                  borderBottom: "1px solid rgba(57,76,96,.15)",
                  padding: "0 20px",
                },
                children: [
                  x("p", {
                    css: {
                      lineHeight: "48px",
                      fontWeight: 600,
                      color: "#181C32",
                      flexGrow: 1,
                    },
                    children: "Font",
                  }),
                  x("div", {
                    css: {
                      fontSize: 20,
                      flexShrink: 0,
                      width: 32,
                      height: 32,
                      cursor: "pointer",
                      display: "flex",
                      alignItems: "center",
                      justifyContent: "center",
                    },
                    onClick: () => {
                      d.setSidebar();
                    },
                    children: x(mo, {}),
                  }),
                ],
              }),
              x("div", {
                css: {
                  borderRadius: 4,
                  boxShadow: "0 0 0 1px rgba(43,59,74,.3)",
                  margin: 16,
                },
                children: H("div", {
                  css: {
                    height: 40,
                    borderRadius: 4,
                    padding: "0 12px",
                    display: "flex",
                    alignItems: "center",
                  },
                  children: [
                    x("div", {
                      css: { fontSize: 24, marginRight: 8, flexShrink: 0 },
                      children: x(Q3, {}),
                    }),
                    x("form", {
                      onSubmit: async (E) => {
                        var R;
                        E.preventDefault(),
                          a.current && (a.current.scrollTop = 0),
                          m(((R = o.current) == null ? void 0 : R.value) || ""),
                          await w(0);
                      },
                      children: x("input", {
                        ref: o,
                        css: { width: "100%", height: "100%" },
                        type: "text",
                      }),
                    }),
                  ],
                }),
              }),
              H("div", {
                ref: a,
                css: { flexGrow: 1, overflowY: "auto" },
                children: [
                  x("div", {
                    css: { padding: "16px 20px", fontWeight: 700 },
                    children: "Document fonts",
                  }),
                  u.map((E) =>
                    H(
                      "div",
                      {
                        css: {
                          height: 40,
                          display: "flex",
                          alignItems: "center",
                          justifyContent: "space-between",
                          cursor: "pointer",
                          padding: "0 24px",
                          ":hover": { background: "#F9F9F9" },
                        },
                        onClick: () => e(E),
                        children: [
                          x("span", {
                            css: { fontFamily: E.name },
                            children: E.name,
                          }),
                          n.map((R) => R.name).includes(E.name) &&
                            x("span", { children: x(oa, {}) }),
                        ],
                      },
                      E.name
                    )
                  ),
                  H("div", {
                    css: { borderTop: "1px solid rgba(217, 219, 228, 0.6)" },
                    children: [
                      x("div", {
                        css: { padding: "16px 20px", fontWeight: 700 },
                        children: "Fonts",
                      }),
                      h.map((E) =>
                        H(
                          "div",
                          {
                            css: {
                              height: 40,
                              display: "flex",
                              alignItems: "center",
                              justifyContent: "space-between",
                              cursor: "pointer",
                              padding: "0 24px",
                              ":hover": { background: "#F9F9F9" },
                            },
                            onClick: () => e(E),
                            children: [
                              x("span", {
                                css: { fontFamily: E.name },
                                children: E.name,
                              }),
                              n.map((R) => R.name).includes(E.name) &&
                                x("span", { children: x(oa, {}) }),
                            ],
                          },
                          E.name
                        )
                      ),
                      p && x("div", { children: "Loading..." }),
                    ],
                  }),
                ],
              }),
            ],
          }),
        ],
      })
    );
  },
  hL = S.forwardRef(fL),
  Wd = (n) => [
    { value: "none", img: `${n}/text/effects/none.png` },
    {
      value: "shadow",
      img: `${n}/text/effects/shadow.png`,
      settings: {
        offset: 50,
        direction: 45,
        blur: 0,
        transparency: 40,
        color: "#000000",
      },
    },
    {
      value: "lift",
      img: `${n}/text/effects/lift.png`,
      settings: { intensity: 50 },
    },
    {
      value: "hollow",
      img: `${n}/text/effects/hollow.png`,
      settings: { thickness: 50 },
    },
    {
      value: "splice",
      img: `${n}/text/effects/splice.png`,
      settings: { thickness: 50, offset: 50, direction: 45, color: "#000000" },
    },
    {
      value: "echo",
      img: `${n}/text/effects/echo.png`,
      settings: { offset: 50, direction: 45, color: "#000000" },
    },
  ],
  pL = ({ ...n }, e) => {
    const {
        config: { assetPath: t },
      } = S.useContext(ei),
      r = S.useRef(null),
      [i, o] = S.useState(!1),
      { selectedLayers: a } = Vt(),
      { actions: l, activePage: u } = $e((m) => ({ activePage: m.activePage })),
      d = a.filter((m) => Qr(m)),
      { effect: h, settings: p } = S.useMemo(
        () =>
          d.reduce(
            (m, w) => {
              const b = w.data.props;
              return (
                b.effect &&
                  (b.effect.name === m.effect ||
                  (b.effect.name && m.effect === "none")
                    ? ((m.effect = b.effect.name),
                      (m.settings = b.effect.settings))
                    : ((m.effect = "none"), (m.settings = {}))),
                m
              );
            },
            { effect: "none", settings: {} }
          ),
        [d]
      ),
      g = (m) => {
        l.history.new(),
          d.forEach(
            ({
              id: w,
              data: {
                props: { colors: b },
              },
            }) => {
              var E;
              if (m === "none") l.setProp(u, w, { effect: null });
              else {
                const R = Te.cloneDeep(
                  (E = Wd(t).find((O) => O.value === m)) == null
                    ? void 0
                    : E.settings
                );
                if (b.length > 0) {
                  const O = new ae.Color(b[0]);
                  O.white() > 50
                    ? (R.color = O.darken(0.5).toRgbString())
                    : (R.color = O.whiten(0.5).toRgbString());
                }
                l.history
                  .merge()
                  .setProp(
                    u,
                    w,
                    { effect: { name: m, settings: R } },
                    (O, I) => {
                      if (I) return I;
                    }
                  );
              }
            }
          );
      },
      y = Te.throttle((m, w) => {
        const b = d.map((E) => E.id);
        l.history
          .throttle(2e3)
          .setProp(u, b, { effect: { settings: { [m]: w } } });
      }, 16);
    return H(Pc, {
      ref: e,
      ...n,
      children: [
        H("div", {
          css: {
            display: "flex",
            alignItems: "center",
            justifyContent: "center",
            flexShrink: 0,
            height: 48,
            borderBottom: "1px solid rgba(57,76,96,.15)",
            padding: "0 20px",
          },
          children: [
            x("p", {
              css: {
                lineHeight: "48px",
                fontWeight: 600,
                color: "#181C32",
                flexGrow: 1,
              },
              children: "Text Effects",
            }),
            x("div", {
              css: {
                fontSize: 20,
                flexShrink: 0,
                width: 32,
                height: 32,
                cursor: "pointer",
                display: "flex",
                alignItems: "center",
                justifyContent: "center",
              },
              onClick: () => {
                l.setSidebar();
              },
              children: x(mo, {}),
            }),
          ],
        }),
        H("div", {
          css: { padding: "24px 16px" },
          children: [
            x("p", { children: "Style" }),
            H("div", {
              css: {
                display: "grid",
                gridTemplateColumns: "repeat(3,minmax(0,1fr))",
                gap: 12,
                fontSize: 10,
              },
              children: [
                Wd(t).map((m) =>
                  H(
                    "div",
                    {
                      children: [
                        H("div", {
                          css: { cursor: "pointer", position: "relative" },
                          onClick: () => g(m.value),
                          children: [
                            x("div", {
                              css: { paddingBottom: "100%", width: "100%" },
                            }),
                            x("img", {
                              alt: "Text Effect",
                              css: {
                                width: "100%",
                                height: "100%",
                                position: "absolute",
                                left: 0,
                                top: 0,
                                borderRadius: 4,
                                boxShadow:
                                  m.value === h
                                    ? "0 0 0 2px #3d8eff,inset 0 0 0 2px #fff"
                                    : "0 0 0 1px rgba(43,59,74,.3)",
                                ":hover": {
                                  boxShadow:
                                    "00 0 0 2px #3d8eff,inset 0 0 0 2px #fff",
                                },
                              },
                              src: m.img,
                            }),
                          ],
                        }),
                        x("div", {
                          css: {
                            textAlign: "center",
                            marginTop: 4,
                            lineHeight: "20px",
                            textTransform: "capitalize",
                          },
                          children: m.value,
                        }),
                      ],
                    },
                    m.value
                  )
                ),
                p &&
                  x("div", {
                    css: {
                      gridRow: `${
                        Math.ceil(
                          (1 + Wd(t).findIndex((m) => m.value === h)) / 3
                        ) + 1
                      } / auto`,
                      gridColumn: "1/-1",
                      padding: "8px 0",
                    },
                    children: x("div", {
                      css: { display: "grid", rowGap: 8 },
                      children: Object.entries(p).map(([m, w]) =>
                        H(
                          S.Fragment,
                          {
                            children: [
                              m !== "color" &&
                                x(Di, {
                                  defaultValue: w,
                                  label: m,
                                  max: m === "direction" ? 180 : 100,
                                  min: m === "direction" ? -180 : 0,
                                  onChange: (b) => {
                                    y(m, b);
                                  },
                                }),
                              m === "color" &&
                                H("div", {
                                  css: {
                                    display: "flex",
                                    alignItems: "center",
                                  },
                                  children: [
                                    x("div", {
                                      css: {
                                        flexGrow: 1,
                                        fontSize: 14,
                                        textTransform: "capitalize",
                                        whiteSpace: "nowrap",
                                      },
                                      children: "Color",
                                    }),
                                    x("div", {
                                      ref: r,
                                      css: { width: 32, height: 32 },
                                      children: x(Gr.ColorIcon, {
                                        color: w,
                                        selected: null,
                                        onClick: () => o(!0),
                                      }),
                                    }),
                                    x(rr, {
                                      anchorEl: r.current,
                                      open: i,
                                      placement: "bottom-end",
                                      onClose: () => o(!1),
                                      children: x("div", {
                                        css: { padding: 16, width: 280 },
                                        children: x(Gr.ColorPicker, {
                                          color: new ae.Color(
                                            w || "#f25022"
                                          ).toHex(),
                                          onChange: (b) => {
                                            y(m, ae.hex2rgbString(b));
                                          },
                                        }),
                                      }),
                                    }),
                                  ],
                                }),
                            ],
                          },
                          m
                        )
                      ),
                    }),
                  }),
              ],
            }),
          ],
        }),
      ],
    });
  },
  gL = S.forwardRef(pL),
  mL = [
    6, 8, 10, 12, 14, 16, 18, 21, 24, 28, 32, 36, 42, 48, 56, 64, 72, 80, 88,
    96, 104, 120, 144,
  ],
  yL = ({ layers: n }) => {
    const e = S.useRef(null),
      t = S.useRef(null),
      r = S.useRef(null),
      [i, o] = S.useState(!1),
      { selectedLayers: a, selectedLayerIds: l } = Vt(),
      [u, d] = S.useState(!1),
      { usedFonts: h } = Oc(),
      [
        {
          isBold: p,
          isItalic: g,
          isUnderline: y,
          isUppercase: m,
          isBulletList: w,
          isOrderedList: b,
          ...E
        },
        R,
      ] = S.useState(() => {
        const _ = {
          fontFamily: {},
          fontSize: {},
          color: {},
          isBold: !0,
          isItalic: !0,
          isUnderline: !0,
          isUppercase: !0,
          isBulletList: !0,
          isOrderedList: !0,
          lineHeight: {},
          letterSpacing: {},
        };
        return (
          n.forEach((L) => {
            (_.fontFamily[L.id] = L.data.props.fonts),
              (_.fontSize[L.id] = L.data.props.fontSizes),
              (_.color[L.id] = L.data.props.colors);
            const B = L.data.editor;
            B &&
              (dt(B.state, "bold") || (_.isBold = !1),
              dt(B.state, "italic") || (_.isItalic = !1),
              dt(B.state, "underline") || (_.isUnderline = !1),
              dt(B.state, null, { indent: 1, listType: "" }) ||
                (_.isBulletList = !1),
              dt(B.state, null, { indent: 1, listType: "ordered" }) ||
                (_.isOrderedList = !1),
              dt(B.state, null, { textTransform: "uppercase" }) ||
                (_.isUppercase = !1),
              dt(B.state, null, { textTransform: "uppercase" }) ||
                (_.isUppercase = !1));
          }),
          _
        );
      }),
      {
        actions: O,
        activePage: I,
        textEditor: M,
        editingLayer: D,
        sidebar: N,
        fontList: Y,
      } = $e((_) => ({
        activePage: _.activePage,
        sidebar: _.sidebar,
        fontList: _.fontList,
        textEditor: _.textEditor,
        editingLayer: _.textEditor
          ? _.pages[_.textEditor.pageIndex].layers[_.textEditor.layerId]
          : null,
      }));
    S.useEffect(() => {
      const _ = {
        fontFamily: {},
        fontSize: {},
        color: {},
        isBold: !0,
        isItalic: !0,
        isUnderline: !0,
        isUppercase: !0,
        isBulletList: !0,
        isOrderedList: !0,
        lineHeight: {},
        letterSpacing: {},
      };
      o(!1),
        d(!1),
        a.forEach((L) => {
          const B = L.data.editor;
          if (B) {
            const $ = hi(B.state.doc);
            (_.fontFamily[L.id] = Te.uniqBy(
              Os($).map((fe) => ({ name: fe, fonts: se[fe] || ne[fe] })),
              "name"
            )),
              (_.fontSize[L.id] = qi($)),
              (_.lineHeight[L.id] = Bd($)),
              (_.letterSpacing[L.id] = Fd($)),
              (_.color[L.id] = Gi($, Is(B.state.doc))),
              dt(B.state, "bold") || (_.isBold = !1),
              dt(B.state, "italic") || (_.isItalic = !1),
              dt(B.state, "underline") || (_.isUnderline = !1),
              dt(B.state, "bulletList") || (_.isBulletList = !1),
              dt(B.state, "orderedList") || (_.isOrderedList = !1),
              dt(B.state, null, { textTransform: "uppercase" }) ||
                (_.isUppercase = !1),
              R(_);
          }
        });
    }, [JSON.stringify(l)]);
    const {
      fontFamily: X,
      fontSize: j,
      color: W,
      lineHeight: G,
      letterSpacing: te,
    } = S.useMemo(
      () =>
        n.reduce(
          (_, L) => {
            if (E.fontFamily[L.id]) {
              const B = L.data.props;
              _.fontFamily.push(...E.fontFamily[L.id]),
                (_.fontFamily = Te.uniqBy(_.fontFamily, "name")),
                E.fontSize[L.id] &&
                  (_.fontSize = Te.uniq(
                    _.fontSize.concat(
                      E.fontSize[L.id].map(
                        ($) => Math.round($ * B.scale * 10) / 10
                      )
                    )
                  )),
                (_.color = Te.uniq(_.color.concat(E.color[L.id]))),
                (_.lineHeight = Te.uniq(
                  _.lineHeight.concat(E.lineHeight[L.id])
                )),
                (_.letterSpacing = Te.uniq(
                  _.letterSpacing.concat(E.letterSpacing[L.id])
                ));
            }
            return _;
          },
          {
            fontSize: [],
            fontFamily: [],
            color: [],
            lineHeight: [],
            letterSpacing: [],
          }
        ),
      [E, a]
    );
    S.useEffect(() => {
      t.current &&
        (j.length === 1
          ? (t.current.value = j[0] + "")
          : (t.current.value = "--"));
    }, [j]);
    const ne = S.useMemo(
        () => Y.reduce((_, L) => ((_[L.name] = L.fonts), _), {}),
        [Y]
      ),
      se = S.useMemo(
        () => h.reduce((_, L) => ((_[L.name] = L.fonts), _), {}),
        [h]
      ),
      oe = S.useCallback(
        (_) => {
          var B;
          const L = {
            fontFamily: {},
            fontSize: {},
            color: {},
            isBold: !0,
            isItalic: !0,
            isUnderline: !0,
            isUppercase: !0,
            isBulletList: !0,
            isOrderedList: !0,
            lineHeight: {},
            letterSpacing: {},
          };
          if (D) {
            (L.fontFamily[D.id] = []),
              (L.fontSize[D.id] = []),
              (L.color[D.id] = []),
              (L.lineHeight[D.id] = []),
              (L.letterSpacing[D.id] = []);
            const $ = M == null ? void 0 : M.editor;
            if ($) {
              (B = D.data.editor) == null || B.updateState($.state);
              const fe = D.data.props;
              X3($.state) &&
                (Vm(fe.colors[0])($.state, $.dispatch),
                fi(fe.fontSizes[0])($.state, $.dispatch),
                Cl(fe.fonts[0].name)($.state, $.dispatch),
                $.focus());
              const ge = new WebKitCSSMatrix(
                  ee.getTransformStyle({
                    position: D.data.props.position,
                    rotate: D.data.props.rotate,
                  })
                ),
                Le = ee.visualCorners(
                  D.data.props.boxSize,
                  ge,
                  D.data.props.position
                ),
                Qe = ee.visualCorners(
                  {
                    width: D.data.props.boxSize.width,
                    height: $.dom.clientHeight * D.data.props.scale,
                  },
                  ge,
                  D.data.props.position
                ),
                { changeX: Ct, changeY: Ae } =
                  ee.getPositionChangesBetweenTwoCorners(Le, Qe, "bottomRight");
              if ($.state.selection.empty) {
                const Ie = (
                  $.state.storedMarks || $.state.selection.$from.marks()
                ).reduce(
                  (rt, wt) => (
                    Object.entries(wt.attrs).forEach(([ze, De]) => {
                      rt[ze] || (rt[ze] = []), rt[ze].push(De);
                    }),
                    rt
                  ),
                  {}
                );
                L.color[D.id] = Te.uniq(Gi({}, Ie));
              }
              let Ze = null;
              if (
                ($.state.doc.nodesBetween(
                  $.state.selection.ranges[0].$from.pos,
                  $.state.selection.ranges[0].$to.pos,
                  (ve) => {
                    const Ie = J3(ve);
                    if (ve.isBlock) {
                      const rt = Os(Ie).map((wt) => ({
                        name: wt,
                        fonts: se[wt] || ne[wt],
                      }));
                      L.fontFamily[D.id].push(...rt),
                        (L.fontFamily[D.id] = Te.uniqBy(
                          L.fontFamily[D.id],
                          "name"
                        )),
                        (L.fontSize[D.id] = Te.uniq(
                          L.fontSize[D.id].concat(qi(Ie))
                        )),
                        (L.lineHeight[D.id] = Te.uniq(
                          L.lineHeight[D.id].concat(Bd(Ie))
                        )),
                        (L.letterSpacing[D.id] = Te.uniq(
                          L.letterSpacing[D.id].concat(Fd(Ie))
                        )),
                        (Ze = Gi(Ie, jm(ve)));
                    }
                    if (ve.isText && !$.state.selection.empty) {
                      let rt = Gi(Ie, jm(ve));
                      rt.length === 0 && Ze && (rt = Ze),
                        (L.color[D.id] = Te.uniq(L.color[D.id].concat(rt))),
                        (Ze = null);
                    }
                  }
                ),
                dt($.state, "bold") || (L.isBold = !1),
                dt($.state, "italic") || (L.isItalic = !1),
                dt($.state, "underline") || (L.isUnderline = !1),
                dt($.state, null, { indent: 1, listType: "" }) ||
                  (L.isBulletList = !1),
                dt($.state, null, { indent: 1, listType: "ordered" }) ||
                  (L.isOrderedList = !1),
                dt($.state, null, { textTransform: "uppercase" }) ||
                  (L.isUppercase = !1),
                R(L),
                _ === "content")
              ) {
                const ve = hi($.state.doc);
                O.history.merge().setProp(I, D.id, {
                  text: $.dom.innerHTML,
                  fontSizes: qi(ve),
                  fonts: Te.uniqBy(
                    Os(ve).map((Ie) => ({ name: Ie, fonts: se[Ie] || ne[Ie] })),
                    "name"
                  ),
                  colors: Gi(ve, Is($.state.doc)),
                  boxSize: {
                    width: fe.boxSize.width,
                    height: $.dom.clientHeight * fe.scale,
                  },
                  position: { x: fe.position.x - Ct, y: fe.position.y - Ae },
                }),
                  O.setControlBox({
                    boxSize: {
                      width: fe.boxSize.width,
                      height: $.dom.clientHeight * fe.scale,
                    },
                    position: { x: fe.position.x - Ct, y: fe.position.y - Ae },
                    scale: fe.scale,
                    rotate: fe.rotate,
                  });
              }
            }
          } else {
            const $ = a.reduce((fe, ge) => {
              const Le = ge.data.editor;
              if (Le) {
                const Qe = ge.data.props,
                  Ct = hi(Le.state.doc);
                if (
                  ((L.fontFamily[ge.id] = Te.uniqBy(
                    Os(Ct).map((Ae) => ({ name: Ae, fonts: se[Ae] || ne[Ae] })),
                    "name"
                  )),
                  (L.fontSize[ge.id] = qi(Ct)),
                  (L.lineHeight[ge.id] = Bd(Ct)),
                  (L.letterSpacing[ge.id] = Fd(Ct)),
                  (L.color[ge.id] = Gi(Ct, Is(Le.state.doc))),
                  dt(Le.state, "bold") || (L.isBold = !1),
                  dt(Le.state, "italic") || (L.isItalic = !1),
                  dt(Le.state, "underline") || (L.isUnderline = !1),
                  dt(Le.state, "bulletList") || (L.isBulletList = !1),
                  dt(Le.state, "orderedList") || (L.isOrderedList = !1),
                  dt(Le.state, null, { textTransform: "uppercase" }) ||
                    (L.isUppercase = !1),
                  _ === "content")
                ) {
                  const Ae = Te.isEqual(Qe.fontSizes, L.fontSize[ge.id])
                      ? Qe.scale
                      : 1,
                    Ze = document.createElement("div");
                  Ze.append(Le.dom);
                  const { clientHeight: ve } = ee.getVirtualDomHeight(
                      Ze,
                      ge.data.props.boxSize.width,
                      Ae
                    ),
                    Ie = new WebKitCSSMatrix(
                      ee.getTransformStyle({
                        position: ge.data.props.position,
                        rotate: ge.data.props.rotate,
                      })
                    ),
                    rt = ee.visualCorners(
                      ge.data.props.boxSize,
                      Ie,
                      ge.data.props.position
                    ),
                    wt = ee.visualCorners(
                      { width: ge.data.props.boxSize.width, height: ve },
                      Ie,
                      ge.data.props.position
                    ),
                    { changeX: ze, changeY: De } =
                      ee.getPositionChangesBetweenTwoCorners(
                        rt,
                        wt,
                        "bottomRight"
                      );
                  O.history
                    .merge()
                    .setProp(I, ge.id, {
                      text: Le.dom.innerHTML,
                      fontSizes: L.fontSize[ge.id],
                      fonts: L.fontFamily[ge.id],
                      colors: L.color[ge.id],
                      scale: Ae,
                      boxSize: {
                        width: ge.data.props.boxSize.width,
                        height: ve,
                      },
                      position: {
                        x: ge.data.props.position.x - ze,
                        y: ge.data.props.position.y - De,
                      },
                    }),
                    (fe[ge.id] = {
                      ...ge.data.props,
                      boxSize: {
                        width: ge.data.props.boxSize.width,
                        height: ve,
                      },
                      position: {
                        x: ge.data.props.position.x - ze,
                        y: ge.data.props.position.y - De,
                      },
                    });
                }
              } else fe[ge.id] = ge.data.props;
              return fe;
            }, {});
            R(L), O.setControlBox(ee.getControlBoxSizeFromLayers($));
          }
        },
        [
          JSON.stringify(
            a.map((_) => ({
              id: _.id,
              boxSize: _.data.props.boxSize,
              position: _.data.props.position,
              rotate: _.data.props.rotate,
              scale: _.data.props.scale,
            }))
          ),
          D,
          M == null ? void 0 : M.editor,
          O,
          ne,
        ]
      ),
      le = S.useCallback(() => {
        oe("selection");
      }, [oe]),
      pe = S.useCallback(() => {
        oe("content");
      }, [oe]);
    S.useEffect(() => {
      var _, L;
      return (
        (_ = M == null ? void 0 : M.editor) == null ||
          _.events.on("selectionUpdate", le),
        (L = M == null ? void 0 : M.editor) == null ||
          L.events.on("update", pe),
        () => {
          var B, $;
          (B = M == null ? void 0 : M.editor) == null ||
            B.events.off("selectionUpdate", le),
            ($ = M == null ? void 0 : M.editor) == null ||
              $.events.off("update", pe);
        }
      );
    }, [M == null ? void 0 : M.editor, oe]),
      S.useEffect(
        () => (
          n.forEach((_) => {
            var L;
            (L = _.data.editor) == null || L.events.on("update", pe);
          }),
          () => {
            n.forEach((_) => {
              var L;
              (L = _.data.editor) == null || L.events.off("update", pe);
            });
          }
        ),
        [JSON.stringify(n.map((_) => _.id)), oe]
      );
    const ce = S.useCallback((_) => {
        const L = ["Bold", "Bold_Italic", "Italic"];
        return (
          _.forEach((B) => {
            L.forEach(($, fe) => {
              B.fonts.find((ge) => ge.style === $) || L.splice(fe, 1);
            });
          }),
          L
        );
      }, []),
      be = (_) => {
        if ((O.history.new(), D)) {
          const L = M == null ? void 0 : M.editor;
          if (L) {
            Cl(_.name)(L.state, L.dispatch);
            const B = ce([_]);
            if (
              (B.includes("Bold") || pd(L.state, L.dispatch),
              B.includes("Italic") || gd(L.state, L.dispatch),
              L.focus(),
              D.data.editor)
            ) {
              const $ = D.data.editor,
                { $from: fe, $to: ge } = L.state.selection;
              Qt({ from: fe.pos, to: ge.pos })($.state, $.dispatch),
                Cl(_.name)($.state, $.dispatch);
              const Le = ce([_]);
              Le.includes("Bold") || pd($.state, $.dispatch),
                Le.includes("Italic") || gd($.state, $.dispatch);
            }
          }
        } else
          n.forEach((L) => {
            const B = L.data.editor;
            if (B) {
              dr(B.state, B.dispatch), Cl(_.name)(B.state, B.dispatch);
              const $ = ce([_]);
              $.includes("Bold") || pd(B.state, B.dispatch),
                $.includes("Italic") || gd(B.state, B.dispatch);
            }
          });
      },
      Oe = (_) => {
        n.forEach((L) => {
          const B = L.data.editor;
          if (B) {
            const $ = B.state.doc;
            B.state.doc.nodesBetween(0, $.content.size, (fe, ge) => {
              if (fe.isBlock) {
                const Le = hi(fe),
                  Qe = qi(Le);
                if (Qe.length > 0) {
                  const Ct = L.data.props.scale || 1;
                  ks(ge)(B.state, B.dispatch),
                    fi(Math.round((Qe[0] * Ct + _) * 1e3) / 1e3)(
                      B.state,
                      B.dispatch
                    );
                }
              }
            });
          }
        });
      },
      de = (_) => {
        O.history.new();
        const L = Math.max(Math.min(800, _), 8);
        if (D) {
          const B = M == null ? void 0 : M.editor;
          if (B) {
            const $ = fi(Math.round((L / D.data.props.scale) * 1e3) / 1e3);
            if (($(B.state, B.dispatch), B.focus(), D.data.editor)) {
              const fe = D.data.editor,
                { $from: ge, $to: Le } = B.state.selection;
              Qt({ from: ge.pos, to: Le.pos })(fe.state, fe.dispatch),
                $(fe.state, fe.dispatch);
            }
          }
        } else
          n.forEach((B) => {
            const $ = B.data.editor;
            $ && (dr($.state, $.dispatch), fi(L)($.state, $.dispatch));
          });
        d(!1);
      },
      xe = () => {
        if ((O.history.new(), D)) {
          const _ = M == null ? void 0 : M.editor;
          if (_) {
            const L = {
              from: _.state.selection.ranges[0].$from.pos,
              to: _.state.selection.ranges[0].$to.pos,
            };
            _.state.doc.nodesBetween(L.from, L.to, (B, $) => {
              if (B.isBlock) {
                const fe = hi(B),
                  [ge] = qi(fe),
                  Le = D.data.props.scale;
                ks($)(_.state, _.dispatch),
                  fi(Math.round((ge + 1 / Le) * 1e3) / 1e3)(
                    _.state,
                    _.dispatch
                  );
                const Qe = D.data.editor;
                Qe &&
                  (ks($)(Qe.state, Qe.dispatch),
                  fi(Math.round((ge + 1 / Le) * 1e3) / 1e3)(
                    Qe.state,
                    Qe.dispatch
                  ));
              }
            }),
              Qt(L)(_.state, _.dispatch),
              _.focus();
          }
        } else Oe(1);
      },
      Pe = () => {
        if ((O.history.new(), D)) {
          const _ = M == null ? void 0 : M.editor;
          if (_) {
            const L = {
              from: _.state.selection.ranges[0].$from.pos,
              to: _.state.selection.ranges[0].$to.pos,
            };
            _.state.doc.nodesBetween(L.from, L.to, (B, $) => {
              if (B.isBlock) {
                const fe = hi(B),
                  [ge] = qi(fe),
                  Le = D.data.props.scale;
                ks($)(_.state, _.dispatch),
                  fi(Math.round((ge - 1 / Le) * 1e3) / 1e3)(
                    _.state,
                    _.dispatch
                  );
                const Qe = D.data.editor;
                Qe &&
                  (ks($)(Qe.state, Qe.dispatch),
                  fi(Math.round((ge - 1 / Le) * 1e3) / 1e3)(
                    Qe.state,
                    Qe.dispatch
                  ));
              }
            }),
              Qt(L)(_.state, _.dispatch),
              _.focus();
          }
        } else Oe(-1);
      },
      ye = S.useMemo(() => {
        if (!W) return {};
        if (W.length === 1 && new ae.Color(W[0]).white() === 100)
          return {
            backgroundImage:
              "linear-gradient(to right, rgb(255, 0, 0) 0%, rgb(255, 255, 0) 17%, rgb(0, 255, 0) 33%, rgb(0, 255, 255) 50%, rgb(0, 0, 255) 67%, rgb(255, 0, 255) 83%, rgb(255, 0, 0) 100%)",
          };
        const _ = 100 / W.length;
        return {
          backgroundImage: W.map(
            (L) => `linear-gradient(to right, ${L}, ${L})`
          ).join(", "),
          backgroundSize: W.map((L, B) => `${_ * (B + 1)}%`).join(", "),
          boxShadow: "inset 0 0 0 1px rgba(57,76,96,.15)",
        };
      }, [W]),
      Z = Te.throttle((_) => {
        if (_)
          if (D) {
            const L = M == null ? void 0 : M.editor;
            if (L) {
              const B = Wm(_);
              if ((B(L.state, L.dispatch), L.focus(), D.data.editor)) {
                const $ = D.data.editor,
                  { $from: fe, $to: ge } = L.state.selection;
                Qt({ from: fe.pos, to: ge.pos })($.state, $.dispatch),
                  B($.state, $.dispatch);
              }
            }
          } else
            n.forEach((L) => {
              const B = L.data.editor;
              if (B) {
                const $ = hi(B.state.doc);
                dr(B.state, B.dispatch),
                  Wm(_)(B.state, B.dispatch),
                  Vm(_)(B.state, B.dispatch),
                  O.history
                    .throttle(2e3)
                    .setProp(I, L.id, { colors: Gi($, Is(B.state.doc)) });
              }
            });
      }, 16),
      ue = (_) => {
        if ((O.history.new(), D)) {
          const L = M == null ? void 0 : M.editor;
          if (L) {
            if (_ === "BOLD") {
              const B = D.data.props.fonts.reduce(
                (fe, ge) => ((fe[ge.name] = ge.fonts), fe),
                {}
              );
              let $ = !0;
              if (
                (L.state.doc.nodesBetween(
                  L.state.selection.ranges[0].$from.pos,
                  L.state.selection.ranges[0].$to.pos,
                  (fe) => {
                    const ge = hi(fe);
                    Os(ge).every(
                      (Ct) => B[Ct] && B[Ct].find((Ae) => Ae.style === "Bold")
                    ) || ($ = !1);
                  }
                ),
                $ && (Kl(L.state, L.dispatch), L.focus(), D.data.editor))
              ) {
                const fe = D.data.editor,
                  { $from: ge, $to: Le } = L.state.selection;
                Qt({ from: ge.pos, to: Le.pos })(fe.state, fe.dispatch),
                  Kl(fe.state, fe.dispatch);
              }
            } else if (_ === "ITALIC") {
              if ((Xl(L.state, L.dispatch), L.focus(), D.data.editor)) {
                const B = D.data.editor,
                  { $from: $, $to: fe } = L.state.selection;
                Qt({ from: $.pos, to: fe.pos })(B.state, B.dispatch),
                  Xl(B.state, B.dispatch);
              }
            } else if (_ === "UNDERLINE") {
              if ((Hm(L.state, L.dispatch), L.focus(), D.data.editor)) {
                const B = D.data.editor,
                  { $from: $, $to: fe } = L.state.selection;
                Qt({ from: $.pos, to: fe.pos })(B.state, B.dispatch),
                  Hm(B.state, B.dispatch);
              }
            } else if (_ === "UPPERCASE") {
              const B = zd(
                dt(L.state, null, { textTransform: "uppercase" })
                  ? void 0
                  : "uppercase"
              );
              if ((B(L.state, L.dispatch), L.focus(), D.data.editor)) {
                const $ = D.data.editor,
                  { $from: fe, $to: ge } = L.state.selection;
                Qt({ from: fe.pos, to: ge.pos })($.state, $.dispatch),
                  B($.state, $.dispatch);
              }
            }
          }
        } else
          n.forEach((L) => {
            const B = L.data.editor;
            B &&
              (dr(B.state, B.dispatch),
              _ === "BOLD"
                ? p
                  ? T4(B.state, B.dispatch)
                  : M4(B.state, B.dispatch)
                : _ === "ITALIC"
                ? g
                  ? R4(B.state, B.dispatch)
                  : D4(B.state, B.dispatch)
                : _ === "UNDERLINE"
                ? y
                  ? Y3(B.state, B.dispatch)
                  : q3(B.state, B.dispatch)
                : _ === "UPPERCASE" &&
                  (m
                    ? zd()(B.state, B.dispatch)
                    : zd("uppercase")(B.state, B.dispatch)));
          });
      },
      K = (_) => {
        O.history.new();
        const L = M == null ? void 0 : M.editor;
        if (D && L) {
          if ((Nd(_)(L.state, L.dispatch), L.focus(), D.data.editor)) {
            const B = D.data.editor,
              { $from: $, $to: fe } = L.state.selection;
            Qt({ from: $.pos, to: fe.pos })(B.state, B.dispatch),
              Nd(_)(B.state, B.dispatch);
          }
        } else
          n.forEach((B) => {
            const $ = B.data.editor;
            $ && (dr($.state, $.dispatch), Nd(_)($.state, $.dispatch));
          });
      },
      Se = (_) => {
        O.history.new();
        const L = M == null ? void 0 : M.editor;
        if (D && L) {
          if ((Ld(_)(L.state, L.dispatch), L.focus(), D.data.editor)) {
            const B = D.data.editor,
              { $from: $, $to: fe } = L.state.selection;
            Qt({ from: $.pos, to: fe.pos })(B.state, B.dispatch),
              Ld(_)(B.state, B.dispatch);
          }
        } else
          n.forEach((B) => {
            const $ = B.data.editor;
            $ && (dr($.state, $.dispatch), Ld(_)($.state, $.dispatch));
          });
      },
      we = (_) => {
        O.history.new();
        const L = M == null ? void 0 : M.editor;
        if (D && L) {
          if ((Pd(_)(L.state, L.dispatch), L.focus(), D.data.editor)) {
            const B = D.data.editor,
              { $from: $, $to: fe } = L.state.selection;
            Qt({ from: $.pos, to: fe.pos })(B.state, B.dispatch),
              Pd(_)(B.state, B.dispatch);
          }
        } else
          n.forEach((B) => {
            const $ = B.data.editor;
            $ && (dr($.state, $.dispatch), Pd(_)($.state, $.dispatch));
          });
      },
      Ke = () => {
        if ((O.history.new(), D)) {
          const _ = M == null ? void 0 : M.editor;
          if (_) {
            const L = dt(_.state, null, { indent: 1, listType: "" });
            if (
              (Ad(L ? 0 : 1)(_.state, _.dispatch), _.focus(), D.data.editor)
            ) {
              const B = D.data.editor,
                { $from: $, $to: fe } = _.state.selection;
              Qt({ from: $.pos, to: fe.pos })(B.state, B.dispatch),
                Ad(L ? 0 : 1)(B.state, B.dispatch);
            }
          }
        } else {
          const _ = n.every((L) => {
            const B = L.data.editor;
            if (B)
              return (
                dr(B.state, B.dispatch),
                dt(B.state, null, { indent: 1, listType: "" })
              );
          });
          n.forEach((L) => {
            const B = L.data.editor;
            B && Ad(_ ? 0 : 1)(B.state, B.dispatch);
          });
        }
      },
      re = () => {
        if ((O.history.new(), D)) {
          const _ = M == null ? void 0 : M.editor;
          if (_) {
            const L = dt(_.state, null, { indent: 1, listType: "ordered" });
            if (
              (_d(L ? 0 : 1)(_.state, _.dispatch), _.focus(), D.data.editor)
            ) {
              const B = D.data.editor,
                { $from: $, $to: fe } = _.state.selection;
              Qt({ from: $.pos, to: fe.pos })(B.state, B.dispatch),
                _d(L ? 0 : 1)(B.state, B.dispatch);
            }
          }
        } else {
          const _ = n.every((L) => {
            const B = L.data.editor;
            if (B)
              return (
                dr(B.state, B.dispatch),
                dt(B.state, null, { indent: 1, listType: "ordered" })
              );
          });
          n.forEach((L) => {
            const B = L.data.editor;
            B && (dr(B.state, B.dispatch), _d(_ ? 0 : 1)(B.state, B.dispatch));
          });
        }
      },
      Ve = (_) => {
        const L = t.current,
          B = L.value;
        _.key.toLowerCase() === "enter"
          ? (t.current && de(+parseFloat(B).toFixed(1)), L.blur())
          : _.key.match(/^[0-9]|./) || _.preventDefault();
      },
      Ne = () => {
        const L = t.current.value;
        L !== "--" &&
          L !== j[0] + "" &&
          t.current &&
          de(+parseFloat(L).toFixed(1));
      },
      pt = () => {
        O.openTextEditor(I, n[0].id);
      };
    return H(S.Fragment, {
      children: [
        n.length === 1 &&
          x(kt, {
            css: {
              display: "none",
              "@media (max-width: 900px)": { fontSize: 24, display: "flex" },
            },
            onClick: pt,
            children: x(_3, {}),
          }),
        x("div", {
          children: H("div", {
            css: {
              border: "1px solid rgba(43,59,74,.3)",
              height: 32,
              padding: "0 2px",
              borderRadius: 4,
              display: "flex",
              justifyContent: "center",
              alignItems: "center",
              cursor: "pointer",
              background: N === "FONT_FAMILY" ? "rgba(57,76,96,.15)" : "#fff",
            },
            onClick: () => O.setSidebar("FONT_FAMILY"),
            children: [
              x("div", {
                css: {
                  padding: 4,
                  textOverflow: "ellipsis",
                  whiteSpace: "nowrap",
                  fontSize: 14,
                },
                children: X.length === 1 ? X[0].name : "Multiple Fonts",
              }),
              x("div", {
                css: {
                  width: 24,
                  height: 24,
                  display: "flex",
                  justifyContent: "center",
                  alignItems: "center",
                  fontSize: 16,
                },
                children: x(rw, {}),
              }),
            ],
          }),
        }),
        x("div", {
          children: H("div", {
            css: {
              border: "1px solid rgba(43,59,74,.3)",
              display: "flex",
              alignItems: "center",
              justifyContent: "space-between",
            },
            children: [
              x("div", {
                css: {
                  width: 32,
                  height: 32,
                  display: "flex",
                  alignItems: "center",
                  justifyContent: "center",
                  cursor: "pointer",
                  fontSize: 12,
                },
                onClick: Pe,
                children: x(B3, {}),
              }),
              x("div", {
                ref: e,
                css: {
                  width: 32,
                  height: 32,
                  borderLeft: "1px solid rgba(43,59,74,.3)",
                  borderRight: "1px solid rgba(43,59,74,.3)",
                },
                onClick: () => d(!0),
                children: x("input", {
                  ref: t,
                  css: {
                    width: 28,
                    height: "100%",
                    outline: 0,
                    border: 0,
                    textAlign: "center",
                  },
                  onBlur: Ne,
                  onClick: () => {
                    var _;
                    return (_ = t.current) == null ? void 0 : _.select();
                  },
                  onKeyDown: Ve,
                }),
              }),
              x(rr, {
                anchorEl: t.current,
                open: u,
                placement: "bottom",
                onClose: () => d(!1),
                children: x("div", {
                  css: { maxHeight: "50vh", overflowY: "auto" },
                  children: mL.map((_) =>
                    H(
                      "div",
                      {
                        css: {
                          height: 40,
                          minWidth: 120,
                          padding: "0 8px",
                          display: "flex",
                          alignItems: "center",
                          cursor: "pointer",
                          ":hover": { backgroundColor: "rgba(64,87,109,.07)" },
                        },
                        onClick: () => de(_),
                        children: [
                          x("div", { css: { flexGrow: 1 }, children: _ }),
                          j.includes(_) &&
                            x("div", {
                              css: { fontSize: 24, flexShrink: 0 },
                              children: x(oa, {}),
                            }),
                        ],
                      },
                      _
                    )
                  ),
                }),
              }),
              x("div", {
                css: {
                  width: 32,
                  height: 32,
                  display: "flex",
                  alignItems: "center",
                  justifyContent: "center",
                  cursor: "pointer",
                  fontSize: 12,
                },
                onClick: xe,
                children: x(Zs, {}),
              }),
            ],
          }),
        }),
        H("div", {
          css: {
            position: "relative",
            display: "flex",
            justifyContent: "center",
            fontSize: 24,
          },
          onClick: () => O.setSidebar("CHOOSING_COLOR"),
          children: [
            x(j3, {}),
            x("div", {
              css: {
                bottom: 1,
                left: "5%",
                width: "90%",
                position: "absolute",
              },
              children: x("div", {
                css: {
                  paddingTop: "22.2222%",
                  height: 0,
                  position: "relative",
                  width: "100%",
                },
                children: x("span", {
                  css: {
                    borderRadius: 4,
                    overflow: "hidden",
                    position: "absolute",
                    inset: 0,
                    backgroundRepeat: "no-repeat",
                    ...ye,
                  },
                }),
              }),
            }),
          ],
        }),
        x(kt, {
          css: { fontSize: 24 },
          disabled: !ce(X).includes("Bold"),
          isActive: p,
          onClick: () => ue("BOLD"),
          children: x(L3, {}),
        }),
        x(kt, {
          css: { fontSize: 24 },
          disabled: !ce(X).includes("Italic"),
          isActive: g,
          onClick: () => ue("ITALIC"),
          children: x(U3, {}),
        }),
        x(kt, {
          css: { fontSize: 24 },
          isActive: y,
          onClick: () => ue("UNDERLINE"),
          children: x(Z3, {}),
        }),
        x(kt, {
          css: { fontSize: 24 },
          isActive: m,
          onClick: () => ue("UPPERCASE"),
          children: x(F3, {}),
        }),
        x("div", {
          css: { height: 24, width: "1px", background: "rgba(57,76,96,.15)" },
        }),
        x(kt, {
          css: { fontSize: 24 },
          onClick: () => K("left"),
          children: x(H3, {}),
        }),
        x(kt, {
          css: { fontSize: 24 },
          onClick: () => K("center"),
          children: x(W3, {}),
        }),
        x(kt, {
          css: { fontSize: 24 },
          onClick: () => K("right"),
          children: x($3, {}),
        }),
        x(kt, {
          css: { fontSize: 24 },
          onClick: () => K("justify"),
          children: x(V3, {}),
        }),
        x("div", {
          css: { height: 24, width: "1px", background: "rgba(57,76,96,.15)" },
        }),
        x(kt, {
          css: { fontSize: 24 },
          isActive: w,
          onClick: Ke,
          children: x(N3, {}),
        }),
        x(kt, {
          css: { fontSize: 24 },
          isActive: b,
          onClick: re,
          children: x(z3, {}),
        }),
        x(kt, {
          ref: r,
          css: { fontSize: 24 },
          onClick: () => o(!0),
          children: x(P3, {}),
        }),
        x(rr, {
          anchorEl: r.current,
          offsets: { "bottom-end": { x: 0, y: 8 } },
          open: i,
          placement: "bottom-end",
          onClose: () => o(!1),
          children: H("div", {
            css: { padding: 16, minWidth: 220, display: "grid", rowGap: 8 },
            children: [
              x(Di, {
                label: "Letter spacing",
                max: 800,
                min: -200,
                value: te[0] * 1e3 || 0,
                onChange: (_) => Se(_ / 1e3),
              }),
              x(Di, {
                label: "Line spacing",
                max: 2.5,
                min: 0.5,
                step: 0.01,
                value: G[0] || 1.4,
                onChange: we,
              }),
            ],
          }),
        }),
        x("div", {
          css: { height: 24, width: "1px", background: "rgba(57,76,96,.15)" },
        }),
        x(kt, {
          onClick: () => O.setSidebar("TEXT_EFFECT"),
          children: x("span", {
            css: { padding: "0 4px" },
            children: "Effects",
          }),
        }),
        x("div", {
          css: { height: 24, width: "1px", background: "rgba(57,76,96,.15)" },
        }),
        N === "FONT_FAMILY" &&
          x(hL, { open: !0, selected: X, onChangeFontFamily: be }),
        N === "CHOOSING_COLOR" &&
          x(gh, { open: !0, selected: W[0], onSelect: Z }),
        N === "TEXT_EFFECT" && x(gL, { open: !0 }),
      ],
    });
  },
  vL = () => {
    console.log(Vt())
    const { selectedLayers: n, selectedLayerIds: e } = Vt(),
      {
        actions: t,
        sidebar: r,
        isPageLocked: i,
      } = $e((p) => ({
        sidebar: p.sidebar,
        isPageLocked:
          p.pages[p.activePage] &&
          p.pages[p.activePage].layers.ROOT.data.locked,
      })),
      {
        rootLayer: o,
        textLayers: a,
        lineLayers: l,
        shapeLayers: u,
        svgLayers: d,
        frameLayers: h,
      } = S.useMemo(
        () =>
          n.reduce(
            (p, g) => (
              g.data.locked ||
                (Ti(g)
                  ? (p.rootLayer = g)
                  : Jf(g)
                  ? p.svgLayers.push(g)
                  : Qr(g)
                  ? p.textLayers.push(g)
                  : Jl(g)
                  ? p.shapeLayers.push(g)
                  : Mi(g)
                  ? p.frameLayers.push(g)
                  : Yv(g) && p.lineLayers.push(g)),
              p
            ),
            {
              textLayers: [],
              lineLayers: [],
              shapeLayers: [],
              rootLayer: null,
              svgLayers: [],
              frameLayers: [],
            }
          ),
        [n]
      );
    return (
      S.useEffect(() => {
        const p = [];
        r &&
          r !== "LAYER_MANAGEMENT" &&
          (n.forEach((g) => {
            p.push(g.data.type);
          }),
          ((r &&
            p.includes("Text") &&
            !["FONT_FAMILY", "TEXT_EFFECT", "CHOOSING_COLOR"].includes(r)) ||
            (r &&
              (p.includes("Shape") || p.includes("Root")) &&
              !["CHOOSING_COLOR"].includes(r))) &&
            t.setSidebar());
      }, [r, e, t]),
      x("div", {
        css: {
          display: "flex",
          width: "100%",
          height: "100%",
          alignItems: "center",
          justifyContent: "space-between",
          fontSize: 14,
          fontWeight: 600,
          padding: "0 8px",
        },
        children: H("div", {
          css: {
            display: "grid",
            alignItems: "center",
            gridAutoFlow: "column",
            gridGap: 8,
            paddingRight: 20,
          },
          children: [
            o && !i && x(M3, { layer: o }),
            h.length > 0 && !i && x(E3, { layers: h }),
            l.length > 0 && !i && x(T3, { layers: l }),
            d.length === 1 && !i && x(A3, { layer: d[0] }),
            u.length > 0 && !i && x(I3, { layers: u }),
            a.length > 0 && !i && x(yL, { layers: a }),
            x(x3, {}),
          ],
        }),
      })
    );
  },
  wL = () => {
    const n = S.useRef(null),
      [e, t] = S.useState(!1),
      {
        actions: r,
        activePage: i,
        totalPages: o,
        scale: a,
      } = $e((u) => ({
        activePage: u.activePage,
        totalPages: u.pages.length,
        scale: u.scale,
      })),
      l = (u) => {
        r.setScale(u / 100);
      };
    return H("div", {
      css: {
        display: "flex",
        alignItems: "center",
        padding: "0 8px",
        fontWeight: 700,
      },
      children: [
        H("div", {
          css: { flexGrow: 1 },
          children: ["Page ", i + 1, " / ", o],
        }),
        H("div", {
          css: {
            flexShrink: 0,
            display: "grid",
            gridAutoFlow: "column",
            gridColumnGap: 8,
            alignItems: "center",
          },
          children: [
            x("div", {
              css: { width: 200, paddingRight: 8 },
              children: x(Di, {
                hideInput: !0,
                hideLabel: !0,
                max: 500,
                min: 10,
                value: a * 100,
                onChange: l,
              }),
            }),
            x(kt, {
              ref: n,
              onClick: () => t(!0),
              children: H("div", {
                css: { width: 48, textAlign: "center" },
                children: [Math.round(a * 100), "%"],
              }),
            }),
            x(rr, {
              anchorEl: n.current,
              open: e,
              placement: "top-end",
              onClose: () => t(!1),
              children: x("div", {
                css: { padding: "8px 0" },
                children: [300, 200, 150, 100, 75, 50, 25, 10].map((u) =>
                  H(
                    "div",
                    {
                      css: {
                        padding: "0 8px",
                        display: "flex",
                        height: 40,
                        minWidth: 100,
                        alignItems: "center",
                        cursor: "pointer",
                        ":hover": { backgroundColor: "rgba(64,87,109,.07)" },
                      },
                      onClick: () => {
                        r.setScale(u / 100), t(!1);
                      },
                      children: [
                        H("span", {
                          css: {
                            padding: "0 8px",
                            whiteSpace: "nowrap",
                            flexGrow: 1,
                          },
                          children: [u, "%"],
                        }),
                        u / 100 === a && x(oa, {}),
                      ],
                    },
                    u
                  )
                ),
              }),
            }),
          ],
        }),
      ],
    });
  };
exports.DesignFrame = ZI;
exports.Editor = mA;
exports.LayerSettings = vL;
exports.PageControl = wL;
exports.Preview = vA;
exports.useEditor = $e;
exports.useLayer = go;
exports.useSelectedLayers = Vt;
